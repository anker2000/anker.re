{"version":3,"sources":["home.js"],"names":["mapRange","value","low1","high1","low2","high2","scentWheel","renderCircle","resizeHandler","r","document","querySelector","getAttribute","c","Math","PI","style","strokeDasharray","pct","progress","strokeDashoffset","e","svgWidth","getBoundingClientRect","width","ratio","$","strokeWidth","each","this","setAttribute","console","log","getSlideLength","$currentText","activeSlide","charCount","children","html","length","ceil","setupWheelNavigation","bind","preventDefault","noteSkipTo","attr","noteNavigate","delayTime","nextNote","prevNote","targetStep","index","slideTimeout","Init","window","addEventListener","TweenLite","ticker","addClass","step","duration","delay","css","setTimeout","removeClass","targetPct","targetBackground","descriptionStep","targetDescription","to","ease","Power0","easeOut","clearTimeout","parseFloat","textStep"],"mappings":"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","file":"site.js","sourcesContent":["var scentWheel = function() {\n\tvar svgWidth;\n\tvar progress = { pct:0 };\n\tvar activeSlide = 0;\n\tvar slideTimeout;\n\tvar delayTime = 10000;\n\t\n\tfunction renderCircle() {\n\t\tresizeHandler();\n\t\t\n\t\t// svgWidth = document.querySelector(\"svg.progress_container\").getBoundingClientRect().width;\n\t\tvar r = document.querySelector(\".progress\").getAttribute('r'); //*(svgWidth/100);\n\n\t\tvar c = Math.PI*(r*2);\n\t\tdocument.querySelector(\".progress\").style.strokeDasharray=c;\n\n\t\tvar pct = mapRange(progress.pct, 0, 1, 1, 0);\n\t\tdocument.querySelector(\".progress\").style.strokeDashoffset=pct*c;\n\t}\n\tfunction resizeHandler(e) {\n\t\tvar svgWidth = document.querySelector(\"svg.progress_container\").getBoundingClientRect().width;\n\t\tvar ratio = 1000/svgWidth;\n\t\t\n\t\t$(\".scent_wheel svg circle.progress\")[0].style.strokeWidth=5*ratio;\n\t\t$(\".scent_wheel svg circle.background\")[0].style.strokeWidth=1*ratio;\n\t\t$(\".scent_wheel svg circle.point\").each(function() {\n\t\t\t$(this)[0].setAttribute(\"r\",6*ratio);\n\t\t});\n\t\tconsole.log(ratio,\"from\",svgWidth);\n\t\t// setTimeout(resizeHandler,300,e);\n\t}\n\t\n\tfunction getSlideLength() {\n\t\t$currentText = $(\".descriptions .section_container section:nth-child(\"+mapRange(activeSlide+1,0,4,4,0)+\") .text\");\n\t\tvar charCount=0;\n\t\t$currentText.children().each(function() {\n\t\t\tcharCount+=$(this).html().length;\n\t\t});\n\t\treturn mapRange(Math.ceil(charCount*50),3000,15000,8000,17000);\n\t}\n\tfunction setupWheelNavigation() {\n\t\t$(\"g.section .point\").bind(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tscentWheel.noteSkipTo($(this).attr(\"data-section\"));\n\t\t\t$(\"g.section circle.point\").attr(\"class\",\"point\");\n\t\t\t$(this).attr(\"class\",\"point active\");\n\t\t});\n\t\t$(\".scent_wheel a.discover\").bind(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tscentWheel.noteNavigate(1,delayTime);\n\t\t});\n\t\t$(\".navigation a.forward\").bind(\"click\",function(e) {\n\t\t\tscentWheel.nextNote();\n\t\t\te.preventDefault();\n\t\t});\n\t\t$(\".navigation a.back\").bind(\"click\",function(e) {\n\t\t\tscentWheel.prevNote();\n\t\t\te.preventDefault();\n\t\t});\n\t\t$(\".navigation ul li\").bind(\"click\",function(e) {\n\t\t\tvar targetStep=$(this).index()+1;\n\t\t\tif (targetStep==0) {\n\t\t\t\tscentWheel.noteNavigate(targetStep,0);\n\t\t\t} else {\n\t\t\t\tscentWheel.noteSkipTo(targetStep);\n\t\t\t}\n\t\t});\n\t}\n\treturn {\n\t\tInit: function() {\n\t\t\tsetupWheelNavigation();\n\t\t\twindow.addEventListener(\"resize\",resizeHandler);\n\t\t\tTweenLite.ticker.addEventListener(\"tick\", renderCircle);\n\t\t\t$(\".backgrounds .section_container section:first-child img\").addClass(\"active\");\n\t\t},\n\t\tnextNote: function() {\n\t\t\ttargetStep=activeSlide+1;\n\t\t\tif (targetStep==4) {\n\t\t\t\ttargetStep=0;\n\t\t\t}\n\t\t\tscentWheel.noteSkipTo(targetStep);\n\t\t},\n\t\tprevNote: function() {\n\t\t\ttargetStep=activeSlide-1;\n\t\t\tif (targetStep==-1) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tscentWheel.noteSkipTo(targetStep);\n\t\t\t}\n\t\t},\n\t\tnoteNavigate: function(step) {\n\t\t\tduration=getSlideLength();\n\t\t\tif (step == 4 || step == 0) {\n\t\t\t\tstep = 0;\n\t\t\t\tdelay=1000;\n\n\t\t\t\t$(\"circle.progress\").css(\"opacity\",0);\n\t\t\t\t\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\"circle.progress\").css(\"opacity\",1);\n\t\t\t\t},delay+20);\n\t\t\t\tduration=0;\n\t\t\t} else {\n\n\t\t\t}\n\t\t\tif (step>0) {\n\t\t\t\t$(\".scent_wheel\").addClass(\"running\");\n\t\t\t} else {\n\t\t\t\t$(\".scent_wheel\").removeClass(\"running\");\n\t\t\t}\n\t\t\tvar targetPct = step/3;\n\n\t\t\tvar delay=0;\n\t\t\tvar targetBackground = step*-100;\n\n\t\t\tvar descriptionStep = mapRange(step,0,3,3,0);\n\t\t\tvar targetDescription = descriptionStep*-100;\n\t\t\tvar tween = TweenLite.to(progress, duration/1000, { pct: targetPct, delay: delay, ease:Power0.easeOut });\n\n\t\t\tif (step>0) { // for all slides other than the intro slide auto jump to next step\n\t\t\t\tslideTimeout = setTimeout(function() {\n\t\t\t\t\tscentWheel.noteNavigate(step+1);\n\t\t\t\t},duration);\n\t\t\t} else {\n\t\t\t\tclearTimeout(slideTimeout);\n\t\t\t}\n\n\t\t\t$(\".navigation ul li\").removeClass(\"active\");\n\t\t\t$(\".navigation ul li:nth-child(\"+step+\")\").addClass(\"active\");\n\n\t\t\t$(\".backgrounds .section_container img\").removeClass(\"active\");\n\t\t\t$(\".backgrounds .section_container section:nth-child(\"+(step+1)+\") img\").addClass(\"active\");\n\n\t\t\t$(\".descriptions .section_container .text\").removeClass(\"active\");\n\t\t\t$(\".descriptions .section_container section:nth-child(\"+(descriptionStep+1)+\") .text\").addClass(\"active\");\n\n\t\t\t$(\"g.section circle.point\").attr(\"class\",\"point\");\n\t\t\t$(\"g.section circle.point:nth-child(\"+step+\")\").attr(\"class\",\"point active\");\n\n\t\t\t$(\".backgrounds .section_container\").css(\"transform\",\"translateY(\"+targetBackground+\"%)\");\n\t\t\t$(\".descriptions .section_container\").css(\"transform\",\"translateY(\"+targetDescription+\"%)\");\n\t\t\tactiveSlide=step;\n\t\t},\n\t\tnoteSkipTo: function(step) {\n\t\t\tstep=parseFloat(step);\n\n\t\t\tif (step==activeSlide) return false;\n\t\t\t\n\t\t\tvar textStep = mapRange(step, 0, 4, 4, 0);\n\t\t\ttargetPct=(step-1)/3;\n\t\t\tif (targetPct<0) targetPct = 0;\n\n\t\t\ttargetBackground=step*-100;\n\t\t\ttargetDescription=(textStep-1)*-100;\n\t\t\tclearTimeout(slideTimeout);\n\n\t\t\tvar tween = TweenLite.to(progress, 0.3, { pct: targetPct });\n\n\t\t\tif (step>0) {\n\t\t\t\t$(\".scent_wheel\").addClass(\"running\");\n\t\t\t} else {\n\t\t\t\t$(\".scent_wheel\").removeClass(\"running\");\n\t\t\t}\n\t\t\t\n\t\t\t$(\".navigation ul li\").removeClass(\"active\");\n\t\t\t$(\".navigation ul li:nth-child(\"+step+\")\").addClass(\"active\");\n\n\t\t\t$(\".backgrounds .section_container img\").removeClass(\"active\");\n\t\t\t$(\".backgrounds .section_container section:nth-child(\"+(step+1)+\") img\").addClass(\"active\");\n\n\t\t\t$(\".descriptions .section_container .text\").removeClass(\"active\");\n\t\t\t$(\".descriptions .section_container section:nth-child(\"+(textStep)+\") .text\").addClass(\"active\");\n\n\t\t\t$(\"g.section circle.point\").attr(\"class\",\"point\");\n\t\t\t$(\"g.section circle.point:nth-child(\"+step+\")\").attr(\"class\",\"point active\");\n\n\t\t\t$(\".backgrounds .section_container\").css(\"transform\",\"translateY(\"+targetBackground+\"%)\");\n\t\t\t$(\".descriptions .section_container\").css(\"transform\",\"translateY(\"+targetDescription+\"%)\");\n\t\t\t\n\t\t\tdelayTime=getSlideLength();\n\t\t\tif (step==0) { // if back to intro, don't automatically skip to next slide\n\t\t\t\tclearTimeout(slideTimeout);\n\t\t\t} else {\n\t\t\t\tslideTimeout=setTimeout(function() {\n\t\t\t\t\tscentWheel.noteNavigate(step,delayTime);\n\t\t\t\t},1000);\n\t\t\t}\n\t\t\tactiveSlide=step;\n\t\t}\n\t}\n\t\n}();\nfunction mapRange(value, low1, high1, low2, high2) {\n\treturn low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n$(function() {\n\tscentWheel.Init();\n});"],"sourceRoot":"/source/"}