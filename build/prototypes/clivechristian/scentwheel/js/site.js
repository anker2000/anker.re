function mapRange(t,e,n,i,c){return i+(c-i)*(t-e)/(n-e)}var scentWheel=function(){function t(){e();var t=document.querySelector(".progress").getAttribute("r"),n=Math.PI*(2*t);document.querySelector(".progress").style.strokeDasharray=n;var i=mapRange(a.pct,0,1,1,0);document.querySelector(".progress").style.strokeDashoffset=i*n}function e(t){var e=document.querySelector("svg.progress_container").getBoundingClientRect().width,n=1e3/e;$(".scent_wheel svg circle.progress")[0].style.strokeWidth=5*n,$(".scent_wheel svg circle.background")[0].style.strokeWidth=1*n,$(".scent_wheel svg circle.point").each(function(){$(this)[0].setAttribute("r",6*n)}),console.log(n,"from",e)}function n(){$currentText=$(".descriptions .section_container section:nth-child("+mapRange(s+1,0,4,4,0)+") .text");var t=0;return $currentText.children().each(function(){t+=$(this).html().length}),mapRange(Math.ceil(50*t),3e3,15e3,8e3,17e3)}function i(){$("g.section .point").bind("click",function(t){t.preventDefault(),scentWheel.noteSkipTo($(this).attr("data-section")),$("g.section circle.point").attr("class","point"),$(this).attr("class","point active")}),$(".scent_wheel a.discover").bind("click",function(t){t.preventDefault(),scentWheel.noteNavigate(1,o)}),$(".navigation a.forward").bind("click",function(t){scentWheel.nextNote(),t.preventDefault()}),$(".navigation a.back").bind("click",function(t){scentWheel.prevNote(),t.preventDefault()}),$(".navigation ul li").bind("click",function(t){var e=$(this).index()+1;0==e?scentWheel.noteNavigate(e,0):scentWheel.noteSkipTo(e)})}var c,a={pct:0},s=0,o=1e4;return{Init:function(){i(),window.addEventListener("resize",e),TweenLite.ticker.addEventListener("tick",t),$(".backgrounds .section_container section:first-child img").addClass("active")},nextNote:function(){targetStep=s+1,4==targetStep&&(targetStep=0),scentWheel.noteSkipTo(targetStep)},prevNote:function(){return targetStep=s-1,-1==targetStep?!1:void scentWheel.noteSkipTo(targetStep)},noteNavigate:function(t){duration=n(),(4==t||0==t)&&(t=0,i=1e3,$("circle.progress").css("opacity",0),setTimeout(function(){$("circle.progress").css("opacity",1)},i+20),duration=0),t>0?$(".scent_wheel").addClass("running"):$(".scent_wheel").removeClass("running");var e=t/3,i=0,o=-100*t,r=mapRange(t,0,3,3,0),l=-100*r;TweenLite.to(a,duration/1e3,{pct:e,delay:i,ease:Power0.easeOut});t>0?c=setTimeout(function(){scentWheel.noteNavigate(t+1)},duration):clearTimeout(c),$(".navigation ul li").removeClass("active"),$(".navigation ul li:nth-child("+t+")").addClass("active"),$(".backgrounds .section_container img").removeClass("active"),$(".backgrounds .section_container section:nth-child("+(t+1)+") img").addClass("active"),$(".descriptions .section_container .text").removeClass("active"),$(".descriptions .section_container section:nth-child("+(r+1)+") .text").addClass("active"),$("g.section circle.point").attr("class","point"),$("g.section circle.point:nth-child("+t+")").attr("class","point active"),$(".backgrounds .section_container").css("transform","translateY("+o+"%)"),$(".descriptions .section_container").css("transform","translateY("+l+"%)"),s=t},noteSkipTo:function(t){if(t=parseFloat(t),t==s)return!1;var e=mapRange(t,0,4,4,0);targetPct=(t-1)/3,targetPct<0&&(targetPct=0),targetBackground=-100*t,targetDescription=-100*(e-1),clearTimeout(c);TweenLite.to(a,.3,{pct:targetPct});t>0?$(".scent_wheel").addClass("running"):$(".scent_wheel").removeClass("running"),$(".navigation ul li").removeClass("active"),$(".navigation ul li:nth-child("+t+")").addClass("active"),$(".backgrounds .section_container img").removeClass("active"),$(".backgrounds .section_container section:nth-child("+(t+1)+") img").addClass("active"),$(".descriptions .section_container .text").removeClass("active"),$(".descriptions .section_container section:nth-child("+e+") .text").addClass("active"),$("g.section circle.point").attr("class","point"),$("g.section circle.point:nth-child("+t+")").attr("class","point active"),$(".backgrounds .section_container").css("transform","translateY("+targetBackground+"%)"),$(".descriptions .section_container").css("transform","translateY("+targetDescription+"%)"),o=n(),0==t?clearTimeout(c):c=setTimeout(function(){scentWheel.noteNavigate(t,o)},1e3),s=t}}}();$(function(){scentWheel.Init()});
//# sourceMappingURL=site.js.map
