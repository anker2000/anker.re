{"version":3,"sources":["collections.js","scentwheel.js"],"names":["collection","scrollMonitor","e","clearTimeout","resetScrollTimeout","setTimeout","resetScroll","sectionBounds","sectionObj","getBoundingClientRect","scrollTop","$","window","delta","prevScroll","top","bottom","windowDim","height","monitorScroll","Math","abs","snapThreshold","scrollSnap","setScene","snapTo","offset","productCount","preventDefault","event","returnValue","disableScroll","addEventListener","onwheel","onmousewheel","document","ontouchmove","enableScroll","removeEventListener","obj","findParentProductContainer","elementFromPoint","objectActive","index","objectTarget","next","prev","no","removeClass","addClass","position","snapDuration","stop","scrollTo","duration","easing","hasClass","body","parentNode","resizeHandler","width","positionFlowers","scrollProgress","sectionOffsetTop","targetPosition","targetPos","css","requestAnimationFrame","scrollHandler","setupSizes","children","length","setupLinks","bind","thisIndex","this","Object","Init","each","fn","target","options","callback","arguments","settings","extend","scrollTarget","offsetTop","scrollPane","scrollY","parseInt","animate","call","jQuery","def","easeOutExpo","x","t","b","c","d","pow","mapRange","value","low1","high1","low2","high2","scentWheel","renderCircle","r","querySelector","getAttribute","PI","style","strokeDasharray","pct","progress","strokeDashoffset","svgWidth","ratio","strokeWidth","setAttribute","console","log","getSlideLength","$currentText","activeSlide","charCount","html","ceil","setupWheelNavigation","noteSkipTo","attr","noteNavigate","delayTime","nextNote","prevNote","targetStep","slideTimeout","TweenLite","ticker","step","delay","targetPct","targetBackground","descriptionStep","targetDescription","to","ease","Power0","easeOut","parseFloat","textStep"],"mappings":"AAAA,GAAIA,YAAa,WAehB,QAASC,GAAcC,GACtBC,aAAaC,GACbA,EAAqBC,WAAWC,EAAY,MAC5CC,EAAgBC,EAAWC,wBAC3BC,EAAYC,EAAEC,QAAQF,YACtBG,EAAQH,EAAYI,EACpBA,EAAaJ,EAERH,EAAcQ,KAAM,GAAKR,EAAcS,QAAUC,EAAUC,OAC3DC,GAAiBC,KAAKC,IAAIR,GAAOS,GACpCC,EAAWrB,GAGRK,EAAcQ,IAAME,EAAUC,OAAO,GAAKX,EAAcQ,IAAM,EAC7DF,EAAQ,GACXW,EAAS,GACTC,EAAOd,EAAE,qCAAsCA,EAAEH,IAAakB,SAASX,IAAK,IAAMb,IAClE,EAANW,GACVW,EAAS,IAEAjB,EAAcS,OAASC,EAAUC,OAAO,GAAKX,EAAcS,OAAS,IAClE,EAARH,GACHW,EAASG,EAAa,GACtBF,EAAOd,EAAE,oCAAqCA,EAAEH,IAAakB,SAASX,IAAK,IAAMb,IACvEW,EAAM,GAChBW,EAAS,KAKb,QAASlB,KACRa,GAAgB,EAEjB,QAASS,GAAe1B,GACtBA,EAAIA,GAAKU,OAAOiB,MACZ3B,EAAE0B,gBACF1B,EAAE0B,iBACN1B,EAAE4B,aAAc,EAElB,QAASC,KACHnB,OAAOoB,kBACPpB,OAAOoB,iBAAiB,iBAAkBJ,GAAgB,GAC9DhB,OAAOqB,QAAUL,EACjBhB,OAAOsB,aAAeC,SAASD,aAAeN,EAC9ChB,OAAOwB,YAAeR,EAGxB,QAASS,KACDzB,OAAO0B,qBACP1B,OAAO0B,oBAAoB,iBAAkBV,GAAgB,GACjEhB,OAAOsB,aAAeC,SAASD,aAAe,KAC9CtB,OAAOqB,QAAU,KACjBrB,OAAOwB,YAAc,KAEzB,QAASb,GAAWrB,GACnB,GAAIqC,GAAMC,EAA2BL,SAASM,iBAAiB,EAAExB,EAAUC,OAAO,IAC9EwB,EAAe/B,EAAE4B,GAAKI,OAEtB9B,GAAM,GACT+B,aAAeF,EAAa,EACxBE,aAAajB,EAChBF,EAAQd,EAAE4B,GAAKM,OAAOnB,SAASX,IAAK,IAAMb,IAE1CuB,EAAQf,EAA+B,EAAnBO,EAAUC,OAAW,EAAG,IAAMhB,GAClDsB,EAAS,OAGVoB,aAAeF,EAAa,EACxBE,cAAc,EACjBnB,EAAQd,EAAE4B,GAAKO,OAAOpB,SAASX,IAAI,IAAMb,IAEzCuB,EAAQf,EAA6B,EAAjBO,EAAUC,OAAS,EAAG,IAAMhB,GAChDsB,EAAS,MAGXA,EAASoB,cAEV,QAASpB,GAASuB,GACjBpC,EAAE,gBAAgBA,EAAEH,IAAawC,YAAY,UAC7CrC,EAAE,4BAA4BoC,EAAG,GAAG,IAAIpC,EAAEH,IAAayC,SAAS,UAChEtC,EAAE,eAAeA,EAAEH,IAAawC,YAAY,UAC5CrC,EAAE,2BAA2BoC,EAAG,GAAG,IAAIpC,EAAEH,IAAayC,SAAS,UAEhE,QAASxB,GAAOyB,EAAUC,EAAcjD,GACvC6B,IACAZ,GAAgB,EAChBR,EAAE,cAAcyC,OAAOC,SAASH,GAAYI,SAASH,EAAcI,OAAQ,eAAiB,WAC3FpC,GAAgB,EAChBkB,MASF,QAASG,GAA2BD,GACnC,MAAI5B,GAAE4B,GAAKiB,SAAS,WACZjB,EAEHA,GAAKJ,SAASsB,MACV,EAEAjB,EAA2BD,EAAImB,YAIzC,QAASC,GAAczD,GACtBK,EAAgBC,EAAWC,wBAC3BQ,EAAUC,OAASP,EAAEC,QAAQM,SAC7BD,EAAU2C,MAAQjD,EAAEC,QAAQgD,QAE7B,QAASC,KACR,GAAIC,IAAkBpD,EAAUqD,IAAmBpC,EAAaV,EAAUC,QACtE8C,EAAkBF,EAAiBnD,EAAE,WAAWA,EAAEH,IAAaU,SAC/D+C,EAAW,GAAG,CACdA,GAA2B,EAAjBhD,EAAUC,OAAS,IAAG+C,EAA6B,EAAjBhD,EAAUC,OAAS,GACnEP,EAAE,kCAAkCuD,IAAI,YAAY,iBAA4B,IAAVD,EAAe,YACrFtD,EAAE,mCAAmCuD,IAAI,YAAY,iBAA4B,IAAVD,EAAe,YACtFtD,EAAE,kCAAkCuD,IAAI,YAAY,iBAAiB,EAAY,WACjFvD,EAAE,mCAAmCuD,IAAI,YAAY,kBAAkB,EAAY,WACnF7D,WAAW,WACJO,OAAOuD,sBAAsBN,GACnCjD,OAAOuD,sBAAsBlE,IACxB,IAEP,QAASmE,GAAclE,GACtBQ,EAAYC,EAAEC,QAAQF,YACtBqD,EAAmBpD,EAAEH,GAAYkB,SAASX,IAE3C,QAASsD,GAAW9B,GACnB/B,EAAa+B,EACbZ,EAAehB,EAAE,gBAAgBA,EAAE4B,IAAM+B,WAAWC,OACpD5D,EAAE,eAAeuD,IAAI,SAAuB,IAAbvC,EAAkB,MACjDhB,EAAE,YAAYuD,IAAI,SAAuB,IAAbvC,EAAkB,MAC9CkC,IAED,QAASW,KACR7D,EAAE,wBAAwB8D,KAAK,QAAQ,SAASvE,GAC/C,GAAIwE,GAAY/D,EAAEgE,MAAMhC,OACxBlB,GAAQd,EAAE,qCAAqC+D,EAAU,GAAG,IAAI/D,EAAEH,IAAakB,SAASX,IAAK,IAAMb,GACnGsB,EAASkD,GAETxE,EAAE0B,mBA9JJ,GAAIrB,GACAC,EAMAJ,EAEAS,EAGAkD,EAVA9C,EAAY,GAAI2D,QAChBlE,EAAYC,EAAEC,QAAQF,YACtBY,EAAgB,EAChBH,GAAgB,EAGhBL,EAAaJ,EAEbiB,EAAe,CAuJnB,QACCkD,KAAM,SAAStC,GACd8B,EAAW9B,GACXiC,IACA5D,OAAOoB,iBAAiB,SAAS2B,GACjC/C,OAAOoB,iBAAiB,QAAQ/B,GAChCW,OAAOoB,iBAAiB,SAASoC,GACjCT,IACA1D,QAMHU,GAAE,WACDA,EAAE,eAAemE,KAAK,WACrB9E,WAAW6E,KAAKF,UAIlBhE,EAAEoE,GAAG1B,SAAW,SAAU2B,EAAQC,EAASC,GACpB,kBAAXD,IAA6C,GAApBE,UAAUZ,SAAcW,EAAWD,EAASA,EAAUD,EACzF,IAAII,GAAWzE,EAAE0E,QACfC,aAAgBN,EAChBO,UAAgB,GAChBjC,SAAgB,IAChBC,OAAgB,eACf0B,EACH,OAAON,MAAKG,KAAK,WACf,GAAIU,GAAa7E,EAAEgE,MACfW,EAAgD,gBAAzBF,GAASE,aAA4BF,EAASE,aAAe3E,EAAEyE,EAASE,cAC/FG,EAAkC,gBAAhBH,GAA4BA,EAAeA,EAAa5D,SAASX,IAAMyE,EAAW9E,YAAcgF,SAASN,EAASG,UACxIC,GAAWG,SAASjF,UAAY+E,GAAWC,SAASN,EAAS9B,UAAW8B,EAAS7B,OAAQ,WAChE,kBAAZ2B,IAA0BA,EAASU,KAAKjB,WAIzDkB,OAAOR,OAAQQ,OAAOtC,QACrBuC,IAAK,cACLC,YAAa,SAAUC,EAAGC,EAAGC,EAAGC,EAAGC,GAClC,MAAQH,IAAGG,EAAKF,EAAEC,EAAIA,IAAM/E,KAAKiF,IAAI,EAAG,IAAMJ,EAAEG,GAAK,GAAKF;ACV5D,QAASI,UAASC,EAAOC,EAAMC,EAAOC,EAAMC,GAC3C,MAAOD,IAAQC,EAAQD,IAASH,EAAQC,IAASC,EAAQD,GAjM1D,GAAII,YAAa,WAOhB,QAASC,KACRlD,GAEA,IAAImD,GAAI3E,SAAS4E,cAAc,aAAaC,aAAa,KAErDb,EAAI/E,KAAK6F,IAAM,EAAFH,EACjB3E,UAAS4E,cAAc,aAAaG,MAAMC,gBAAgBhB,CAE1D,IAAIiB,GAAMd,SAASe,EAASD,IAAK,EAAG,EAAG,EAAG,EAC1CjF,UAAS4E,cAAc,aAAaG,MAAMI,iBAAiBF,EAAIjB,EAEhE,QAASxC,GAAczD,GAErB,GAAIqH,GAAWpF,SAAS4E,cAAc,0BAA0BtG,wBAAwBmD,MACpF4D,EAAQ,IAAKD,CAEjB5G,GAAE,oCAAoC,GAAGuG,MAAMO,YAAY,EAAED,EAC7D7G,EAAE,sCAAsC,GAAGuG,MAAMO,YAAY,EAAED,EAC/D7G,EAAE,iCAAiCmE,KAAK,WACvCnE,EAAEgE,MAAM,GAAG+C,aAAa,IAAI,EAAEF,KAE/BG,QAAQC,IAAIJ,EAAM,OAAOD,GAI3B,QAASM,KACRC,aAAenH,EAAE,sDAAsD2F,SAASyB,EAAY,EAAE,EAAE,EAAE,EAAE,GAAG,UACvG,IAAIC,GAAU,CAId,OAHAF,cAAaxD,WAAWQ,KAAK,WAC5BkD,GAAWrH,EAAEgE,MAAMsD,OAAO1D,SAEpB+B,SAASlF,KAAK8G,KAAe,GAAVF,GAAc,IAAK,KAAM,IAAK,MAEzD,QAASG,KACRxH,EAAE,oBAAoB8D,KAAK,QAAQ,SAASvE,GAC3CA,EAAE0B,iBACFgF,WAAWwB,WAAWzH,EAAEgE,MAAM0D,KAAK,iBACnC1H,EAAE,0BAA0B0H,KAAK,QAAQ,SACzC1H,EAAEgE,MAAM0D,KAAK,QAAQ,kBAEtB1H,EAAE,2BAA2B8D,KAAK,QAAQ,SAASvE,GAClDA,EAAE0B,iBACFgF,WAAW0B,aAAa,EAAEC,KAE3B5H,EAAE,yBAAyB8D,KAAK,QAAQ,SAASvE,GAChD0G,WAAW4B,WACXtI,EAAE0B,mBAEHjB,EAAE,sBAAsB8D,KAAK,QAAQ,SAASvE,GAC7C0G,WAAW6B,WACXvI,EAAE0B,mBAEHjB,EAAE,qBAAqB8D,KAAK,QAAQ,SAASvE,GAC5C,GAAIwI,GAAW/H,EAAEgE,MAAMhC,QAAQ,CACf,IAAZ+F,EACH9B,WAAW0B,aAAaI,EAAW,GAEnC9B,WAAWwB,WAAWM,KA/DzB,GAGIC,GAFAtB,GAAaD,IAAI,GACjBW,EAAc,EAEdQ,EAAY,GA+DhB,QACC1D,KAAM,WACLsD,IACAvH,OAAOoB,iBAAiB,SAAS2B,GACjCiF,UAAUC,OAAO7G,iBAAiB,OAAQ6E,GAC1ClG,EAAE,2DAA2DsC,SAAS,WAEvEuF,SAAU,WACTE,WAAWX,EAAY,EACP,GAAZW,aACHA,WAAW,GAEZ9B,WAAWwB,WAAWM,aAEvBD,SAAU,WAET,MADAC,YAAWX,EAAY,EACP,IAAZW,YACI,MAEP9B,YAAWwB,WAAWM,aAGxBJ,aAAc,SAASQ,GACtBxF,SAASuE,KACG,GAARiB,GAAqB,GAARA,KAChBA,EAAO,EACPC,EAAM,IAENpI,EAAE,mBAAmBuD,IAAI,UAAU,GAEnC7D,WAAW,WACVM,EAAE,mBAAmBuD,IAAI,UAAU,IAClC6E,EAAM,IACRzF,SAAS,GAINwF,EAAK,EACRnI,EAAE,gBAAgBsC,SAAS,WAE3BtC,EAAE,gBAAgBqC,YAAY,UAE/B,IAAIgG,GAAYF,EAAK,EAEjBC,EAAM,EACNE,EAAwB,KAALH,EAEnBI,EAAkB5C,SAASwC,EAAK,EAAE,EAAE,EAAE,GACtCK,EAAoC,KAAhBD,CACZN,WAAUQ,GAAG/B,EAAU/D,SAAS,KAAQ8D,IAAK4B,EAAWD,MAAOA,EAAOM,KAAKC,OAAOC,SAE1FT,GAAK,EACRH,EAAetI,WAAW,WACzBuG,WAAW0B,aAAaQ,EAAK,IAC5BxF,UAEFnD,aAAawI,GAGdhI,EAAE,qBAAqBqC,YAAY,UACnCrC,EAAE,+BAA+BmI,EAAK,KAAK7F,SAAS,UAEpDtC,EAAE,uCAAuCqC,YAAY,UACrDrC,EAAE,sDAAsDmI,EAAK,GAAG,SAAS7F,SAAS,UAElFtC,EAAE,0CAA0CqC,YAAY,UACxDrC,EAAE,uDAAuDuI,EAAgB,GAAG,WAAWjG,SAAS,UAEhGtC,EAAE,0BAA0B0H,KAAK,QAAQ,SACzC1H,EAAE,oCAAoCmI,EAAK,KAAKT,KAAK,QAAQ,gBAE7D1H,EAAE,mCAAmCuD,IAAI,YAAY,cAAc+E,EAAiB,MACpFtI,EAAE,oCAAoCuD,IAAI,YAAY,cAAciF,EAAkB,MACtFpB,EAAYe,GAEbV,WAAY,SAASU,GAGpB,GAFAA,EAAKU,WAAWV,GAEZA,GAAMf,EAAa,OAAO,CAE9B,IAAI0B,GAAWnD,SAASwC,EAAM,EAAG,EAAG,EAAG,EACvCE,YAAWF,EAAK,GAAG,EACfE,UAAU,IAAGA,UAAY,GAE7BC,iBAAsB,KAALH,EACjBK,kBAA+B,MAAZM,EAAS,GAC5BtJ,aAAawI,EAEDC,WAAUQ,GAAG/B,EAAU,IAAOD,IAAK4B,WAE3CF,GAAK,EACRnI,EAAE,gBAAgBsC,SAAS,WAE3BtC,EAAE,gBAAgBqC,YAAY,WAG/BrC,EAAE,qBAAqBqC,YAAY,UACnCrC,EAAE,+BAA+BmI,EAAK,KAAK7F,SAAS,UAEpDtC,EAAE,uCAAuCqC,YAAY,UACrDrC,EAAE,sDAAsDmI,EAAK,GAAG,SAAS7F,SAAS,UAElFtC,EAAE,0CAA0CqC,YAAY,UACxDrC,EAAE,sDAAsD,EAAW,WAAWsC,SAAS,UAEvFtC,EAAE,0BAA0B0H,KAAK,QAAQ,SACzC1H,EAAE,oCAAoCmI,EAAK,KAAKT,KAAK,QAAQ,gBAE7D1H,EAAE,mCAAmCuD,IAAI,YAAY,cAAc+E,iBAAiB,MACpFtI,EAAE,oCAAoCuD,IAAI,YAAY,cAAciF,kBAAkB,MAEtFZ,EAAUV,IACA,GAANiB,EACH3I,aAAawI,GAEbA,EAAatI,WAAW,WACvBuG,WAAW0B,aAAaQ,EAAKP,IAC5B,KAEHR,EAAYe,MAQfnI,GAAE,WAC2C,MAAxCwB,SAAS4E,cAAc,iBAAuBH,WAAW/B","file":"site.js","sourcesContent":["var collection = function() {\n\tvar sectionBounds;\n\tvar sectionObj;\n\tvar windowDim = new Object();\n\tvar scrollTop = $(window).scrollTop();\n\tvar snapThreshold = 8;\n\tvar monitorScroll = true;\n\tvar scrollLockPos = 0;\n\tvar resetScrollTimeout;\n\tvar prevScroll = scrollTop;\n\tvar delta;\n\tvar productCount = 0;\n\tvar prevPosition = 0;\n\tvar sectionOffsetTop;\n\n\tfunction scrollMonitor(e) {\n\t\tclearTimeout(resetScrollTimeout);\n\t\tresetScrollTimeout = setTimeout(resetScroll,1200);\n\t\tsectionBounds = sectionObj.getBoundingClientRect();\n\t\tscrollTop = $(window).scrollTop();\n\t\tdelta = scrollTop - prevScroll;\n\t\tprevScroll = scrollTop;\n\t\t\n\t\tif ( sectionBounds.top <=0 && sectionBounds.bottom >= windowDim.height ) {\n\t\t\tif (monitorScroll && Math.abs(delta)>snapThreshold) {\n\t\t\t\tscrollSnap(e);\n\t\t\t}\n\t\t} else {\n\t\t\tif (sectionBounds.top < windowDim.height/2 && sectionBounds.top > 5 ) { // snapping when scrolling in from above\n\t\t\t\tif (delta > 0) {\n\t\t\t\t\tsetScene(0);\n\t\t\t\t\tsnapTo($(\".productshots .product:first-child\", $(sectionObj)).offset().top, 1000, e);\n\t\t\t\t} else if (delta<0) {\n\t\t\t\t\tsetScene(-1);\n\t\t\t\t}\n\t\t\t} else if (sectionBounds.bottom < windowDim.height/2 && sectionBounds.bottom > 5 ) { // snapping when scrolling in from below\n\t\t\t\tif (delta < 0) {\n\t\t\t\t\tsetScene(productCount-1);\n\t\t\t\t\tsnapTo($(\".productshots .product:last-child\", $(sectionObj)).offset().top, 1000, e);\n\t\t\t\t} else if (delta>0) {\n\t\t\t\t\tsetScene(-1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction resetScroll() {\n\t\tmonitorScroll = true;\n\t}\n\tfunction preventDefault(e) {\n\t  e = e || window.event;\n\t  if (e.preventDefault)\n\t      e.preventDefault();\n\t  e.returnValue = false;  \n\t}\n\tfunction disableScroll() {\n\t  if (window.addEventListener) // older FF\n\t      window.addEventListener('DOMMouseScroll', preventDefault, false);\n\t  window.onwheel = preventDefault; // modern standard\n\t  window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE\n\t  window.ontouchmove  = preventDefault; // mobile\n\t}\n\n\tfunction enableScroll() {\n\t    if (window.removeEventListener)\n\t        window.removeEventListener('DOMMouseScroll', preventDefault, false);\n\t    window.onmousewheel = document.onmousewheel = null; \n\t    window.onwheel = null; \n\t    window.ontouchmove = null;  \n\t}\n\tfunction scrollSnap(e) {\n\t\tvar obj = findParentProductContainer(document.elementFromPoint(0,windowDim.height/2));\n\t\tvar objectActive = $(obj).index();\n\n\t\tif (delta>0) {\n\t\t\tobjectTarget = objectActive+1;\n\t\t\tif (objectTarget<productCount) {\n\t\t\t\tsnapTo( $(obj).next().offset().top, 1000, e);\t\n\t\t\t} else {\n\t\t\t\tsnapTo( scrollTop + windowDim.height * 3/4, 1000, e); // leaving\n\t\t\t\tsetScene(-1);\n\t\t\t}\n\t\t} else {\n\t\t\tobjectTarget = objectActive-1;\n\t\t\tif (objectTarget>=0) {\n\t\t\t\tsnapTo( $(obj).prev().offset().top,1000, e);\t\n\t\t\t} else {\n\t\t\t\tsnapTo( scrollTop - windowDim.height*3/4, 1000, e); // leaving\n\t\t\t\tsetScene(-1);\n\t\t\t}\n\t\t}\n\t\tsetScene(objectTarget);\t\n\t}\n\tfunction setScene(no) {\n\t\t$(\".cta .product\",$(sectionObj)).removeClass(\"active\");\n\t\t$(\".cta .product:nth-child(\"+(no+1)+\")\",$(sectionObj)).addClass(\"active\");\n\t\t$(\"header nav a\",$(sectionObj)).removeClass(\"active\");\n\t\t$(\"header nav a:nth-child(\"+(no+1)+\")\",$(sectionObj)).addClass(\"active\");\n\t}\n\tfunction snapTo(position, snapDuration, e) {\n\t\tdisableScroll();\n\t\tmonitorScroll = false;\n\t\t$('html, body').stop().scrollTo(position, { duration:snapDuration, easing: \"easeOutExpo\" }, function() {\n\t\t\tmonitorScroll = true;\n\t\t\tenableScroll();\n\t\t});\n\t}\n\tfunction enableScrollSnap() {\n\t\t$(\"body.collections\").addClass(\"scrollsnap\");\n\t}\n\tfunction disableScrollSnap() {\n\t\t$(\"body.collections\").removeClass(\"scrollsnap\");\n\t}\n\tfunction findParentProductContainer(obj) {\n\t\tif ($(obj).hasClass(\"product\")) {\n\t\t\treturn obj;\n\t\t} else {\n\t\t\tif (obj==document.body) {\n\t\t\t\treturn false\n\t\t\t} else {\n\t\t\t\treturn findParentProductContainer(obj.parentNode);\n\t\t\t}\n\t\t}\n\t}\n\tfunction resizeHandler(e) {\n\t\tsectionBounds = sectionObj.getBoundingClientRect();\n\t\twindowDim.height = $(window).height();\n\t\twindowDim.width = $(window).width();\n\t}\n\tfunction positionFlowers() {\n\t\tvar scrollProgress = (scrollTop-sectionOffsetTop)/(productCount*windowDim.height);\n\t\tvar targetPosition = (scrollProgress * $(\".overlay\",$(sectionObj)).height());\n\t\tvar targetPos= -1*(targetPosition);\n\t\tif (targetPos>windowDim.height*2/5) targetPos = windowDim.height*2/5;\n\t\t$(\".collection .overlay .fg .left\").css(\"transform\",\"translate3d(0,\"+(targetPos*1.1)+\"px,50px)\");\n\t\t$(\".collection .overlay .fg .right\").css(\"transform\",\"translate3d(0,\"+(targetPos*1.1)+\"px,50px)\");\n\t\t$(\".collection .overlay .bg .left\").css(\"transform\",\"translate3d(0,\"+(targetPos)+\"px,0px)\");\n\t\t$(\".collection .overlay .bg .right\").css(\"transform\",\"translate3d(-0,\"+(targetPos)+\"px,0px)\");\n\t\tsetTimeout(function() {\n\t        window.requestAnimationFrame(positionFlowers);\n\t\t\twindow.requestAnimationFrame(scrollMonitor);\n\t    }, 16);\n\t}\n\tfunction scrollHandler(e) {\n\t\tscrollTop = $(window).scrollTop();\n\t\tsectionOffsetTop = $(sectionObj).offset().top;\n\t}\n\tfunction setupSizes(obj) {\n\t\tsectionObj = obj;\n\t\tproductCount = $(\".productshots\",$(obj)).children().length;\n\t\t$(\".collection\").css(\"height\",(productCount*100)+\"vh\");\n\t\t$(\".overlay\").css(\"height\",(productCount*133)+\"vh\");\n\t\tpositionFlowers();\n\t}\n\tfunction setupLinks() {\n\t\t$(\".collection header a\").bind(\"click\",function(e) {\n\t\t\tvar thisIndex = $(this).index();\n\t\t\tsnapTo( $(\".productshots .product:nth-child(\"+(thisIndex+1)+\")\",$(sectionObj)).offset().top, 1000, e);\n\t\t\tsetScene(thisIndex);\n\t\t\t// snapTo\n\t\t\te.preventDefault();\n\t\t})\n\t}\n\treturn {\n\t\tInit: function(obj) {\n\t\t\tsetupSizes(obj);\n\t\t\tsetupLinks();\n\t\t\twindow.addEventListener(\"resize\",resizeHandler);\n\t\t\twindow.addEventListener(\"wheel\",scrollMonitor);\n\t\t\twindow.addEventListener(\"scroll\",scrollHandler);\n\t\t\tresizeHandler();\n\t\t\tscrollMonitor();\n\t\t},\n\t}\n\t\n}();\n\n$(function() {\n\t$(\".collection\").each(function() {\n\t\tcollection.Init(this);\n\t})\t\n});\n\n$.fn.scrollTo = function( target, options, callback ){\n  if(typeof options == 'function' && arguments.length == 2){ callback = options; options = target; }\n  var settings = $.extend({\n    scrollTarget  : target,\n    offsetTop     : 50,\n    duration      : 500,\n    easing        : 'easeOutQuad'\n  }, options);\n  return this.each(function(){\n    var scrollPane = $(this);\n    var scrollTarget = (typeof settings.scrollTarget == \"number\") ? settings.scrollTarget : $(settings.scrollTarget);\n    var scrollY = (typeof scrollTarget == \"number\") ? scrollTarget : scrollTarget.offset().top + scrollPane.scrollTop() - parseInt(settings.offsetTop);\n    scrollPane.animate({scrollTop : scrollY }, parseInt(settings.duration), settings.easing, function(){\n      if (typeof callback == 'function') { callback.call(this); }\n    });\n  });\n}\njQuery.extend( jQuery.easing, {\n\tdef: 'easeOutQuad',\n\teaseOutExpo: function (x, t, b, c, d) {\n\t\treturn (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n\t}\n});\n","var scentWheel = function() {\n\tvar svgWidth;\n\tvar progress = { pct:0 };\n\tvar activeSlide = 0;\n\tvar slideTimeout;\n\tvar delayTime = 10000;\n\t\n\tfunction renderCircle() {\n\t\tresizeHandler();\n\n\t\tvar r = document.querySelector(\".progress\").getAttribute('r'); \n\n\t\tvar c = Math.PI*(r*2);\n\t\tdocument.querySelector(\".progress\").style.strokeDasharray=c;\n\n\t\tvar pct = mapRange(progress.pct, 0, 1, 1, 0);\n\t\tdocument.querySelector(\".progress\").style.strokeDashoffset=pct*c;\n\t}\n\tfunction resizeHandler(e) {\n\t\t\n\t\t\tvar svgWidth = document.querySelector(\"svg.progress_container\").getBoundingClientRect().width;\n\t\t\tvar ratio = 1000/svgWidth;\n\t\t\t\n\t\t\t$(\".scent_wheel svg circle.progress\")[0].style.strokeWidth=5*ratio;\n\t\t\t$(\".scent_wheel svg circle.background\")[0].style.strokeWidth=1*ratio;\n\t\t\t$(\".scent_wheel svg circle.point\").each(function() {\n\t\t\t\t$(this)[0].setAttribute(\"r\",6*ratio);\n\t\t\t});\n\t\t\tconsole.log(ratio,\"from\",svgWidth);\n\t\t\t// setTimeout(resizeHandler,300,e);\n\t\t\n\t}\n\tfunction getSlideLength() {\n\t\t$currentText = $(\".descriptions .section_container section:nth-child(\"+mapRange(activeSlide+1,0,4,4,0)+\") .text\");\n\t\tvar charCount=0;\n\t\t$currentText.children().each(function() {\n\t\t\tcharCount+=$(this).html().length;\n\t\t});\n\t\treturn mapRange(Math.ceil(charCount*50),3000,15000,8000,17000);\n\t}\n\tfunction setupWheelNavigation() {\n\t\t$(\"g.section .point\").bind(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tscentWheel.noteSkipTo($(this).attr(\"data-section\"));\n\t\t\t$(\"g.section circle.point\").attr(\"class\",\"point\");\n\t\t\t$(this).attr(\"class\",\"point active\");\n\t\t});\n\t\t$(\".scent_wheel a.discover\").bind(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tscentWheel.noteNavigate(1,delayTime);\n\t\t});\n\t\t$(\".navigation a.forward\").bind(\"click\",function(e) {\n\t\t\tscentWheel.nextNote();\n\t\t\te.preventDefault();\n\t\t});\n\t\t$(\".navigation a.back\").bind(\"click\",function(e) {\n\t\t\tscentWheel.prevNote();\n\t\t\te.preventDefault();\n\t\t});\n\t\t$(\".navigation ul li\").bind(\"click\",function(e) {\n\t\t\tvar targetStep=$(this).index()+1;\n\t\t\tif (targetStep==0) {\n\t\t\t\tscentWheel.noteNavigate(targetStep,0);\n\t\t\t} else {\n\t\t\t\tscentWheel.noteSkipTo(targetStep);\n\t\t\t}\n\t\t});\n\t}\n\treturn {\n\t\tInit: function() {\n\t\t\tsetupWheelNavigation();\n\t\t\twindow.addEventListener(\"resize\",resizeHandler);\n\t\t\tTweenLite.ticker.addEventListener(\"tick\", renderCircle);\n\t\t\t$(\".backgrounds .section_container section:first-child img\").addClass(\"active\");\n\t\t},\n\t\tnextNote: function() {\n\t\t\ttargetStep=activeSlide+1;\n\t\t\tif (targetStep==4) {\n\t\t\t\ttargetStep=0;\n\t\t\t}\n\t\t\tscentWheel.noteSkipTo(targetStep);\n\t\t},\n\t\tprevNote: function() {\n\t\t\ttargetStep=activeSlide-1;\n\t\t\tif (targetStep==-1) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tscentWheel.noteSkipTo(targetStep);\n\t\t\t}\n\t\t},\n\t\tnoteNavigate: function(step) {\n\t\t\tduration=getSlideLength();\n\t\t\tif (step == 4 || step == 0) {\n\t\t\t\tstep = 0;\n\t\t\t\tdelay=1000;\n\n\t\t\t\t$(\"circle.progress\").css(\"opacity\",0);\n\t\t\t\t\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\"circle.progress\").css(\"opacity\",1);\n\t\t\t\t},delay+20);\n\t\t\t\tduration=0;\n\t\t\t} else {\n\n\t\t\t}\n\t\t\tif (step>0) {\n\t\t\t\t$(\".scent_wheel\").addClass(\"running\");\n\t\t\t} else {\n\t\t\t\t$(\".scent_wheel\").removeClass(\"running\");\n\t\t\t}\n\t\t\tvar targetPct = step/3;\n\n\t\t\tvar delay=0;\n\t\t\tvar targetBackground = step*-100;\n\n\t\t\tvar descriptionStep = mapRange(step,0,3,3,0);\n\t\t\tvar targetDescription = descriptionStep*-100;\n\t\t\tvar tween = TweenLite.to(progress, duration/1000, { pct: targetPct, delay: delay, ease:Power0.easeOut });\n\n\t\t\tif (step>0) { // for all slides other than the intro slide auto jump to next step\n\t\t\t\tslideTimeout = setTimeout(function() {\n\t\t\t\t\tscentWheel.noteNavigate(step+1);\n\t\t\t\t},duration);\n\t\t\t} else {\n\t\t\t\tclearTimeout(slideTimeout);\n\t\t\t}\n\n\t\t\t$(\".navigation ul li\").removeClass(\"active\");\n\t\t\t$(\".navigation ul li:nth-child(\"+step+\")\").addClass(\"active\");\n\n\t\t\t$(\".backgrounds .section_container img\").removeClass(\"active\");\n\t\t\t$(\".backgrounds .section_container section:nth-child(\"+(step+1)+\") img\").addClass(\"active\");\n\n\t\t\t$(\".descriptions .section_container .text\").removeClass(\"active\");\n\t\t\t$(\".descriptions .section_container section:nth-child(\"+(descriptionStep+1)+\") .text\").addClass(\"active\");\n\n\t\t\t$(\"g.section circle.point\").attr(\"class\",\"point\");\n\t\t\t$(\"g.section circle.point:nth-child(\"+step+\")\").attr(\"class\",\"point active\");\n\n\t\t\t$(\".backgrounds .section_container\").css(\"transform\",\"translateY(\"+targetBackground+\"%)\");\n\t\t\t$(\".descriptions .section_container\").css(\"transform\",\"translateY(\"+targetDescription+\"%)\");\n\t\t\tactiveSlide=step;\n\t\t},\n\t\tnoteSkipTo: function(step) {\n\t\t\tstep=parseFloat(step);\n\n\t\t\tif (step==activeSlide) return false;\n\t\t\t\n\t\t\tvar textStep = mapRange(step, 0, 4, 4, 0);\n\t\t\ttargetPct=(step-1)/3;\n\t\t\tif (targetPct<0) targetPct = 0;\n\n\t\t\ttargetBackground=step*-100;\n\t\t\ttargetDescription=(textStep-1)*-100;\n\t\t\tclearTimeout(slideTimeout);\n\n\t\t\tvar tween = TweenLite.to(progress, 0.3, { pct: targetPct });\n\n\t\t\tif (step>0) {\n\t\t\t\t$(\".scent_wheel\").addClass(\"running\");\n\t\t\t} else {\n\t\t\t\t$(\".scent_wheel\").removeClass(\"running\");\n\t\t\t}\n\t\t\t\n\t\t\t$(\".navigation ul li\").removeClass(\"active\");\n\t\t\t$(\".navigation ul li:nth-child(\"+step+\")\").addClass(\"active\");\n\n\t\t\t$(\".backgrounds .section_container img\").removeClass(\"active\");\n\t\t\t$(\".backgrounds .section_container section:nth-child(\"+(step+1)+\") img\").addClass(\"active\");\n\n\t\t\t$(\".descriptions .section_container .text\").removeClass(\"active\");\n\t\t\t$(\".descriptions .section_container section:nth-child(\"+(textStep)+\") .text\").addClass(\"active\");\n\n\t\t\t$(\"g.section circle.point\").attr(\"class\",\"point\");\n\t\t\t$(\"g.section circle.point:nth-child(\"+step+\")\").attr(\"class\",\"point active\");\n\n\t\t\t$(\".backgrounds .section_container\").css(\"transform\",\"translateY(\"+targetBackground+\"%)\");\n\t\t\t$(\".descriptions .section_container\").css(\"transform\",\"translateY(\"+targetDescription+\"%)\");\n\t\t\t\n\t\t\tdelayTime=getSlideLength();\n\t\t\tif (step==0) { // if back to intro, don't automatically skip to next slide\n\t\t\t\tclearTimeout(slideTimeout);\n\t\t\t} else {\n\t\t\t\tslideTimeout=setTimeout(function() {\n\t\t\t\t\tscentWheel.noteNavigate(step,delayTime);\n\t\t\t\t},1000);\n\t\t\t}\n\t\t\tactiveSlide=step;\n\t\t}\n\t}\n\t\n}();\nfunction mapRange(value, low1, high1, low2, high2) {\n\treturn low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n$(function() {\n\tif (document.querySelector(\".scent_wheel\")!=null) scentWheel.Init();\n});"],"sourceRoot":"/source/"}