function closeDestinationScreen(){$(".remove").animate({opacity:0},200),$(".search_1 .people").css("transition-duration","0.6s").css("transition-timing-function","cubic-bezier(.73,0,1,.46)").css("transform","translateY(800px)"),setTimeout(function(){$(".search_1 .background").css("transition-duration","0.6s").css("transition-timing-function","cubic-bezier(.73,0,1,.46)").css("transform","translateY(800px)")},100),setTimeout(function(){$(".search_1").animate({opacity:0},300)},300),setTimeout(function(){$(".search_station").animate({opacity:0},300)},600),setTimeout(function(){$(".search_station").css("display","none")},900)}function closeHomeScreen(){$(".cards").removeClass("active"),$(".screen.home .top").css("transition-duration","1s").css("transition-timing-function","cubic-bezier(.73,0,1,.46)").css("transform","translateY(-500px)").css("opacity",0),$(".screen.home .bottom").css("transition-duration","1s").css("transition-timing-function","cubic-bezier(.73,0,1,.46)").css("transform","translateY(500px)").css("opacity",0),setTimeout(function(){$(".screen.home").css("display","none")},1200)}function enterHomeScreen(t){$(".screen.home .opacityZero").each(function(t,s){setTimeout(function(t){$(t).animate({opacity:1},300)},270*t+500,s)}),"undefined"==typeof t&&(t=1200),setTimeout(function(){$(".screen.home").css("opacity",0).css("display","block").animate({opacity:1},300),setTimeout(function(){$(".cards").addClass("active")},500),first&&(clock_slider.Init($(".clock_slider").eq(0),0),first=!1)},t)}function enterJourneyScreen(){$(".journey .opacityZero").each(function(t,s){setTimeout(function(t){$(t).animate({opacity:1},300)},270*t+500,s)}),$(".journey").css("display","block").animate({opacity:1},300).addClass("active"),$(".journey ul li:nth-child(4)").addClass("travel"),$(".journey ul .current_status").addClass("travel"),$(".journey .date").bind("click",function(){closeJourneyScreen(),enterHomeScreen(0),setTimeout(function(){$(".screen.home .top").css("transition-duration","1s").css("transition-timing-function","cubic-bezier(0,.91,.12,.99)"),$(".screen.home .bottom").css("transition-duration","1s").css("transition-timing-function","cubic-bezier(0,.91,.12,.99)")},100),setTimeout(function(){$(".screen.home .top").css("transform","translateY(0)").css("opacity",1),$(".screen.home .bottom").css("transform","translateY(0)").css("opacity",1)},110)})}function closeJourneyScreen(){$(".travel").removeClass("travel"),$(".journey").css("opacity",0),setTimeout(function(){$(".journey").css("display","none")},300)}function stepAnimate(t){$(".opacityZero",$(t)).each(function(t,s){setTimeout(function(t){$(t).animate({opacity:1},300)},270*t+500,s)})}$(function(){function t(){$(".splash.screen").css("display","block").css("opacity",1),stepAnimate(".splash.screen"),setTimeout(function(){$(".splash").css("opacity",0)},4e3),setTimeout(function(){s()},4400)}function s(){$(".locating").css("display","block").css("opacity",1),stepAnimate(".locating"),setTimeout(function(){$(".radar").addClass("hide"),$(".station").addClass("active")},3e3),setTimeout(function(){$(".locating .message").css("opacity",0)},4500),setTimeout(function(){$(".locating .station").html("m Oxshott")},4800),setTimeout(function(){$(".locating .station").html("om Oxshott")},4850),setTimeout(function(){$(".locating .station").html("rom Oxshott")},4900),setTimeout(function(){$(".locating .station").html("From Oxshott")},4950),setTimeout(function(){$(".locating .station").css("transition-duration","1s").css("transition-timing-function",".8,0,.2,1").css("transform","translateY(-220px)")},5500),setTimeout(function(){n()},6500),setTimeout(function(){$(".locating").css("opacity",0)},6700)}function n(){$(".station_info").css("display","block"),$(".locating").css("display","none"),setTimeout(function(){$(".intro .gfx").css("transform","translateY(0)")},300),setTimeout(function(){$(".controls").css("opacity",1)},500),$(".station_info .opacityZero").each(function(t,s){setTimeout(function(t){$(t).animate({opacity:1},300)},270*t+500,s)}),$(".intro .gfx").css("display","block"),setTimeout(function(){$(".intro .gfx").css("opacity",1)},100),$(".choose_destination").click(function(){$(".screen.search_station input.station").focus(),$(".choose_destination").css("transition","all 0.7s cubic-bezier(.85,.01,.99,.38)"),$(".choose_destination").addClass("disappear"),i(),setTimeout(function(){o()},700)})}function i(){$(".intro .people").css("transition-duration","0.6s").css("transition-timing-function","cubic-bezier(.73,0,1,.46)").css("transform","translateY(800px)"),setTimeout(function(){$(".intro .background").css("transition-duration","0.6s").css("transition-timing-function","cubic-bezier(.73,0,1,.46)").css("transform","translateY(800px)")},100),setTimeout(function(){$(".screen.station_info").animate({opacity:0},300).css("pointer-events","none")},600),$(".station_info .date").css("transition-duration","0.6s").css("transition-timing-function","cubic-bezier(.73,0,1,.46)").css("transform","translateY(-300px)"),setTimeout(function(){$(".station_info .station").css("transition-duration","0.6s").css("transition-timing-function","cubic-bezier(.73,0,1,.46)").css("transform","translateY(-300px)")},100)}function o(){stepAnimate(".search_station"),$(".search_1 .background").css("transition-duration","0s").css("transition-timing-function","ease").css("transform","translateY(-20px)"),$(".search_1 .people").css("transition-duration","0s").css("transition-timing-function","ease").css("transform","translateY(5px)"),setTimeout(function(){$(".search_1 .background").css("transition-duration","2s"),$(".search_1 .people").css("transition-duration","2s")},100),$(".station_info").css("display","none"),$(".search_1, .search_1 .gfx").css("display","block"),setTimeout(function(){$(".search_1").css("opacity",1)},100),setTimeout(function(){$(".screen.search_station").css("opacity",0).css("display","block").animate({opacity:1},300),$(".search_1 .gfx").css("opacity",1),$(".search_1").css("transform","translateY(0px)")},200),setTimeout(function(){$(".search_station .results").css("transform","translateY(0px)")},350)}function e(){$(".home .info").each(function(){var t=$(this);$("span",t).length>1&&($("span:first-child",t).css("transition-duration","0.5s").css("transform","translateY(-42px)"),$("span:last-child",t).css("transition-duration","0.5s").css("transform","translateY(-42px)"),setTimeout(function(){$("span:last-child",t).prependTo(t),$("span:first-child",t).css("transition-duration","0s").css("transform","translateY(0px)"),$("span:last-child",t).css("transition-duration","0s").css("transform","translateY(0px)")},500))}),setTimeout(e,7e3)}t(),$(".home.screen .info").bind("touchstart",function(){closeHomeScreen(),setTimeout(function(){enterJourneyScreen()},700)}),setTimeout(e,7e3)}),first=!0;
$(function(){function a(){$($card).fadeOut(),$(".message_2").fadeIn(),$(".card img").attr("src","img/gfx_hand.svg");var a=clock_slider.activeBucket(),s=$(".bottomslider span.time").eq(a).html(),t=s.split(":"),n=parseInt(t[0]),e=parseInt(t[1]);e+=22,e>=60&&(e-=60,n+=1),$(".info").animate({opacity:0},0);var i='<span class="delay">Running behind</span>',r='<span class="platform">Platform 12</span><span class="delay">Exp '+pad(n,2)+":"+pad(e,2)+"</span>";$(".info.depart").html(i),$(".info.arrive").html(r),$(".info").animate({opacity:1},200)}$(".card").bind("touchstart",function(s){$card=$(s.target),$card.hasClass("message_1")?a():$(this).parent().hasClass("open")?$(this).parent().removeClass("open"):$(this).parent().addClass("open")})});
function pad(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e}var currentTime,clock_slider=function(){function e(e,t,n,a){var r,s;l=e,$bucket=$(".options time",$(".clock_slider").eq(0)).eq(l);var o=$bucket.attr("data-message"),i=$bucket.attr("datetime")+" ",i=i.trim().replace(" ","T"),i=new Date(i),u=new Date;i.setHours(i.getHours()-1),$(".journey .plan li").each(function(e,t){var n=new Date(i.getTime()+6e4*parseInt($(this).attr("data-distance"))),a=pad(n.getHours(),2)+":"+pad(n.getMinutes(),2);4>e&&u>i?$(this).addClass("passed"):$(this).removeClass("passed"),$("strong",$(this)).html(a)}),u>i?$(".current_status").css("display","block"):$(".current_status").css("display","none");var u=new Date;c>e?(r='<span class="journey_link">Running on time</span>',s='<span class="platform">Platform 12: Train to Waterlooo</span><span class="delay">Exp on time</span>'):e==c?(r='<span class="platform">Platform 5: Train to Waterloo</span><span class="delay">Exp on time</span>',s='<span class="delay">Exp on time</span>'):(r='<span class="delay">Exp on time</span>',s='<span class="delay">Exp on time</span>'),t?(t>.7&&(t=.7),$(".options",n).css("transition","all "+t+"s ease-out")):$(".options",n).css("transition","all 0s cubic-bezier(.6,.0,.4,1)");var p=0-e*$(".clock_slider .options time").width();$(".options",n).css("transform","translateX("+(p+(h/2-$("time.bucket").width()/2))+"px)"),$(".info").animate({opacity:0},200),setTimeout(function(e){e?($(".info.depart").html(r),$(".info.arrive").html(s)):($(".info.depart").html(r),$(".info.arrive").html(s)),$(".info").animate({opacity:1},200)},350,o)}function t(e){var t=$(e.target.parentNode.parentNode.parentNode.parentNode);scrollBucket=t,$(".clock_slider").removeClass("active"),t.addClass("active"),m=scrollBucket.scrollTop,d=0;(new Date).getTime()-o;$(".options",t).bind("touchend",a),$(".options",t).bind("touchmove",n);var r=$(".options",t).css("transform").toString().replace("matrix(","").replace(")","").split(",");u.touchOffsetX=parseInt(r[4].trim()),u.x=e.originalEvent.touches[0].clientX,o=(new Date).getTime()}function n(e){var t=$(e.target.parentNode.parentNode.parentNode.parentNode);clearTimeout(i);var n=$(".options",t).css("transform").toString().replace("matrix(","").replace(")","").split(",");p.x=e.originalEvent.touches[0].clientX,p.touchOffsetX=parseInt(n[4].trim()),d=u.x-p.x;var a=((new Date).getTime()-o,-1*(u.x-p.x-u.touchOffsetX));$(".options",t).css("transition-duration","0s").css("transform","translateX("+a+"px)")}function a(t){var r=$(t.target.parentNode.parentNode.parentNode.parentNode);clearTimeout(i),$(".options",r).css("transition-duration","0.4s").unbind("touchmove",n).unbind("touchend",a);var s=(new Date).getTime()-o,c=u.x-p.x,m=Math.round(c/$(".options time",r).width());m=l+m,0>m&&(m=0);var h=Math.abs(s/d);.2>h&&(h=.2),e(m,h)}function r(e){var t=new Date,n=t.getHours(),a=t.getMinutes();m_rounded=5*Math.ceil(a/5),60==m_rounded&&(m_rounded=0,n+=1),m_rounded+=5;var r=(pad(n,2)+":"+pad(m_rounded,2),0);return $(".options time span",$(e)).each(function(e,t){return thisHour=parseInt($(this).html().substring(0,2)),thisMinute=parseInt($(this).html().substring(3,5)),thisHour==n&&thisMinute>=m_rounded||thisHour>n?(r=e,!1):void 0}),r}function s(e){function t(e){try{var t=Math.abs(h/2-(e.getBoundingClientRect().left+e.getBoundingClientRect().width/2))}catch(n){}return t}try{var n=document.querySelector(e),a=document.elementFromPoint(h/2,n.getBoundingClientRect().top+5).parentNode;if("undefined"!=typeof a&&"TIME"==a.tagName){var r=new Array;r.push(a),r.push(a.parentNode.previousSibling.firstChild),r.push(a.parentNode.nextSibling.firstChild);for(object in r)"undefined"!=r[object]&&(centerMeasure=-1*t(r[object]),centerMeasure!=n.centerMeasure&&(spanTime=r[object].firstChild,r[object].centerMeasure=centerMeasure,centerScale=Math.abs(centerMeasure.map(-100,0,1,1.6)),centerOpacity=centerMeasure.map(-180,0,.3,1),spanTime.getAttribute("data-centerscale")!=centerScale&&(centerScale<1&&(centerScale=1),spanTime.setAttribute("data-centerscale",centerScale),$(spanTime).css("transform","scale("+centerScale+","+centerScale+")").css("opacity",centerOpacity))))}}catch(s){}}var o,i,c,l=0,u=new Object,p=new Object,d=0,m=0,h=$(window).width();return Number.prototype.map=function(e,t,n,a){return(this-e)*(a-n)/(t-e)+n},{draw:function(){s(".topslider"),s(".bottomslider"),setTimeout(clock_slider.draw,10)},Init:function(n,a){var s=r(n);c=s,$(".options",$(".clock_slider")).bind("touchstart",t),e(s,!1,$(".clock_slider").eq(0)),e(s,!1,$(".clock_slider").eq(1)),$(".clock_slider").each(function(){$(this)[0].fromTop=$(this).offset().top})},activeBucket:function(){return l}}}();$(document).ready(function(e){setTimeout(function(){clock_slider.draw()},200),document.body.ontouchstart=function(t){$source=e(t.target);var n=t.target;"INPUT"==n.tagName||"BUTTON"==n.tagName||"A"==n.tagName||$source.hasClass("clickaction")||$source.hasClass("link_arrow")||t.preventDefault()}});
var keyboardTimeout,searchTimeout;$(function(){function t(t){clearTimeout(keyboardTimeout);var i=$("input.station").val();""==i&&(i="a"),$("#fontTest").html("<span>"+i+"_</span>"),$("#fontTest").delay(20).textfill({maxFontPixels:80}),$("input.station").css("font-size",$("#fontTest span").css("font-size")),e(i)}function e(t){$("ul.list").html('<li><span class="searching"></span></li>'),clearTimeout(searchTimeout),searchTimeout=setTimeout(function(){$("ul.list").css("opacity",0).html('<li style="opacity:0" class="clickaction">Vauxhall</li><li style="opacity:0" class="remove" class="clickaction">Waterloo</li>'),$("ul.list").animate({opacity:1},300),$("ul.list li").each(function(t,e){setTimeout(function(t){$(t).animate({opacity:1},300)},200*t+200,e)}).bind("click",function(){closeDestinationScreen(),enterHomeScreen()})},1e3),keyboardTimeout=setTimeout(i,1500)}function i(){$("input.station").blur()}var n=document.createElement("div");n.id="fontTest",n.style.width="calc(100% - 60px)",n.style.height="100px",n.style.whiteSpace="nowrap",n.innerHTML="<span></span>",document.body.appendChild(n),$(n).css("-webkit-transform","translateY(-3000px)"),$(n).textfill({maxFontPixels:80}),$("input.station").bind("keyup",t)});
!function(t,e,n){"use strict";function o(t,e,n,o,i){return Math.abs(t-n)<i&&Math.abs(e-o)<i}if(e.navigator.userAgent.match(/(iPhone|iPad|iPod)/)){var i={TOUCH_MOVE_THRESHHOLD:10,PRESSED_CLASS:"pressed",GHOST_CLICK_TIMEOUT:500,GHOST_CLICK_THRESHOLD:10},a=[];n.addEventListener("click",function(t){for(var e=0;e<a.length;e++)if(o(a[e][0],a[e][1],t.clientX,t.clientY,i.GHOST_CLICK_THRESHOLD))return t.preventDefault(),void t.stopPropagation()},!0),t(n).on("touchstart",".no_delay_button",function(e){var a=t(this);a.css("webkitTapHighlightColor","rgba(0,0,0,0)"),a.addClass(i.PRESSED_CLASS);var c=e.originalEvent.touches[0],s=[c.clientX,c.clientY];this.__eventLocation=s,this.__onTouchMove=function(t){var e=t.originalEvent.touches[0];o(e.clientX,e.clientY,s[0],s[1],i.TOUCH_MOVE_THRESHHOLD)?a.addClass(i.PRESSED_CLASS):a.removeClass(i.PRESSED_CLASS)},t(n.body).on("touchmove",this.__onTouchMove)}),t(n).on("touchcancel",".no_delay_button",function(){var e=t(this);e.removeClass(i.PRESSED_CLASS),t(n.body).off("touchmove",this.__onTouchMove)}),t(n).on("touchend",".no_delay_button",function(c){var s=t(this);if(s.hasClass(i.PRESSED_CLASS)){s.removeClass(i.PRESSED_CLASS);var u=this.__eventLocation;if(u){var _=c.originalEvent.changedTouches[0];if(!o(_.clientX,_.clientY,u[0],u[1],i.TOUCH_MOVE_THRESHHOLD))return;setTimeout(function(){var t=n.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,null),s.get(0).dispatchEvent(t)},1),c.preventDefault();var r=[_.clientX,_.clientY];a.push(r),e.setTimeout(function(){var t=a.indexOf(r);t>=0&&a.splice(t,1)},i.GHOST_CLICK_TIMEOUT)}}t(n.body).off("touchmove",this.__onTouchMove)})}}(jQuery,window,document);
//# sourceMappingURL=site.js.map