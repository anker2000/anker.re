{"version":3,"sources":["animations.js","cards.js","clock_slider.js","forms.js","jquery.noclickdelay.js"],"names":["closeDestinationScreen","$","animate","opacity","css","setTimeout","closeHomeScreen","removeClass","enterHomeScreen","delay","each","i","e","obj","addClass","first","clock_slider","Init","eq","enterJourneyScreen","bind","closeJourneyScreen","stepAnimate","container","enterSplash","enterLocating","html","loadIntro","click","focus","hideMainBackground","enterDestinationScreen","rotateInfo","info","this","length","prependTo","activateDelay","$card","fadeOut","fadeIn","attr","activeBucket","time_str","time","split","h","parseInt","m","delaydepart","delayarrive","pad","target","hasClass","parent","n","width","z","Array","join","currentTime","activateBucket","no","speed","elm","init","$bucket","trim","replace","Date","now","setHours","getHours","targetTime","getTime","timeString","getMinutes","initBucket","targetX","windowWidth","touchstartHandler","parentNode","scrollBucket","scrollMuch","scrollTop","pixelsMoved","entryTouchTime","touchendHandler","touchmoveHandler","matrix","toString","entryTouchPoint","touchOffsetX","x","originalEvent","touches","clientX","clearTimeout","touchTimeout","exitTouchPoint","unbind","timeSinceTouchstart","destination","closestBucket","Math","round","animationTime","abs","findCurrentTime","d","m_rounded","ceil","activeChild","thisHour","substring","thisMinute","scaleAccordingToCenterPos","getDistanceFromCenter","returnValue","getBoundingClientRect","left","document","querySelector","center","elementFromPoint","top","tagName","objects","push","previousSibling","firstChild","nextSibling","object","centerMeasure","spanTime","centerScale","map","centerOpacity","getAttribute","setAttribute","Object","window","Number","prototype","in_min","in_max","out_min","out_max","draw","startBucket","fromTop","offset","ready","body","ontouchstart","$source","source","preventDefault","keyboardTimeout","searchTimeout","update","value","val","textfill","maxFontPixels","stationSearch","removeKeyboardFocus","blur","test","createElement","id","style","height","whiteSpace","innerHTML","appendChild","withinDistance","x1","y1","x2","y2","distance","navigator","userAgent","match","CONFIG","TOUCH_MOVE_THRESHHOLD","PRESSED_CLASS","GHOST_CLICK_TIMEOUT","GHOST_CLICK_THRESHOLD","clicks","addEventListener","clientY","stopPropagation","on","elem","touch","location","__eventLocation","__onTouchMove","off","changedTouches","evt","createEvent","initMouseEvent","get","dispatchEvent","clickLocation","indexOf","splice","jQuery"],"mappings":"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","file":"site.js","sourcesContent":["$(function() {\n\t enterSplash();\n\t // enterHomeScreen();\n\t // $(\".controls\").css(\"opacity\",1);\n\tfunction enterSplash() {\n\t\t$(\".splash.screen\").css(\"display\",\"block\").css(\"opacity\",1);\n\t\tstepAnimate(\".splash.screen\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".splash\").css(\"opacity\",0);\n\t\t},4000);\n\t\tsetTimeout(function() {\n\t\t\tenterLocating();\n\t\t},4400);\n\t}\n\tfunction enterLocating() {\n\t\t$(\".locating\").css(\"display\",\"block\").css(\"opacity\",1);\n\t\tstepAnimate(\".locating\");\n\t\t\n\t\tsetTimeout(function() {\n\t\t\t$(\".radar\").addClass(\"hide\");\n\t\t\t$(\".station\").addClass(\"active\");\n\t\t},3000);\n\t\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .message\").css(\"opacity\",0);\n\t\t},4500);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").html(\"m Oxshott\");\n\t\t},4800);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").html(\"om Oxshott\");\n\t\t},4850);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").html(\"rom Oxshott\");\n\t\t},4900);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").html(\"From Oxshott\");\n\t\t},4950);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\".8,0,.2,1\").css(\"transform\",\"translateY(-220px)\");\n\t\t},5500);\n\t\tsetTimeout(function() {\n\t\t\tloadIntro();\n\t\t},6500);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating\").css(\"opacity\",0);\n\t\t},6700);\n\t\t//set timeout something: loadIntro();\n\t}\n\tfunction loadIntro() {\n\t\t$(\".station_info\").css(\"display\",\"block\");\n\t\t$(\".locating\").css(\"display\",\"none\");\n\t\t\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .gfx\").css(\"transform\",\"translateY(0)\");\n\t\t},300);\n\t\tsetTimeout(function() {\n\t\t\t$(\".controls\").css(\"opacity\",1);\n\t\t},500);\n\t\t$(\".station_info .opacityZero\").each(function(i, e) {\n\t\t\tsetTimeout(function(obj) {\n\t\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t\t},(i*270)+500,e);\n\t\t});\n\t\t$(\".intro .gfx\").css(\"display\",\"block\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .gfx\").css(\"opacity\",1);\n\t\t},100);\n\n\t\n\t\t$(\".choose_destination\").click(function() {\n\t\t\t$(\".screen.search_station input.station\").focus();\n\t\t\n\t\t\t\t$(\".choose_destination\").css(\"transition\",\"all 0.7s cubic-bezier(.85,.01,.99,.38)\");\n\t\t\t\t$(\".choose_destination\").addClass(\"disappear\");\n\t\t\t\n\t\t\thideMainBackground();\n\t\t\tsetTimeout(function() {\n\t\t\t\tenterDestinationScreen();\n\t\t\t},700);\n\t\t});\n\t}\n\tfunction hideMainBackground() {\n\t\t$(\".intro .people\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .background\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t\t},100);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.station_info\").animate({ opacity: 0},300).css(\"pointer-events\",\"none\");\n\t\t},600);\n\t\t$(\".station_info .date\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-300px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".station_info .station\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-300px)\");\n\t\t},100);\n\t}\n\tfunction enterDestinationScreen() {\n\t\tstepAnimate(\".search_station\");\n\t\t$(\".search_1 .background\").css(\"transition-duration\",\"0s\").css(\"transition-timing-function\",\"ease\").css(\"transform\",\"translateY(-20px)\");\n\t\t$(\".search_1 .people\").css(\"transition-duration\",\"0s\").css(\"transition-timing-function\",\"ease\").css(\"transform\",\"translateY(5px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_1 .background\").css(\"transition-duration\",\"2s\");\n\t\t\t$(\".search_1 .people\").css(\"transition-duration\",\"2s\");\n\t\t},100);\n\t\t$(\".station_info\").css(\"display\",\"none\");\n\t\t$(\".search_1, .search_1 .gfx\").css(\"display\",\"block\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_1\").css(\"opacity\",1);\n\t\t},100);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.search_station\").css(\"opacity\",0).css(\"display\",\"block\").animate({ opacity: 1},300);\n\t\t\t$(\".search_1 .gfx\").css(\"opacity\",1);\n\t\t\t$(\".search_1\").css(\"transform\",\"translateY(0px)\");\n\t\t},200);\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_station .results\").css(\"transform\",\"translateY(0px)\");\n\t\t},350);\n\t}\n\t$(\".home.screen .info\").bind(\"touchstart\",function() {\n\t\tcloseHomeScreen();\n\t\tsetTimeout(function() {\n\t\t\tenterJourneyScreen();\n\t\t},700);\n\t\t\n\t});\n\tfunction rotateInfo() {\n\t\t$(\".home .info\").each(function() {\n\t\t\tvar info = $(this);\n\t\t\tif ($(\"span\",info).length>1) {\n\t\t\t\t$(\"span:first-child\",info).css(\"transition-duration\",\"0.5s\").css(\"transform\",\"translateY(-42px)\");\n\t\t\t\t$(\"span:last-child\",info).css(\"transition-duration\",\"0.5s\").css(\"transform\",\"translateY(-42px)\");\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\"span:last-child\",info).prependTo(info);\n\t\t\t\t\t$(\"span:first-child\",info).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateY(0px)\");\n\t\t\t\t\t$(\"span:last-child\",info).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateY(0px)\");\n\t\t\t\t},500);\n\t\t\t}\n\t\t});\n\t\t\t\n\t\tsetTimeout(rotateInfo,7000);\n\t}\n\tsetTimeout(rotateInfo,7000);\n});\nfunction closeDestinationScreen() {\n\t$(\".remove\").animate({ opacity: 0},200);\n\t$(\".search_1 .people\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\tsetTimeout(function() {\n\t\t$(\".search_1 .background\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t},100);\n\tsetTimeout(function() {\n\t\t$(\".search_1\").animate({ opacity: 0},300);\n\t},300);\n\tsetTimeout(function() {\n\t\t$(\".search_station\").animate({ opacity: 0},300);\n\t},600);\n\tsetTimeout(function() {\n\t\t$(\".search_station\").css(\"display\",\"none\");\n\t},900);\n}\nfunction closeHomeScreen() {\n\t$(\".cards\").removeClass(\"active\");\n\t$(\".screen.home .top\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-500px)\").css(\"opacity\",0);\n\t$(\".screen.home .bottom\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(500px)\").css(\"opacity\",0);\n\tsetTimeout(function() {\n\t\t$(\".screen.home\").css(\"display\",\"none\");\n\t},1200);\n}\nfirst=true;\nfunction enterHomeScreen(delay) {\n\t$(\".screen.home .opacityZero\").each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t},(i*270)+500,e);\n\t});\n\tif (typeof delay == \"undefined\") delay=1200;\n\tsetTimeout(function() {\n\t\t$(\".screen.home\").css(\"opacity\",0).css(\"display\",\"block\").animate({ opacity: 1},300);\n\t\tsetTimeout(function() {\n\t\t\t$(\".cards\").addClass(\"active\");\n\t\t},500);\n\t\tif (first) {\n\t\t\tclock_slider.Init($(\".clock_slider\").eq(0),0);\n\t\t\tfirst = false;\n\t\t}\n\t},(delay));\n}\nfunction enterJourneyScreen() {\n\t$(\".journey .opacityZero\").each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t},(i*270)+500,e);\n\t});\n\t$(\".journey\").css(\"display\",\"block\").animate({ opacity: 1},300).addClass(\"active\");\n\t$(\".journey ul li:nth-child(4)\").addClass(\"travel\");\n\t$(\".journey ul .current_status\").addClass(\"travel\");\n\t$(\".journey .date\").bind(\"click\",function() {\n\t\tcloseJourneyScreen();\n\t\tenterHomeScreen(0);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.home .top\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\"cubic-bezier(0,.91,.12,.99)\");\n\t\t\t$(\".screen.home .bottom\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\"cubic-bezier(0,.91,.12,.99)\");\n\t\t},100);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.home .top\").css(\"transform\",\"translateY(0)\").css(\"opacity\",1);\n\t\t\t$(\".screen.home .bottom\").css(\"transform\",\"translateY(0)\").css(\"opacity\",1);\n\t\t},110);\n\t\t// clock_slider.Init($(\".clock_slider\").eq(1),1);\n\t\n\t});\n}\nfunction closeJourneyScreen() {\n\t$(\".travel\").removeClass(\"travel\");\n\t$(\".journey\").css(\"opacity\",0);\n\tsetTimeout(function() {\n\t\t$(\".journey\").css(\"display\",\"none\");\n\t},300);\n}\nfunction stepAnimate(container) {\n\t$(\".opacityZero\",$(container)).each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t},(i*270)+500,e);\n\t});\n}","$(function() {\n\t$(\".card\").bind(\"touchstart\",function(e) {\n\t\t$card=$(e.target);\n\t\tif ($card.hasClass(\"message_1\")) {\n\t\t\tactivateDelay();\n\t\t} else {\n\t\t\tif ($(this).parent().hasClass(\"open\")) {\n\t\t\t\t$(this).parent().removeClass(\"open\");\n\t\t\t} else {\n\t\t\t\t$(this).parent().addClass(\"open\");\n\t\t\t}\n\t\t}\n\t});\n\tfunction activateDelay() {\n\t\t$($card).fadeOut();\n\t\t$(\".message_2\").fadeIn();\n\t\t\n\t\t$(\".card img\").attr(\"src\",\"img/gfx_hand.svg\");\n\t\tvar activeBucket = clock_slider.activeBucket();\n\t\tvar time_str = ($(\".bottomslider span.time\").eq(activeBucket).html());\n\t\tvar time = time_str.split(\":\");\n\t\tvar h = parseInt(time[0]);\n\t\tvar m = parseInt(time[1]);\n\t\tm+=22;\n\t\tif (m>=60) {\n\t\t\tm-=60;\n\t\t\th+=1;\n\t\t}\n\t\t$(\".info\").animate({opacity:0}, 00);\n\n\t\tvar delaydepart = '<span class=\"delay\">Running behind</span>';\n\t\tvar delayarrive = '<span class=\"platform\">Platform 12</span><span class=\"delay\">Exp '+pad(h,2)+':'+pad(m,2)+'</span>';\n\t\t$(\".info.depart\").html(delaydepart);\n\t\t$(\".info.arrive\").html(delayarrive);\n\t\t$(\".info\").animate({opacity:1},200);\n\t}\n});","var currentTime;\n\n\tvar clock_slider = function() {\n\t\tvar activeBucket = 0;\n\t\tvar entryTouchPoint = new Object();\n\t\tvar entryTouchTime;\n\t\tvar exitTouchPoint = new Object();\n\t\tvar pixelsMoved = 0;\n\t\tvar swipeDetectionPixelAmount = 60;\n\t\tvar firstMove = true;\n\t\tvar touchTimeout;\n\t\tvar scrollMuch = 0;\n\t\tvar windowWidth = $(window).width();\n\t\tvar initBucket;\n\t\t\n\t\tfunction activateBucket(no, speed, elm, init) {\n\t\t\tvar delaydepart, delayarrive;\n\t\t\tactiveBucket=no;\n\t\t\t$bucket = $(\".options time\",$(\".clock_slider\").eq(0)).eq(activeBucket);\n\t\t\tvar delay=$bucket.attr(\"data-message\");\n\t\t\tvar time = $bucket.attr(\"datetime\")+\" \";\n\t\t\tvar time = time.trim().replace(\" \",\"T\");\n\t\t\tvar time = new Date(time);\n\t\t\tvar now = new Date();\n\t\t\ttime.setHours(time.getHours() - 1);\n\t\t\t$(\".journey .plan li\").each(function(i,e) {\n\t\t\t\tvar targetTime = new Date(time.getTime() + (parseInt($(this).attr(\"data-distance\"))*60000));\n\t\t\t\tvar timeString = pad(targetTime.getHours(),2) + \":\" +pad(targetTime.getMinutes(),2);\n\t\t\t\t\n\t\t\t\tif (i<4 && now>time) {\n\t\t\t\t\t$(this).addClass(\"passed\");\n\t\t\t\t} else {\n\t\t\t\t\t$(this).removeClass(\"passed\");\n\t\t\t\t}\n\t\t\t\t$(\"strong\",$(this)).html(timeString);\n\t\t\t});\n\t\t\tif (now>time) {\n\t\t\t\t$(\".current_status\").css(\"display\",\"block\");\n\t\t\t} else {\n\t\t\t\t$(\".current_status\").css(\"display\",\"none\");\n\t\t\t}\n\t\t\tvar now = new Date();\n\t\t\tif (no<initBucket) {\n\t\t\t\tdelaydepart = '<span class=\"journey_link\">Running on time</span>';\n\t\t\t\tdelayarrive = '<span class=\"platform\">Platform 12: Train to Waterlooo</span><span class=\"delay\">Exp on time</span>';\n\t\t\t} else if (no==initBucket) {\n\t\t\t\tdelaydepart = '<span class=\"platform\">Platform 5: Train to Waterloo</span><span class=\"delay\">Exp on time</span>';\n\t\t\t\tdelayarrive = '<span class=\"delay\">Exp on time</span>';\n\t\t\t} else {\n\t\t\t\tdelaydepart = '<span class=\"delay\">Exp on time</span>';\n\t\t\t \tdelayarrive = '<span class=\"delay\">Exp on time</span>';\n\t\t\t}\n\t\t\tif (!speed) {\n\t\t\t\t$(\".options\",elm).css(\"transition\",\"all 0s cubic-bezier(.6,.0,.4,1)\");\n\t\t\t} else {\n\t\t\t\tif (speed>.7) speed=.7;\n\t\t\t\t$(\".options\",elm).css(\"transition\",\"all \"+speed+\"s ease-out\");\n\t\t\t}\n\n\t\t\tvar targetX =  0-(no*$(\".clock_slider .options time\").width());\n\t\t\t$(\".options\",elm).css(\"transform\",\"translateX(\"+(targetX+(windowWidth/2-($(\"time.bucket\").width()/2)))+\"px)\");\n\t\t\t$(\".info\").animate({opacity:0}, 200);\n\t\t\tsetTimeout(function(delay) {\n\t\t\t\tif (delay) {\n\t\t\t\t\t$(\".info.depart\").html(delaydepart);\n\t\t\t\t\t$(\".info.arrive\").html(delayarrive);\n\t\t\t\t} else {\n\t\t\t\t\t$(\".info.depart\").html(delaydepart);\n\t\t\t\t\t$(\".info.arrive\").html(delayarrive);\n\t\t\t\t}\n\t\t\t\t$(\".info\").animate({opacity:1},200);\n\t\t\t},350,delay);\n\t\t}\n\n\t\t\n\t\tfunction touchstartHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tscrollBucket = clock_slider;\n\t\t\t$(\".clock_slider\").removeClass(\"active\");\n\t\t\tclock_slider.addClass(\"active\");\n\t\t\tscrollMuch = scrollBucket.scrollTop;\n\t\t\tpixelsMoved=0;\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\t\t\t$(\".options\",clock_slider).bind(\"touchend\",touchendHandler);\n\t\t\t$(\".options\",clock_slider).bind(\"touchmove\",touchmoveHandler);\n\t\t\tvar matrix=$(\".options\",clock_slider).css(\"transform\").toString().replace(\"matrix(\",\"\").replace(\")\",\"\").split(\",\");\n\t\t\tentryTouchPoint.touchOffsetX = (parseInt(matrix[4].trim())); \n\t\t\tentryTouchPoint.x = e.originalEvent.touches[0].clientX;\n\t\t\tentryTouchTime = new Date().getTime();\n\n\t\t}\n\t\tfunction possiblyUnbind(e) {\n\t\t\tcurrentBucket = findScrollingBucket(e.target);\n\t\t\tcurrentScroll = currentBucket.scrollTop;\n\t\t\tif (currentScroll-scrollMuch>20) {\n\t\t\t\tunbindSwipeHandlers(e);\n\t\t\t}\n\t\t}\n\t\tfunction findScrollingBucket(obj) {\n\t\t\tif ($(obj).hasClass(\"bucket\")) {\n\t\t\t\treturn obj;\n\t\t\t} else {\n\t\t\t\treturn findScrollingBucket(obj.parentNode);\n\t\t\t}\n\t\t}\n\t\tfunction touchmoveHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tclearTimeout(touchTimeout);\n\t\t\t\n\t\t\tvar matrix=$(\".options\", clock_slider).css(\"transform\").toString().replace(\"matrix(\",\"\").replace(\")\",\"\").split(\",\");\n\t\t\texitTouchPoint.x = e.originalEvent.touches[0].clientX;\n\t\t\texitTouchPoint.touchOffsetX = parseInt(matrix[4].trim()); \n\n\t\t\tpixelsMoved = entryTouchPoint.x - exitTouchPoint.x;\n\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\t\t\t\n\t\t\t\n\t\t\tvar targetX = ((entryTouchPoint.x - exitTouchPoint.x)-entryTouchPoint.touchOffsetX)*-1;\n\t\t\t$(\".options\",clock_slider).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateX(\"+targetX+\"px)\");\n\n\t\t}\n\t\tfunction touchendHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tclearTimeout(touchTimeout);\n\t\t\t$(\".options\",clock_slider).css(\"transition-duration\",\"0.4s\").unbind(\"touchmove\",touchmoveHandler).unbind(\"touchend\",touchendHandler);\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\t\t\t\n\t\t\tvar destination = (entryTouchPoint.x - exitTouchPoint.x);\n\n\t\t\tvar closestBucket = Math.round((destination/$(\".options time\",clock_slider).width()));\n\n\t\t\tclosestBucket = activeBucket + closestBucket;\n\t\t\tif (closestBucket<0) closestBucket = 0;\n\t\t\t\n\t\t\tvar animationTime = Math.abs(timeSinceTouchstart/pixelsMoved);\n\t\t\tif (animationTime<0.2) {\n\t\t\t\tanimationTime=0.2;\n\t\t\t}\n\t\t\tactivateBucket(closestBucket,animationTime);\n\t\t}\n\t\tfunction unbindSwipeHandlers(e) {\n\t\t\t$(\".clock_slider .options\").unbind(\"touchmove\",touchmoveHandler);\n\t\t\t$(\".clock_slider .options\").unbind(\"touchend\",touchendHandler);\n\t\t\t$(\".bucket\").unbind(\"scroll\",unbindSwipeHandlers);\n\t\t}\n\t\tfunction findCurrentTime(elm) {\n\t\t\tvar d = new Date();\n\t\t\tvar h = d.getHours();\n\t\t\tvar m = d.getMinutes();\n\n\t\t\tm_rounded = 5 * Math.ceil(m/5);\n\t\t\tif (m_rounded==60) {\n\t\t\t\tm_rounded=0;\n\t\t\t\th+=1;\n\t\t\t}\n\t\t\tm_rounded+=5;\n\t\t\tvar currentTime = pad(h,2)+\":\"+pad(m_rounded,2);\n\t\t\tvar activeChild=0;\n\t\t\t$(\".options time span\",$(elm)).each(function(i,e) {\n\t\t\t\tthisHour=parseInt($(this).html().substring(0,2));\n\t\t\t\tthisMinute=parseInt($(this).html().substring(3,5));\n\n\t\t\t\tif ((thisHour==h && thisMinute>=m_rounded) || thisHour>h) {\n\t\t\t\t\tactiveChild = i;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn activeChild;\n\t\t}\n\t\t\n\t\t\n\t\tNumber.prototype.map = function (in_min, in_max, out_min, out_max) {\n\t\t  return (this - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n\t\t}\n\t\tfunction scaleAccordingToCenterPos(obj) {\n\t\t\ttry {\n\t\t\t\tvar elm = document.querySelector(obj);\n\t\t\t\tvar center = document.elementFromPoint(windowWidth/2,elm.getBoundingClientRect().top+5).parentNode;\n\t\t\t\tif (typeof center!=\"undefined\") {\n\t\t\t\t\tif (center.tagName==\"TIME\") {\n\t\t\t\t\t\tvar objects = new Array();\n\t\t\t\t\t\tobjects.push(center);\n\t\t\t\t\t\tobjects.push(center.parentNode.previousSibling.firstChild);\n\t\t\t\t\t\tobjects.push(center.parentNode.nextSibling.firstChild);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfunction getDistanceFromCenter(obj) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar returnValue =Math.abs((windowWidth/2)- (obj.getBoundingClientRect().left + obj.getBoundingClientRect().width/2));\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn returnValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (object in objects) {\n\t\t\t\t\t\t\tif (objects[object]!=\"undefined\") {\n\t\t\t\t\t\t\t\tcenterMeasure = getDistanceFromCenter(objects[object])*-1;\n\n\t\t\t\t\t\t\t\tif (centerMeasure!=elm.centerMeasure) {\n\t\t\t\t\t\t\t\t\tspanTime=objects[object].firstChild;\n\n\n\t\t\t\t\t\t\t\t\tobjects[object].centerMeasure = centerMeasure;\n\t\t\t\t\t\t\t\t\tcenterScale = Math.abs(centerMeasure.map(-100,0,1,1.6));\n\t\t\t\t\t\t\t\t\tcenterOpacity = centerMeasure.map(-180,0,.3,1);\n\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (spanTime.getAttribute(\"data-centerscale\")!=centerScale) {\n\t\t\t\t\t\t\t\t\t\tif (centerScale<1) centerScale=1;\n\t\t\t\t\t\t\t\t\t\tspanTime.setAttribute(\"data-centerscale\",centerScale);\n\t\t\t\t\t\t\t\t\t\t$(spanTime).css(\"transform\",\"scale(\"+centerScale+\",\"+centerScale+\")\").css(\"opacity\",centerOpacity);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t\t\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tdraw: function() {\n\t\t\t\tscaleAccordingToCenterPos(\".topslider\");\n\t\t\t\tscaleAccordingToCenterPos(\".bottomslider\");\n\t\t\t\tsetTimeout(clock_slider.draw,10);\n\t\t\t\t// window.requestAnimationFrame(clock_slider.draw);\n\t\t\t},\n\t\t\tInit: function(elm,no) {\n\t\t\t\tvar startBucket = findCurrentTime(elm);\n\t\t\t\tinitBucket = startBucket;\n\t\t\t\t$(\".options\",$(\".clock_slider\")).bind(\"touchstart\",touchstartHandler);\n\t\t\t\tactivateBucket(startBucket,false, $(\".clock_slider\").eq(0));\n\t\t\t\tactivateBucket(startBucket,false, $(\".clock_slider\").eq(1));\n\t\t\t\t$(\".clock_slider\").each(function() {\n\t\t\t\t\t$(this)[0].fromTop = $(this).offset().top;\n\t\t\t\t});\n\t\t\t},\n\t\t\tactiveBucket: function() {\n\t\t\t\treturn activeBucket;\n\t\t\t}\n\t\t}\n\t\t\n\t}();\n$(document).ready(function($) {\n\tsetTimeout(function() { clock_slider.draw(); },200);\n\tdocument.body.ontouchstart = function(e){\n\t\t$source = $(e.target);\n\t\tvar source = e.target;\n\t\tif (source.tagName!=\"INPUT\" && source.tagName!=\"BUTTON\" && source.tagName!=\"A\" && !$source.hasClass(\"clickaction\") && !$source.hasClass(\"link_arrow\")) e.preventDefault(); \n\t}\n});\nfunction pad(n, width, z) {\n\t\t\tz = z || '0';\n\t\t\tn = n + '';\n\t\t\treturn n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n\t\t}","var keyboardTimeout;\nvar searchTimeout;\n$(function() {\n  var test = document.createElement(\"div\");\n  test.id=\"fontTest\";\n  test.style.width=\"calc(100% - 60px)\";\n  test.style.height=\"100px\";\n  test.style.whiteSpace=\"nowrap\";\n  test.innerHTML=\"<span></span>\";\n  document.body.appendChild(test);\n  // $(\"input.station\").bind(\"touchstart\",function() { $(this).focus(); });\n  $(test).css(\"-webkit-transform\",\"translateY(-3000px)\");\n  $(test).textfill({\n     maxFontPixels: 80\n  });\n  $(\"input.station\").bind(\"keyup\",update);\n  function update(e) {\n    clearTimeout(keyboardTimeout);\n    var value = $(\"input.station\").val();\n    if (value==\"\") value=\"a\";\n    $(\"#fontTest\").html(\"<span>\"+value+\"_</span>\");\n    $(\"#fontTest\").delay(20).textfill({\n       maxFontPixels: 80\n    });\n    $(\"input.station\").css(\"font-size\",$(\"#fontTest span\").css(\"font-size\"));\n    stationSearch(value);\n  }\n  function stationSearch(value) {\n    $(\"ul.list\").html(\"<li><span class=\\\"searching\\\"></span></li>\");\n    clearTimeout(searchTimeout);\n    searchTimeout = setTimeout(function() {\n      $(\"ul.list\").css(\"opacity\",0).html('<li style=\"opacity:0\" class=\"clickaction\">Vauxhall</li><li style=\"opacity:0\" class=\"remove\" class=\"clickaction\">Waterloo</li>');\n      $(\"ul.list\").animate({ opacity: 1 },300);\n      $(\"ul.list li\").each(function(i,e) {\n        setTimeout(function(obj) {\n          $(obj).animate({ opacity: 1 },300);\n        },i*200+200,e);\n      }).bind(\"click\",function() {\n        closeDestinationScreen();\n        enterHomeScreen();\n      });\n    }, 1000);\n    keyboardTimeout = setTimeout(removeKeyboardFocus,1500);\n  }\n  function removeKeyboardFocus() {\n    $(\"input.station\").blur();\n  }\n});\n","(function ($, window, document) {\n  \"use strict\";\n  // This code is only for iOS\n  if (!window.navigator.userAgent.match(/(iPhone|iPad|iPod)/)) {\n    return;\n  }\n\n  var CONFIG = {\n    TOUCH_MOVE_THRESHHOLD: 10,\n    PRESSED_CLASS: \"pressed\",\n    GHOST_CLICK_TIMEOUT: 500,\n    GHOST_CLICK_THRESHOLD: 10\n  }, clicks = [];\n\n  function withinDistance(x1, y1, x2, y2, distance) {\n    return Math.abs(x1 - x2) < distance && Math.abs(y1 - y2) < distance;\n  }\n\n  // Use a native event listener so we can set useCapture\n  document.addEventListener('click', function (e) {\n    for (var i = 0; i < clicks.length; i++) {\n      // For some reason, the ghost click events don't always appear where the touchend event was\n      if (withinDistance(clicks[i][0], clicks[i][1], e.clientX, e.clientY,\n        CONFIG.GHOST_CLICK_THRESHOLD)) {\n        e.preventDefault();\n        e.stopPropagation();\n        return;\n      }\n    }\n  }, true);\n\n  $(document).on('touchstart', '.no_delay_button', function (e) {\n    var elem = $(this);\n\n    // Disable the webkit tap highlight, since it is no longer accurate\n    elem.css('webkitTapHighlightColor', 'rgba(0,0,0,0)');\n\n    elem.addClass(CONFIG.PRESSED_CLASS);\n\n    var touch = e.originalEvent.touches[0];\n    var location = [touch.clientX, touch.clientY];\n    this.__eventLocation = location;\n\n    this.__onTouchMove = function (e) {\n      var touch = e.originalEvent.touches[0];\n      if (withinDistance(touch.clientX, touch.clientY, location[0], location[1],\n        CONFIG.TOUCH_MOVE_THRESHHOLD)) {\n        elem.addClass(CONFIG.PRESSED_CLASS);\n      } else {\n        elem.removeClass(CONFIG.PRESSED_CLASS);\n      }\n    };\n\n    $(document.body).on('touchmove', this.__onTouchMove);\n  });\n\n  $(document).on('touchcancel', '.no_delay_button', function () {\n    var elem = $(this);\n    elem.removeClass(CONFIG.PRESSED_CLASS);\n    $(document.body).off('touchmove', this.__onTouchMove);\n  });\n\n  $(document).on('touchend', '.no_delay_button', function (e) {\n    var elem = $(this);\n    if (elem.hasClass(CONFIG.PRESSED_CLASS)) {\n      elem.removeClass(CONFIG.PRESSED_CLASS);\n      var location = this.__eventLocation;\n      if (location) {\n        var touch = e.originalEvent.changedTouches[0];\n        if (!withinDistance(touch.clientX, touch.clientY, location[0], location[1],\n          CONFIG.TOUCH_MOVE_THRESHHOLD)) {\n          return;\n        }\n        // Dispatch a fake click event within a setTimeout. If we don't do this, there's a strange bug where\n        // the next view can't correctly bring the keyboard up\n        setTimeout(function() {\n          var evt = document.createEvent(\"MouseEvents\");\n          evt.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n          elem.get(0).dispatchEvent(evt);\n        }, 1);\n\n        // Don't process the default action for this event to avoid WebKit stealing focus from a\n        // view we might be loading, and from dispatching a click event\n        e.preventDefault();\n\n        // Eat further \"ghost\" click events at this location that appear if the user holds the link down\n        // longer than the double-tap cancel threshold (these are not cancelled when preventing default)\n        var clickLocation = [touch.clientX, touch.clientY];\n        clicks.push(clickLocation);\n        window.setTimeout(function() {\n          var i = clicks.indexOf(clickLocation);\n          if (i >= 0) {\n            clicks.splice(i, 1);\n          }\n        }, CONFIG.GHOST_CLICK_TIMEOUT);\n      }\n    }\n\n    $(document.body).off('touchmove', this.__onTouchMove);\n  });\n\n})(jQuery, window, document);"],"sourceRoot":"/source/"}