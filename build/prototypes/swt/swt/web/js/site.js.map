{"version":3,"sources":["ScrollToPlugin.js","animations.js","bootstrap-datepicker.js","cards.js","clock_slider.js","forms.js","jquery.noclickdelay.js","location.js","schedule.js","travellers.js"],"names":["window","_gsQueue","push","_gsDefine","TweenPlugin","ScrollToPlugin","props","priority","call","this","_overwriteProps","pop","p","prototype","_getX","pageXOffset","document","documentElement","scrollLeft","body","_getY","pageYOffset","scrollTop","_setRatio","setRatio","constructor","API","_onInitTween","target","value","tween","_wdw","_target","y","Number","x","_addTween","skipX","skipY","_kill","lookup","scrollTo_x","v","scrollTo","activate","enterLocating","$","removeClass","css","addClass","stepAnimate","setTimeout","filter","enterHomeScreen","closeDestinationScreen","animate","opacity","closeHomeScreen","delay","console","log","lastActiveScreen","each","i","e","first","clock_slider","Init","eq","enterJourneyScreen","attr","obj","scrollHeight","height","unbind","bind","Date","getTime","closeJourneyScreen","closeWhatEver","initiateScreen","location","href","container","stepAnimateFast","enterPlanning","enterSchedule","schedule","sizeUp","closeSchedule","rotateInfo","info","length","prependTo","time","factory","define","amd","exports","require","jQuery","undefined","UTCDate","UTC","apply","arguments","UTCToday","today","getFullYear","getMonth","getDate","isUTCEquals","date1","date2","getUTCFullYear","getUTCMonth","getUTCDate","alias","method","isValidDate","d","isNaN","opts_from_el","el","prefix","re_lower","_","a","toLowerCase","inkey","data","out","replace","RegExp","key","test","opts_from_locale","lang","dates","split","locale_opts","k","DateArray","extras","get","slice","contains","val","valueOf","l","remove","splice","new_array","isArray","clear","copy","extend","Datepicker","element","options","_process_options","viewDate","o","defaultViewDate","focusDate","isInline","isInput","is","component","hasClass","find","hasInput","picker","DPGlobal","template","_buildEvents","_attachEvents","appendTo","rtl","viewMode","startView","calendarWeeks","parseInt","_allow_update","setStartDate","_o","startDate","setEndDate","endDate","setDaysOfWeekDisabled","daysOfWeekDisabled","setDaysOfWeekHighlighted","daysOfWeekHighlighted","setDatesDisabled","datesDisabled","fillDow","fillMonths","update","showMode","show","opts","language","defaults","minViewMode","maxViewMode","Math","min","max","multidate","multidateSeparator","String","weekStart","weekEnd","format","parseFormat","Infinity","_local_to_utc","_zero_time","parseDate","map","plc","orientation","_plc","grep","word","year","month","day","showOnFocus","zIndexOffset","_events","_secondaryEvents","_applyEvents","evs","ch","ev","on","_unapplyEvents","off","events","keyup","proxy","inArray","keyCode","keydown","paste","focus","click","blur","_focused_from","immediateUpdates","changeYear changeMonth","date","resize","place","mousedown","hide","_detachEvents","_attachSecondaryEvents","_detachSecondaryEvents","_trigger","event","altdate","local_date","_utc_to_local","trigger","type","ix","formatDate","enableOnReadonly","navigator","msMaxTouchPoints","disableTouchKeyboard","detach","forceParse","setValue","datepicker","evt","dateString","originalEvent","clipboardData","types","getData","setDate","preventDefault","utc","getTimezoneOffset","local","_zero_utc_time","getDates","getUTCDates","selected_date","clearDates","autoclose","setDates","args","setUTCDates","setUTCDate","formatted","getFormattedDate","join","updateNavArrows","calendarWidth","outerWidth","calendarHeight","outerHeight","visualPadding","windowWidth","width","appendOffset","offset","parentsZindex","parents","itemZIndex","zIndex","parent","left","top","top_overflow","yorient","right","oldDates","fromArgs","fill","change","dowCnt","html","daysMin","append","monthsShort","setRange","range","getClassNames","cls","todayHighlight","getUTCDay","tooltip","startYear","startMonth","endYear","endMonth","todaytxt","cleartxt","titleFormat","text","toggle","todayBtn","clearBtn","title","prevMonth","getDaysInMonth","nextMonth","setUTCFullYear","clsName","ws","th","yth","calWeek","beforeShowDay","noop","before","enabled","classes","concat","unique","empty","months","end","beforeShowMonth","that","moDate","yearCont","years","beforeShowYear","yrBefore","visibility","stopPropagation","closest","nodeName","className","dir","modes","navStep","moveMonth","moveYear","which","_setDate","index","setUTCMonth","_toggle_multidate","toggleActive","new_month","new_date","mag","abs","dateWithinRange","newDate","newViewDate","dateChanged","keyboardNavigation","ctrlKey","shiftKey","cancelBubble","children","DateRangePicker","inputs","jquery","datepickerPlugin","dateUpdated","pickers","updateDates","updateRanges","updating","dp","j","old","fn","option","Array","shift","internal_return","$this","elopts","xopts","locopts","ropts","toArray","Error","Constructor","en","days","daysShort","navFnc","isLeapYear","validParts","nonpunctuation","toValue","toDisplay","separators","parts","match","match_part","m","part","part_re","exec","filtered","parsed","setters_order","setters_map","yyyy","yy","fparts","cnt","_date","s","D","DD","M","MM","toString","substring","dd","mm","seps","headTemplate","contTemplate","footTemplate","noConflict","version","touchstartHandler","touchendHandler","touchY","changedTouches","clientY","thisY","activateDelay","$card","fadeOut","fadeIn","activeBucket","time_str","h","delaydepart","delayarrive","pad","parentHasClass","elm","indexOf","parentNode","n","z","currentTime","activateBucket","no","speed","init","$bucket","trim","now","setHours","getHours","targetTime","timeString","getMinutes","initBucket","targetX","scrollBucket","scrollMuch","pixelsMoved","entryTouchTime","touchmoveHandler","matrix","entryTouchPoint","touchOffsetX","touches","clientX","clearTimeout","touchTimeout","exitTouchPoint","timeSinceTouchstart","destination","closestBucket","round","animationTime","findCurrentTime","m_rounded","ceil","activeChild","thisHour","thisMinute","scaleAccordingToCenterPos","getDistanceFromCenter","returnValue","getBoundingClientRect","querySelector","center","elementFromPoint","tagName","objects","previousSibling","firstChild","nextSibling","object","centerMeasure","spanTime","centerScale","centerOpacity","getAttribute","setAttribute","Object","in_min","in_max","out_min","out_max","draw","startBucket","fromTop","ontouchstart","$source","source","keyboardTimeout","searchTimeout","textfill","maxFontPixels","stationSearch","removeKeyboardFocus","setFormattedDate","minDate","setMinutes","timezoneOffset","daySelected","compareDate","getElementById","next","getYear","padDigits","number","digits","createElement","id","style","whiteSpace","innerHTML","position","appendChild","innerHeight","prop","withinDistance","x1","y1","x2","y2","distance","userAgent","CONFIG","TOUCH_MOVE_THRESHHOLD","PRESSED_CLASS","GHOST_CLICK_TIMEOUT","GHOST_CLICK_THRESHOLD","clicks","addEventListener","elem","touch","__eventLocation","__onTouchMove","createEvent","initMouseEvent","dispatchEvent","clickLocation","locationHandler","getCurrentLocation","geolocation","getCurrentPosition","showPosition","userPosition","getLocation","resizeHandler","windowHeight","extraHeaderHeight","headerMinHeight","scrollAnimation","TweenMax","to","ease","Power2","easeInOut","headerHeight","scheduleStepHandler","activeClass","currentStep","nextStep","siblings","last","ticket","prev","price","kill","history","back","travellers","control","adultLabel","category","totalAmount","adultCharacters","adultCounter","prepend","childCharacters","childCounter","adults","childrenLabel","priceAdults","priceChildren","scrollHandler","scrollPoint","showRailcards","tempTo"],"mappings":"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","file":"site.js","sourcesContent":["/**\r\n * VERSION: beta 1.30\r\n * DATE: 2012-07-25\r\n * JavaScript\r\n * UPDATES AND DOCS AT: http://www.greensock.com\r\n *\r\n * Copyright (c) 2008-2012, GreenSock. All rights reserved. \r\n * This work is subject to the terms in http://www.greensock.com/terms_of_use.html or for \r\n * corporate Club GreenSock members, the software agreement that was issued with the corporate \r\n * membership.\r\n * \r\n * @author: Jack Doyle, jack@greensock.com\r\n **/\r\n(window._gsQueue || (window._gsQueue = [])).push( function() {\r\n\r\n\t_gsDefine(\"plugins.ScrollToPlugin\", [\"plugins.TweenPlugin\"], function(TweenPlugin) {\r\n\t\t\r\n\t\tvar ScrollToPlugin = function(props, priority) {\r\n\t\t\t\tTweenPlugin.call(this, \"scrollTo\");\r\n\t\t\t\tthis._overwriteProps.pop();\r\n\t\t\t},\r\n\t\t\tp = ScrollToPlugin.prototype = new TweenPlugin(\"scrollTo\"),\r\n\t\t\t_getX = function() {\r\n\t\t\t\treturn (window.pageXOffset != null) ? window.pageXOffset : (document.documentElement.scrollLeft != null) ? document.documentElement.scrollLeft : document.body.scrollLeft;\r\n\t\t\t}, \r\n\t\t\t_getY = function() {\r\n\t\t\t\treturn (window.pageYOffset != null) ? window.pageYOffset : (document.documentElement.scrollTop != null) ? document.documentElement.scrollTop : document.body.scrollTop;\r\n\t\t\t},\r\n\t\t\t_setRatio = TweenPlugin.prototype.setRatio; //speed optimization (quicker lookup)\r\n\t\t\r\n\t\tp.constructor = ScrollToPlugin;\r\n\t\tScrollToPlugin.API = 2;\r\n\t\t\r\n\t\tp._onInitTween = function(target, value, tween) {\r\n\t\t\tthis._wdw = (target == window);\r\n\t\t\tthis._target = target;\r\n\t\t\tif (typeof(value) !== \"object\") {\r\n\t\t\t\tvalue = {y:Number(value)}; //if we don't receive an object as the parameter, assume the user intends \"y\".\r\n\t\t\t}\r\n\t\t\tthis.x = this._wdw ? _getX() : target.scrollLeft;\r\n\t\t\tthis.y = this._wdw ? _getY() : target.scrollTop;\r\n\t\t\tif (value.x != null) {\r\n\t\t\t\tthis._addTween(this, \"x\", this.x, value.x, \"scrollTo_x\", true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.skipX = true;\r\n\t\t\t}\r\n\t\t\tif (value.y != null) {\r\n\t\t\t\tthis._addTween(this, \"y\", this.y, value.y, \"scrollTo_y\", true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.skipY = true;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\t\r\n\t\tp._kill = function(lookup) {\r\n\t\t\tif (lookup.scrollTo_x) {\r\n\t\t\t\tthis.skipX = true;\r\n\t\t\t}\r\n\t\t\tif (lookup.scrollTo_x) {\r\n\t\t\t\tthis.skipY = true;\r\n\t\t\t}\r\n\t\t\treturn TweenPlugin.prototype._kill.call(this, lookup);\r\n\t\t}\r\n\t\t\r\n\t\tp.setRatio = function(v) {\r\n\t\t\t_setRatio.call(this, v);\r\n\t\t\tif (this._wdw) {\r\n\t\t\t\twindow.scrollTo((!this.skipX) ? this.x : _getX(), (!this.skipY) ? this.y : _getY());\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.skipY) {\r\n\t\t\t\t\tthis._target.scrollTop = this.y;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.skipX) {\r\n\t\t\t\t\tthis._target.scrollLeft = this.x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tTweenPlugin.activate([ScrollToPlugin]);\r\n\t\t\r\n\t\treturn ScrollToPlugin;\r\n\t\t\r\n\t}, true);\r\n\r\n}); if (window._gsDefine) { _gsQueue.pop()(); }","var lastActiveScreen = \"home\";\n$(function() {\n\t // enterSplash();\n\t // enterPlanning();\n\t // enterSchedule();\n\t // enterHomeScreen();\n\t  $(\".controls\").css(\"opacity\",1);\n\t// $(\".schedule_container\").addClass(\"step3\");\n\t // enterLocating();\n\t$(\".burger\").bind(\"touchstart mousedown\",function() {\n\t\tvar time = new Date().getTime();\n\t\t$(this).attr(\"data-started\",time);\n\t\t// console.log(\"hey\",$(this).attr(\"data-started\"));\n\t})\n\t$(\".burger\").bind(\"click\",function() {\n\t\tvar time = new Date().getTime();\n\t\t\n\t\t\tcloseWhatEver();\n\t\t\tsetTimeout(enterHomeScreen,300);\n\t\t\n\t});\n\n\t  // enterDestinationScreen();\n\n\tstepAnimate(\".home\");\n\tfunction closePlanning() {\n\n\t}\n\tfunction enterSplash() {\n\t\t$(\".screen\").removeClass(\"active\");\n\t\t$(\".splash.screen\").css(\"display\",\"block\").css(\"opacity\",1).addClass(\"active\");\n\t\tstepAnimate(\".splash.screen\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".splash\").css(\"opacity\",0);\n\t\t},4000);\n\t\tsetTimeout(function() {\n\t\t\tenterLocating();\n\t\t},4400);\n\t}\n\t\n\tfunction loadIntro() {\n\t\t$(\".screen\").removeClass(\"active\");\n\t\t$(\".station_info\").css(\"display\",\"block\").addClass(\"active\");\n\t\t$(\".locating\").css(\"display\",\"none\");\n\t\t\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .gfx\").css(\"transform\",\"translateY(0)\");\n\t\t},300);\n\t\tsetTimeout(function() {\n\t\t\t$(\".controls\").css(\"opacity\",1);\n\t\t},500);\n\t\t$(\".station_info .opacityZero\").each(function(i, e) {\n\t\t\tsetTimeout(function(obj) {\n\t\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t\t},(i*270)+500,e);\n\t\t});\n\t\t$(\".intro .gfx\").css(\"display\",\"block\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .gfx\").css(\"opacity\",1);\n\t\t},100);\n\n\t\n\t\t$(\".choose_destination\").click(function() {\n\t\t\t$(\".screen.search_station input.station\").focus();\n\t\t\n\t\t\t$(\".choose_destination\").css(\"transition\",\"all 0.7s cubic-bezier(.85,.01,.99,.38)\");\n\t\t\t$(\".choose_destination\").addClass(\"disappear\");\n\t\t\t\n\t\t\thideMainBackground();\n\t\t\tsetTimeout(function() {\n\t\t\t\tenterDestinationScreen();\n\t\t\t},700);\n\t\t});\n\t}\n\tfunction hideMainBackground() {\n\t\t$(\".intro .people\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .background\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t\t},100);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.station_info\").animate({ opacity: 0},300).css(\"pointer-events\",\"none\");\n\t\t},600);\n\t\t$(\".station_info .date\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-300px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".station_info .station\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-300px)\");\n\t\t},100);\n\t}\n\tfunction enterDestinationScreen() {\n\t\tstepAnimate(\".search_station\");\n\t\t$(\".search_1 .background\").css(\"transition-duration\",\"0s\").css(\"transition-timing-function\",\"ease\").css(\"transform\",\"translateY(-20px)\");\n\t\t$(\".search_1 .people\").css(\"transition-duration\",\"0s\").css(\"transition-timing-function\",\"ease\").css(\"transform\",\"translateY(5px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_1 .background\").css(\"transition-duration\",\"2s\");\n\t\t\t$(\".search_1 .people\").css(\"transition-duration\",\"2s\");\n\t\t},100);\n\t\t$(\".station_info\").css(\"display\",\"none\");\n\t\t$(\".search_1, .search_1 .gfx\").css(\"display\",\"block\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_1\").css(\"opacity\",1);\n\t\t},100);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.search_station\").css(\"opacity\",0).css(\"display\",\"block\").animate({ opacity: 1},300);\n\t\t\t$(\".search_1 .gfx\").css(\"opacity\",1);\n\t\t\t$(\".search_1\").css(\"transform\",\"translateY(0px)\");\n\t\t},200);\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_station .results\").css(\"transform\",\"translateY(0px)\");\n\t\t},350);\n\t}\n\t$(\"body.home div.changes\").bind(\"click\",function() {\n\t\tcloseHomeScreen();\n\t\tenterJourneyScreen();\t\t\n\t});\n\t$(\".home.screen .get_tickets button\").bind(\"click\",function() {\n\t\t\n\t\tcloseHomeScreen();\n\t\tsetTimeout(function() {\n\t\t\tenterPlanning()\n\t\t},1200);\n\t\n\n\t});\n\tfunction rotateInfo() {\n\t\t$(\".home .info\").each(function() {\n\t\t\tvar info = $(this);\n\t\t\tif ($(\"span\",info).length>1) {\n\t\t\t\t$(\"span:first-child\",info).css(\"transition-duration\",\"0.5s\").css(\"transform\",\"translateY(-42px)\");\n\t\t\t\t$(\"span:last-child\",info).css(\"transition-duration\",\"0.5s\").css(\"transform\",\"translateY(-42px)\");\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\"span:last-child\",info).prependTo(info);\n\t\t\t\t\t$(\"span:first-child\",info).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateY(0px)\");\n\t\t\t\t\t$(\"span:last-child\",info).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateY(0px)\");\n\t\t\t\t},500);\n\t\t\t}\n\t\t});\n\t\t\t\n\t\tsetTimeout(rotateInfo,7000);\n\t}\n\tsetTimeout(rotateInfo,7000);\n});\nfunction enterLocating() {\n\t\t$(\".screen\").removeClass(\"active\");\n\t\t$(\".locating\").css(\"display\",\"block\").css(\"opacity\",1).addClass(\"active\");\n\t\tstepAnimate(\".locating\");\n\t\t\n\t\t\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .station\").html(\"m Oxshott\");\n\t\t// },4800);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .station\").html(\"om Oxshott\");\n\t\t// },4850);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .station\").html(\"rom Oxshott\");\n\t\t// },4900);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .station\").html(\"From Oxshott\");\n\t\t// },4950);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .station\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\".8,0,.2,1\").css(\"transform\",\"translateY(-220px)\");\n\t\t// },5500);\n\n\t\t// setTimeout(locationHandler.getLocation,1000);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".radar\").addClass(\"hide\");\n\t\t// \t$(\".station\").addClass(\"active\");\n\t\t// },3000);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".route\").addClass(\"step1\");\n\t\t// \t$(\".locating .message p\").html(\"Finding the best train station for departure\");\n\t\t// },3000);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".route\").removeClass(\"step1\").addClass(\"step2\");\n\n\t\t// },5000);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .message p\").html(\"Get on the train \");\n\t\t// \t$(\".route\").removeClass(\"step2\").addClass(\"step3\");\n\t\t// },7500);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .message p\").html(\"Switch trains in Brockenhurst\");\n\t\t// \t$(\".route\").removeClass(\"step3\").addClass(\"step4\");\n\t\t// },9000);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .message p\").html(\"Get off at Lymington Town\");\n\t\t// },10500);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".route\").removeClass(\"step4\").addClass(\"step5\");\n\t\t// },11500);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating .message\").css(\"opacity\",0);\n\t\t// \t$(\".locating .station\").css(\"opacity\",0);\n\t\t// },14000);\n\t\t// setTimeout(function() {\n\t\t// \tenterHomeScreen();\n\t\t// },14000);\n\t\t// setTimeout(function() {\n\t\t// \t$(\".locating\").css(\"opacity\",0);\n\t\t// },14500);\n\t\tsetTimeout(function() {\n\t\t\t$(\".route_container\").addClass(\"on\");\n\t\t},300);\n\t\tsetTimeout(function() {\n\t\t\t$(\".route_vertical .first-line\").addClass(\"on\");\n\t\t\t$(\".route_vertical .blue-circle\").filter(\":first\").addClass(\"on\");\n\n\t\t\t$(\".route_vertical .first_station\").addClass(\"on\");\n\t\t\t// $(\".route\").removeClass(\"step2\").addClass(\"step3\");\n\t\t},1500);\n\t\tsetTimeout(function() {\n\t\t\t$(\".route_vertical .second-line\").addClass(\"on\");\n\t\t\t$(\".route_vertical .change-stop\").addClass(\"on\");\n\t\t\t$(\".route_vertical .change_station\").addClass(\"on\");\n\t\t\t// $(\".route\").removeClass(\"step2\").addClass(\"step3\");\n\t\t},2500);\n\t\tsetTimeout(function() {\n\t\t\t$(\".route_vertical .blue-circle\").filter(\":last\").addClass(\"on\");\n\t\t\t$(\".route_vertical .last_station\").addClass(\"on\");\n\t\t\t$(\".route_vertical .last_station small\").addClass(\"blink\");\n\t\t\t// $(\".route_vertical .change-stop\").addClass(\"on\");\n\t\t\t// $(\".route\").removeClass(\"step2\").addClass(\"step3\");\n\t\t},3800);\n\t\tsetTimeout(function() {\n\t\t\t$(\".route_vertical .third-line\").addClass(\"on\");\n\t\t\t// $(\".route_vertical .change-stop\").addClass(\"on\");\n\t\t\t// $(\".route\").removeClass(\"step2\").addClass(\"step3\");\n\t\t},4000);\n\t\tsetTimeout(function() {\n\t\t\t$(\".route_vertical .fourth-line\").addClass(\"on\");\n\t\t\t// $(\".route_vertical .change-stop\").addClass(\"on\");\n\t\t\t// $(\".route\").removeClass(\"step2\").addClass(\"step3\");\n\t\t},4800);\n\t\tsetTimeout(function() {\n\t\t\tenterHomeScreen();\n\t\t},7500);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating.screen\").css(\"opacity\",0);\n\t\t\t$(\".locating.screen\").removeClass(\"active\");\n\t\t},7500);\n\t\t//set timeout something: loadIntro();\n\t}\nfunction closeDestinationScreen() {\n\t$(\".remove\").animate({ opacity: 0},200);\n\t$(\".search_1 .people\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\tsetTimeout(function() {\n\t\t$(\".search_1 .background\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t},100);\n\tsetTimeout(function() {\n\t\t$(\".search_1\").animate({ opacity: 0},300);\n\t},300);\n\tsetTimeout(function() {\n\t\t$(\".search_station\").animate({ opacity: 0},300);\n\t},600);\n\tsetTimeout(function() {\n\t\t$(\".search_station\").css(\"display\",\"none\");\n\t},900);\n}\nfunction closeHomeScreen() {\n\t$(\".get_tickets, div.changes, .scroll-indicator\").css(\"opacity\",0);\n\t$(\"body.home .top\").css(\"transition-duration\",\"0.4s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-500px)\").css(\"opacity\",0);\n\t$(\"body.home .bottom\").css(\"transition-duration\",\"0.4s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(500px)\").css(\"opacity\",0);\n\t\n}\nfirst=true;\nfunction enterHomeScreen(delay) {\n\tconsole.log(\"enter home\");\n\tlastActiveScreen=\"home\";\n\t$(\"body.home .opacityZero\").each(function(i, e) {\n\t\t\n\t\t\t$(e).css(\"opacity\", 1);\n\t\t\n\t});\n\tif (typeof delay == \"undefined\") delay=1200;\n\tsetTimeout(function() {\n\t\t// $(\"body.home\").css(\"opacity\",0).css(\"display\",\"block\").animate({ opacity: 1},300);\n\t\tsetTimeout(function() {\n\t\t\t$(\".home div.changes, .scroll-indicator\").css(\"opacity\",1);\n\t\t},350);\n\t\tif (first) {\n\t\t\tclock_slider.Init($(\".clock_slider\").eq(0),0);\n\t\t\tfirst = false;\n\t\t}\n\t},(delay));\n}\n\nfunction enterJourneyScreen() {\n\t$(\".burger img\").attr(\"src\",\"img/icon-menu-close.svg\");\n\t$(\".home div.changes\").css(\"opacity\",0);\n\t$(\".journey .opacityZero\").each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).animate({ opacity: 1},300);\n\n\t\t},(i*270)+500,e);\n\t});\n\t$(\".journey\").addClass(\"active\");\n\t$(\".journey\").scrollTop(($(\".journey\")[0].scrollHeight - $(window).height())/2);\n\t$(\".journey ul li:nth-child(4)\").addClass(\"travel\");\n\t$(\".journey ul .current_status\").addClass(\"travel\");\n\t$(\".burger\").unbind();\n\t$(\".burger\").bind(\"click\",function() {\n\t\tif (lastActiveScreen==\"home\") {\n\t\t\tvar time = new Date().getTime();\n\t\t\tcloseJourneyScreen();\n\t\t\tsetTimeout(enterHomeScreen,550,0);\n\t\t\tsetTimeout(function() {\n\t\t\t\t\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\".home .top\").css(\"transition-duration\",\"0.4s\").css(\"transition-timing-function\",\"cubic-bezier(0,.91,.12,.99)\");\n\t\t\t\t\t$(\".home .bottom\").css(\"transition-duration\",\"0.4s\").css(\"transition-timing-function\",\"cubic-bezier(0,.91,.12,.99)\");\n\t\t\t\t},100);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\".home .top\").css(\"transform\",\"translateY(0)\").css(\"opacity\",1);\n\t\t\t\t\t$(\".home .bottom\").css(\"transform\",\"translateY(0)\").css(\"opacity\",1);\n\t\t\t\t},110);\n\t\t\t},200);\n\t\t} else if (lastActiveScreen==\"planning\") {\n\t\t\tcloseJourneyScreen();\n\t\t}\n\t\t$(\".burger\").unbind();\n\t\t$(\".burger\").bind(\"click\",function() {\n\t\t\tcloseWhatEver();\n\t\t\tsetTimeout(initiateScreen,300);\n\t\t});\n\t});\n}\nfunction closeWhatEver() {\n\t// closeDestinationScreen();\n\t// $(\".screen.home .top\").css(\"transform\",\"translateY(0)\").css(\"opacity\",1);\n\t// $(\".screen.home .bottom\").css(\"transform\",\"translateY(0)\").css(\"opacity\",1);\n\t// $(\".screen\").removeClass(\"active\");\n\t// $(\".screen\").css(\"opacity\",0);\n\t// $(\".ticket_information\").css(\"display\",\"none\").css(\"opacity\",0);\n\t// $(\".last-choices\").css(\"display\",\"block\").css(\"opacity\",1);\n\t// setTimeout(function() {\n\t// \t$(\".screen\").css(\"display\",\"none\");\n\t// })\n\tdocument.location.href='/scanner.php';\n}\nfunction closeJourneyScreen() {\n\t$(\".burger img\").attr(\"src\",\"img/bg-burger.svg\");\n\t$(\".travel\").removeClass(\"travel\");\n\t$(\".journey\").removeClass(\"active\");\n}\nfunction stepAnimate(container) {\n\t$(\".opacityZero\",$(container)).each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).css(\"opacity\", 1);\n\t\t},(i*100),e);\n\t});\n}\nfunction stepAnimateFast(container) {\n\t$(\".opacityZero\",$(container)).each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).css(\"opacity\",1);\n\t\t},(i*170),e);\n\t});\n}\nfunction enterPlanning() {\n\tlastActiveScreen=\"planning\";\n\t$(\".planning.screen\").css(\"opacity\",0);\n\t$(\".planning.screen\").css(\"display\",\"block\");\n\t$(\".screen.planning\").animate({ opacity: 1},300);\n\tstepAnimate(\".planning.screen\");\n}\nfunction enterSchedule() {\n\tsetTimeout(schedule.sizeUp,1000);\n\t$(\".screen.planning\").animate({ opacity: 0},300)\n\tsetTimeout(function() {\n\t\t$(\".screen.schedule .faded\").removeClass(\"faded\");\n\t\t$(\".screen.planning\").css(\"display\",\"none\");\n\t\t$(\".screen.schedule\").css(\"display\",\"block\").animate({ opacity: 1},300).addClass(\"active\");\n\t\t$(\".screen.schedule .schedule_container\").removeClass(\"step1 step2 step3 step4 step5\");\n\t\t$(\".screen.schedule .schedule_container\").addClass(\"step1\");\n\t},300);\n}\nfunction closeSchedule() {\n\t$(\".screen.schedule\").animate({ opacity: 0},300);\n\tsetTimeout(function() {\n\n\t\t$(\".screen.schedule .schedule_container\").removeClass(\"step1 step2 step3 step4\");\n\t\t$(\".screen.schedule\").css(\"display\",\"none\");\n\t},300);\n}\n\nfunction initiateScreen() {\n\tif (first) {\n\t\tclock_slider.Init($(\".clock_slider\").eq(0),0);\n\t\tfirst = false;\n\t}\n}\n$(function() {\n\t$(\"body.home\").each(initiateScreen);\n})\n","/* =========================================================\n * bootstrap-datepicker.js\n * Repo: https://github.com/eternicode/bootstrap-datepicker/\n * Demo: http://eternicode.github.io/bootstrap-datepicker/\n * Docs: http://bootstrap-datepicker.readthedocs.org/\n * Forked from http://www.eyecon.ro/bootstrap-datepicker\n * =========================================================\n * Started by Stefan Petre; improvements by Andrew Rowls + contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================= */\n\n(function(factory){\n    if (typeof define === \"function\" && define.amd) {\n        define([\"jquery\"], factory);\n    } else if (typeof exports === 'object') {\n        factory(require('jquery'));\n    } else {\n        factory(jQuery);\n    }\n}(function($, undefined){\n\n\tfunction UTCDate(){\n\t\treturn new Date(Date.UTC.apply(Date, arguments));\n\t}\n\tfunction UTCToday(){\n\t\tvar today = new Date();\n\t\treturn UTCDate(today.getFullYear(), today.getMonth(), today.getDate());\n\t}\n\tfunction isUTCEquals(date1, date2) {\n\t\treturn (\n\t\t\tdate1.getUTCFullYear() === date2.getUTCFullYear() &&\n\t\t\tdate1.getUTCMonth() === date2.getUTCMonth() &&\n\t\t\tdate1.getUTCDate() === date2.getUTCDate()\n\t\t);\n\t}\n\tfunction alias(method){\n\t\treturn function(){\n\t\t\treturn this[method].apply(this, arguments);\n\t\t};\n\t}\n\tfunction isValidDate(d) {\n\t\treturn d && !isNaN(d.getTime());\n\t}\n\n\tvar DateArray = (function(){\n\t\tvar extras = {\n\t\t\tget: function(i){\n\t\t\t\treturn this.slice(i)[0];\n\t\t\t},\n\t\t\tcontains: function(d){\n\t\t\t\t// Array.indexOf is not cross-browser;\n\t\t\t\t// $.inArray doesn't work with Dates\n\t\t\t\tvar val = d && d.valueOf();\n\t\t\t\tfor (var i=0, l=this.length; i < l; i++)\n\t\t\t\t\tif (this[i].valueOf() === val)\n\t\t\t\t\t\treturn i;\n\t\t\t\treturn -1;\n\t\t\t},\n\t\t\tremove: function(i){\n\t\t\t\tthis.splice(i,1);\n\t\t\t},\n\t\t\treplace: function(new_array){\n\t\t\t\tif (!new_array)\n\t\t\t\t\treturn;\n\t\t\t\tif (!$.isArray(new_array))\n\t\t\t\t\tnew_array = [new_array];\n\t\t\t\tthis.clear();\n\t\t\t\tthis.push.apply(this, new_array);\n\t\t\t},\n\t\t\tclear: function(){\n\t\t\t\tthis.length = 0;\n\t\t\t},\n\t\t\tcopy: function(){\n\t\t\t\tvar a = new DateArray();\n\t\t\t\ta.replace(this);\n\t\t\t\treturn a;\n\t\t\t}\n\t\t};\n\n\t\treturn function(){\n\t\t\tvar a = [];\n\t\t\ta.push.apply(a, arguments);\n\t\t\t$.extend(a, extras);\n\t\t\treturn a;\n\t\t};\n\t})();\n\n\n\t// Picker object\n\n\tvar Datepicker = function(element, options){\n\t\tthis._process_options(options);\n\n\t\tthis.dates = new DateArray();\n\t\tthis.viewDate = this.o.defaultViewDate;\n\t\tthis.focusDate = null;\n\n\t\tthis.element = $(element);\n\t\tthis.isInline = false;\n\t\tthis.isInput = this.element.is('input');\n\t\tthis.component = this.element.hasClass('date') ? this.element.find('.add-on, .input-group-addon, .btn') : false;\n\t\tthis.hasInput = this.component && this.element.find('input').length;\n\t\tif (this.component && this.component.length === 0)\n\t\t\tthis.component = false;\n\n\t\tthis.picker = $(DPGlobal.template);\n\t\tthis._buildEvents();\n\t\tthis._attachEvents();\n\n\t\tif (this.isInline){\n\t\t\tthis.picker.addClass('datepicker-inline').appendTo(this.element);\n\t\t}\n\t\telse {\n\t\t\tthis.picker.addClass('datepicker-dropdown dropdown-menu');\n\t\t}\n\n\t\tif (this.o.rtl){\n\t\t\tthis.picker.addClass('datepicker-rtl');\n\t\t}\n\n\t\tthis.viewMode = this.o.startView;\n\n\t\tif (this.o.calendarWeeks)\n\t\t\tthis.picker.find('tfoot .today, tfoot .clear')\n\t\t\t\t\t\t.attr('colspan', function(i, val){\n\t\t\t\t\t\t\treturn parseInt(val) + 1;\n\t\t\t\t\t\t});\n\n\t\tthis._allow_update = false;\n\n\t\tthis.setStartDate(this._o.startDate);\n\t\tthis.setEndDate(this._o.endDate);\n\t\tthis.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);\n\t\tthis.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted);\n\t\tthis.setDatesDisabled(this.o.datesDisabled);\n\n\t\tthis.fillDow();\n\t\tthis.fillMonths();\n\n\t\tthis._allow_update = true;\n\n\t\tthis.update();\n\t\tthis.showMode();\n\n\t\tif (this.isInline){\n\t\t\tthis.show();\n\t\t}\n\t};\n\n\tDatepicker.prototype = {\n\t\tconstructor: Datepicker,\n\n\t\t_process_options: function(opts){\n\t\t\t// Store raw options for reference\n\t\t\tthis._o = $.extend({}, this._o, opts);\n\t\t\t// Processed options\n\t\t\tvar o = this.o = $.extend({}, this._o);\n\n\t\t\t// Check if \"de-DE\" style date is available, if not language should\n\t\t\t// fallback to 2 letter code eg \"de\"\n\t\t\tvar lang = o.language;\n\t\t\tif (!dates[lang]){\n\t\t\t\tlang = lang.split('-')[0];\n\t\t\t\tif (!dates[lang])\n\t\t\t\t\tlang = defaults.language;\n\t\t\t}\n\t\t\to.language = lang;\n\n\t\t\tswitch (o.startView){\n\t\t\t\tcase 2:\n\t\t\t\tcase 'decade':\n\t\t\t\t\to.startView = 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\tcase 'year':\n\t\t\t\t\to.startView = 1;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\to.startView = 0;\n\t\t\t}\n\n\t\t\tswitch (o.minViewMode){\n\t\t\t\tcase 1:\n\t\t\t\tcase 'months':\n\t\t\t\t\to.minViewMode = 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\tcase 'years':\n\t\t\t\t\to.minViewMode = 2;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\to.minViewMode = 0;\n\t\t\t}\n\n\t\t\tswitch (o.maxViewMode) {\n\t\t\t\tcase 0:\n\t\t\t\tcase 'days':\n\t\t\t\t\to.maxViewMode = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\tcase 'months':\n\t\t\t\t\to.maxViewMode = 1;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\to.maxViewMode = 2;\n\t\t\t}\n\n\t\t\to.startView = Math.min(o.startView, o.maxViewMode);\n\t\t\to.startView = Math.max(o.startView, o.minViewMode);\n\n\t\t\t// true, false, or Number > 0\n\t\t\tif (o.multidate !== true){\n\t\t\t\to.multidate = Number(o.multidate) || false;\n\t\t\t\tif (o.multidate !== false)\n\t\t\t\t\to.multidate = Math.max(0, o.multidate);\n\t\t\t}\n\t\t\to.multidateSeparator = String(o.multidateSeparator);\n\n\t\t\to.weekStart %= 7;\n\t\t\to.weekEnd = ((o.weekStart + 6) % 7);\n\n\t\t\tvar format = DPGlobal.parseFormat(o.format);\n\t\t\tif (o.startDate !== -Infinity){\n\t\t\t\tif (!!o.startDate){\n\t\t\t\t\tif (o.startDate instanceof Date)\n\t\t\t\t\t\to.startDate = this._local_to_utc(this._zero_time(o.startDate));\n\t\t\t\t\telse\n\t\t\t\t\t\to.startDate = DPGlobal.parseDate(o.startDate, format, o.language);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\to.startDate = -Infinity;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (o.endDate !== Infinity){\n\t\t\t\tif (!!o.endDate){\n\t\t\t\t\tif (o.endDate instanceof Date)\n\t\t\t\t\t\to.endDate = this._local_to_utc(this._zero_time(o.endDate));\n\t\t\t\t\telse\n\t\t\t\t\t\to.endDate = DPGlobal.parseDate(o.endDate, format, o.language);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\to.endDate = Infinity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.daysOfWeekDisabled = o.daysOfWeekDisabled||[];\n\t\t\tif (!$.isArray(o.daysOfWeekDisabled))\n\t\t\t\to.daysOfWeekDisabled = o.daysOfWeekDisabled.split(/[,\\s]*/);\n\t\t\to.daysOfWeekDisabled = $.map(o.daysOfWeekDisabled, function(d){\n\t\t\t\treturn parseInt(d, 10);\n\t\t\t});\n\n\t\t\to.daysOfWeekHighlighted = o.daysOfWeekHighlighted||[];\n\t\t\tif (!$.isArray(o.daysOfWeekHighlighted))\n\t\t\t\to.daysOfWeekHighlighted = o.daysOfWeekHighlighted.split(/[,\\s]*/);\n\t\t\to.daysOfWeekHighlighted = $.map(o.daysOfWeekHighlighted, function(d){\n\t\t\t\treturn parseInt(d, 10);\n\t\t\t});\n\n\t\t\to.datesDisabled = o.datesDisabled||[];\n\t\t\tif (!$.isArray(o.datesDisabled)) {\n\t\t\t\tvar datesDisabled = [];\n\t\t\t\tdatesDisabled.push(DPGlobal.parseDate(o.datesDisabled, format, o.language));\n\t\t\t\to.datesDisabled = datesDisabled;\n\t\t\t}\n\t\t\to.datesDisabled = $.map(o.datesDisabled,function(d){\n\t\t\t\treturn DPGlobal.parseDate(d, format, o.language);\n\t\t\t});\n\n\t\t\tvar plc = String(o.orientation).toLowerCase().split(/\\s+/g),\n\t\t\t\t_plc = o.orientation.toLowerCase();\n\t\t\tplc = $.grep(plc, function(word){\n\t\t\t\treturn /^auto|left|right|top|bottom$/.test(word);\n\t\t\t});\n\t\t\to.orientation = {x: 'auto', y: 'auto'};\n\t\t\tif (!_plc || _plc === 'auto')\n\t\t\t\t; // no action\n\t\t\telse if (plc.length === 1){\n\t\t\t\tswitch (plc[0]){\n\t\t\t\t\tcase 'top':\n\t\t\t\t\tcase 'bottom':\n\t\t\t\t\t\to.orientation.y = plc[0];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'left':\n\t\t\t\t\tcase 'right':\n\t\t\t\t\t\to.orientation.x = plc[0];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_plc = $.grep(plc, function(word){\n\t\t\t\t\treturn /^left|right$/.test(word);\n\t\t\t\t});\n\t\t\t\to.orientation.x = _plc[0] || 'auto';\n\n\t\t\t\t_plc = $.grep(plc, function(word){\n\t\t\t\t\treturn /^top|bottom$/.test(word);\n\t\t\t\t});\n\t\t\t\to.orientation.y = _plc[0] || 'auto';\n\t\t\t}\n\t\t\tif (o.defaultViewDate) {\n\t\t\t\tvar year = o.defaultViewDate.year || new Date().getFullYear();\n\t\t\t\tvar month = o.defaultViewDate.month || 0;\n\t\t\t\tvar day = o.defaultViewDate.day || 1;\n\t\t\t\to.defaultViewDate = UTCDate(year, month, day);\n\t\t\t} else {\n\t\t\t\to.defaultViewDate = UTCToday();\n\t\t\t}\n\t\t\to.showOnFocus = o.showOnFocus !== undefined ? o.showOnFocus : true;\n\t\t\to.zIndexOffset = o.zIndexOffset !== undefined ? o.zIndexOffset : 10;\n\t\t},\n\t\t_events: [],\n\t\t_secondaryEvents: [],\n\t\t_applyEvents: function(evs){\n\t\t\tfor (var i=0, el, ch, ev; i < evs.length; i++){\n\t\t\t\tel = evs[i][0];\n\t\t\t\tif (evs[i].length === 2){\n\t\t\t\t\tch = undefined;\n\t\t\t\t\tev = evs[i][1];\n\t\t\t\t}\n\t\t\t\telse if (evs[i].length === 3){\n\t\t\t\t\tch = evs[i][1];\n\t\t\t\t\tev = evs[i][2];\n\t\t\t\t}\n\t\t\t\tel.on(ev, ch);\n\t\t\t}\n\t\t},\n\t\t_unapplyEvents: function(evs){\n\t\t\tfor (var i=0, el, ev, ch; i < evs.length; i++){\n\t\t\t\tel = evs[i][0];\n\t\t\t\tif (evs[i].length === 2){\n\t\t\t\t\tch = undefined;\n\t\t\t\t\tev = evs[i][1];\n\t\t\t\t}\n\t\t\t\telse if (evs[i].length === 3){\n\t\t\t\t\tch = evs[i][1];\n\t\t\t\t\tev = evs[i][2];\n\t\t\t\t}\n\t\t\t\tel.off(ev, ch);\n\t\t\t}\n\t\t},\n\t\t_buildEvents: function(){\n            var events = {\n                keyup: $.proxy(function(e){\n                    if ($.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) === -1)\n                        this.update();\n                }, this),\n                keydown: $.proxy(this.keydown, this),\n                paste: $.proxy(this.paste, this)\n            };\n\n            if (this.o.showOnFocus === true) {\n                events.focus = $.proxy(this.show, this);\n            }\n\n            if (this.isInput) { // single input\n                this._events = [\n                    [this.element, events]\n                ];\n            }\n            else if (this.component && this.hasInput) { // component: input + button\n                this._events = [\n                    // For components that are not readonly, allow keyboard nav\n                    [this.element.find('input'), events],\n                    [this.component, {\n                        click: $.proxy(this.show, this)\n                    }]\n                ];\n            }\n\t\t\telse if (this.element.is('div')){  // inline datepicker\n\t\t\t\tthis.isInline = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._events = [\n\t\t\t\t\t[this.element, {\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\n\t\t\t\t\t}]\n\t\t\t\t];\n\t\t\t}\n\t\t\tthis._events.push(\n\t\t\t\t// Component: listen for blur on element descendants\n\t\t\t\t[this.element, '*', {\n\t\t\t\t\tblur: $.proxy(function(e){\n\t\t\t\t\t\tthis._focused_from = e.target;\n\t\t\t\t\t}, this)\n\t\t\t\t}],\n\t\t\t\t// Input: listen for blur on element\n\t\t\t\t[this.element, {\n\t\t\t\t\tblur: $.proxy(function(e){\n\t\t\t\t\t\tthis._focused_from = e.target;\n\t\t\t\t\t}, this)\n\t\t\t\t}]\n\t\t\t);\n\n\t\t\tif (this.o.immediateUpdates) {\n\t\t\t\t// Trigger input updates immediately on changed year/month\n\t\t\t\tthis._events.push([this.element, {\n\t\t\t\t\t'changeYear changeMonth': $.proxy(function(e){\n\t\t\t\t\t\tthis.update(e.date);\n\t\t\t\t\t}, this)\n\t\t\t\t}]);\n\t\t\t}\n\n\t\t\tthis._secondaryEvents = [\n\t\t\t\t[this.picker, {\n\t\t\t\t\tclick: $.proxy(this.click, this)\n\t\t\t\t}],\n\t\t\t\t[$(window), {\n\t\t\t\t\tresize: $.proxy(this.place, this)\n\t\t\t\t}],\n\t\t\t\t[$(document), {\n\t\t\t\t\tmousedown: $.proxy(function(e){\n\t\t\t\t\t\t// Clicked outside the datepicker, hide it\n\t\t\t\t\t\tif (!(\n\t\t\t\t\t\t\tthis.element.is(e.target) ||\n\t\t\t\t\t\t\tthis.element.find(e.target).length ||\n\t\t\t\t\t\t\tthis.picker.is(e.target) ||\n\t\t\t\t\t\t\tthis.picker.find(e.target).length ||\n\t\t\t\t\t\t\tthis.picker.hasClass('datepicker-inline')\n\t\t\t\t\t\t)){\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this)\n\t\t\t\t}]\n\t\t\t];\n\t\t},\n\t\t_attachEvents: function(){\n\t\t\tthis._detachEvents();\n\t\t\tthis._applyEvents(this._events);\n\t\t},\n\t\t_detachEvents: function(){\n\t\t\tthis._unapplyEvents(this._events);\n\t\t},\n\t\t_attachSecondaryEvents: function(){\n\t\t\tthis._detachSecondaryEvents();\n\t\t\tthis._applyEvents(this._secondaryEvents);\n\t\t},\n\t\t_detachSecondaryEvents: function(){\n\t\t\tthis._unapplyEvents(this._secondaryEvents);\n\t\t},\n\t\t_trigger: function(event, altdate){\n\t\t\tvar date = altdate || this.dates.get(-1),\n\t\t\t\tlocal_date = this._utc_to_local(date);\n\n\t\t\tthis.element.trigger({\n\t\t\t\ttype: event,\n\t\t\t\tdate: local_date,\n\t\t\t\tdates: $.map(this.dates, this._utc_to_local),\n\t\t\t\tformat: $.proxy(function(ix, format){\n\t\t\t\t\tif (arguments.length === 0){\n\t\t\t\t\t\tix = this.dates.length - 1;\n\t\t\t\t\t\tformat = this.o.format;\n\t\t\t\t\t}\n\t\t\t\t\telse if (typeof ix === 'string'){\n\t\t\t\t\t\tformat = ix;\n\t\t\t\t\t\tix = this.dates.length - 1;\n\t\t\t\t\t}\n\t\t\t\t\tformat = format || this.o.format;\n\t\t\t\t\tvar date = this.dates.get(ix);\n\t\t\t\t\treturn DPGlobal.formatDate(date, format, this.o.language);\n\t\t\t\t}, this)\n\t\t\t});\n\t\t},\n\n\t\tshow: function(){\n\t\t\tif (this.element.attr('readonly') && this.o.enableOnReadonly === false)\n\t\t\t\treturn;\n\t\t\tif (!this.isInline)\n\t\t\t\tthis.picker.appendTo(this.o.container);\n\t\t\tthis.place();\n\t\t\tthis.picker.show();\n\t\t\tthis._attachSecondaryEvents();\n\t\t\tthis._trigger('show');\n\t\t\tif ((window.navigator.msMaxTouchPoints || 'ontouchstart' in document) && this.o.disableTouchKeyboard) {\n\t\t\t\t$(this.element).blur();\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\thide: function(){\n\t\t\tif (this.isInline)\n\t\t\t\treturn this;\n\t\t\tif (!this.picker.is(':visible'))\n\t\t\t\treturn this;\n\t\t\tthis.focusDate = null;\n\t\t\tthis.picker.hide().detach();\n\t\t\tthis._detachSecondaryEvents();\n\t\t\tthis.viewMode = this.o.startView;\n\t\t\tthis.showMode();\n\n\t\t\tif (\n\t\t\t\tthis.o.forceParse &&\n\t\t\t\t(\n\t\t\t\t\tthis.isInput && this.element.val() ||\n\t\t\t\t\tthis.hasInput && this.element.find('input').val()\n\t\t\t\t)\n\t\t\t)\n\t\t\t\tthis.setValue();\n\t\t\tthis._trigger('hide');\n\t\t\treturn this;\n\t\t},\n\n\t\tremove: function(){\n\t\t\tthis.hide();\n\t\t\tthis._detachEvents();\n\t\t\tthis._detachSecondaryEvents();\n\t\t\tthis.picker.remove();\n\t\t\tdelete this.element.data().datepicker;\n\t\t\tif (!this.isInput){\n\t\t\t\tdelete this.element.data().date;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tpaste: function(evt){\n\t\t\tvar dateString;\n\t\t\tif (evt.originalEvent.clipboardData && evt.originalEvent.clipboardData.types\n\t\t\t\t&& $.inArray('text/plain', evt.originalEvent.clipboardData.types) !== -1) {\n\t\t\t\tdateString = evt.originalEvent.clipboardData.getData('text/plain');\n\t\t\t}\n\t\t\telse if (window.clipboardData) {\n\t\t\t\tdateString = window.clipboardData.getData('Text');\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setDate(dateString);\n\t\t\tthis.update();\n\t\t\tevt.preventDefault();\n\t\t},\n\n\t\t_utc_to_local: function(utc){\n\t\t\treturn utc && new Date(utc.getTime() + (utc.getTimezoneOffset()*60000));\n\t\t},\n\t\t_local_to_utc: function(local){\n\t\t\treturn local && new Date(local.getTime() - (local.getTimezoneOffset()*60000));\n\t\t},\n\t\t_zero_time: function(local){\n\t\t\treturn local && new Date(local.getFullYear(), local.getMonth(), local.getDate());\n\t\t},\n\t\t_zero_utc_time: function(utc){\n\t\t\treturn utc && new Date(Date.UTC(utc.getUTCFullYear(), utc.getUTCMonth(), utc.getUTCDate()));\n\t\t},\n\n\t\tgetDates: function(){\n\t\t\treturn $.map(this.dates, this._utc_to_local);\n\t\t},\n\n\t\tgetUTCDates: function(){\n\t\t\treturn $.map(this.dates, function(d){\n\t\t\t\treturn new Date(d);\n\t\t\t});\n\t\t},\n\n\t\tgetDate: function(){\n\t\t\treturn this._utc_to_local(this.getUTCDate());\n\t\t},\n\n\t\tgetUTCDate: function(){\n\t\t\tvar selected_date = this.dates.get(-1);\n\t\t\tif (typeof selected_date !== 'undefined') {\n\t\t\t\treturn new Date(selected_date);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\n\t\tclearDates: function(){\n\t\t\tvar element;\n\t\t\tif (this.isInput) {\n\t\t\t\telement = this.element;\n\t\t\t} else if (this.component) {\n\t\t\t\telement = this.element.find('input');\n\t\t\t}\n\n\t\t\tif (element) {\n\t\t\t\telement.val('');\n\t\t\t}\n\n\t\t\tthis.update();\n\t\t\tthis._trigger('changeDate');\n\n\t\t\tif (this.o.autoclose) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t},\n\t\tsetDates: function(){\n\t\t\tvar args = $.isArray(arguments[0]) ? arguments[0] : arguments;\n\t\t\tthis.update.apply(this, args);\n\t\t\tthis._trigger('changeDate');\n\t\t\tthis.setValue();\n\t\t\treturn this;\n\t\t},\n\n\t\tsetUTCDates: function(){\n\t\t\tvar args = $.isArray(arguments[0]) ? arguments[0] : arguments;\n\t\t\tthis.update.apply(this, $.map(args, this._utc_to_local));\n\t\t\tthis._trigger('changeDate');\n\t\t\tthis.setValue();\n\t\t\treturn this;\n\t\t},\n\n\t\tsetDate: alias('setDates'),\n\t\tsetUTCDate: alias('setUTCDates'),\n\n\t\tsetValue: function(){\n\t\t\tvar formatted = this.getFormattedDate();\n\t\t\tif (!this.isInput){\n\t\t\t\tif (this.component){\n\t\t\t\t\tthis.element.find('input').val(formatted);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.element.val(formatted);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tgetFormattedDate: function(format){\n\t\t\tif (format === undefined)\n\t\t\t\tformat = this.o.format;\n\n\t\t\tvar lang = this.o.language;\n\t\t\treturn $.map(this.dates, function(d){\n\t\t\t\treturn DPGlobal.formatDate(d, format, lang);\n\t\t\t}).join(this.o.multidateSeparator);\n\t\t},\n\n\t\tsetStartDate: function(startDate){\n\t\t\tthis._process_options({startDate: startDate});\n\t\t\tthis.update();\n\t\t\tthis.updateNavArrows();\n\t\t\treturn this;\n\t\t},\n\n\t\tsetEndDate: function(endDate){\n\t\t\tthis._process_options({endDate: endDate});\n\t\t\tthis.update();\n\t\t\tthis.updateNavArrows();\n\t\t\treturn this;\n\t\t},\n\n\t\tsetDaysOfWeekDisabled: function(daysOfWeekDisabled){\n\t\t\tthis._process_options({daysOfWeekDisabled: daysOfWeekDisabled});\n\t\t\tthis.update();\n\t\t\tthis.updateNavArrows();\n\t\t\treturn this;\n\t\t},\n\n\t\tsetDaysOfWeekHighlighted: function(daysOfWeekHighlighted){\n\t\t\tthis._process_options({daysOfWeekHighlighted: daysOfWeekHighlighted});\n\t\t\tthis.update();\n\t\t\treturn this;\n\t\t},\n\n\t\tsetDatesDisabled: function(datesDisabled){\n\t\t\tthis._process_options({datesDisabled: datesDisabled});\n\t\t\tthis.update();\n\t\t\tthis.updateNavArrows();\n\t\t},\n\n\t\tplace: function(){\n\t\t\tif (this.isInline)\n\t\t\t\treturn this;\n\t\t\tvar calendarWidth = this.picker.outerWidth(),\n\t\t\t\tcalendarHeight = this.picker.outerHeight(),\n\t\t\t\tvisualPadding = 10,\n\t\t\t\tcontainer = $(this.o.container),\n\t\t\t\twindowWidth = container.width(),\n\t\t\t\tscrollTop = container.scrollTop(),\n\t\t\t\tappendOffset = container.offset();\n\n\t\t\tvar parentsZindex = [];\n\t\t\tthis.element.parents().each(function(){\n\t\t\t\tvar itemZIndex = $(this).css('z-index');\n\t\t\t\tif (itemZIndex !== 'auto' && itemZIndex !== 0) parentsZindex.push(parseInt(itemZIndex));\n\t\t\t});\n\t\t\tvar zIndex = Math.max.apply(Math, parentsZindex) + this.o.zIndexOffset;\n\t\t\tvar offset = this.component ? this.component.parent().offset() : this.element.offset();\n\t\t\tvar height = this.component ? this.component.outerHeight(true) : this.element.outerHeight(false);\n\t\t\tvar width = this.component ? this.component.outerWidth(true) : this.element.outerWidth(false);\n\t\t\tvar left = offset.left - appendOffset.left,\n\t\t\t\ttop = offset.top - appendOffset.top;\n\n\t\t\tthis.picker.removeClass(\n\t\t\t\t'datepicker-orient-top datepicker-orient-bottom '+\n\t\t\t\t'datepicker-orient-right datepicker-orient-left'\n\t\t\t);\n\n\t\t\tif (this.o.orientation.x !== 'auto'){\n\t\t\t\tthis.picker.addClass('datepicker-orient-' + this.o.orientation.x);\n\t\t\t\tif (this.o.orientation.x === 'right')\n\t\t\t\t\tleft -= calendarWidth - width;\n\t\t\t}\n\t\t\t// auto x orientation is best-placement: if it crosses a window\n\t\t\t// edge, fudge it sideways\n\t\t\telse {\n\t\t\t\tif (offset.left < 0) {\n\t\t\t\t\t// component is outside the window on the left side. Move it into visible range\n\t\t\t\t\tthis.picker.addClass('datepicker-orient-left');\n\t\t\t\t\tleft -= offset.left - visualPadding;\n\t\t\t\t} else if (left + calendarWidth > windowWidth) {\n\t\t\t\t\t// the calendar passes the widow right edge. Align it to component right side\n\t\t\t\t\tthis.picker.addClass('datepicker-orient-right');\n\t\t\t\t\tleft = offset.left + width - calendarWidth;\n\t\t\t\t} else {\n\t\t\t\t\t// Default to left\n\t\t\t\t\tthis.picker.addClass('datepicker-orient-left');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// auto y orientation is best-situation: top or bottom, no fudging,\n\t\t\t// decision based on which shows more of the calendar\n\t\t\tvar yorient = this.o.orientation.y,\n\t\t\t\ttop_overflow;\n\t\t\tif (yorient === 'auto'){\n\t\t\t\ttop_overflow = -scrollTop + top - calendarHeight;\n\t\t\t\tyorient = top_overflow < 0 ? 'bottom' : 'top';\n\t\t\t}\n\n\t\t\tthis.picker.addClass('datepicker-orient-' + yorient);\n\t\t\tif (yorient === 'top')\n\t\t\t\ttop -= calendarHeight + parseInt(this.picker.css('padding-top'));\n\t\t\telse\n\t\t\t\ttop += height;\n\n\t\t\tif (this.o.rtl) {\n\t\t\t\tvar right = windowWidth - (left + width);\n\t\t\t\tthis.picker.css({\n\t\t\t\t\ttop: top,\n\t\t\t\t\tright: right,\n\t\t\t\t\tzIndex: zIndex\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.picker.css({\n\t\t\t\t\ttop: top,\n\t\t\t\t\tleft: left,\n\t\t\t\t\tzIndex: zIndex\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\t_allow_update: true,\n\t\tupdate: function(){\n\t\t\tif (!this._allow_update)\n\t\t\t\treturn this;\n\n\t\t\tvar oldDates = this.dates.copy(),\n\t\t\t\tdates = [],\n\t\t\t\tfromArgs = false;\n\t\t\tif (arguments.length){\n\t\t\t\t$.each(arguments, $.proxy(function(i, date){\n\t\t\t\t\tif (date instanceof Date)\n\t\t\t\t\t\tdate = this._local_to_utc(date);\n\t\t\t\t\tdates.push(date);\n\t\t\t\t}, this));\n\t\t\t\tfromArgs = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdates = this.isInput\n\t\t\t\t\t\t? this.element.val()\n\t\t\t\t\t\t: this.element.data('date') || this.element.find('input').val();\n\t\t\t\tif (dates && this.o.multidate)\n\t\t\t\t\tdates = dates.split(this.o.multidateSeparator);\n\t\t\t\telse\n\t\t\t\t\tdates = [dates];\n\t\t\t\tdelete this.element.data().date;\n\t\t\t}\n\n\t\t\tdates = $.map(dates, $.proxy(function(date){\n\t\t\t\treturn DPGlobal.parseDate(date, this.o.format, this.o.language);\n\t\t\t}, this));\n\t\t\tdates = $.grep(dates, $.proxy(function(date){\n\t\t\t\treturn (\n\t\t\t\t\tdate < this.o.startDate ||\n\t\t\t\t\tdate > this.o.endDate ||\n\t\t\t\t\t!date\n\t\t\t\t);\n\t\t\t}, this), true);\n\t\t\tthis.dates.replace(dates);\n\n\t\t\tif (this.dates.length)\n\t\t\t\tthis.viewDate = new Date(this.dates.get(-1));\n\t\t\telse if (this.viewDate < this.o.startDate)\n\t\t\t\tthis.viewDate = new Date(this.o.startDate);\n\t\t\telse if (this.viewDate > this.o.endDate)\n\t\t\t\tthis.viewDate = new Date(this.o.endDate);\n\t\t\telse\n\t\t\t\tthis.viewDate = this.o.defaultViewDate;\n\n\t\t\tif (fromArgs){\n\t\t\t\t// setting date by clicking\n\t\t\t\tthis.setValue();\n\t\t\t}\n\t\t\telse if (dates.length){\n\t\t\t\t// setting date by typing\n\t\t\t\tif (String(oldDates) !== String(this.dates))\n\t\t\t\t\tthis._trigger('changeDate');\n\t\t\t}\n\t\t\tif (!this.dates.length && oldDates.length)\n\t\t\t\tthis._trigger('clearDate');\n\n\t\t\tthis.fill();\n\t\t\tthis.element.change();\n\t\t\treturn this;\n\t\t},\n\n\t\tfillDow: function(){\n\t\t\tvar dowCnt = this.o.weekStart,\n\t\t\t\thtml = '<tr>';\n\t\t\tif (this.o.calendarWeeks){\n\t\t\t\tthis.picker.find('.datepicker-days .datepicker-switch')\n\t\t\t\t\t.attr('colspan', function(i, val){\n\t\t\t\t\t\treturn parseInt(val) + 1;\n\t\t\t\t\t});\n\t\t\t\thtml += '<th class=\"cw\">&#160;</th>';\n\t\t\t}\n\t\t\twhile (dowCnt < this.o.weekStart + 7){\n\t\t\t\thtml += '<th class=\"dow\">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>';\n\t\t\t}\n\t\t\thtml += '</tr>';\n\t\t\tthis.picker.find('.datepicker-days thead').append(html);\n\t\t},\n\n\t\tfillMonths: function(){\n\t\t\tvar html = '',\n\t\t\ti = 0;\n\t\t\twhile (i < 12){\n\t\t\t\thtml += '<span class=\"month\">'+dates[this.o.language].monthsShort[i++]+'</span>';\n\t\t\t}\n\t\t\tthis.picker.find('.datepicker-months td').html(html);\n\t\t},\n\n\t\tsetRange: function(range){\n\t\t\tif (!range || !range.length)\n\t\t\t\tdelete this.range;\n\t\t\telse\n\t\t\t\tthis.range = $.map(range, function(d){\n\t\t\t\t\treturn d.valueOf();\n\t\t\t\t});\n\t\t\tthis.fill();\n\t\t},\n\n\t\tgetClassNames: function(date){\n\t\t\tvar cls = [],\n\t\t\t\tyear = this.viewDate.getUTCFullYear(),\n\t\t\t\tmonth = this.viewDate.getUTCMonth(),\n\t\t\t\ttoday = new Date();\n\t\t\tif (date.getUTCFullYear() < year || (date.getUTCFullYear() === year && date.getUTCMonth() < month)){\n\t\t\t\tcls.push('old');\n\t\t\t}\n\t\t\telse if (date.getUTCFullYear() > year || (date.getUTCFullYear() === year && date.getUTCMonth() > month)){\n\t\t\t\tcls.push('new');\n\t\t\t}\n\t\t\tif (this.focusDate && date.valueOf() === this.focusDate.valueOf())\n\t\t\t\tcls.push('focused');\n\t\t\t// Compare internal UTC date with local today, not UTC today\n\t\t\tif (this.o.todayHighlight &&\n\t\t\t\tdate.getUTCFullYear() === today.getFullYear() &&\n\t\t\t\tdate.getUTCMonth() === today.getMonth() &&\n\t\t\t\tdate.getUTCDate() === today.getDate()){\n\t\t\t\tcls.push('today');\n\t\t\t}\n\t\t\tif (this.dates.contains(date) !== -1)\n\t\t\t\tcls.push('active');\n\t\t\tif (date.valueOf() < this.o.startDate || date.valueOf() > this.o.endDate ||\n\t\t\t\t$.inArray(date.getUTCDay(), this.o.daysOfWeekDisabled) !== -1){\n\t\t\t\tcls.push('disabled');\n\t\t\t}\n\t\t\tif ($.inArray(date.getUTCDay(), this.o.daysOfWeekHighlighted) !== -1){\n\t\t\t\tcls.push('highlighted');\n\t\t\t}\n\t\t\tif (this.o.datesDisabled.length > 0 &&\n\t\t\t\t$.grep(this.o.datesDisabled, function(d){\n\t\t\t\t\treturn isUTCEquals(date, d); }).length > 0) {\n\t\t\t\tcls.push('disabled', 'disabled-date');\n\t\t\t}\n\n\t\t\tif (this.range){\n\t\t\t\tif (date > this.range[0] && date < this.range[this.range.length-1]){\n\t\t\t\t\tcls.push('range');\n\t\t\t\t}\n\t\t\t\tif ($.inArray(date.valueOf(), this.range) !== -1){\n\t\t\t\t\tcls.push('selected');\n\t\t\t\t}\n\t\t\t\tif (date.valueOf() === this.range[0]){\n          cls.push('range-start');\n        }\n        if (date.valueOf() === this.range[this.range.length-1]){\n          cls.push('range-end');\n        }\n\t\t\t}\n\t\t\treturn cls;\n\t\t},\n\n\t\tfill: function(){\n\t\t\tvar d = new Date(this.viewDate),\n\t\t\t\tyear = d.getUTCFullYear(),\n\t\t\t\tmonth = d.getUTCMonth(),\n\t\t\t\tstartYear = this.o.startDate !== -Infinity ? this.o.startDate.getUTCFullYear() : -Infinity,\n\t\t\t\tstartMonth = this.o.startDate !== -Infinity ? this.o.startDate.getUTCMonth() : -Infinity,\n\t\t\t\tendYear = this.o.endDate !== Infinity ? this.o.endDate.getUTCFullYear() : Infinity,\n\t\t\t\tendMonth = this.o.endDate !== Infinity ? this.o.endDate.getUTCMonth() : Infinity,\n\t\t\t\ttodaytxt = dates[this.o.language].today || dates['en'].today || '',\n\t\t\t\tcleartxt = dates[this.o.language].clear || dates['en'].clear || '',\n\t\t\t\ttitleFormat = dates[this.o.language].titleFormat || dates['en'].titleFormat,\n\t\t\t\ttooltip;\n\t\t\tif (isNaN(year) || isNaN(month))\n\t\t\t\treturn;\n\t\t\tthis.picker.find('.datepicker-days thead .datepicker-switch')\n\t\t\t\t\t\t.text(DPGlobal.formatDate(new UTCDate(year, month), titleFormat, this.o.language));\n\t\t\tthis.picker.find('tfoot .today')\n\t\t\t\t\t\t.text(todaytxt)\n\t\t\t\t\t\t.toggle(this.o.todayBtn !== false);\n\t\t\tthis.picker.find('tfoot .clear')\n\t\t\t\t\t\t.text(cleartxt)\n\t\t\t\t\t\t.toggle(this.o.clearBtn !== false);\n\t\t\tthis.picker.find('thead .datepicker-title')\n\t\t\t\t\t\t.text(this.o.title)\n\t\t\t\t\t\t.toggle(this.o.title !== '');\n\t\t\tthis.updateNavArrows();\n\t\t\tthis.fillMonths();\n\t\t\tvar prevMonth = UTCDate(year, month-1, 28),\n\t\t\t\tday = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\n\t\t\tprevMonth.setUTCDate(day);\n\t\t\tprevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.o.weekStart + 7)%7);\n\t\t\tvar nextMonth = new Date(prevMonth);\n\t\t\tif (prevMonth.getUTCFullYear() < 100){\n        nextMonth.setUTCFullYear(prevMonth.getUTCFullYear());\n      }\n\t\t\tnextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\n\t\t\tnextMonth = nextMonth.valueOf();\n\t\t\tvar html = [];\n\t\t\tvar clsName;\n\t\t\twhile (prevMonth.valueOf() < nextMonth){\n\t\t\t\tif (prevMonth.getUTCDay() === this.o.weekStart){\n\t\t\t\t\thtml.push('<tr>');\n\t\t\t\t\tif (this.o.calendarWeeks){\n\t\t\t\t\t\t// ISO 8601: First week contains first thursday.\n\t\t\t\t\t\t// ISO also states week starts on Monday, but we can be more abstract here.\n\t\t\t\t\t\tvar\n\t\t\t\t\t\t\t// Start of current week: based on weekstart/current date\n\t\t\t\t\t\t\tws = new Date(+prevMonth + (this.o.weekStart - prevMonth.getUTCDay() - 7) % 7 * 864e5),\n\t\t\t\t\t\t\t// Thursday of this week\n\t\t\t\t\t\t\tth = new Date(Number(ws) + (7 + 4 - ws.getUTCDay()) % 7 * 864e5),\n\t\t\t\t\t\t\t// First Thursday of year, year from thursday\n\t\t\t\t\t\t\tyth = new Date(Number(yth = UTCDate(th.getUTCFullYear(), 0, 1)) + (7 + 4 - yth.getUTCDay())%7*864e5),\n\t\t\t\t\t\t\t// Calendar week: ms between thursdays, div ms per day, div 7 days\n\t\t\t\t\t\t\tcalWeek =  (th - yth) / 864e5 / 7 + 1;\n\t\t\t\t\t\thtml.push('<td class=\"cw\">'+ calWeek +'</td>');\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tclsName = this.getClassNames(prevMonth);\n\t\t\t\tclsName.push('day');\n\n\t\t\t\tif (this.o.beforeShowDay !== $.noop){\n\t\t\t\t\tvar before = this.o.beforeShowDay(this._utc_to_local(prevMonth));\n\t\t\t\t\tif (before === undefined)\n\t\t\t\t\t\tbefore = {};\n\t\t\t\t\telse if (typeof(before) === 'boolean')\n\t\t\t\t\t\tbefore = {enabled: before};\n\t\t\t\t\telse if (typeof(before) === 'string')\n\t\t\t\t\t\tbefore = {classes: before};\n\t\t\t\t\tif (before.enabled === false)\n\t\t\t\t\t\tclsName.push('disabled');\n\t\t\t\t\tif (before.classes)\n\t\t\t\t\t\tclsName = clsName.concat(before.classes.split(/\\s+/));\n\t\t\t\t\tif (before.tooltip)\n\t\t\t\t\t\ttooltip = before.tooltip;\n\t\t\t\t}\n\n\t\t\t\tclsName = $.unique(clsName);\n\t\t\t\thtml.push('<td class=\"'+clsName.join(' ')+'\"' + (tooltip ? ' title=\"'+tooltip+'\"' : '') + '>'+prevMonth.getUTCDate() + '</td>');\n\t\t\t\ttooltip = null;\n\t\t\t\tif (prevMonth.getUTCDay() === this.o.weekEnd){\n\t\t\t\t\thtml.push('</tr>');\n\t\t\t\t}\n\t\t\t\tprevMonth.setUTCDate(prevMonth.getUTCDate()+1);\n\t\t\t}\n\t\t\tthis.picker.find('.datepicker-days tbody').empty().append(html.join(''));\n\n\t\t\tvar months = this.picker.find('.datepicker-months')\n\t\t\t\t\t\t.find('.datepicker-switch')\n\t\t\t\t\t\t\t.text(this.o.maxViewMode < 2 ? 'Months' : year)\n\t\t\t\t\t\t\t.end()\n\t\t\t\t\t\t.find('span').removeClass('active');\n\n\t\t\t$.each(this.dates, function(i, d){\n\t\t\t\tif (d.getUTCFullYear() === year)\n\t\t\t\t\tmonths.eq(d.getUTCMonth()).addClass('active');\n\t\t\t});\n\n\t\t\tif (year < startYear || year > endYear){\n\t\t\t\tmonths.addClass('disabled');\n\t\t\t}\n\t\t\tif (year === startYear){\n\t\t\t\tmonths.slice(0, startMonth).addClass('disabled');\n\t\t\t}\n\t\t\tif (year === endYear){\n\t\t\t\tmonths.slice(endMonth+1).addClass('disabled');\n\t\t\t}\n\n\t\t\tif (this.o.beforeShowMonth !== $.noop){\n\t\t\t\tvar that = this;\n\t\t\t\t$.each(months, function(i, month){\n\t\t\t\t\tif (!$(month).hasClass('disabled')) {\n\t\t\t\t\t\tvar moDate = new Date(year, i, 1);\n\t\t\t\t\t\tvar before = that.o.beforeShowMonth(moDate);\n\t\t\t\t\t\tif (before === false)\n\t\t\t\t\t\t\t$(month).addClass('disabled');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thtml = '';\n\t\t\tyear = parseInt(year/10, 10) * 10;\n\t\t\tvar yearCont = this.picker.find('.datepicker-years')\n\t\t\t\t\t\t\t\t.find('.datepicker-switch')\n\t\t\t\t\t\t\t\t\t.text(year + '-' + (year + 9))\n\t\t\t\t\t\t\t\t\t.end()\n\t\t\t\t\t\t\t\t.find('td');\n\t\t\tyear -= 1;\n\t\t\tvar years = $.map(this.dates, function(d){\n\t\t\t\t\treturn d.getUTCFullYear();\n\t\t\t\t}),\n\t\t\t\tclasses;\n\t\t\tfor (var i = -1; i < 11; i++){\n\t\t\t\tclasses = ['year'];\n\t\t\t\ttooltip = null;\n\n\t\t\t\tif (i === -1)\n\t\t\t\t\tclasses.push('old');\n\t\t\t\telse if (i === 10)\n\t\t\t\t\tclasses.push('new');\n\t\t\t\tif ($.inArray(year, years) !== -1)\n\t\t\t\t\tclasses.push('active');\n\t\t\t\tif (year < startYear || year > endYear)\n\t\t\t\t\tclasses.push('disabled');\n\n\t\t\t\tif (this.o.beforeShowYear !== $.noop) {\n\t\t\t\t\tvar yrBefore = this.o.beforeShowYear(new Date(year, 0, 1));\n\t\t\t\t\tif (yrBefore === undefined)\n\t\t\t\t\t\tyrBefore = {};\n\t\t\t\t\telse if (typeof(yrBefore) === 'boolean')\n\t\t\t\t\t\tyrBefore = {enabled: yrBefore};\n\t\t\t\t\telse if (typeof(yrBefore) === 'string')\n\t\t\t\t\t\tyrBefore = {classes: yrBefore};\n\t\t\t\t\tif (yrBefore.enabled === false)\n\t\t\t\t\t\tclasses.push('disabled');\n\t\t\t\t\tif (yrBefore.classes)\n\t\t\t\t\t\tclasses = classes.concat(yrBefore.classes.split(/\\s+/));\n\t\t\t\t\tif (yrBefore.tooltip)\n\t\t\t\t\t\ttooltip = yrBefore.tooltip;\n\t\t\t\t}\n\n\t\t\t\thtml += '<span class=\"' + classes.join(' ') + '\"' + (tooltip ? ' title=\"'+tooltip+'\"' : '') + '>' + year + '</span>';\n\t\t\t\tyear += 1;\n\t\t\t}\n\t\t\tyearCont.html(html);\n\t\t},\n\n\t\tupdateNavArrows: function(){\n\t\t\tif (!this._allow_update)\n\t\t\t\treturn;\n\n\t\t\tvar d = new Date(this.viewDate),\n\t\t\t\tyear = d.getUTCFullYear(),\n\t\t\t\tmonth = d.getUTCMonth();\n\t\t\tswitch (this.viewMode){\n\t\t\t\tcase 0:\n\t\t\t\t\tif (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear() && month <= this.o.startDate.getUTCMonth()){\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\n\t\t\t\t\t}\n\t\t\t\t\tif (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear() && month >= this.o.endDate.getUTCMonth()){\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\tcase 2:\n\t\t\t\t\tif (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear() || this.o.maxViewMode < 2){\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\n\t\t\t\t\t}\n\t\t\t\t\tif (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear() || this.o.maxViewMode < 2){\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\tclick: function(e){\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tvar target = $(e.target).closest('span, td, th'),\n\t\t\t\tyear, month, day;\n\t\t\tif (target.length === 1){\n\t\t\t\tswitch (target[0].nodeName.toLowerCase()){\n\t\t\t\t\tcase 'th':\n\t\t\t\t\t\tswitch (target[0].className){\n\t\t\t\t\t\t\tcase 'datepicker-switch':\n\t\t\t\t\t\t\t\tthis.showMode(1);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'prev':\n\t\t\t\t\t\t\tcase 'next':\n\t\t\t\t\t\t\t\tvar dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1);\n\t\t\t\t\t\t\t\tswitch (this.viewMode){\n\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveMonth(this.viewDate, dir);\n\t\t\t\t\t\t\t\t\t\tthis._trigger('changeMonth', this.viewDate);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveYear(this.viewDate, dir);\n\t\t\t\t\t\t\t\t\t\tif (this.viewMode === 1)\n\t\t\t\t\t\t\t\t\t\t\tthis._trigger('changeYear', this.viewDate);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.fill();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'today':\n\t\t\t\t\t\t\t\tvar date = new Date();\n\t\t\t\t\t\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\n\n\t\t\t\t\t\t\t\tthis.showMode(-2);\n\t\t\t\t\t\t\t\tvar which = this.o.todayBtn === 'linked' ? null : 'view';\n\t\t\t\t\t\t\t\tthis._setDate(date, which);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'clear':\n\t\t\t\t\t\t\t\tthis.clearDates();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'span':\n\t\t\t\t\t\tif (!target.hasClass('disabled')){\n\t\t\t\t\t\t\tthis.viewDate.setUTCDate(1);\n\t\t\t\t\t\t\tif (target.hasClass('month')){\n\t\t\t\t\t\t\t\tday = 1;\n\t\t\t\t\t\t\t\tmonth = target.parent().find('span').index(target);\n\t\t\t\t\t\t\t\tyear = this.viewDate.getUTCFullYear();\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCMonth(month);\n\t\t\t\t\t\t\t\tthis._trigger('changeMonth', this.viewDate);\n\t\t\t\t\t\t\t\tif (this.o.minViewMode === 1){\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day));\n\t\t\t\t\t\t\t\t\tthis.showMode();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.showMode(-1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tday = 1;\n\t\t\t\t\t\t\t\tmonth = 0;\n\t\t\t\t\t\t\t\tyear = parseInt(target.text(), 10)||0;\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCFullYear(year);\n\t\t\t\t\t\t\t\tthis._trigger('changeYear', this.viewDate);\n\t\t\t\t\t\t\t\tif (this.o.minViewMode === 2){\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.showMode(-1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.fill();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'td':\n\t\t\t\t\t\tif (target.hasClass('day') && !target.hasClass('disabled')){\n\t\t\t\t\t\t\tday = parseInt(target.text(), 10)||1;\n\t\t\t\t\t\t\tyear = this.viewDate.getUTCFullYear();\n\t\t\t\t\t\t\tmonth = this.viewDate.getUTCMonth();\n\t\t\t\t\t\t\tif (target.hasClass('old')){\n\t\t\t\t\t\t\t\tif (month === 0){\n\t\t\t\t\t\t\t\t\tmonth = 11;\n\t\t\t\t\t\t\t\t\tyear -= 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tmonth -= 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (target.hasClass('new')){\n\t\t\t\t\t\t\t\tif (month === 11){\n\t\t\t\t\t\t\t\t\tmonth = 0;\n\t\t\t\t\t\t\t\t\tyear += 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tmonth += 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.picker.is(':visible') && this._focused_from){\n\t\t\t\t$(this._focused_from).focus();\n\t\t\t}\n\t\t\tdelete this._focused_from;\n\t\t},\n\n\t\t_toggle_multidate: function(date){\n\t\t\tvar ix = this.dates.contains(date);\n\t\t\tif (!date){\n\t\t\t\tthis.dates.clear();\n\t\t\t}\n\n\t\t\tif (ix !== -1){\n\t\t\t\tif (this.o.multidate === true || this.o.multidate > 1 || this.o.toggleActive){\n\t\t\t\t\tthis.dates.remove(ix);\n\t\t\t\t}\n\t\t\t} else if (this.o.multidate === false) {\n\t\t\t\tthis.dates.clear();\n\t\t\t\tthis.dates.push(date);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.dates.push(date);\n\t\t\t}\n\n\t\t\tif (typeof this.o.multidate === 'number')\n\t\t\t\twhile (this.dates.length > this.o.multidate)\n\t\t\t\t\tthis.dates.remove(0);\n\t\t},\n\n\t\t_setDate: function(date, which){\n\t\t\tif (!which || which === 'date')\n\t\t\t\tthis._toggle_multidate(date && new Date(date));\n\t\t\tif (!which || which  === 'view')\n\t\t\t\tthis.viewDate = date && new Date(date);\n\n\t\t\tthis.fill();\n\t\t\tthis.setValue();\n\t\t\tif (!which || which  !== 'view') {\n\t\t\t\tthis._trigger('changeDate');\n\t\t\t}\n\t\t\tvar element;\n\t\t\tif (this.isInput){\n\t\t\t\telement = this.element;\n\t\t\t}\n\t\t\telse if (this.component){\n\t\t\t\telement = this.element.find('input');\n\t\t\t}\n\t\t\tif (element){\n\t\t\t\telement.change();\n\t\t\t}\n\t\t\tif (this.o.autoclose && (!which || which === 'date')){\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t},\n\n\t\tmoveMonth: function(date, dir){\n\t\t\tif (!isValidDate(date))\n\t\t\t\treturn this.o.defaultViewDate;\n\t\t\tif (!dir)\n\t\t\t\treturn date;\n\t\t\tvar new_date = new Date(date.valueOf()),\n\t\t\t\tday = new_date.getUTCDate(),\n\t\t\t\tmonth = new_date.getUTCMonth(),\n\t\t\t\tmag = Math.abs(dir),\n\t\t\t\tnew_month, test;\n\t\t\tdir = dir > 0 ? 1 : -1;\n\t\t\tif (mag === 1){\n\t\t\t\ttest = dir === -1\n\t\t\t\t\t// If going back one month, make sure month is not current month\n\t\t\t\t\t// (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\n\t\t\t\t\t? function(){\n\t\t\t\t\t\treturn new_date.getUTCMonth() === month;\n\t\t\t\t\t}\n\t\t\t\t\t// If going forward one month, make sure month is as expected\n\t\t\t\t\t// (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\n\t\t\t\t\t: function(){\n\t\t\t\t\t\treturn new_date.getUTCMonth() !== new_month;\n\t\t\t\t\t};\n\t\t\t\tnew_month = month + dir;\n\t\t\t\tnew_date.setUTCMonth(new_month);\n\t\t\t\t// Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\n\t\t\t\tif (new_month < 0 || new_month > 11)\n\t\t\t\t\tnew_month = (new_month + 12) % 12;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// For magnitudes >1, move one month at a time...\n\t\t\t\tfor (var i=0; i < mag; i++)\n\t\t\t\t\t// ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\n\t\t\t\t\tnew_date = this.moveMonth(new_date, dir);\n\t\t\t\t// ...then reset the day, keeping it in the new month\n\t\t\t\tnew_month = new_date.getUTCMonth();\n\t\t\t\tnew_date.setUTCDate(day);\n\t\t\t\ttest = function(){\n\t\t\t\t\treturn new_month !== new_date.getUTCMonth();\n\t\t\t\t};\n\t\t\t}\n\t\t\t// Common date-resetting loop -- if date is beyond end of month, make it\n\t\t\t// end of month\n\t\t\twhile (test()){\n\t\t\t\tnew_date.setUTCDate(--day);\n\t\t\t\tnew_date.setUTCMonth(new_month);\n\t\t\t}\n\t\t\treturn new_date;\n\t\t},\n\n\t\tmoveYear: function(date, dir){\n\t\t\treturn this.moveMonth(date, dir*12);\n\t\t},\n\n\t\tdateWithinRange: function(date){\n\t\t\treturn date >= this.o.startDate && date <= this.o.endDate;\n\t\t},\n\n\t\tkeydown: function(e){\n\t\t\tif (!this.picker.is(':visible')){\n\t\t\t\tif (e.keyCode === 40 || e.keyCode === 27) { // allow down to re-show picker\n\t\t\t\t\tthis.show();\n\t\t\t\t\te.stopPropagation();\n        }\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar dateChanged = false,\n\t\t\t\tdir, newDate, newViewDate,\n\t\t\t\tfocusDate = this.focusDate || this.viewDate;\n\t\t\tswitch (e.keyCode){\n\t\t\t\tcase 27: // escape\n\t\t\t\t\tif (this.focusDate){\n\t\t\t\t\t\tthis.focusDate = null;\n\t\t\t\t\t\tthis.viewDate = this.dates.get(-1) || this.viewDate;\n\t\t\t\t\t\tthis.fill();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37: // left\n\t\t\t\tcase 39: // right\n\t\t\t\t\tif (!this.o.keyboardNavigation)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdir = e.keyCode === 37 ? -1 : 1;\n\t\t\t\t\tif (e.ctrlKey){\n\t\t\t\t\t\tnewDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);\n\t\t\t\t\t\tnewViewDate = this.moveYear(focusDate, dir);\n\t\t\t\t\t\tthis._trigger('changeYear', this.viewDate);\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.shiftKey){\n\t\t\t\t\t\tnewDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);\n\t\t\t\t\t\tnewViewDate = this.moveMonth(focusDate, dir);\n\t\t\t\t\t\tthis._trigger('changeMonth', this.viewDate);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewDate = new Date(this.dates.get(-1) || UTCToday());\n\t\t\t\t\t\tnewDate.setUTCDate(newDate.getUTCDate() + dir);\n\t\t\t\t\t\tnewViewDate = new Date(focusDate);\n\t\t\t\t\t\tnewViewDate.setUTCDate(focusDate.getUTCDate() + dir);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.dateWithinRange(newViewDate)){\n\t\t\t\t\t\tthis.focusDate = this.viewDate = newViewDate;\n\t\t\t\t\t\tthis.setValue();\n\t\t\t\t\t\tthis.fill();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38: // up\n\t\t\t\tcase 40: // down\n\t\t\t\t\tif (!this.o.keyboardNavigation)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdir = e.keyCode === 38 ? -1 : 1;\n\t\t\t\t\tif (e.ctrlKey){\n\t\t\t\t\t\tnewDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);\n\t\t\t\t\t\tnewViewDate = this.moveYear(focusDate, dir);\n\t\t\t\t\t\tthis._trigger('changeYear', this.viewDate);\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.shiftKey){\n\t\t\t\t\t\tnewDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);\n\t\t\t\t\t\tnewViewDate = this.moveMonth(focusDate, dir);\n\t\t\t\t\t\tthis._trigger('changeMonth', this.viewDate);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewDate = new Date(this.dates.get(-1) || UTCToday());\n\t\t\t\t\t\tnewDate.setUTCDate(newDate.getUTCDate() + dir * 7);\n\t\t\t\t\t\tnewViewDate = new Date(focusDate);\n\t\t\t\t\t\tnewViewDate.setUTCDate(focusDate.getUTCDate() + dir * 7);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.dateWithinRange(newViewDate)){\n\t\t\t\t\t\tthis.focusDate = this.viewDate = newViewDate;\n\t\t\t\t\t\tthis.setValue();\n\t\t\t\t\t\tthis.fill();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 32: // spacebar\n\t\t\t\t\t// Spacebar is used in manually typing dates in some formats.\n\t\t\t\t\t// As such, its behavior should not be hijacked.\n\t\t\t\t\tbreak;\n\t\t\t\tcase 13: // enter\n\t\t\t\t\tif (!this.o.forceParse) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tfocusDate = this.focusDate || this.dates.get(-1) || this.viewDate;\n\t\t\t\t\tif (this.o.keyboardNavigation) {\n\t\t\t\t\t\tthis._toggle_multidate(focusDate);\n\t\t\t\t\t\tdateChanged = true;\n\t\t\t\t\t}\n\t\t\t\t\tthis.focusDate = null;\n\t\t\t\t\tthis.viewDate = this.dates.get(-1) || this.viewDate;\n\t\t\t\t\tthis.setValue();\n\t\t\t\t\tthis.fill();\n\t\t\t\t\tif (this.picker.is(':visible')){\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tif (typeof e.stopPropagation === 'function') {\n\t\t\t\t\t\t\te.stopPropagation(); // All modern browsers, IE9+\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\te.cancelBubble = true; // IE6,7,8 ignore \"stopPropagation\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.o.autoclose)\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 9: // tab\n\t\t\t\t\tthis.focusDate = null;\n\t\t\t\t\tthis.viewDate = this.dates.get(-1) || this.viewDate;\n\t\t\t\t\tthis.fill();\n\t\t\t\t\tthis.hide();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (dateChanged){\n\t\t\t\tif (this.dates.length)\n\t\t\t\t\tthis._trigger('changeDate');\n\t\t\t\telse\n\t\t\t\t\tthis._trigger('clearDate');\n\t\t\t\tvar element;\n\t\t\t\tif (this.isInput){\n\t\t\t\t\telement = this.element;\n\t\t\t\t}\n\t\t\t\telse if (this.component){\n\t\t\t\t\telement = this.element.find('input');\n\t\t\t\t}\n\t\t\t\tif (element){\n\t\t\t\t\telement.change();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tshowMode: function(dir){\n\t\t\tif (dir){\n\t\t\t\tthis.viewMode = Math.max(this.o.minViewMode, Math.min(this.o.maxViewMode, this.viewMode + dir));\n\t\t\t}\n\t\t\tthis.picker\n\t\t\t\t.children('div')\n\t\t\t\t.hide()\n\t\t\t\t.filter('.datepicker-' + DPGlobal.modes[this.viewMode].clsName)\n\t\t\t\t\t.show();\n\t\t\tthis.updateNavArrows();\n\t\t}\n\t};\n\n\tvar DateRangePicker = function(element, options){\n\t\tthis.element = $(element);\n\t\tthis.inputs = $.map(options.inputs, function(i){\n\t\t\treturn i.jquery ? i[0] : i;\n\t\t});\n\t\tdelete options.inputs;\n\n\t\tdatepickerPlugin.call($(this.inputs), options)\n\t\t\t.on('changeDate', $.proxy(this.dateUpdated, this));\n\n\t\tthis.pickers = $.map(this.inputs, function(i){\n\t\t\treturn $(i).data('datepicker');\n\t\t});\n\t\tthis.updateDates();\n\t};\n\tDateRangePicker.prototype = {\n\t\tupdateDates: function(){\n\t\t\tthis.dates = $.map(this.pickers, function(i){\n\t\t\t\treturn i.getUTCDate();\n\t\t\t});\n\t\t\tthis.updateRanges();\n\t\t},\n\t\tupdateRanges: function(){\n\t\t\tvar range = $.map(this.dates, function(d){\n\t\t\t\treturn d.valueOf();\n\t\t\t});\n\t\t\t$.each(this.pickers, function(i, p){\n\t\t\t\tp.setRange(range);\n\t\t\t});\n\t\t},\n\t\tdateUpdated: function(e){\n\t\t\t// `this.updating` is a workaround for preventing infinite recursion\n\t\t\t// between `changeDate` triggering and `setUTCDate` calling.  Until\n\t\t\t// there is a better mechanism.\n\t\t\tif (this.updating)\n\t\t\t\treturn;\n\t\t\tthis.updating = true;\n\n\t\t\tvar dp = $(e.target).data('datepicker');\n\n\t\t\tif (typeof(dp) === \"undefined\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar new_date = dp.getUTCDate(),\n\t\t\t\ti = $.inArray(e.target, this.inputs),\n\t\t\t\tj = i - 1,\n\t\t\t\tk = i + 1,\n\t\t\t\tl = this.inputs.length;\n\t\t\tif (i === -1)\n\t\t\t\treturn;\n\n\t\t\t$.each(this.pickers, function(i, p){\n\t\t\t\tif (!p.getUTCDate())\n\t\t\t\t\tp.setUTCDate(new_date);\n\t\t\t});\n\n\t\t\tif (new_date < this.dates[j]){\n\t\t\t\t// Date being moved earlier/left\n\t\t\t\twhile (j >= 0 && new_date < this.dates[j]){\n\t\t\t\t\tthis.pickers[j--].setUTCDate(new_date);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (new_date > this.dates[k]){\n\t\t\t\t// Date being moved later/right\n\t\t\t\twhile (k < l && new_date > this.dates[k]){\n\t\t\t\t\tthis.pickers[k++].setUTCDate(new_date);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.updateDates();\n\n\t\t\tdelete this.updating;\n\t\t},\n\t\tremove: function(){\n\t\t\t$.map(this.pickers, function(p){ p.remove(); });\n\t\t\tdelete this.element.data().datepicker;\n\t\t}\n\t};\n\n\tfunction opts_from_el(el, prefix){\n\t\t// Derive options from element data-attrs\n\t\tvar data = $(el).data(),\n\t\t\tout = {}, inkey,\n\t\t\treplace = new RegExp('^' + prefix.toLowerCase() + '([A-Z])');\n\t\tprefix = new RegExp('^' + prefix.toLowerCase());\n\t\tfunction re_lower(_,a){\n\t\t\treturn a.toLowerCase();\n\t\t}\n\t\tfor (var key in data)\n\t\t\tif (prefix.test(key)){\n\t\t\t\tinkey = key.replace(replace, re_lower);\n\t\t\t\tout[inkey] = data[key];\n\t\t\t}\n\t\treturn out;\n\t}\n\n\tfunction opts_from_locale(lang){\n\t\t// Derive options from locale plugins\n\t\tvar out = {};\n\t\t// Check if \"de-DE\" style date is available, if not language should\n\t\t// fallback to 2 letter code eg \"de\"\n\t\tif (!dates[lang]){\n\t\t\tlang = lang.split('-')[0];\n\t\t\tif (!dates[lang])\n\t\t\t\treturn;\n\t\t}\n\t\tvar d = dates[lang];\n\t\t$.each(locale_opts, function(i,k){\n\t\t\tif (k in d)\n\t\t\t\tout[k] = d[k];\n\t\t});\n\t\treturn out;\n\t}\n\n\tvar old = $.fn.datepicker;\n\tvar datepickerPlugin = function(option){\n\t\tvar args = Array.apply(null, arguments);\n\t\targs.shift();\n\t\tvar internal_return;\n\t\tthis.each(function(){\n\t\t\tvar $this = $(this),\n\t\t\t\tdata = $this.data('datepicker'),\n\t\t\t\toptions = typeof option === 'object' && option;\n\t\t\tif (!data){\n\t\t\t\tvar elopts = opts_from_el(this, 'date'),\n\t\t\t\t\t// Preliminary otions\n\t\t\t\t\txopts = $.extend({}, defaults, elopts, options),\n\t\t\t\t\tlocopts = opts_from_locale(xopts.language),\n\t\t\t\t\t// Options priority: js args, data-attrs, locales, defaults\n\t\t\t\t\topts = $.extend({}, defaults, locopts, elopts, options);\n\t\t\t\tif ($this.hasClass('input-daterange') || opts.inputs){\n\t\t\t\t\tvar ropts = {\n\t\t\t\t\t\tinputs: opts.inputs || $this.find('input').toArray()\n\t\t\t\t\t};\n\t\t\t\t\t$this.data('datepicker', (data = new DateRangePicker(this, $.extend(opts, ropts))));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$this.data('datepicker', (data = new Datepicker(this, opts)));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (typeof option === 'string' && typeof data[option] === 'function'){\n\t\t\t\tinternal_return = data[option].apply(data, args);\n\t\t\t}\n\t\t});\n\n\t\tif (\n\t\t\tinternal_return === undefined ||\n\t\t\tinternal_return instanceof Datepicker ||\n\t\t\tinternal_return instanceof DateRangePicker\n\t\t)\n\t\t\treturn this;\n\n\t\tif (this.length > 1)\n\t\t\tthrow new Error('Using only allowed for the collection of a single element (' + option + ' function)');\n\t\telse\n\t\t\treturn internal_return;\n\t};\n\t$.fn.datepicker = datepickerPlugin;\n\n\tvar defaults = $.fn.datepicker.defaults = {\n\t\tautoclose: false,\n\t\tbeforeShowDay: $.noop,\n\t\tbeforeShowMonth: $.noop,\n\t\tbeforeShowYear: $.noop,\n\t\tcalendarWeeks: false,\n\t\tclearBtn: false,\n\t\ttoggleActive: false,\n\t\tdaysOfWeekDisabled: [],\n\t\tdaysOfWeekHighlighted: [],\n\t\tdatesDisabled: [],\n\t\tendDate: Infinity,\n\t\tforceParse: true,\n\t\tformat: 'mm/dd/yyyy',\n\t\tkeyboardNavigation: true,\n\t\tlanguage: 'en',\n\t\tminViewMode: 0,\n\t\tmaxViewMode: 2,\n\t\tmultidate: false,\n\t\tmultidateSeparator: ',',\n\t\torientation: \"auto\",\n\t\trtl: false,\n\t\tstartDate: -Infinity,\n\t\tstartView: 0,\n\t\ttodayBtn: false,\n\t\ttodayHighlight: false,\n\t\tweekStart: 0,\n\t\tdisableTouchKeyboard: false,\n\t\tenableOnReadonly: true,\n\t\tcontainer: 'body',\n\t\timmediateUpdates: false,\n\t\ttitle: ''\n\t};\n\tvar locale_opts = $.fn.datepicker.locale_opts = [\n\t\t'format',\n\t\t'rtl',\n\t\t'weekStart'\n\t];\n\t$.fn.datepicker.Constructor = Datepicker;\n\tvar dates = $.fn.datepicker.dates = {\n\t\ten: {\n\t\t\tdays: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n\t\t\tdaysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\t\t\tdaysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n\t\t\tmonths: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t\tmonthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\t\ttoday: \"Today\",\n\t\t\tclear: \"Clear\",\n\t\t\ttitleFormat: \"MM yyyy\"\n\t\t}\n\t};\n\n\tvar DPGlobal = {\n\t\tmodes: [\n\t\t\t{\n\t\t\t\tclsName: 'days',\n\t\t\t\tnavFnc: 'Month',\n\t\t\t\tnavStep: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tclsName: 'months',\n\t\t\t\tnavFnc: 'FullYear',\n\t\t\t\tnavStep: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tclsName: 'years',\n\t\t\t\tnavFnc: 'FullYear',\n\t\t\t\tnavStep: 10\n\t\t}],\n\t\tisLeapYear: function(year){\n\t\t\treturn (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));\n\t\t},\n\t\tgetDaysInMonth: function(year, month){\n\t\t\treturn [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n\t\t},\n\t\tvalidParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,\n\t\tnonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\n\t\tparseFormat: function(format){\n\t\t\tif (typeof format.toValue === 'function' && typeof format.toDisplay === 'function')\n                return format;\n            // IE treats \\0 as a string end in inputs (truncating the value),\n\t\t\t// so it's a bad format delimiter, anyway\n\t\t\tvar separators = format.replace(this.validParts, '\\0').split('\\0'),\n\t\t\t\tparts = format.match(this.validParts);\n\t\t\tif (!separators || !separators.length || !parts || parts.length === 0){\n\t\t\t\tthrow new Error(\"Invalid date format.\");\n\t\t\t}\n\t\t\treturn {separators: separators, parts: parts};\n\t\t},\n\t\tparseDate: function(date, format, language){\n\t\t\tif (!date)\n\t\t\t\treturn undefined;\n\t\t\tif (date instanceof Date)\n\t\t\t\treturn date;\n\t\t\tif (typeof format === 'string')\n\t\t\t\tformat = DPGlobal.parseFormat(format);\n\t\t\tif (format.toValue)\n                return format.toValue(date, format, language);\n            var part_re = /([\\-+]\\d+)([dmwy])/,\n\t\t\t\tparts = date.match(/([\\-+]\\d+)([dmwy])/g),\n\t\t\t\tpart, dir, i;\n\t\t\tif (/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/.test(date)){\n\t\t\t\tdate = new Date();\n\t\t\t\tfor (i=0; i < parts.length; i++){\n\t\t\t\t\tpart = part_re.exec(parts[i]);\n\t\t\t\t\tdir = parseInt(part[1]);\n\t\t\t\t\tswitch (part[2]){\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'm':\n\t\t\t\t\t\t\tdate = Datepicker.prototype.moveMonth.call(Datepicker.prototype, date, dir);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'w':\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir * 7);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'y':\n\t\t\t\t\t\t\tdate = Datepicker.prototype.moveYear.call(Datepicker.prototype, date, dir);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);\n\t\t\t}\n\t\t\tparts = date && date.match(this.nonpunctuation) || [];\n\t\t\tdate = new Date();\n\t\t\tvar parsed = {},\n\t\t\t\tsetters_order = ['yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'd', 'dd'],\n\t\t\t\tsetters_map = {\n\t\t\t\t\tyyyy: function(d,v){\n\t\t\t\t\t\treturn d.setUTCFullYear(v);\n\t\t\t\t\t},\n\t\t\t\t\tyy: function(d,v){\n\t\t\t\t\t\treturn d.setUTCFullYear(2000+v);\n\t\t\t\t\t},\n\t\t\t\t\tm: function(d,v){\n\t\t\t\t\t\tif (isNaN(d))\n\t\t\t\t\t\t\treturn d;\n\t\t\t\t\t\tv -= 1;\n\t\t\t\t\t\twhile (v < 0) v += 12;\n\t\t\t\t\t\tv %= 12;\n\t\t\t\t\t\td.setUTCMonth(v);\n\t\t\t\t\t\twhile (d.getUTCMonth() !== v)\n\t\t\t\t\t\t\td.setUTCDate(d.getUTCDate()-1);\n\t\t\t\t\t\treturn d;\n\t\t\t\t\t},\n\t\t\t\t\td: function(d,v){\n\t\t\t\t\t\treturn d.setUTCDate(v);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tval, filtered;\n\t\t\tsetters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];\n\t\t\tsetters_map['dd'] = setters_map['d'];\n\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\n\t\t\tvar fparts = format.parts.slice();\n\t\t\t// Remove noop parts\n\t\t\tif (parts.length !== fparts.length){\n\t\t\t\tfparts = $(fparts).filter(function(i,p){\n\t\t\t\t\treturn $.inArray(p, setters_order) !== -1;\n\t\t\t\t}).toArray();\n\t\t\t}\n\t\t\t// Process remainder\n\t\t\tfunction match_part(){\n\t\t\t\tvar m = this.slice(0, parts[i].length),\n\t\t\t\t\tp = parts[i].slice(0, m.length);\n\t\t\t\treturn m.toLowerCase() === p.toLowerCase();\n\t\t\t}\n\t\t\tif (parts.length === fparts.length){\n\t\t\t\tvar cnt;\n\t\t\t\tfor (i=0, cnt = fparts.length; i < cnt; i++){\n\t\t\t\t\tval = parseInt(parts[i], 10);\n\t\t\t\t\tpart = fparts[i];\n\t\t\t\t\tif (isNaN(val)){\n\t\t\t\t\t\tswitch (part){\n\t\t\t\t\t\t\tcase 'MM':\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].months).filter(match_part);\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].months) + 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'M':\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].monthsShort).filter(match_part);\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].monthsShort) + 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tparsed[part] = val;\n\t\t\t\t}\n\t\t\t\tvar _date, s;\n\t\t\t\tfor (i=0; i < setters_order.length; i++){\n\t\t\t\t\ts = setters_order[i];\n\t\t\t\t\tif (s in parsed && !isNaN(parsed[s])){\n\t\t\t\t\t\t_date = new Date(date);\n\t\t\t\t\t\tsetters_map[s](_date, parsed[s]);\n\t\t\t\t\t\tif (!isNaN(_date))\n\t\t\t\t\t\t\tdate = _date;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn date;\n\t\t},\n\t\tformatDate: function(date, format, language){\n\t\t\tif (!date)\n\t\t\t\treturn '';\n\t\t\tif (typeof format === 'string')\n\t\t\t\tformat = DPGlobal.parseFormat(format);\n\t\t\tif (format.toDisplay)\n                return format.toDisplay(date, format, language);\n            var val = {\n\t\t\t\td: date.getUTCDate(),\n\t\t\t\tD: dates[language].daysShort[date.getUTCDay()],\n\t\t\t\tDD: dates[language].days[date.getUTCDay()],\n\t\t\t\tm: date.getUTCMonth() + 1,\n\t\t\t\tM: dates[language].monthsShort[date.getUTCMonth()],\n\t\t\t\tMM: dates[language].months[date.getUTCMonth()],\n\t\t\t\tyy: date.getUTCFullYear().toString().substring(2),\n\t\t\t\tyyyy: date.getUTCFullYear()\n\t\t\t};\n\t\t\tval.dd = (val.d < 10 ? '0' : '') + val.d;\n\t\t\tval.mm = (val.m < 10 ? '0' : '') + val.m;\n\t\t\tdate = [];\n\t\t\tvar seps = $.extend([], format.separators);\n\t\t\tfor (var i=0, cnt = format.parts.length; i <= cnt; i++){\n\t\t\t\tif (seps.length)\n\t\t\t\t\tdate.push(seps.shift());\n\t\t\t\tdate.push(val[format.parts[i]]);\n\t\t\t}\n\t\t\treturn date.join('');\n\t\t},\n\t\theadTemplate: '<thead>'+\n\t\t\t              '<tr>'+\n\t\t\t                '<th colspan=\"7\" class=\"datepicker-title\"></th>'+\n\t\t\t              '</tr>'+\n\t\t\t\t\t\t\t'<tr>'+\n\t\t\t\t\t\t\t\t'<th class=\"prev\">&#171;</th>'+\n\t\t\t\t\t\t\t\t'<th colspan=\"5\" class=\"datepicker-switch\"></th>'+\n\t\t\t\t\t\t\t\t'<th class=\"next\">&#187;</th>'+\n\t\t\t\t\t\t\t'</tr>'+\n\t\t\t\t\t\t'</thead>',\n\t\tcontTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\n\t\tfootTemplate: '<tfoot>'+\n\t\t\t\t\t\t\t'<tr>'+\n\t\t\t\t\t\t\t\t'<th colspan=\"7\" class=\"today\"></th>'+\n\t\t\t\t\t\t\t'</tr>'+\n\t\t\t\t\t\t\t'<tr>'+\n\t\t\t\t\t\t\t\t'<th colspan=\"7\" class=\"clear\"></th>'+\n\t\t\t\t\t\t\t'</tr>'+\n\t\t\t\t\t\t'</tfoot>'\n\t};\n\tDPGlobal.template = '<div class=\"datepicker\">'+\n\t\t\t\t\t\t\t'<div class=\"datepicker-days\">'+\n\t\t\t\t\t\t\t\t'<table class=\" table-condensed\">'+\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\n\t\t\t\t\t\t\t\t\t'<tbody></tbody>'+\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\n\t\t\t\t\t\t\t\t'</table>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t'<div class=\"datepicker-months\">'+\n\t\t\t\t\t\t\t\t'<table class=\"table-condensed\">'+\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\n\t\t\t\t\t\t\t\t\tDPGlobal.contTemplate+\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\n\t\t\t\t\t\t\t\t'</table>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t'<div class=\"datepicker-years\">'+\n\t\t\t\t\t\t\t\t'<table class=\"table-condensed\">'+\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\n\t\t\t\t\t\t\t\t\tDPGlobal.contTemplate+\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\n\t\t\t\t\t\t\t\t'</table>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t'</div>';\n\n\t$.fn.datepicker.DPGlobal = DPGlobal;\n\n\n\t/* DATEPICKER NO CONFLICT\n\t* =================== */\n\n\t$.fn.datepicker.noConflict = function(){\n\t\t$.fn.datepicker = old;\n\t\treturn this;\n\t};\n\n\t/* DATEPICKER VERSION\n\t * =================== */\n\t$.fn.datepicker.version = '1.6.0-dev';\n\n\t/* DATEPICKER DATA-API\n\t* ================== */\n\n\t$(document).on(\n\t\t'focus.datepicker.data-api click.datepicker.data-api',\n\t\t'[data-provide=\"datepicker\"]',\n\t\tfunction(e){\n\t\t\tvar $this = $(this);\n\t\t\tif ($this.data('datepicker'))\n\t\t\t\treturn;\n\t\t\te.preventDefault();\n\t\t\t// component click requires us to explicitly show it\n\t\t\tdatepickerPlugin.call($this, 'show');\n\t\t}\n\t);\n\t$(function(){\n\t\tdatepickerPlugin.call($('[data-provide=\"datepicker-inline\"]'));\n\t});\n\n}));","$(function() {\n\tvar touchY=0;\n\t$(\".journey .card\").bind(\"touchstart\",function(e) {\n\t\t$card=$(e.target);\n\t\tif ($card.hasClass(\"message_1\")) {\n\t\t\tactivateDelay();\n\t\t} else {\n\t\t\tif ($(this).parent().hasClass(\"open\")) {\n\t\t\t\t$(this).parent().removeClass(\"open\");\n\t\t\t} else {\n\t\t\t\t$(this).parent().addClass(\"open\");\n\t\t\t}\n\t\t}\n\t});\n\n\t$(\".schedule .card\").bind(\"touchstart\",touchstartHandler);\n\n\tfunction touchstartHandler(e) {\n\t\t$(\".schedule .card\").bind(\"touchend\",touchendHandler);\n\t\ttouchY = e.originalEvent.changedTouches[0].clientY;\n\t\tconsole.log(\"touch start\",touchY);\n\t}\n\tfunction touchendHandler(e) {\n\t\tvar thisY = e.originalEvent.changedTouches[0].clientY;\n\t\tif (Math.abs(touchY-thisY)>20) {\n\t\t\tif (touchY-thisY<0) {\n\t\t\t\t$(this).parent().removeClass(\"open\");\n\t\t\t} else {\n\t\t\t\t$(this).parent().addClass(\"open\");\n\t\t\t}\n\t\t}\n\t}\n\tfunction activateDelay() {\n\t\t$($card).fadeOut();\n\t\t$(\".journey .message_2\").fadeIn();\n\t\t\n\t\t$(\".journey .card img\").attr(\"src\",\"img/gfx_hand.svg\");\n\t\tvar activeBucket = clock_slider.activeBucket();\n\t\tvar time_str = ($(\".bottomslider span.time\").eq(activeBucket).html());\n\t\tvar time = time_str.split(\":\");\n\t\tvar h = parseInt(time[0]);\n\t\tvar m = parseInt(time[1]);\n\t\tm+=22;\n\t\tif (m>=60) {\n\t\t\tm-=60;\n\t\t\th+=1;\n\t\t}\n\t\t$(\".info\").animate({opacity:0}, 00);\n\n\t\tvar delaydepart = '<span class=\"delay\">Running behind</span>';\n\t\tvar delayarrive = '<span class=\"platform\">Platform 12</span><span class=\"delay\">Exp '+pad(h,2)+':'+pad(m,2)+'</span>';\n\t\t$(\".info.depart\").html(delaydepart);\n\t\t$(\".info.arrive\").html(delayarrive);\n\t\t$(\".info\").animate({opacity:1},200);\n\t}\n});","var currentTime;\n\n\tvar clock_slider = function() {\n\t\tvar activeBucket = 0;\n\t\tvar entryTouchPoint = new Object();\n\t\tvar entryTouchTime;\n\t\tvar exitTouchPoint = new Object();\n\t\tvar pixelsMoved = 0;\n\t\tvar swipeDetectionPixelAmount = 60;\n\t\tvar firstMove = true;\n\t\tvar touchTimeout;\n\t\tvar scrollMuch = 0;\n\t\tvar windowWidth = $(window).width();\n\t\tvar initBucket;\n\t\t\n\t\tfunction activateBucket(no, speed, elm, init) {\n\t\t\tvar delaydepart, delayarrive;\n\t\t\tactiveBucket=no;\n\t\t\t$bucket = $(\".options time\",$(\".clock_slider\").eq(0)).eq(activeBucket);\n\t\t\tvar delay=$bucket.attr(\"data-message\");\n\t\t\tvar time = $bucket.attr(\"datetime\")+\" \";\n\t\t\tvar time = time.trim().replace(\" \",\"T\");\n\t\t\tvar time = new Date(time);\n\t\t\tvar now = new Date();\n\t\t\ttime.setHours(time.getHours() - 1);\n\t\t\t$(\".journey .plan li\").each(function(i,e) {\n\t\t\t\tvar targetTime = new Date(time.getTime() + (parseInt($(this).attr(\"data-distance\"))*60000));\n\t\t\t\tvar timeString = pad(targetTime.getHours(),2) + \":\" +pad(targetTime.getMinutes(),2);\n\t\t\t\t\n\t\t\t\tif (i<4 && now>time) {\n\t\t\t\t\t$(this).addClass(\"passed\");\n\t\t\t\t} else {\n\t\t\t\t\t$(this).removeClass(\"passed\");\n\t\t\t\t}\n\t\t\t\t$(\"strong\",$(this)).html(timeString);\n\t\t\t});\n\t\t\tif (now>time) {\n\t\t\t\t$(\".current_status\").css(\"display\",\"block\");\n\t\t\t} else {\n\t\t\t\t$(\".current_status\").css(\"display\",\"none\");\n\t\t\t}\n\t\t\tvar now = new Date();\n\t\t\tif (no<initBucket) {\n\t\t\t\tdelaydepart = '<span class=\"journey_link\">Running on time</span>';\n\t\t\t\tdelayarrive = '<span class=\"platform\">Platform 4: Train to Lymington Town</span><span class=\"delay\">45min</span>';\n\t\t\t} else if (no==initBucket) {\n\t\t\t\tdelaydepart = '<span class=\"platform\">Platform 15: Train to Lymington Town</span><span class=\"delay\">1h 45min</span>';\n\t\t\t\tdelayarrive = '<span class=\"delay\">1h 45min</span>';\n\t\t\t} else {\n\t\t\t\tdelaydepart = '<span class=\"delay\">Exp on time</span>';\n\t\t\t \tdelayarrive = '<span class=\"delay\">1h 45min</span>';\n\t\t\t}\n\t\t\tif (!speed) {\n\t\t\t\t$(\".options\",elm).css(\"transition\",\"all 0s cubic-bezier(.6,.0,.4,1)\");\n\t\t\t} else {\n\t\t\t\tif (speed>.5) speed=.5;\n\t\t\t\t$(\".options\",elm).css(\"transition\",\"all \"+speed+\"s ease-out\");\n\t\t\t}\n\n\t\t\tvar targetX =  0-(no*$(\".clock_slider .options time\").width());\n\t\t\t$(\".options\",elm).css(\"transform\",\"translateX(\"+(targetX+(windowWidth/2-($(\"time.bucket\").width()/2)))+\"px)\");\n\t\t\t$(\".info\").animate({opacity:0}, 200);\n\t\t\tsetTimeout(function(delay) {\n\t\t\t\tif (delay) {\n\t\t\t\t\t$(\".info.depart\").html(delaydepart);\n\t\t\t\t\t$(\".info.arrive\").html(delayarrive);\n\t\t\t\t} else {\n\t\t\t\t\t$(\".info.depart\").html(delaydepart);\n\t\t\t\t\t$(\".info.arrive\").html(delayarrive);\n\t\t\t\t}\n\t\t\t\t$(\".info\").animate({opacity:1},200);\n\t\t\t},350,delay);\n\t\t}\n\n\t\t\n\t\tfunction touchstartHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tscrollBucket = clock_slider;\n\t\t\t$(\".clock_slider\").removeClass(\"active\");\n\t\t\tclock_slider.addClass(\"active\");\n\t\t\tscrollMuch = scrollBucket.scrollTop;\n\t\t\tpixelsMoved=0;\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\t\t\t$(\".options\",clock_slider).bind(\"touchend\",touchendHandler);\n\t\t\t$(\".options\",clock_slider).bind(\"touchmove\",touchmoveHandler);\n\t\t\tvar matrix=$(\".options\",clock_slider).css(\"transform\").toString().replace(\"matrix(\",\"\").replace(\")\",\"\").split(\",\");\n\t\t\tentryTouchPoint.touchOffsetX = (parseInt(matrix[4].trim())); \n\t\t\tentryTouchPoint.x = e.originalEvent.touches[0].clientX;\n\t\t\tentryTouchTime = new Date().getTime();\n\n\t\t}\n\t\tfunction possiblyUnbind(e) {\n\t\t\tcurrentBucket = findScrollingBucket(e.target);\n\t\t\tcurrentScroll = currentBucket.scrollTop;\n\t\t\tif (currentScroll-scrollMuch>20) {\n\t\t\t\tunbindSwipeHandlers(e);\n\t\t\t}\n\t\t}\n\t\tfunction findScrollingBucket(obj) {\n\t\t\tif ($(obj).hasClass(\"bucket\")) {\n\t\t\t\treturn obj;\n\t\t\t} else {\n\t\t\t\treturn findScrollingBucket(obj.parentNode);\n\t\t\t}\n\t\t}\n\t\tfunction touchmoveHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tclearTimeout(touchTimeout);\n\t\t\t\n\t\t\tvar matrix=$(\".options\", clock_slider).css(\"transform\").toString().replace(\"matrix(\",\"\").replace(\")\",\"\").split(\",\");\n\t\t\texitTouchPoint.x = e.originalEvent.touches[0].clientX;\n\t\t\texitTouchPoint.touchOffsetX = parseInt(matrix[4].trim()); \n\n\t\t\tpixelsMoved = entryTouchPoint.x - exitTouchPoint.x;\n\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\n\t\t\tvar targetX = ((entryTouchPoint.x - exitTouchPoint.x)-entryTouchPoint.touchOffsetX)*-1;\n\t\t\t$(\".options\",clock_slider).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateX(\"+targetX+\"px)\");\n\n\t\t}\n\t\tfunction touchendHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tclearTimeout(touchTimeout);\n\t\t\t$(\".options\",clock_slider).css(\"transition-duration\",\"0.4s\").unbind(\"touchmove\",touchmoveHandler).unbind(\"touchend\",touchendHandler);\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\t\t\t\n\t\t\tvar destination = (entryTouchPoint.x - exitTouchPoint.x);\n\n\t\t\tvar closestBucket = Math.round((destination/$(\".options time\",clock_slider).width()));\n\n\t\t\tclosestBucket = activeBucket + closestBucket;\n\t\t\tif (closestBucket<0) closestBucket = 0;\n\t\t\t\n\t\t\tvar animationTime = Math.abs(timeSinceTouchstart/pixelsMoved)*0.6;\n\t\t\tconsole.log(animationTime);\n\t\t\tif (animationTime<0.2) {\n\t\t\t\tanimationTime=0.2;\n\t\t\t}\n\t\t\tactivateBucket(closestBucket,animationTime);\n\t\t}\n\t\tfunction unbindSwipeHandlers(e) {\n\t\t\t$(\".clock_slider .options\").unbind(\"touchmove\",touchmoveHandler);\n\t\t\t$(\".clock_slider .options\").unbind(\"touchend\",touchendHandler);\n\t\t\t$(\".bucket\").unbind(\"scroll\",unbindSwipeHandlers);\n\t\t}\n\t\tfunction findCurrentTime(elm) {\n\t\t\tvar d = new Date();\n\t\t\tvar h = d.getHours();\n\t\t\tvar m = d.getMinutes();\n\n\t\t\tm_rounded = 5 * Math.ceil(m/5);\n\t\t\tif (m_rounded==60) {\n\t\t\t\tm_rounded=0;\n\t\t\t\th+=1;\n\t\t\t}\n\t\t\tm_rounded+=5;\n\t\t\tvar currentTime = pad(h,2)+\":\"+pad(m_rounded,2);\n\t\t\tvar activeChild=0;\n\t\t\t$(\".options time span\",$(elm)).each(function(i,e) {\n\t\t\t\tthisHour=parseInt($(this).html().substring(0,2));\n\t\t\t\tthisMinute=parseInt($(this).html().substring(3,5));\n\n\t\t\t\tif ((thisHour==h && thisMinute>=m_rounded)|| thisHour>h) {\n\t\t\t\t\tactiveChild = i;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn activeChild;\n\t\t}\n\t\t\n\t\t\n\t\tNumber.prototype.map = function (in_min, in_max, out_min, out_max) {\n\t\t  return (this - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n\t\t}\n\t\tfunction scaleAccordingToCenterPos(obj) {\n\n\t\t\ttry {\n\t\t\t\tvar elm = document.querySelector(obj);\n\t\t\t\tvar center = document.elementFromPoint(windowWidth/2,elm.getBoundingClientRect().top+5).parentNode;\n\t\t\t\tif (typeof center!=\"undefined\") {\n\t\t\t\t\tif (center.tagName==\"TIME\") {\n\t\t\t\t\t\tvar objects = new Array();\n\t\t\t\t\t\tobjects.push(center);\n\t\t\t\t\t\tobjects.push(center.parentNode.previousSibling.firstChild);\n\t\t\t\t\t\tobjects.push(center.parentNode.nextSibling.firstChild);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfunction getDistanceFromCenter(obj) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar returnValue =Math.abs((windowWidth/2)- (obj.getBoundingClientRect().left + obj.getBoundingClientRect().width/2));\n\t\t\t\t\t\t\t} catch (e) {\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn returnValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (object in objects) {\n\t\t\t\t\t\t\tif (objects[object]!=\"undefined\") {\n\t\t\t\t\t\t\t\tcenterMeasure = getDistanceFromCenter(objects[object])*-1;\n\n\t\t\t\t\t\t\t\tif (centerMeasure!=elm.centerMeasure) {\n\t\t\t\t\t\t\t\t\tspanTime=objects[object].firstChild;\n\n\n\t\t\t\t\t\t\t\t\tobjects[object].centerMeasure = centerMeasure;\n\t\t\t\t\t\t\t\t\tcenterScale = Math.abs(centerMeasure.map(-100,0,1,1.6));\n\t\t\t\t\t\t\t\t\tcenterOpacity = centerMeasure.map(-180,0,.3,1);\n\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (spanTime.getAttribute(\"data-centerscale\")!=centerScale) {\n\t\t\t\t\t\t\t\t\t\tif (centerScale<1) centerScale=1;\n\t\t\t\t\t\t\t\t\t\tspanTime.setAttribute(\"data-centerscale\",centerScale);\n\t\t\t\t\t\t\t\t\t\t$(spanTime).css(\"transform\",\"scale(\"+centerScale+\",\"+centerScale+\")\").css(\"opacity\",centerOpacity);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tdraw: function() {\n\t\t\t\tscaleAccordingToCenterPos(\".topslider\");\n\t\t\t\tscaleAccordingToCenterPos(\".bottomslider\");\n\t\t\t\tsetTimeout(clock_slider.draw,10);\n\t\t\t\t// window.requestAnimationFrame(clock_slider.draw);\n\t\t\t},\n\t\t\tInit: function(elm,no) {\n\t\t\t\tvar startBucket = findCurrentTime(elm);\n\t\t\t\tinitBucket = startBucket;\n\t\t\t\t$(\".options\",$(\".clock_slider\")).bind(\"touchstart\",touchstartHandler);\n\t\t\t\tactivateBucket(startBucket,false, $(\".clock_slider\").eq(0));\n\t\t\t\tactivateBucket(startBucket,false, $(\".clock_slider\").eq(1));\n\t\t\t\t$(\".clock_slider\").each(function() {\n\t\t\t\t\t$(this)[0].fromTop = $(this).offset().top;\n\t\t\t\t});\n\t\t\t\tclock_slider.draw();\n\t\t\t},\n\t\t\tactiveBucket: function() {\n\t\t\t\treturn activeBucket;\n\t\t\t}\n\t\t}\n\t\t\n\t}();\n// $(document).ready(function($) {\n// \tsetTimeout(function() { clock_slider.draw(); },200);\n\t$(function() {\n\t\tdocument.body.ontouchstart = function(e){\n\t\t\t$source = $(e.target);\n\t\t\tvar source = e.target;\n\t\t\n\t\t\tif (source.tagName!=\"INPUT\" && source.tagName!=\"BUTTON\" && source.tagName!=\"A\" && !$source.hasClass(\"clickaction\") && !$source.hasClass(\"link_arrow\")) e.preventDefault(); \n\t\t}\n\t})\n// });\nfunction parentHasClass(elm,className) {\n\tif (elm.className.indexOf(className)<0) {\n\t\tif (elm!=document.body) {\n\t\t\treturn parentHasClass(elm.parentNode, className);\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\treturn true;\n\t}\n}\nfunction pad(n, width, z) {\n\t\t\tz = z || '0';\n\t\t\tn = n + '';\n\t\t\treturn n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n\t\t}","var keyboardTimeout;\nvar searchTimeout;\n$(function() {\n    var test = document.createElement(\"div\");\n    test.id = \"fontTest\";\n    test.style.width = \"calc(100% - 60px)\";\n    test.style.height = \"100px\";\n    test.style.whiteSpace = \"nowrap\";\n    test.innerHTML = \"<span></span>\";\n    test.style.position = \"absolute\";\n    test.style.top = \"-100px\";\n    document.body.appendChild(test);\n    // $(\"input.station\").bind(\"touchstart\",function() { $(this).focus(); });\n    $(test).css(\"-webkit-transform\", \"translateY(-3000px)\");\n    $(test).textfill({\n        maxFontPixels: 80\n    });\n    $(\"input.station\").bind(\"keyup\", update);\n\n    function update(e) {\n        clearTimeout(keyboardTimeout);\n        var value = $(\"input.station\").val();\n        if (value == \"\") value = \"a\";\n        $(\"#fontTest\").html(\"<span>\" + value + \"_</span>\");\n        $(\"#fontTest\").delay(20).textfill({\n            maxFontPixels: 80\n        });\n        $(\"input.station\").css(\"font-size\", $(\"#fontTest span\").css(\"font-size\"));\n        stationSearch(value);\n    }\n\n    function stationSearch(value) {\n        $(\"ul.list\").html(\"<li><span class=\\\"searching\\\"></span></li>\");\n        clearTimeout(searchTimeout);\n        searchTimeout = setTimeout(function() {\n            $(\"ul.list\").css(\"opacity\", 0).html('<li style=\"opacity:0\" class=\"clickaction\">Milford on Sea</li><li style=\"opacity:0\" class=\"remove\" class=\"clickaction\">Milton, Cambs.</li>');\n            $(\"ul.list\").animate({\n                opacity: 1\n            }, 300);\n            $(\"ul.list li\").each(function(i, e) {\n                setTimeout(function(obj) {\n                    $(obj).animate({\n                        opacity: 1\n                    }, 300);\n                }, i * 200 + 200, e);\n            }).bind(\"click\", function() {\n                closeDestinationScreen();\n                // enterHomeScreen();\n                setTimeout(function() {\n                    enterLocating();\n                },1600);\n            });\n        }, 1000);\n        keyboardTimeout = setTimeout(removeKeyboardFocus, 1500);\n    }\n    \n\n    function removeKeyboardFocus() {\n        $(\"input.station\").blur();\n    }\n    $(\"#return\").bind(\"focus\", function() {\n        $(\".extra\").addClass(\"open\");\n        console.log(\"first \" + window.innerHeight);\n        setTimeout(function() {\n            $(\".extra\").css(\"top\", $(window).scrollTop());\n            console.log(\"second \" + window.outerHeight, $(window).scrollTop());\n        }, 300);\n\n    });\n    $(\"#return\").bind(\"blur\", function() {\n        $(\".extra\").removeClass(\"open\");\n    });\n    $(\"input[type=date]\").bind(\"change\",function() {\n        setFormattedDate($(this).next().next()[0],this);\n    });\n    $(\".planning radiogroup input[type=radio]\").bind(\"click\",function() {\n        $(this).prop('checked', true);\n        switch ($(\"input[type=radio]:checked\",$(this).parent()).attr(\"value\")) {\n            case 'single':\n                $(\".dates\").removeClass(\"double\");\n                break;\n            case 'return':\n                \n                if ($(\".return input[type=text]\").val()==\"Open\") {\n                     $(\".return input[type=text]\").val(\"\");\n                }\n                setFormattedDate($(\".return input[type=text]\"), $(\".return input[type=date]\"));\n               $(\".dates\").addClass(\"double\");\n                break;\n            case 'open-return':\n                $(\".dates\").addClass(\"double\");\n                $(\".return input[type=text]\").val(\"Open\");\n                break;\n        }\n    });\n    function setFormattedDate(target, source) {\n        if ($(source).val().length>0) {\n            var today = new Date();\n            var minDate = new Date(source.min);\n            minDate.setMinutes(minDate.getMinutes()+839);\n            var date = new Date($(source).val());\n            date.setMinutes(date.getMinutes()+900);\n            if (minDate>date) {\n                date=minDate;\n                $(source).val(date);\n            }\n       \n            var timezoneOffset = date.getTimezoneOffset();\n\n            var daySelected = \"\";\n            var months = [\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];\n            // var months = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];\n\n            if ($(source).attr(\"id\")==\"outbound\") {\n                var compareDate = new Date($(\"#return\").val());\n                document.getElementById('return').min=$(source).val();\n                if (date>compareDate) {\n                    document.getElementById('return').value=\"\";\n                    $(\"#return\").next().val(\"\");\n                } else if ( $(\"#return\").next().val().length==0) {\n                    $(\"#return\").attr(\"value\",$(source).val());\n                }\n            }\n           \n            date.setMinutes(date.getMinutes()+timezoneOffset);\n            if (date.getDate() == today.getDate() && date.getMonth() == today.getMonth() && date.getYear() == today.getYear()) {\n                daySelected = \"Today\";\n            } else {\n                daySelected = months[date.getMonth()]+\" \"+ date.getDate();\n            }\n            $(target).val(daySelected);\n\n        }\n    }\n    function padDigits(number, digits) {\n        return Array(Math.max(digits - String(number).length + 1, 0)).join(0) + number;\n    }\n    $(\"input[type=date]\").each(function() {\n        var today = new Date();\n        document.getElementById(this.id).min = (today.getYear()+1900) + \"-\" + padDigits(today.getMonth()+1,2) +\"-\" + padDigits(today.getDate(),2);\n        if ( $(this).prop('type') != 'date' ) {\n            $(this).datepicker();\n        }\n    });\n\n});","(function ($, window, document) {\n  \"use strict\";\n  // This code is only for iOS\n  if (!window.navigator.userAgent.match(/(iPhone|iPad|iPod)/)) {\n    return;\n  }\n\n  var CONFIG = {\n    TOUCH_MOVE_THRESHHOLD: 10,\n    PRESSED_CLASS: \"pressed\",\n    GHOST_CLICK_TIMEOUT: 500,\n    GHOST_CLICK_THRESHOLD: 10\n  }, clicks = [];\n\n  function withinDistance(x1, y1, x2, y2, distance) {\n    return Math.abs(x1 - x2) < distance && Math.abs(y1 - y2) < distance;\n  }\n\n  // Use a native event listener so we can set useCapture\n  document.addEventListener('click', function (e) {\n    for (var i = 0; i < clicks.length; i++) {\n      // For some reason, the ghost click events don't always appear where the touchend event was\n      if (withinDistance(clicks[i][0], clicks[i][1], e.clientX, e.clientY,\n        CONFIG.GHOST_CLICK_THRESHOLD)) {\n        e.preventDefault();\n        e.stopPropagation();\n        return;\n      }\n    }\n  }, true);\n\n  $(document).on('touchstart', '.no_delay_button', function (e) {\n    var elem = $(this);\n\n    // Disable the webkit tap highlight, since it is no longer accurate\n    elem.css('webkitTapHighlightColor', 'rgba(0,0,0,0)');\n\n    elem.addClass(CONFIG.PRESSED_CLASS);\n\n    var touch = e.originalEvent.touches[0];\n    var location = [touch.clientX, touch.clientY];\n    this.__eventLocation = location;\n\n    this.__onTouchMove = function (e) {\n      var touch = e.originalEvent.touches[0];\n      if (withinDistance(touch.clientX, touch.clientY, location[0], location[1],\n        CONFIG.TOUCH_MOVE_THRESHHOLD)) {\n        elem.addClass(CONFIG.PRESSED_CLASS);\n      } else {\n        elem.removeClass(CONFIG.PRESSED_CLASS);\n      }\n    };\n\n    $(document.body).on('touchmove', this.__onTouchMove);\n  });\n\n  $(document).on('touchcancel', '.no_delay_button', function () {\n    var elem = $(this);\n    elem.removeClass(CONFIG.PRESSED_CLASS);\n    $(document.body).off('touchmove', this.__onTouchMove);\n  });\n\n  $(document).on('touchend', '.no_delay_button', function (e) {\n    var elem = $(this);\n    if (elem.hasClass(CONFIG.PRESSED_CLASS)) {\n      elem.removeClass(CONFIG.PRESSED_CLASS);\n      var location = this.__eventLocation;\n      if (location) {\n        var touch = e.originalEvent.changedTouches[0];\n        if (!withinDistance(touch.clientX, touch.clientY, location[0], location[1],\n          CONFIG.TOUCH_MOVE_THRESHHOLD)) {\n          return;\n        }\n        // Dispatch a fake click event within a setTimeout. If we don't do this, there's a strange bug where\n        // the next view can't correctly bring the keyboard up\n        setTimeout(function() {\n          var evt = document.createEvent(\"MouseEvents\");\n          evt.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n          elem.get(0).dispatchEvent(evt);\n        }, 1);\n\n        // Don't process the default action for this event to avoid WebKit stealing focus from a\n        // view we might be loading, and from dispatching a click event\n        e.preventDefault();\n\n        // Eat further \"ghost\" click events at this location that appear if the user holds the link down\n        // longer than the double-tap cancel threshold (these are not cancelled when preventing default)\n        var clickLocation = [touch.clientX, touch.clientY];\n        clicks.push(clickLocation);\n        window.setTimeout(function() {\n          var i = clicks.indexOf(clickLocation);\n          if (i >= 0) {\n            clicks.splice(i, 1);\n          }\n        }, CONFIG.GHOST_CLICK_TIMEOUT);\n      }\n    }\n\n    $(document.body).off('touchmove', this.__onTouchMove);\n  });\n\n})(jQuery, window, document);","var locationHandler = function() {\n\tvar googlePlacesAPI = \"AIzaSyCHh4oobxVPkxm0NuPSpusns3QNe9ZdJHU\";\n\tvar userPosition;\n\tvar lastInput;\n\t// https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=51.4859846,-0.1672702&types=train_station&key=AIzaSyCHh4oobxVPkxm0NuPSpusns3QNe9ZdJHU&rankby=distance\n\t\t\n\tfunction getCurrentLocation() {\n\t\tif (navigator.geolocation) {\n      \tnavigator.geolocation.getCurrentPosition(showPosition);\n     \t}\n\t}\n\tfunction showPosition(position) {\n\t\tuserPosition = position;\n\t\tconsole.log(userPosition);\n\t}\n\tfunction stationSearch(geolocation,searchname,sourceInput) {\n\t\t// var apiUrl = \"https://maps.googleapis.com/maps/api/place/nearbysearch/json\";\n\t\t// // ?location=51.4859846,-0.1672702&types=train_station&key=AIzaSyCHh4oobxVPkxm0NuPSpusns3QNe9ZdJHU&rankby=distance\";\n\t\t// var data = {\n\t\t//     key: googlePlacesAPI,\n\t\t//     location: geolocation,\n\t\t//     types: \"train_station\",\n\t\t//     rankby: \"distance\",\n\t\t//     format: \"json\"\n\t\t// };\n\t\t// $.ajax({\n\t\t//   url: apiUrl,\n\t\t//   data: data,\n\t\t//   type: \"GET\",  \n\t\t//   jsonpCallback: 'callback',\n\t\t//   dataType:\"html\",\n\t\t//   crossDomain: true,\n\t\t//   success: function(success) {\n\t\t// \t\tconsole.log(success);\n\t\t// \t\t// var places=stationSearch(geolocation);\n\t\t// \t}\n\t\t// });\n\t\tmap = new google.maps.Map(document.getElementById('map'), {\n\t      center: geolocation,\n\t      zoom: 15\n   \t});\n\t\tvar service = new google.maps.places.PlacesService(map);\n\t\tservice.nearbySearch({\n\t\t location: geolocation,\n\t\t name: searchname,\n\t\t // types: ['train_station'],\n\t\t rankBy: google.maps.places.RankBy.DISTANCE,\n\t\t}, processResults);\n\t}\n\tfunction travelSearch() {\n\t\tconsole.log(\"go travelsearch\");\n\t\tvar directionsService = new google.maps.DirectionsService();\n      var request = {\n         origin: $(\"#from_geo\").val(),\n         destination: $(\"#to_geo\").val(),\n         transitOptions: {\n\t\t\t\tdepartureTime: new Date(),\n\t\t\t\tmodes: [google.maps.TransitMode.RAIL],\n\t\t\t\talternatives: true,\n\t\t\t\troutingPreference: google.maps.TransitRoutePreference.FEWER_TRANSFERS\n\t\t\t},\n\t\t\tunitSystem: google.maps.UnitSystem.IMPERIAL,\n   \n         travelMode: google.maps.TravelMode[\"TRANSIT\"]\n      };\n      directionsService.route(request, function(response, status) {\n\t\t\tif (status == google.maps.DirectionsStatus.OK) {\n           \tconsole.log(response);\n         } else {\n         \tconsole.log(\"error\",response);\n         }\n      });\n   }\n\tfunction processResults(results,status,sourceInput){\n\t\tconsole.log(results,status);\n\t\t$choices=$(lastInput).next();\n\t\t$choices.css(\"height\",\"auto\");\n\t\t$choices.css(\"height\",\"0\");\n\n\t\tconsole.log($choices);\n\t\t$choices.html(\"<label>Nearby locations</label><ul></ul>\");\n\t\tvar a=0;\n\t\tfor (i=0; i<results.length;i++) {\n\t\t\t// if (i>0) {\n\t\t\t// \tif (results[i].name.indexOf(results[i-1].name)>-1) {\n\t\t\t// \t\t$(\"li\",$choices).filter(\":last\").remove();\n\t\t\t// \t\ta-=1;\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t$(\"ul\",$choices).append('<li><a href=\"#\" data-place_geo=\"'+results[i].geometry.location.J+','+results[i].geometry.location.M+'\">'+results[i].name+'</li>');\n\t\t\tif (a>3) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// if (i<results.length-1) {\n\t\t\t// \tif (results[i].name.indexOf(results[i+1].name)>-1) {\n\t\t\t// \t\ti+=1;\n\t\t\t// \t}\n\t\t\t// }\n\t\t\ta+=1;\n\t\t}\n\t\tif (a==0) {\n\t\t\t$choices.css(\"height\",0);\n\t\t} else {\n\t\t\t$choices.css(\"height\",(a*30)+30);\n\t\t}\n\t\t\n\t\t$(\"a\",$choices).bind(\"click\",stationChoiceHandler);\n\t\t// $(lastInput);\n\n\t}\n\tfunction stationChoiceHandler(e) {\n\t\tvar sourceElement = e.target;\n\t\tvar place_id = sourceElement.getAttribute(\"data-place_geo\");\n\t\t$(lastInput).val(sourceElement.innerHTML);\n\t\t$(\"#\"+$(lastInput).attr(\"id\")+\"_geo\").val(place_id);\n\t\te.preventDefault();\n\t\tconsole.log($(sourceElement).parent().parent().parent());\n\t\t$(sourceElement).parent().parent().parent().css(\"height\",0);\n\t}\n\tfunction nameSearch(sourceElm) {\n\t\tconsole.log(\"searching for: \", sourceElm.value);\n\t\tlastInput=sourceElm;\n\t\tvar apiUrl = \"https://maps.googleapis.com/maps/api/geocode/json\";\n\t\tvar data = {\n\t\t    key: googlePlacesAPI,\n\t\t    address: sourceElm.value,\n\t\t    components:'country:uk'\n\t\t};\n\t\t$.ajax({\n\t\t  url: apiUrl,\n\t\t  type: 'GET',\n\t\t  data: data,    \n\t\t  dataType:\"json\",\n\t\t  crossDomain: true,\n\t\t  success: function(data) {\n\t\t  // \t\tconsole.log(data);\n\t\t\t\t// // var geolocation = data.results[0].geometry.location.lat+\",\"+data.results[0].geometry.location.lng;\n\t\t\t\t// var geolocation = new google.maps.LatLng(data.results[0].geometry.location.lat,data.results[0].geometry.location.lng);\n\t\t\t\t// stationSearch(geolocation, sourceElm.value, sourceElm);\n\t\t\t\t\tvar results=data.results;\n\t\t\t\t\t$choices=$(sourceElm).next();\n\t\t\t\t\t$choices.css(\"height\",\"auto\");\n\t\t\t\t\t$choices.css(\"height\",\"0\");\n\n\t\t\t\t\tconsole.log($choices);\n\t\t\t\t\t$choices.html(\"<label>Nearby locations</label><ul></ul>\");\n\t\t\t\t\tvar a=0;\n\t\t\t\t\tfor (i=0; i<results.length;i++) {\n\t\t\t\t\t\t// if (i>0) {\n\t\t\t\t\t\t// \tif (results[i].name.indexOf(results[i-1].name)>-1) {\n\t\t\t\t\t\t// \t\t$(\"li\",$choices).filter(\":last\").remove();\n\t\t\t\t\t\t// \t\ta-=1;\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tconsole.log(results[i]);\n\t\t\t\t\t\tvar append='<li><a href=\"#\" data-place_geo=\"'+results[i].geometry.location.lat+','+results[i].geometry.location.lng+'\">';\n\t\t\t\t\t\tplace = results[i];\n\t\t\t\t\t\tvar address = '';\n\t\t\t\t\t\tif (place.address_components) {\n\t\t\t\t\t\t      address = [\n\t\t\t\t\t\t        (place.address_components[0] && place.address_components[0].short_name || ''),\n\t\t\t\t\t\t        (place.address_components[1] && place.address_components[1].short_name || ''),\n\t\t\t\t\t\t        (place.address_components[2] && place.address_components[2].short_name || '')\n\t\t\t\t\t\t      ].join(', ');\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t    append+=address;\n\t\t\t\t\t\tappend+=\"</li>\";\n\t\t\t\t\t\t$(\"ul\",$choices).append(append);\n\t\t\t\t\t\tif (a>3) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if (i<results.length-1) {\n\t\t\t\t\t\t// \tif (results[i].name.indexOf(results[i+1].name)>-1) {\n\t\t\t\t\t\t// \t\ti+=1;\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\t\t\t\t\t\ta+=1;\n\t\t\t\t\t}\n\t\t\t\t\tif (a==0) {\n\t\t\t\t\t\t$choices.css(\"height\",0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$choices.css(\"height\",(a*30)+30);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t$(\"a\",$choices).bind(\"click\",stationChoiceHandler);\n\n\t\t\t}\n\t\t});\n\t\t// var input = sourceElm;\n\t\t// // var autocomplete = new google.maps.places.Autocomplete(input);\n\t\t// var autocomplete = new google.maps.places.Autocomplete(input, {\n       \n  //       componentRestrictions: {country: 'uk'}\n  //     });\n\t\t// autocomplete.addListener('place_changed', function() {\n\t\t// \tvar place = autocomplete.getPlace();\n\t\t// \tconsole.log(place);\n\t\t// });\n\t}\n\tfunction stationSearchKeyUpHandler(e) {\n\t\t// console.log(\"key up\");\n\t\tvar sourceElm = e.target;\n\t\tlastInput = e.target;\n\t\tclearTimeout(sourceElm.timeout);\n\t\tsourceElm.timeout = setTimeout(nameSearch,500,sourceElm);\n\t}\n\treturn {\n\t\tInit:function() {\n\t\t\t//getCurrentLocation();\n\t\t\t// $(\".station_search\").each(function() {\n\t\t\t// \t$(this).bind(\"keyup\",stationSearchKeyUpHandler);\n\t\t\t// });\n\t\t\t// $(\".planning button\").bind(\"click\",travelSearch);\n\t\t\t$(\".planning button\").bind(\"click\",enterSchedule);\n\t\t},\n\t\tgetLocation:function() {\n\t\t\tgetCurrentLocation();\n\t\t}\n\t}\n}();\n$(function() {\n\t// locationHandler.Init();\n})\n","\tvar schedule = function() {\n\t\tvar headerHeight = $(\".schedule .results .outbound header\").outerHeight() + $(\".schedule_container > header\").outerHeight();\n\t\tvar windowHeight = 0;\n\t\tvar scrollAnimation = new Object();\n\t\tscrollAnimation.kill = function() {\n\n\t\t}\n\t\tfunction control(e) {\n\t\t\t\n\t\t}\n\t\tfunction resizeHandler(e) {\n\t\t\twindowHeight = $(window).innerHeight();\n\t\t\t// headerHeight = $(\".schedule .results .selecting header\").outerHeight() + $(\".schedule_container > header\").outerHeight();\n\t\t\t// var matrix = $(\".schedule_container .results\").css(\"transform\").split(\", \");\n\t\t\tvar extraHeaderHeight = 0;\n\t\t\tvar headerheight = 0;\n\t\t\tvar headerMinHeight = 80;\n\t\t\t// headerHeight=parseInt(matrix[5]) + parseInt($(\".schedule_container .results\").css(\"top\"));\n\n\t\t\tsetTimeout(function() {\n\t\t\t\t// $(\"body\").scrollTop(0);\n\t\t\t\t$(\".schedule\").each(function() {\n\t\t\t\t\tscrollAnimation = TweenMax.to($(\"body\"), 1, {scrollTo:{y:0, x:0}, ease:Power2.easeInOut});\n\t\t\t\t});\n\t\t\t},400);\n\t\t\t$(\"body\").removeClass(\"final\");\n\t\t\t$(\".schedule header.itinerary_container\").removeClass(\"final\");\n\t\t\tif ($(\"body\").hasClass(\"step1\")) {\n\t\t\t\textraHeaderHeight = $(\"header.outbound\").outerHeight();\n\t\t\t\theaderHeight =  5+headerMinHeight;\n\t\t\t} else if ($(\"body\").hasClass(\"step2\")) {\n\t\t\t\textraHeaderHeight = $(\"header.returning\").outerHeight();\n\t\t\t\theaderHeight = 95+headerMinHeight;\n\t\t\t} else if ($(\"body\").hasClass(\"step3\")) {\n\t\t\t\textraHeaderHeight = $(\"header.ticket_options \").outerHeight();\n\t\t\t\theaderHeight = 182+headerMinHeight;\n\t\t\t} else if ($(\"body\").hasClass(\"step4\")) {\n\t\t\t\textraHeaderHeight = 0;\n\t\t\t\theaderHeight =  520+headerMinHeight;\n\t\t\t\t\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\".schedule\").addClass(\"final\");\n\t\t\t\t},400);\n\t\t\t}\n\n\t\t\t$(\".schedule header.itinerary_container\").css(\"max-height\",headerHeight);\n\t\t\t$(\".schedule div.itinerary_background\").css(\"transform\",\"translateY(-\"+($(\".schedule div.itinerary_background\").outerHeight() - headerHeight)+\"px)\");\n\t\t\t$(\"header.table\").css(\"transform\",\"translate3d(0,\"+headerHeight+\"px,0.1px)\");\n\t\t\t$(\".schedule .results\").css(\"transform\",\"translate3d(0,\"+(headerHeight+extraHeaderHeight)+\"px,-0.1px)\");\n\t\t\t// $(\".outbound ul, .returning ul, .ticket_options ul\").css(\"height\",windowHeight-(headerHeight+extraHeaderHeight));\n\t\t\t// $(\".results\").css(\"height\",windowHeight-headerHeight);\n\t\t}\n\t\tfunction scheduleStepHandler(e) {\n\t\t\tvar target = e.target;\n\t\t\tif (target.tagName != \"LI\") {\n\t\t\t\ttarget = target.parentNode;\n\t\t\t\tif (target.tagName != \"LI\") {\n\t\t\t\t\ttarget = target.parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar container = target.parentNode.parentNode;\t\n\t\t\tvar activeClass = container.className;\n\t\t\tvar currentStep = $(container).index()+1;\n\t\t\tvar nextStep = currentStep + 1;\n\t\t\t$(\"body\").removeClass(\"step\"+currentStep).addClass(\"step\"+nextStep);\n\t\t\t$(target).siblings().addClass(\"faded\");\n\n\t\t\t$(\"datetime\",$(target)).first().each(function() {\n\t\t\t\t$(\".itinerary div.\"+activeClass+\" datetime\").first().html($(\"datetime\",$(target)).first().html());\n\t\t\t\t$(\".itinerary div.\"+activeClass+\" datetime\").last().html($(\"datetime\",$(target)).last().html());\n\t\t\t});\n\t\t\tsetTimeout(function() {\n\t\t\t\t$(\".\"+activeClass,$(\".results\")).css(\"display\",\"none\").next().css(\"display\",\"block\");\n\t\t\t},400);\n\t\t\tif (nextStep == 4) {\n\t\t\t\tif ($(target).hasClass(\"upgrade\")) {\n\t\t\t\t\tvar ticket = $(\".name\", $(target).prev() ).html()+ \" First\";\n\t\t\t\t} else {\n\t\t\t\t\tvar ticket = $(\".name\",$(target)).html();\n\t\t\t\t}\n\t\t\t\tvar price = $(\".price\",$(target)).html();\n\t\t\t\t$(\".ticket\").html(ticket);\n\t\t\t\t$(\".price\").html(price);\n\t\t\t\tresizeHandler();\n\t\t\t\tstepAnimateFast(\".itinerary\");\n\t\t\t}\n\t\t\tresizeHandler();\n\t\t}\n\n\t\treturn {\n\t\t\tInit: function() {\n\t\t\t\t$(window).bind(\"mousewheel\",function(e) {\n\t\t\t\t\tscrollAnimation.kill();\n\t\t\t\t});\n\t\t\t\t$(\"li .changes\").bind(\"click\",function(e) {\n\t\t\t\t\tenterJourneyScreen();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\n\t\t\t\tresizeHandler();\n\t\t\t\t$(\".results li\").bind(\"click\",scheduleStepHandler);\n\n\t\t\t\t// going back controls\n\t\t\t\t$(\".schedule .itinerary_container .stations\").bind(\"click\",function(e) {\n\t\t\t\t\t// $(\"body\").removeClass(\"step2\").removeClass(\"step3\").removeClass(\"step4\");\n\t\t\t\t\t// $(\".outbound li, .returning li, .ticket_options li\").removeClass(\"faded\");\n\t\t\t\t\t// $(\".opacityZero\").css(\"opacity\",0);\n\t\t\t\t\t// closeSchedule();\n\t\t\t\t\t// setTimeout(function() {\n\t\t\t\t\t// \tenterPlanning();\n\t\t\t\t\t// },1200);\n\t\t\t\t\t// e.preventDefault();\n\t\t\t\t\t// $(\".outbound\",$(\".results\")).css(\"display\",\"block\");\n\t\t\t\t\t// document.location.href=\"/planning.php\";\n \t\t\t\t\twindow.history.back();\n \t\t\t\t\te.preventDefault();\n \t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\t$(\".itinerary .outbound_train, .itinerary datetime.outbound, .itinerary div.outbound\").bind(\"click\",function() {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$(\".outbound\",$(\".results\")).css(\"display\",\"block\").css(\"opacity\",0);\n\t\t\t\t\t},500);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$(\".outbound\",$(\".results\")).css(\"opacity\",1);\n\t\t\t\t\t},650);\n\t\t\t\t\t$(\"body\").removeClass(\"step1 step2 step3 step4\");\n\t\t\t\t\t$(\"body\").addClass(\"step1\");\n\t\t\t\t\t$(\".outbound li, .returning li, .ticket_options li\").removeClass(\"faded\");\n\t\t\t\t\t$(\".schedule_container .opacityZero\").css(\"opacity\",0);\n\t\t\t\t\t\n\t\t\t\t\tresizeHandler();\n\t\t\t\t});\n\n\t\t\t\t$(\".itinerary .returning_train, .itinerary datetime.returning, .itinerary div.returning\").bind(\"click\",function() {\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$(\".returning\",$(\".results\")).css(\"display\",\"block\").css(\"opacity\",0);\n\t\t\t\t\t},500);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$(\".returning\",$(\".results\")).css(\"opacity\",1);\n\t\t\t\t\t},650);\n\t\t\t\t\t$(\"body\").removeClass(\"step1 step2 step3 step4\");\n\t\t\t\t\t$(\"body\").addClass(\"step2\");\n\t\t\t\t\t$(\".schedule_container .opacityZero\").css(\"opacity\",0);\n\t\t\t\t\t$(\".outbound li, .returning li, .ticket_options li\").removeClass(\"faded\");\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t// $(\".returning\").removeClass(\"final\").addClass(\"selecting\");\n\t\t\t\t\t},300);\n\t\t\t\t\tresizeHandler();\n\t\t\t\t});\n\n\t\t\t\t$(\"h3.ticket\").bind(\"click\",function() {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$(\".ticket_options\",$(\".results\")).css(\"display\",\"block\").css(\"opacity\",0);\n\t\t\t\t\t},500);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$(\".ticket_options\",$(\".results\")).css(\"opacity\",1);\n\t\t\t\t\t},650);\n\t\t\t\t\t$(\"body\").removeClass(\"step1 step2 step3 step4\");;\n\t\t\t\t\t$(\"body\").addClass(\"step3\");\n\t\t\t\t\t$(\".schedule_container .opacityZero\").css(\"opacity\",0);\n\t\t\t\t\t$(\".ticket_options li\").removeClass(\"faded\");\n\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t// $(\".ticket_options\").removeClass(\"final\").addClass(\"selecting\");\n\t\t\t\t\t},300);\n\t\t\t\t\tresizeHandler();\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t$(\".last-choices button\").bind(\"click\",function() {\n\t\t\t\t\t$(\".last-choices\").css(\"opacity\",0);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$(\".last-choices\").css(\"display\",\"none\");\n\t\t\t\t\t\t$(\".ticket_information\").css(\"display\",\"block\").css(\"opacity\",0);\n\n\t\t\t\t\t\t$(\".outbound_train, .itinerary datetime.outbound, .itinerary div.outbound, .returning_train, h3.ticket, .stations, .itinerary .returning_train, .itinerary datetime.returning, .itinerary div.returning\",$(\".schedule\")).addClass(\"final\").unbind(\"click\");\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".ticket_information\").css(\"opacity\",1);\n\t\t\t\t\t\t\t$(\".cards\").addClass(\"active\");\n\t\t\t\t\t\t},20);\n\n\t\t\t\t\t},200);\n\t\t\t\t});\n\t\t\t},\n\t\t\tsizeUp: function() {\n\t\t\t\tresizeHandler();\n\t\t\t}\n\t\t}\n\t}();\n$(function() {\n\tschedule.Init();\n\t$(\"div, header, ul\").bind(\"scroll\",function(e) {\n\t\tconsole.log(\"scrolling\",e.target);\n\t})\n});\n\n\t\n\t\n","\tvar travellers = function() {\n\t\tvar children = 0;\n\t\tvar adults = 0;\n\t\tvar adultCounter = 0;\n\t\tvar childCounter = 0;\n\t\tvar adultCharacters = [\"img/gfx-passenger-male-2.svg\",\"img/gfx-passenger-female-1.svg\",\"img/gfx-passenger-male-1.svg\",\"img/gfx-passenger-male-3.svg\"];\n\t\tvar childCharacters = [\"img/gfx-passenger-child-1.svg\"];\n\t\tvar totalAmount = 1;\n\t\t\n\t\tfunction control(e) {\n\t\t\t// $(\".stage\").css(\"width\",\"auto\");\n\t\t\tvar target = e.target;\n\t\t\tvar value = -1;\n\t\t\tvar adultLabel = \"adults\";\n\t\t\tvar childLabel = \"children\";\n\n\t\t\te.preventDefault();\n\t\t\tcategory = e.target.parentNode.className;\n\t\t\tif (!$(\".travellers\").hasClass(\"activated\")) {\n\t\t\t\t$(\".travellers\").addClass(\"activated\");\n\t\t\t}\n\t\t\t\n\n\t\t\tif (e.target.innerHTML==\"+\") {\n\t\t\t\tvalue=1;\n\t\t\t\tif (category ==\"adults\") {\n\n\t\t\t\t\t\n\t\t\t\t\tif (totalAmount % 2) {\n\t\t\t\t\t\t$(\".travellers .stage\").append('<img src=\"'+adultCharacters[adultCounter]+'\" class=\"adult\">');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".travellers .stage .adult:last\").addClass(\"added\");\n\t\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\t\telm.addClass(\"inplace\");\n\t\t\t\t\t\t\t},900,$(\".travellers .stage .adult:last\"));\n\t\t\t\t\t\t},200);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\".travellers .stage\").prepend('<img src=\"'+adultCharacters[adultCounter]+'\" class=\"adult\">');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".travellers .stage .adult:first\").addClass(\"added\");\n\t\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\t\telm.addClass(\"inplace\");\n\t\t\t\t\t\t\t},900,$(\".travellers .stage .adult:first\"));\n\t\t\t\t\t\t},200);\n\t\t\t\t\t}\n\t\t\t\t\tadultCounter++;\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tif (totalAmount % 2) {\n\t\t\t\t\t\t$(\".travellers .stage\").append('<img src=\"'+childCharacters[childCounter]+'\" class=\"child\">');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".travellers .stage .child:last\").addClass(\"added\");\n\t\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\t\telm.addClass(\"inplace\");\n\t\t\t\t\t\t\t},900,$(\".travellers .stage .child:last\"));\n\t\t\t\t\t\t},200);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\".travellers .stage\").prepend('<img src=\"'+childCharacters[childCounter]+'\" class=\"child\">');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".travellers .stage .child:first\").addClass(\"added\");\n\t\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\t\telm.addClass(\"inplace\");\n\t\t\t\t\t\t\t},900,$(\".travellers .stage .child:first\"));\n\t\t\t\t\t\t},200);\n\t\t\t\t\t}\n\t\t\t\t\tchildCounter++;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tvalue=-1;\t\t\t\n\t\t\t\tif (category ==\"adults\") {\n\t\t\t\t\tif (totalAmount % 2) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\telm.remove();\n\t\t\t\t\t\t},850,$(\".travellers .stage .adult.added\").filter(\":last\"));\n\t\t\t\t\t\t$(\".travellers .stage .adult.added\").filter(\":last\").removeClass(\"added\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\telm.remove();\n\t\t\t\t\t\t},850,$(\".travellers .stage .adult.added\").filter(\":first\"))\n\t\t\t\t\t\t$(\".travellers .stage .adult.added\").filter(\":first\").removeClass(\"added\");\n\t\t\t\t\t}\n\t\t\t\t\tadultCounter--;\n\t\t\t\t} else {\n\t\t\t\t\tif (totalAmount % 2) {\n\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\telm.remove();\n\t\t\t\t\t\t},850,$(\".travellers .stage .child.added\").filter(\":last\"));\n\t\t\t\t\t\t$(\".travellers .stage .child.added\").filter(\":last\").removeClass(\"added\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\telm.remove();\n\t\t\t\t\t\t},850,$(\".travellers .stage .child.added\").filter(\":first\"))\n\t\t\t\t\t\t$(\".travellers .stage .child.added\").filter(\":first\").removeClass(\"added\");\n\t\t\t\t\t}\n\t\t\t\t\tchildCounter--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (adultCounter<0) adultCounter=0;\n\t\t\tif (childCounter<0) childCounter=0;\n\t\t\tif (adultCounter>=adultCharacters.length) adultCounter=0;\n\t\t\tif (childCounter>=childCharacters.length) childCounter=0;\n\t\t\tif (category ==\"adults\") {\n\t\t\t\tadults+=value;\n\t\t\t} else {\n\t\t\t\tchildren+=value;\n\t\t\t}\n\t\t\t\n\t\t\tif (adults<0) adults=0;\n\t\t\tif (children<0) children=0;\n\t\t\ttotalAmount = adults + children;\n\n\t\t\t$(\"input#adults\").val(adults);\n\t\t\t$(\"input#children\").val(children);\n\n\t\t\tif (adults==1) {\n\t\t\t\tadultLabel= \"adult\";\n\t\t\t} else {\n\t\t\t\tadultLabel=\"adults\";\n\t\t\t}\n\t\t\tif (children==1) {\n\t\t\t\tchildrenLabel=\"child\";\n\t\t\t} else {\n\t\t\t\tchildrenLabel=\"children\";\n\t\t\t}\n\t\t\tvar priceAdults = adults * 76;\n\t\t\tvar priceChildren = children*38;\n\t\t\t$(\"header.controls .price .amount\").html(\"\"+(priceAdults+priceChildren));\n\n\t\t\t$(\".travellers_info\").html(adults + \" \" + adultLabel +\", \"+ children + \" \"+ childrenLabel);\n\t\t\t$(\".schedule_container .passengers\").html(adults + \" \" + adultLabel +\", \"+ children + \" \"+ childrenLabel);\n\t\t\t\n\t\t}\n\t\tfunction scrollHandler(e) {\n\t\t\tvar scrollTop = $(window).scrollTop();\n\t\t\tvar scrollPoint = 10;\n\t\t\tif (scrollTop>scrollPoint && !$(\"body\").hasClass(\"scrolled\")) {\n\t\t\t\t$(\"body\").addClass(\"scrolled\");\n\t\t\t} else {\n\t\t\t\tif (scrollTop<=scrollPoint) {\n\t\t\t\t\t$(\"body\").removeClass(\"scrolled\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfunction showRailcards() {\n\t\t\t$(\".railcards .choices\").css(\"height\",$(\".railcards .choices\")[0].scrollHeight);\n\t\t}\n\n\t\treturn {\n\t\t\tInit: function() {\n\t\t\t\t$(\".travellers a\").bind(\"click\",control);\n\t\t\t\t$(\".travellers .adults a:last-child\").trigger(\"click\");\n\t\t\t\t$(\".swap\").bind(\"click\",function(e) {\n\t\t\t\t\tvar tempTo = $(\"input#to\").val();\n\t\t\t\t\t$(\"input#to\").val($(\"input#from\").val());\n\t\t\t\t\t$(\"input#from\").val(tempTo);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\t$(window).bind(\"scroll\",scrollHandler);\n\t\t\t\tscrollHandler();\n\t\t\t\t$(\".railcards .add\").bind(\"click\",showRailcards);\n\t\t\t}\n\t\t}\n\t}();\n$(function() {\n\ttravellers.Init();\n});"],"sourceRoot":"/source/"}