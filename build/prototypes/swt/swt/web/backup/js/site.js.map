{"version":3,"sources":["animations.js","cards.js","clock_slider.js","forms.js","jquery.noclickdelay.js","location.js","schedule.js","travellers.js"],"names":["closeDestinationScreen","$","animate","opacity","css","setTimeout","closeHomeScreen","removeClass","enterHomeScreen","delay","each","i","e","obj","addClass","first","clock_slider","Init","eq","enterJourneyScreen","bind","closeJourneyScreen","stepAnimate","container","enterPlanning","enterSchedule","schedule","sizeUp","closeSchedule","rotateInfo","info","this","length","prependTo","activateDelay","$card","fadeOut","fadeIn","attr","activeBucket","time_str","html","time","split","h","parseInt","m","delaydepart","delayarrive","pad","target","hasClass","parent","parentHasClass","elm","className","indexOf","document","body","parentNode","n","width","z","Array","join","currentTime","activateBucket","no","speed","init","$bucket","trim","replace","Date","now","setHours","getHours","targetTime","getTime","timeString","getMinutes","initBucket","targetX","windowWidth","touchstartHandler","scrollBucket","scrollMuch","scrollTop","pixelsMoved","entryTouchTime","touchendHandler","touchmoveHandler","matrix","toString","entryTouchPoint","touchOffsetX","x","originalEvent","touches","clientX","clearTimeout","touchTimeout","exitTouchPoint","unbind","timeSinceTouchstart","destination","closestBucket","Math","round","animationTime","abs","findCurrentTime","d","m_rounded","ceil","activeChild","thisHour","substring","thisMinute","scaleAccordingToCenterPos","getDistanceFromCenter","returnValue","getBoundingClientRect","left","querySelector","center","elementFromPoint","top","tagName","objects","push","previousSibling","firstChild","nextSibling","object","centerMeasure","spanTime","centerScale","map","centerOpacity","getAttribute","setAttribute","Object","window","Number","prototype","in_min","in_max","out_min","out_max","draw","startBucket","fromTop","offset","ready","ontouchstart","$source","source","console","log","preventDefault","keyboardTimeout","searchTimeout","update","value","val","textfill","maxFontPixels","stationSearch","removeKeyboardFocus","blur","setFormattedDate","today","date","timezoneOffset","getTimezoneOffset","daySelected","months","compareDate","getElementById","min","next","setMinutes","getDate","getMonth","getYear","padDigits","number","digits","max","String","test","createElement","id","style","height","whiteSpace","innerHTML","appendChild","innerHeight","outerHeight","prop","withinDistance","x1","y1","x2","y2","distance","navigator","userAgent","match","CONFIG","TOUCH_MOVE_THRESHHOLD","PRESSED_CLASS","GHOST_CLICK_TIMEOUT","GHOST_CLICK_THRESHOLD","clicks","addEventListener","clientY","stopPropagation","on","elem","touch","location","__eventLocation","__onTouchMove","off","changedTouches","evt","createEvent","initMouseEvent","get","dispatchEvent","clickLocation","splice","jQuery","locationHandler","getCurrentLocation","geolocation","getCurrentPosition","showPosition","position","userPosition","stationChoiceHandler","sourceElement","place_id","lastInput","nameSearch","sourceElm","apiUrl","data","key","googlePlacesAPI","address","components","ajax","url","type","dataType","crossDomain","success","results","$choices","a","append","geometry","lat","lng","place","address_components","short_name","stationSearchKeyUpHandler","timeout","resizeHandler","windowHeight","extraHeaderHeight","headerHeight","siblings","last","ticket","prev","price","travellers","control","adultLabel","category","totalAmount","adultCharacters","adultCounter","prepend","childCharacters","childCounter","remove","filter","adults","children","childrenLabel","showRailcards","scrollHeight","tempTo"],"mappings":"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","file":"site.js","sourcesContent":["$(function() {\n\t // enterSplash();\n\t // enterPlanning();\n\t enterSchedule();\n\t // enterHomeScreen();\n\t // $(\".controls\").css(\"opacity\",1);\n\t\n\n\t\n\tfunction closePlanning() {\n\n\t}\n\tfunction enterSplash() {\n\t\t$(\".splash.screen\").css(\"display\",\"block\").css(\"opacity\",1);\n\t\tstepAnimate(\".splash.screen\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".splash\").css(\"opacity\",0);\n\t\t},4000);\n\t\tsetTimeout(function() {\n\t\t\tenterLocating();\n\t\t},4400);\n\t}\n\tfunction enterLocating() {\n\t\t$(\".locating\").css(\"display\",\"block\").css(\"opacity\",1);\n\t\tstepAnimate(\".locating\");\n\t\t\n\t\tsetTimeout(function() {\n\t\t\t$(\".radar\").addClass(\"hide\");\n\t\t\t$(\".station\").addClass(\"active\");\n\t\t},3000);\n\t\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .message\").css(\"opacity\",0);\n\t\t},4500);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").html(\"m Oxshott\");\n\t\t},4800);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").html(\"om Oxshott\");\n\t\t},4850);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").html(\"rom Oxshott\");\n\t\t},4900);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").html(\"From Oxshott\");\n\t\t},4950);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating .station\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\".8,0,.2,1\").css(\"transform\",\"translateY(-220px)\");\n\t\t},5500);\n\t\tsetTimeout(function() {\n\t\t\tloadIntro();\n\t\t},6500);\n\t\tsetTimeout(function() {\n\t\t\t$(\".locating\").css(\"opacity\",0);\n\t\t},6700);\n\t\t//set timeout something: loadIntro();\n\t}\n\tfunction loadIntro() {\n\t\t$(\".station_info\").css(\"display\",\"block\");\n\t\t$(\".locating\").css(\"display\",\"none\");\n\t\t\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .gfx\").css(\"transform\",\"translateY(0)\");\n\t\t},300);\n\t\tsetTimeout(function() {\n\t\t\t$(\".controls\").css(\"opacity\",1);\n\t\t},500);\n\t\t$(\".station_info .opacityZero\").each(function(i, e) {\n\t\t\tsetTimeout(function(obj) {\n\t\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t\t},(i*270)+500,e);\n\t\t});\n\t\t$(\".intro .gfx\").css(\"display\",\"block\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .gfx\").css(\"opacity\",1);\n\t\t},100);\n\n\t\n\t\t$(\".choose_destination\").click(function() {\n\t\t\t$(\".screen.search_station input.station\").focus();\n\t\t\n\t\t\t\t$(\".choose_destination\").css(\"transition\",\"all 0.7s cubic-bezier(.85,.01,.99,.38)\");\n\t\t\t\t$(\".choose_destination\").addClass(\"disappear\");\n\t\t\t\n\t\t\thideMainBackground();\n\t\t\tsetTimeout(function() {\n\t\t\t\tenterDestinationScreen();\n\t\t\t},700);\n\t\t});\n\t}\n\tfunction hideMainBackground() {\n\t\t$(\".intro .people\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".intro .background\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t\t},100);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.station_info\").animate({ opacity: 0},300).css(\"pointer-events\",\"none\");\n\t\t},600);\n\t\t$(\".station_info .date\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-300px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".station_info .station\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-300px)\");\n\t\t},100);\n\t}\n\tfunction enterDestinationScreen() {\n\t\tstepAnimate(\".search_station\");\n\t\t$(\".search_1 .background\").css(\"transition-duration\",\"0s\").css(\"transition-timing-function\",\"ease\").css(\"transform\",\"translateY(-20px)\");\n\t\t$(\".search_1 .people\").css(\"transition-duration\",\"0s\").css(\"transition-timing-function\",\"ease\").css(\"transform\",\"translateY(5px)\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_1 .background\").css(\"transition-duration\",\"2s\");\n\t\t\t$(\".search_1 .people\").css(\"transition-duration\",\"2s\");\n\t\t},100);\n\t\t$(\".station_info\").css(\"display\",\"none\");\n\t\t$(\".search_1, .search_1 .gfx\").css(\"display\",\"block\");\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_1\").css(\"opacity\",1);\n\t\t},100);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.search_station\").css(\"opacity\",0).css(\"display\",\"block\").animate({ opacity: 1},300);\n\t\t\t$(\".search_1 .gfx\").css(\"opacity\",1);\n\t\t\t$(\".search_1\").css(\"transform\",\"translateY(0px)\");\n\t\t},200);\n\t\tsetTimeout(function() {\n\t\t\t$(\".search_station .results\").css(\"transform\",\"translateY(0px)\");\n\t\t},350);\n\t}\n\t$(\".home.screen .info\").bind(\"touchstart\",function() {\n\t\tcloseHomeScreen();\n\t\tsetTimeout(function() {\n\t\t\tenterJourneyScreen();\n\t\t},700);\n\t\t\n\t});\n\tfunction rotateInfo() {\n\t\t$(\".home .info\").each(function() {\n\t\t\tvar info = $(this);\n\t\t\tif ($(\"span\",info).length>1) {\n\t\t\t\t$(\"span:first-child\",info).css(\"transition-duration\",\"0.5s\").css(\"transform\",\"translateY(-42px)\");\n\t\t\t\t$(\"span:last-child\",info).css(\"transition-duration\",\"0.5s\").css(\"transform\",\"translateY(-42px)\");\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\"span:last-child\",info).prependTo(info);\n\t\t\t\t\t$(\"span:first-child\",info).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateY(0px)\");\n\t\t\t\t\t$(\"span:last-child\",info).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateY(0px)\");\n\t\t\t\t},500);\n\t\t\t}\n\t\t});\n\t\t\t\n\t\tsetTimeout(rotateInfo,7000);\n\t}\n\tsetTimeout(rotateInfo,7000);\n});\nfunction closeDestinationScreen() {\n\t$(\".remove\").animate({ opacity: 0},200);\n\t$(\".search_1 .people\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\tsetTimeout(function() {\n\t\t$(\".search_1 .background\").css(\"transition-duration\",\"0.6s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(800px)\");\n\t},100);\n\tsetTimeout(function() {\n\t\t$(\".search_1\").animate({ opacity: 0},300);\n\t},300);\n\tsetTimeout(function() {\n\t\t$(\".search_station\").animate({ opacity: 0},300);\n\t},600);\n\tsetTimeout(function() {\n\t\t$(\".search_station\").css(\"display\",\"none\");\n\t},900);\n}\nfunction closeHomeScreen() {\n\t$(\".cards\").removeClass(\"active\");\n\t$(\".screen.home .top\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(-500px)\").css(\"opacity\",0);\n\t$(\".screen.home .bottom\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\"cubic-bezier(.73,0,1,.46)\").css(\"transform\",\"translateY(500px)\").css(\"opacity\",0);\n\tsetTimeout(function() {\n\t\t$(\".screen.home\").css(\"display\",\"none\");\n\t},1200);\n}\nfirst=true;\nfunction enterHomeScreen(delay) {\n\t$(\".screen.home .opacityZero\").each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t},(i*270)+500,e);\n\t});\n\tif (typeof delay == \"undefined\") delay=1200;\n\tsetTimeout(function() {\n\t\t$(\".screen.home\").css(\"opacity\",0).css(\"display\",\"block\").animate({ opacity: 1},300);\n\t\tsetTimeout(function() {\n\t\t\t$(\".cards\").addClass(\"active\");\n\t\t},500);\n\t\tif (first) {\n\t\t\tclock_slider.Init($(\".clock_slider\").eq(0),0);\n\t\t\tfirst = false;\n\t\t}\n\t},(delay));\n}\nfunction enterJourneyScreen() {\n\t$(\".journey .opacityZero\").each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t},(i*270)+500,e);\n\t});\n\t$(\".journey\").css(\"display\",\"block\").animate({ opacity: 1},300).addClass(\"active\");\n\t$(\".journey ul li:nth-child(4)\").addClass(\"travel\");\n\t$(\".journey ul .current_status\").addClass(\"travel\");\n\t$(\".journey .date\").bind(\"click\",function() {\n\t\tcloseJourneyScreen();\n\t\tenterHomeScreen(0);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.home .top\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\"cubic-bezier(0,.91,.12,.99)\");\n\t\t\t$(\".screen.home .bottom\").css(\"transition-duration\",\"1s\").css(\"transition-timing-function\",\"cubic-bezier(0,.91,.12,.99)\");\n\t\t},100);\n\t\tsetTimeout(function() {\n\t\t\t$(\".screen.home .top\").css(\"transform\",\"translateY(0)\").css(\"opacity\",1);\n\t\t\t$(\".screen.home .bottom\").css(\"transform\",\"translateY(0)\").css(\"opacity\",1);\n\t\t},110);\n\t\t// clock_slider.Init($(\".clock_slider\").eq(1),1);\n\t\n\t});\n}\nfunction closeJourneyScreen() {\n\t$(\".travel\").removeClass(\"travel\");\n\t$(\".journey\").css(\"opacity\",0);\n\tsetTimeout(function() {\n\t\t$(\".journey\").css(\"display\",\"none\");\n\t},300);\n}\nfunction stepAnimate(container) {\n\t$(\".opacityZero\",$(container)).each(function(i, e) {\n\t\tsetTimeout(function(obj) {\n\t\t\t$(obj).animate({ opacity: 1},300);\n\t\t},(i*270)+500,e);\n\t});\n}\nfunction enterPlanning() {\n\t\t$(\".planning.screen\").css(\"display\",\"block\");\n\t\t$(\".screen.planning\").animate({ opacity: 1},300);\n\t\tstepAnimate(\".planning.screen\");\n\t}\nfunction enterSchedule() {\n\tsetTimeout(schedule.sizeUp,1000);\n\t$(\".screen.planning\").animate({ opacity: 0},300)\n\tsetTimeout(function() {\n\t\t$(\".screen.planning\").css(\"display\",\"none\");\n\t\t$(\".screen.schedule\").css(\"display\",\"block\").animate({ opacity: 1},300)\n\t\t$(\".screen.schedule .schedule_container\").addClass(\"step1\");\n\t},300);\n}\nfunction closeSchedule() {\n\t$(\".screen.schedule\").animate({ opacity: 0},300);\n\tsetTimeout(function() {\n\t\t$(\".screen.schedule .schedule_container\").removeClass(\"step1 step2 step3 step4\");\n\t\t$(\".screen.schedule\").css(\"display\",\"none\");\n\t},300);\n}","$(function() {\n\t$(\".card\").bind(\"touchstart\",function(e) {\n\t\t$card=$(e.target);\n\t\tif ($card.hasClass(\"message_1\")) {\n\t\t\tactivateDelay();\n\t\t} else {\n\t\t\tif ($(this).parent().hasClass(\"open\")) {\n\t\t\t\t$(this).parent().removeClass(\"open\");\n\t\t\t} else {\n\t\t\t\t$(this).parent().addClass(\"open\");\n\t\t\t}\n\t\t}\n\t});\n\tfunction activateDelay() {\n\t\t$($card).fadeOut();\n\t\t$(\".message_2\").fadeIn();\n\t\t\n\t\t$(\".card img\").attr(\"src\",\"img/gfx_hand.svg\");\n\t\tvar activeBucket = clock_slider.activeBucket();\n\t\tvar time_str = ($(\".bottomslider span.time\").eq(activeBucket).html());\n\t\tvar time = time_str.split(\":\");\n\t\tvar h = parseInt(time[0]);\n\t\tvar m = parseInt(time[1]);\n\t\tm+=22;\n\t\tif (m>=60) {\n\t\t\tm-=60;\n\t\t\th+=1;\n\t\t}\n\t\t$(\".info\").animate({opacity:0}, 00);\n\n\t\tvar delaydepart = '<span class=\"delay\">Running behind</span>';\n\t\tvar delayarrive = '<span class=\"platform\">Platform 12</span><span class=\"delay\">Exp '+pad(h,2)+':'+pad(m,2)+'</span>';\n\t\t$(\".info.depart\").html(delaydepart);\n\t\t$(\".info.arrive\").html(delayarrive);\n\t\t$(\".info\").animate({opacity:1},200);\n\t}\n});","var currentTime;\n\n\tvar clock_slider = function() {\n\t\tvar activeBucket = 0;\n\t\tvar entryTouchPoint = new Object();\n\t\tvar entryTouchTime;\n\t\tvar exitTouchPoint = new Object();\n\t\tvar pixelsMoved = 0;\n\t\tvar swipeDetectionPixelAmount = 60;\n\t\tvar firstMove = true;\n\t\tvar touchTimeout;\n\t\tvar scrollMuch = 0;\n\t\tvar windowWidth = $(window).width();\n\t\tvar initBucket;\n\t\t\n\t\tfunction activateBucket(no, speed, elm, init) {\n\t\t\tvar delaydepart, delayarrive;\n\t\t\tactiveBucket=no;\n\t\t\t$bucket = $(\".options time\",$(\".clock_slider\").eq(0)).eq(activeBucket);\n\t\t\tvar delay=$bucket.attr(\"data-message\");\n\t\t\tvar time = $bucket.attr(\"datetime\")+\" \";\n\t\t\tvar time = time.trim().replace(\" \",\"T\");\n\t\t\tvar time = new Date(time);\n\t\t\tvar now = new Date();\n\t\t\ttime.setHours(time.getHours() - 1);\n\t\t\t$(\".journey .plan li\").each(function(i,e) {\n\t\t\t\tvar targetTime = new Date(time.getTime() + (parseInt($(this).attr(\"data-distance\"))*60000));\n\t\t\t\tvar timeString = pad(targetTime.getHours(),2) + \":\" +pad(targetTime.getMinutes(),2);\n\t\t\t\t\n\t\t\t\tif (i<4 && now>time) {\n\t\t\t\t\t$(this).addClass(\"passed\");\n\t\t\t\t} else {\n\t\t\t\t\t$(this).removeClass(\"passed\");\n\t\t\t\t}\n\t\t\t\t$(\"strong\",$(this)).html(timeString);\n\t\t\t});\n\t\t\tif (now>time) {\n\t\t\t\t$(\".current_status\").css(\"display\",\"block\");\n\t\t\t} else {\n\t\t\t\t$(\".current_status\").css(\"display\",\"none\");\n\t\t\t}\n\t\t\tvar now = new Date();\n\t\t\tif (no<initBucket) {\n\t\t\t\tdelaydepart = '<span class=\"journey_link\">Running on time</span>';\n\t\t\t\tdelayarrive = '<span class=\"platform\">Platform 12: Train to Waterlooo</span><span class=\"delay\">Exp on time</span>';\n\t\t\t} else if (no==initBucket) {\n\t\t\t\tdelaydepart = '<span class=\"platform\">Platform 5: Train to Waterloo</span><span class=\"delay\">Exp on time</span>';\n\t\t\t\tdelayarrive = '<span class=\"delay\">Exp on time</span>';\n\t\t\t} else {\n\t\t\t\tdelaydepart = '<span class=\"delay\">Exp on time</span>';\n\t\t\t \tdelayarrive = '<span class=\"delay\">Exp on time</span>';\n\t\t\t}\n\t\t\tif (!speed) {\n\t\t\t\t$(\".options\",elm).css(\"transition\",\"all 0s cubic-bezier(.6,.0,.4,1)\");\n\t\t\t} else {\n\t\t\t\tif (speed>.7) speed=.7;\n\t\t\t\t$(\".options\",elm).css(\"transition\",\"all \"+speed+\"s ease-out\");\n\t\t\t}\n\n\t\t\tvar targetX =  0-(no*$(\".clock_slider .options time\").width());\n\t\t\t$(\".options\",elm).css(\"transform\",\"translateX(\"+(targetX+(windowWidth/2-($(\"time.bucket\").width()/2)))+\"px)\");\n\t\t\t$(\".info\").animate({opacity:0}, 200);\n\t\t\tsetTimeout(function(delay) {\n\t\t\t\tif (delay) {\n\t\t\t\t\t$(\".info.depart\").html(delaydepart);\n\t\t\t\t\t$(\".info.arrive\").html(delayarrive);\n\t\t\t\t} else {\n\t\t\t\t\t$(\".info.depart\").html(delaydepart);\n\t\t\t\t\t$(\".info.arrive\").html(delayarrive);\n\t\t\t\t}\n\t\t\t\t$(\".info\").animate({opacity:1},200);\n\t\t\t},350,delay);\n\t\t}\n\n\t\t\n\t\tfunction touchstartHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tscrollBucket = clock_slider;\n\t\t\t$(\".clock_slider\").removeClass(\"active\");\n\t\t\tclock_slider.addClass(\"active\");\n\t\t\tscrollMuch = scrollBucket.scrollTop;\n\t\t\tpixelsMoved=0;\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\t\t\t$(\".options\",clock_slider).bind(\"touchend\",touchendHandler);\n\t\t\t$(\".options\",clock_slider).bind(\"touchmove\",touchmoveHandler);\n\t\t\tvar matrix=$(\".options\",clock_slider).css(\"transform\").toString().replace(\"matrix(\",\"\").replace(\")\",\"\").split(\",\");\n\t\t\tentryTouchPoint.touchOffsetX = (parseInt(matrix[4].trim())); \n\t\t\tentryTouchPoint.x = e.originalEvent.touches[0].clientX;\n\t\t\tentryTouchTime = new Date().getTime();\n\n\t\t}\n\t\tfunction possiblyUnbind(e) {\n\t\t\tcurrentBucket = findScrollingBucket(e.target);\n\t\t\tcurrentScroll = currentBucket.scrollTop;\n\t\t\tif (currentScroll-scrollMuch>20) {\n\t\t\t\tunbindSwipeHandlers(e);\n\t\t\t}\n\t\t}\n\t\tfunction findScrollingBucket(obj) {\n\t\t\tif ($(obj).hasClass(\"bucket\")) {\n\t\t\t\treturn obj;\n\t\t\t} else {\n\t\t\t\treturn findScrollingBucket(obj.parentNode);\n\t\t\t}\n\t\t}\n\t\tfunction touchmoveHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tclearTimeout(touchTimeout);\n\t\t\t\n\t\t\tvar matrix=$(\".options\", clock_slider).css(\"transform\").toString().replace(\"matrix(\",\"\").replace(\")\",\"\").split(\",\");\n\t\t\texitTouchPoint.x = e.originalEvent.touches[0].clientX;\n\t\t\texitTouchPoint.touchOffsetX = parseInt(matrix[4].trim()); \n\n\t\t\tpixelsMoved = entryTouchPoint.x - exitTouchPoint.x;\n\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\t\t\t\n\t\t\t\n\t\t\tvar targetX = ((entryTouchPoint.x - exitTouchPoint.x)-entryTouchPoint.touchOffsetX)*-1;\n\t\t\t$(\".options\",clock_slider).css(\"transition-duration\",\"0s\").css(\"transform\",\"translateX(\"+targetX+\"px)\");\n\n\t\t}\n\t\tfunction touchendHandler(e) {\n\t\t\tvar clock_slider = $(e.target.parentNode.parentNode.parentNode.parentNode);\n\t\t\tclearTimeout(touchTimeout);\n\t\t\t$(\".options\",clock_slider).css(\"transition-duration\",\"0.4s\").unbind(\"touchmove\",touchmoveHandler).unbind(\"touchend\",touchendHandler);\n\t\t\tvar timeSinceTouchstart = new Date().getTime() - entryTouchTime;\n\t\t\t\n\t\t\tvar destination = (entryTouchPoint.x - exitTouchPoint.x);\n\n\t\t\tvar closestBucket = Math.round((destination/$(\".options time\",clock_slider).width()));\n\n\t\t\tclosestBucket = activeBucket + closestBucket;\n\t\t\tif (closestBucket<0) closestBucket = 0;\n\t\t\t\n\t\t\tvar animationTime = Math.abs(timeSinceTouchstart/pixelsMoved);\n\t\t\tif (animationTime<0.2) {\n\t\t\t\tanimationTime=0.2;\n\t\t\t}\n\t\t\tactivateBucket(closestBucket,animationTime);\n\t\t}\n\t\tfunction unbindSwipeHandlers(e) {\n\t\t\t$(\".clock_slider .options\").unbind(\"touchmove\",touchmoveHandler);\n\t\t\t$(\".clock_slider .options\").unbind(\"touchend\",touchendHandler);\n\t\t\t$(\".bucket\").unbind(\"scroll\",unbindSwipeHandlers);\n\t\t}\n\t\tfunction findCurrentTime(elm) {\n\t\t\tvar d = new Date();\n\t\t\tvar h = d.getHours();\n\t\t\tvar m = d.getMinutes();\n\n\t\t\tm_rounded = 5 * Math.ceil(m/5);\n\t\t\tif (m_rounded==60) {\n\t\t\t\tm_rounded=0;\n\t\t\t\th+=1;\n\t\t\t}\n\t\t\tm_rounded+=5;\n\t\t\tvar currentTime = pad(h,2)+\":\"+pad(m_rounded,2);\n\t\t\tvar activeChild=0;\n\t\t\t$(\".options time span\",$(elm)).each(function(i,e) {\n\t\t\t\tthisHour=parseInt($(this).html().substring(0,2));\n\t\t\t\tthisMinute=parseInt($(this).html().substring(3,5));\n\n\t\t\t\tif ((thisHour==h && thisMinute>=m_rounded)Â || thisHour>h) {\n\t\t\t\t\tactiveChild = i;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn activeChild;\n\t\t}\n\t\t\n\t\t\n\t\tNumber.prototype.map = function (in_min, in_max, out_min, out_max) {\n\t\t  return (this - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n\t\t}\n\t\tfunction scaleAccordingToCenterPos(obj) {\n\t\t\ttry {\n\t\t\t\tvar elm = document.querySelector(obj);\n\t\t\t\tvar center = document.elementFromPoint(windowWidth/2,elm.getBoundingClientRect().top+5).parentNode;\n\t\t\t\tif (typeof center!=\"undefined\") {\n\t\t\t\t\tif (center.tagName==\"TIME\") {\n\t\t\t\t\t\tvar objects = new Array();\n\t\t\t\t\t\tobjects.push(center);\n\t\t\t\t\t\tobjects.push(center.parentNode.previousSibling.firstChild);\n\t\t\t\t\t\tobjects.push(center.parentNode.nextSibling.firstChild);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfunction getDistanceFromCenter(obj) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar returnValue =Math.abs((windowWidth/2)- (obj.getBoundingClientRect().left + obj.getBoundingClientRect().width/2));\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn returnValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (object in objects) {\n\t\t\t\t\t\t\tif (objects[object]!=\"undefined\") {\n\t\t\t\t\t\t\t\tcenterMeasure = getDistanceFromCenter(objects[object])*-1;\n\n\t\t\t\t\t\t\t\tif (centerMeasure!=elm.centerMeasure) {\n\t\t\t\t\t\t\t\t\tspanTime=objects[object].firstChild;\n\n\n\t\t\t\t\t\t\t\t\tobjects[object].centerMeasure = centerMeasure;\n\t\t\t\t\t\t\t\t\tcenterScale = Math.abs(centerMeasure.map(-100,0,1,1.6));\n\t\t\t\t\t\t\t\t\tcenterOpacity = centerMeasure.map(-180,0,.3,1);\n\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (spanTime.getAttribute(\"data-centerscale\")!=centerScale) {\n\t\t\t\t\t\t\t\t\t\tif (centerScale<1) centerScale=1;\n\t\t\t\t\t\t\t\t\t\tspanTime.setAttribute(\"data-centerscale\",centerScale);\n\t\t\t\t\t\t\t\t\t\t$(spanTime).css(\"transform\",\"scale(\"+centerScale+\",\"+centerScale+\")\").css(\"opacity\",centerOpacity);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t\t\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tdraw: function() {\n\t\t\t\tscaleAccordingToCenterPos(\".topslider\");\n\t\t\t\tscaleAccordingToCenterPos(\".bottomslider\");\n\t\t\t\tsetTimeout(clock_slider.draw,10);\n\t\t\t\t// window.requestAnimationFrame(clock_slider.draw);\n\t\t\t},\n\t\t\tInit: function(elm,no) {\n\t\t\t\tvar startBucket = findCurrentTime(elm);\n\t\t\t\tinitBucket = startBucket;\n\t\t\t\t$(\".options\",$(\".clock_slider\")).bind(\"touchstart\",touchstartHandler);\n\t\t\t\tactivateBucket(startBucket,false, $(\".clock_slider\").eq(0));\n\t\t\t\tactivateBucket(startBucket,false, $(\".clock_slider\").eq(1));\n\t\t\t\t$(\".clock_slider\").each(function() {\n\t\t\t\t\t$(this)[0].fromTop = $(this).offset().top;\n\t\t\t\t});\n\t\t\t},\n\t\t\tactiveBucket: function() {\n\t\t\t\treturn activeBucket;\n\t\t\t}\n\t\t}\n\t\t\n\t}();\n$(document).ready(function($) {\n\tsetTimeout(function() { clock_slider.draw(); },200);\n\tdocument.body.ontouchstart = function(e){\n\t\t$source = $(e.target);\n\t\tvar source = e.target;\n\t\tconsole.log(source);\n\t\tif (parentHasClass(e.target,\"planning\") || parentHasClass(e.target,\"schedule\")) {\n\t\t\tconsole.log(\"no blocking\");\n\t\t\treturn;\n\t\t}\n\t\tif (source.tagName!=\"INPUT\" && source.tagName!=\"BUTTON\" && source.tagName!=\"A\" && !$source.hasClass(\"clickaction\") && !$source.hasClass(\"link_arrow\")) e.preventDefault(); \n\t}\n});\nfunction parentHasClass(elm,className) {\n\tif (elm.className.indexOf(className)<0) {\n\t\tif (elm!=document.body) {\n\t\t\treturn parentHasClass(elm.parentNode, className);\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\treturn true;\n\t}\n}\nfunction pad(n, width, z) {\n\t\t\tz = z || '0';\n\t\t\tn = n + '';\n\t\t\treturn n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n\t\t}","var keyboardTimeout;\nvar searchTimeout;\n$(function() {\n    var test = document.createElement(\"div\");\n    test.id = \"fontTest\";\n    test.style.width = \"calc(100% - 60px)\";\n    test.style.height = \"100px\";\n    test.style.whiteSpace = \"nowrap\";\n    test.innerHTML = \"<span></span>\";\n    document.body.appendChild(test);\n    // $(\"input.station\").bind(\"touchstart\",function() { $(this).focus(); });\n    $(test).css(\"-webkit-transform\", \"translateY(-3000px)\");\n    $(test).textfill({\n        maxFontPixels: 80\n    });\n    $(\"input.station\").bind(\"keyup\", update);\n\n    function update(e) {\n        clearTimeout(keyboardTimeout);\n        var value = $(\"input.station\").val();\n        if (value == \"\") value = \"a\";\n        $(\"#fontTest\").html(\"<span>\" + value + \"_</span>\");\n        $(\"#fontTest\").delay(20).textfill({\n            maxFontPixels: 80\n        });\n        $(\"input.station\").css(\"font-size\", $(\"#fontTest span\").css(\"font-size\"));\n        stationSearch(value);\n    }\n\n    function stationSearch(value) {\n        $(\"ul.list\").html(\"<li><span class=\\\"searching\\\"></span></li>\");\n        clearTimeout(searchTimeout);\n        searchTimeout = setTimeout(function() {\n            $(\"ul.list\").css(\"opacity\", 0).html('<li style=\"opacity:0\" class=\"clickaction\">Vauxhall <span class=\"distance\">0.1 mi</span></li><li style=\"opacity:0\" class=\"remove\" class=\"clickaction\">Waterloo <span class=\"distance\">0.7 mi</span></li>');\n            $(\"ul.list\").animate({\n                opacity: 1\n            }, 300);\n            $(\"ul.list li\").each(function(i, e) {\n                setTimeout(function(obj) {\n                    $(obj).animate({\n                        opacity: 1\n                    }, 300);\n                }, i * 200 + 200, e);\n            }).bind(\"click\", function() {\n                closeDestinationScreen();\n                enterHomeScreen();\n            });\n        }, 1000);\n        keyboardTimeout = setTimeout(removeKeyboardFocus, 1500);\n    }\n    \n\n    function removeKeyboardFocus() {\n        $(\"input.station\").blur();\n    }\n    $(\"#return\").bind(\"focus\", function() {\n        $(\".extra\").addClass(\"open\");\n        console.log(\"first \" + window.innerHeight);\n        setTimeout(function() {\n            $(\".extra\").css(\"top\", $(window).scrollTop());\n            console.log(\"second \" + window.outerHeight, $(window).scrollTop());\n        }, 300);\n\n    });\n    $(\"#return\").bind(\"blur\", function() {\n        $(\".extra\").removeClass(\"open\");\n    });\n    $(\"input[type=datetime-local]\").bind(\"change\",function() {\n        setFormattedDate($(this).next()[0],this);\n    })\n    $(\"radiogroup input[type=radio]\").bind(\"touchstart click\",function() {\n        $(this).prop('checked', true);\n        switch ($(\"input[type=radio]:checked\").attr(\"value\")) {\n            case 'single':\n                $(\".dates\").removeClass(\"double\");\n                break;\n            case 'return':\n                \n                if ($(\".return input[type=text]\").val()==\"Open\") {\n                     $(\".return input[type=text]\").val(\"\");\n                }\n                setFormattedDate($(\".return input[type=text]\"), $(\".return input[type=datetime-local]\"));\n               $(\".dates\").addClass(\"double\");\n                break;\n            case 'open-return':\n                $(\".dates\").addClass(\"double\");\n                $(\".return input[type=text]\").val(\"Open\");\n                break;\n        }\n    });\n    function setFormattedDate(target, source) {\n        if ($(source).val().length>0) {\n            var today = new Date();\n            var date = new Date($(source).val());\n            var timezoneOffset = date.getTimezoneOffset();\n            var daySelected = \"\";\n            var months = [\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];\n\n            if ($(source).attr(\"id\")==\"outbound\") {\n                var compareDate = new Date($(\"#return\").val());\n                document.getElementById('return').min=$(source).val();\n                if (date>compareDate) {\n                    document.getElementById('return').value=\"\";\n                    $(\"#return\").next().val(\"\");\n                } else if ( $(\"#return\").next().val().length==0) {\n                    $(\"#return\").attr(\"value\",$(source).val());\n                }\n            }\n           \n            date.setMinutes(date.getMinutes()+timezoneOffset);\n            if (date.getDate() == today.getDate() && date.getMonth() == today.getMonth() && date.getYear() == today.getYear()) {\n                daySelected = \"Today\";\n            } else {\n                daySelected = months[date.getMonth()]+\" \"+ date.getDate();\n            }\n           \n            $(target).val(daySelected + \" \" + padDigits(date.getHours(),2) +\":\"+padDigits(date.getMinutes(),2));\n        }\n    }\n    function padDigits(number, digits) {\n        return Array(Math.max(digits - String(number).length + 1, 0)).join(0) + number;\n    }\n\n});","(function ($, window, document) {\n  \"use strict\";\n  // This code is only for iOS\n  if (!window.navigator.userAgent.match(/(iPhone|iPad|iPod)/)) {\n    return;\n  }\n\n  var CONFIG = {\n    TOUCH_MOVE_THRESHHOLD: 10,\n    PRESSED_CLASS: \"pressed\",\n    GHOST_CLICK_TIMEOUT: 500,\n    GHOST_CLICK_THRESHOLD: 10\n  }, clicks = [];\n\n  function withinDistance(x1, y1, x2, y2, distance) {\n    return Math.abs(x1 - x2) < distance && Math.abs(y1 - y2) < distance;\n  }\n\n  // Use a native event listener so we can set useCapture\n  document.addEventListener('click', function (e) {\n    for (var i = 0; i < clicks.length; i++) {\n      // For some reason, the ghost click events don't always appear where the touchend event was\n      if (withinDistance(clicks[i][0], clicks[i][1], e.clientX, e.clientY,\n        CONFIG.GHOST_CLICK_THRESHOLD)) {\n        e.preventDefault();\n        e.stopPropagation();\n        return;\n      }\n    }\n  }, true);\n\n  $(document).on('touchstart', '.no_delay_button', function (e) {\n    var elem = $(this);\n\n    // Disable the webkit tap highlight, since it is no longer accurate\n    elem.css('webkitTapHighlightColor', 'rgba(0,0,0,0)');\n\n    elem.addClass(CONFIG.PRESSED_CLASS);\n\n    var touch = e.originalEvent.touches[0];\n    var location = [touch.clientX, touch.clientY];\n    this.__eventLocation = location;\n\n    this.__onTouchMove = function (e) {\n      var touch = e.originalEvent.touches[0];\n      if (withinDistance(touch.clientX, touch.clientY, location[0], location[1],\n        CONFIG.TOUCH_MOVE_THRESHHOLD)) {\n        elem.addClass(CONFIG.PRESSED_CLASS);\n      } else {\n        elem.removeClass(CONFIG.PRESSED_CLASS);\n      }\n    };\n\n    $(document.body).on('touchmove', this.__onTouchMove);\n  });\n\n  $(document).on('touchcancel', '.no_delay_button', function () {\n    var elem = $(this);\n    elem.removeClass(CONFIG.PRESSED_CLASS);\n    $(document.body).off('touchmove', this.__onTouchMove);\n  });\n\n  $(document).on('touchend', '.no_delay_button', function (e) {\n    var elem = $(this);\n    if (elem.hasClass(CONFIG.PRESSED_CLASS)) {\n      elem.removeClass(CONFIG.PRESSED_CLASS);\n      var location = this.__eventLocation;\n      if (location) {\n        var touch = e.originalEvent.changedTouches[0];\n        if (!withinDistance(touch.clientX, touch.clientY, location[0], location[1],\n          CONFIG.TOUCH_MOVE_THRESHHOLD)) {\n          return;\n        }\n        // Dispatch a fake click event within a setTimeout. If we don't do this, there's a strange bug where\n        // the next view can't correctly bring the keyboard up\n        setTimeout(function() {\n          var evt = document.createEvent(\"MouseEvents\");\n          evt.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n          elem.get(0).dispatchEvent(evt);\n        }, 1);\n\n        // Don't process the default action for this event to avoid WebKit stealing focus from a\n        // view we might be loading, and from dispatching a click event\n        e.preventDefault();\n\n        // Eat further \"ghost\" click events at this location that appear if the user holds the link down\n        // longer than the double-tap cancel threshold (these are not cancelled when preventing default)\n        var clickLocation = [touch.clientX, touch.clientY];\n        clicks.push(clickLocation);\n        window.setTimeout(function() {\n          var i = clicks.indexOf(clickLocation);\n          if (i >= 0) {\n            clicks.splice(i, 1);\n          }\n        }, CONFIG.GHOST_CLICK_TIMEOUT);\n      }\n    }\n\n    $(document.body).off('touchmove', this.__onTouchMove);\n  });\n\n})(jQuery, window, document);","var locationHandler = function() {\n\tvar googlePlacesAPI = \"AIzaSyCHh4oobxVPkxm0NuPSpusns3QNe9ZdJHU\";\n\tvar userPosition;\n\tvar lastInput;\n\t// https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=51.4859846,-0.1672702&types=train_station&key=AIzaSyCHh4oobxVPkxm0NuPSpusns3QNe9ZdJHU&rankby=distance\n\t\t\n\tfunction getCurrentLocation() {\n\t\tif (navigator.geolocation) {\n      \tnavigator.geolocation.getCurrentPosition(showPosition);\n     \t}\n\t}\n\tfunction showPosition(position) {\n\t\tuserPosition = position;\n\t}\n\tfunction stationSearch(geolocation,searchname,sourceInput) {\n\t\t// var apiUrl = \"https://maps.googleapis.com/maps/api/place/nearbysearch/json\";\n\t\t// // ?location=51.4859846,-0.1672702&types=train_station&key=AIzaSyCHh4oobxVPkxm0NuPSpusns3QNe9ZdJHU&rankby=distance\";\n\t\t// var data = {\n\t\t//     key: googlePlacesAPI,\n\t\t//     location: geolocation,\n\t\t//     types: \"train_station\",\n\t\t//     rankby: \"distance\",\n\t\t//     format: \"json\"\n\t\t// };\n\t\t// $.ajax({\n\t\t//   url: apiUrl,\n\t\t//   data: data,\n\t\t//   type: \"GET\",  \n\t\t//   jsonpCallback: 'callback',\n\t\t//   dataType:\"html\",\n\t\t//   crossDomain: true,\n\t\t//   success: function(success) {\n\t\t// \t\tconsole.log(success);\n\t\t// \t\t// var places=stationSearch(geolocation);\n\t\t// \t}\n\t\t// });\n\t\tmap = new google.maps.Map(document.getElementById('map'), {\n\t      center: geolocation,\n\t      zoom: 15\n   \t});\n\t\tvar service = new google.maps.places.PlacesService(map);\n\t\tservice.nearbySearch({\n\t\t location: geolocation,\n\t\t name: searchname,\n\t\t // types: ['train_station'],\n\t\t rankBy: google.maps.places.RankBy.DISTANCE,\n\t\t}, processResults);\n\t}\n\tfunction travelSearch() {\n\t\tconsole.log(\"go travelsearch\");\n\t\tvar directionsService = new google.maps.DirectionsService();\n      var request = {\n         origin: $(\"#from_geo\").val(),\n         destination: $(\"#to_geo\").val(),\n         transitOptions: {\n\t\t\t\tdepartureTime: new Date(),\n\t\t\t\tmodes: [google.maps.TransitMode.RAIL],\n\t\t\t\talternatives: true,\n\t\t\t\troutingPreference: google.maps.TransitRoutePreference.FEWER_TRANSFERS\n\t\t\t},\n\t\t\tunitSystem: google.maps.UnitSystem.IMPERIAL,\n   \n         travelMode: google.maps.TravelMode[\"TRANSIT\"]\n      };\n      directionsService.route(request, function(response, status) {\n\t\t\tif (status == google.maps.DirectionsStatus.OK) {\n           \tconsole.log(response);\n         } else {\n         \tconsole.log(\"error\",response);\n         }\n      });\n   }\n\tfunction processResults(results,status,sourceInput){\n\t\tconsole.log(results,status);\n\t\t$choices=$(lastInput).next();\n\t\t$choices.css(\"height\",\"auto\");\n\t\t$choices.css(\"height\",\"0\");\n\n\t\tconsole.log($choices);\n\t\t$choices.html(\"<label>Nearby locations</label><ul></ul>\");\n\t\tvar a=0;\n\t\tfor (i=0; i<results.length;i++) {\n\t\t\t// if (i>0) {\n\t\t\t// \tif (results[i].name.indexOf(results[i-1].name)>-1) {\n\t\t\t// \t\t$(\"li\",$choices).filter(\":last\").remove();\n\t\t\t// \t\ta-=1;\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t$(\"ul\",$choices).append('<li><a href=\"#\" data-place_geo=\"'+results[i].geometry.location.J+','+results[i].geometry.location.M+'\">'+results[i].name+'</li>');\n\t\t\tif (a>3) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// if (i<results.length-1) {\n\t\t\t// \tif (results[i].name.indexOf(results[i+1].name)>-1) {\n\t\t\t// \t\ti+=1;\n\t\t\t// \t}\n\t\t\t// }\n\t\t\ta+=1;\n\t\t}\n\t\tif (a==0) {\n\t\t\t$choices.css(\"height\",0);\n\t\t} else {\n\t\t\t$choices.css(\"height\",(a*30)+30);\n\t\t}\n\t\t\n\t\t$(\"a\",$choices).bind(\"click\",stationChoiceHandler);\n\t\t// $(lastInput);\n\n\t}\n\tfunction stationChoiceHandler(e) {\n\t\tvar sourceElement = e.target;\n\t\tvar place_id = sourceElement.getAttribute(\"data-place_geo\");\n\t\t$(lastInput).val(sourceElement.innerHTML);\n\t\t$(\"#\"+$(lastInput).attr(\"id\")+\"_geo\").val(place_id);\n\t\te.preventDefault();\n\t\tconsole.log($(sourceElement).parent().parent().parent());\n\t\t$(sourceElement).parent().parent().parent().css(\"height\",0);\n\t}\n\tfunction nameSearch(sourceElm) {\n\t\tconsole.log(\"searching for: \", sourceElm.value);\n\t\tlastInput=sourceElm;\n\t\tvar apiUrl = \"https://maps.googleapis.com/maps/api/geocode/json\";\n\t\tvar data = {\n\t\t    key: googlePlacesAPI,\n\t\t    address: sourceElm.value,\n\t\t    components:'country:uk'\n\t\t};\n\t\t$.ajax({\n\t\t  url: apiUrl,\n\t\t  type: 'GET',\n\t\t  data: data,    \n\t\t  dataType:\"json\",\n\t\t  crossDomain: true,\n\t\t  success: function(data) {\n\t\t  // \t\tconsole.log(data);\n\t\t\t\t// // var geolocation = data.results[0].geometry.location.lat+\",\"+data.results[0].geometry.location.lng;\n\t\t\t\t// var geolocation = new google.maps.LatLng(data.results[0].geometry.location.lat,data.results[0].geometry.location.lng);\n\t\t\t\t// stationSearch(geolocation, sourceElm.value, sourceElm);\n\t\t\t\t\tvar results=data.results;\n\t\t\t\t\t$choices=$(sourceElm).next();\n\t\t\t\t\t$choices.css(\"height\",\"auto\");\n\t\t\t\t\t$choices.css(\"height\",\"0\");\n\n\t\t\t\t\tconsole.log($choices);\n\t\t\t\t\t$choices.html(\"<label>Nearby locations</label><ul></ul>\");\n\t\t\t\t\tvar a=0;\n\t\t\t\t\tfor (i=0; i<results.length;i++) {\n\t\t\t\t\t\t// if (i>0) {\n\t\t\t\t\t\t// \tif (results[i].name.indexOf(results[i-1].name)>-1) {\n\t\t\t\t\t\t// \t\t$(\"li\",$choices).filter(\":last\").remove();\n\t\t\t\t\t\t// \t\ta-=1;\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tconsole.log(results[i]);\n\t\t\t\t\t\tvar append='<li><a href=\"#\" data-place_geo=\"'+results[i].geometry.location.lat+','+results[i].geometry.location.lng+'\">';\n\t\t\t\t\t\tplace = results[i];\n\t\t\t\t\t\tvar address = '';\n\t\t\t\t\t\tif (place.address_components) {\n\t\t\t\t\t\t      address = [\n\t\t\t\t\t\t        (place.address_components[0] && place.address_components[0].short_name || ''),\n\t\t\t\t\t\t        (place.address_components[1] && place.address_components[1].short_name || ''),\n\t\t\t\t\t\t        (place.address_components[2] && place.address_components[2].short_name || '')\n\t\t\t\t\t\t      ].join(', ');\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t    append+=address;\n\t\t\t\t\t\tappend+=\"</li>\";\n\t\t\t\t\t\t$(\"ul\",$choices).append(append);\n\t\t\t\t\t\tif (a>3) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if (i<results.length-1) {\n\t\t\t\t\t\t// \tif (results[i].name.indexOf(results[i+1].name)>-1) {\n\t\t\t\t\t\t// \t\ti+=1;\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\t\t\t\t\t\ta+=1;\n\t\t\t\t\t}\n\t\t\t\t\tif (a==0) {\n\t\t\t\t\t\t$choices.css(\"height\",0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$choices.css(\"height\",(a*30)+30);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t$(\"a\",$choices).bind(\"click\",stationChoiceHandler);\n\n\t\t\t}\n\t\t});\n\t\t// var input = sourceElm;\n\t\t// // var autocomplete = new google.maps.places.Autocomplete(input);\n\t\t// var autocomplete = new google.maps.places.Autocomplete(input, {\n       \n  //       componentRestrictions: {country: 'uk'}\n  //     });\n\t\t// autocomplete.addListener('place_changed', function() {\n\t\t// \tvar place = autocomplete.getPlace();\n\t\t// \tconsole.log(place);\n\t\t// });\n\t}\n\tfunction stationSearchKeyUpHandler(e) {\n\t\t// console.log(\"key up\");\n\t\tvar sourceElm = e.target;\n\t\tlastInput = e.target;\n\t\tclearTimeout(sourceElm.timeout);\n\t\tsourceElm.timeout = setTimeout(nameSearch,500,sourceElm);\n\t}\n\treturn {\n\t\tInit:function() {\n\t\t\tgetCurrentLocation();\n\t\t\t$(\".station_search\").each(function() {\n\t\t\t\t$(this).bind(\"keyup\",stationSearchKeyUpHandler);\n\t\t\t});\n\t\t\t// $(\".planning button\").bind(\"click\",travelSearch);\n\t\t\t$(\".planning button\").bind(\"click\",enterSchedule);\n\t\t}\n\t}\n}();\n$(function() {\n\t// locationHandler.Init();\n})\n","\tvar schedule = function() {\n\t\tvar headerHeight = $(\".schedule .results .outbound header\").outerHeight() + $(\".schedule_container > header\").outerHeight();\n\t\tvar windowHeight = 0;\n\t\tfunction control(e) {\n\t\t\t\n\t\t}\n\t\tfunction resizeHandler(e) {\n\t\t\twindowHeight = $(window).innerHeight();\n\t\t\t// headerHeight = $(\".schedule .results .selecting header\").outerHeight() + $(\".schedule_container > header\").outerHeight();\n\t\t\t// var matrix = $(\".schedule_container .results\").css(\"transform\").split(\", \");\n\t\t\tvar extraHeaderHeight = 0;\n\t\t\tvar headerheight = 0;\n\t\t\t// headerHeight=parseInt(matrix[5]) + parseInt($(\".schedule_container .results\").css(\"top\"));\n\n\t\t\t\n\t\t\tconsole.log(\"resizing\", headerHeight);\t\n\t\t\tif ($(\".schedule_container\").hasClass(\"step1\")) {\n\t\t\t\textraHeaderHeight = $(\".outbound header\").outerHeight();\n\t\t\t\theaderHeight = parseInt($(\".schedule_container .results\").css(\"top\")) + 5;\n\t\t\t\t$(\".outbound ul\").css(\"height\",windowHeight-(headerHeight+extraHeaderHeight));\n\t\t\t} else if ($(\".schedule_container\").hasClass(\"step2\")) {\n\t\t\t\textraHeaderHeight = $(\".returning header\").outerHeight();\n\t\t\t\theaderHeight = parseInt($(\".schedule_container .results\").css(\"top\")) + 95;\n\t\t\t\t$(\".returning ul\").css(\"height\",windowHeight-(headerHeight+extraHeaderHeight));\n\t\t\t} else if ($(\".schedule_container\").hasClass(\"step3\")) {\n\t\t\t\textraHeaderHeight = $(\".ticket_options header\").outerHeight();\n\t\t\t\theaderHeight = parseInt($(\".schedule_container .results\").css(\"top\")) + 182;\n\t\t\t\t$(\".ticket_options ul\").css(\"height\",windowHeight-(headerHeight+extraHeaderHeight));\n\t\t\t} else if ($(\".schedule_container\").hasClass(\"step4\")) {\n\t\t\t\textraHeaderHeight = 0;\n\t\t\t\theaderHeight = parseInt($(\".schedule_container .results\").css(\"top\")) + 520;\n\t\t\t\t// $(\".outbound ul, .returning ul, .ticket_options ul\").css(\"height\",windowHeight-(headerHeight+extraHeaderHeight));\n\t\t\t}\n\n\t\t\t$(\".outbound ul, .returning ul, .ticket_options ul\").css(\"height\",windowHeight-(headerHeight+extraHeaderHeight));\n\t\t\t// $(\".results\").css(\"height\",windowHeight-headerHeight);\n\t\t}\n\t\treturn {\n\t\t\tInit: function() {\n\t\t\t\n\t\t\t\t$(window).bind(\"resize\",resizeHandler)\n\t\t\t\t// $(\".stations, .outbound_train, .returning_train\",$(\"itinerary\")).\n\n\n\t\t\t\t$(\".outbound li\").bind(\"click\",function() {\n\t\t\t\t\t$(this).siblings().addClass(\"faded\");\n\n\t\t\t\t\t$(\".itinerary .outbound datetime\").first().html($(\"datetime\",$(this)).first().html());\n\t\t\t\t\t$(\".itinerary .outbound datetime\").last().html($(\"datetime\",$(this)).last().html());\n\n\t\t\t\t\t// $(\".outbound\").addClass(\"final\").removeClass(\"selecting\");\n\t\t\t\t\t// $(\".returning\").addClass(\"selecting\");\n\t\t\t\t\t$(\".schedule_container\").removeClass(\"step1 step2 step3 step4\");;\n\t\t\t\t\t$(\".schedule_container\").addClass(\"step2\");\n\t\t\t\t\tresizeHandler();\n\t\t\t\t});\n\t\t\t\t$(\".returning li\").bind(\"click\",function() {\n\t\t\t\t\t$(this).siblings().addClass(\"faded\");\n\t\t\t\t\t// $(\".returning\").addClass(\"final\").removeClass(\"selecting\");\n\t\t\t\t\t// $(\".ticket_options\").addClass(\"selecting\");\n\t\t\t\t\t\n\t\t\t\t\t$(\".schedule_container\").removeClass(\"step1 step2 step3 step4\");;\n\t\t\t\t\t$(\".schedule_container\").addClass(\"step3\");\n\n\t\t\t\t\t$(\".itinerary .returning datetime\").first().html($(\"datetime\",$(this)).first().html());\n\t\t\t\t\t$(\".itinerary .returning datetime\").last().html($(\"datetime\",$(this)).last().html());\n\t\t\t\t\tresizeHandler();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t$(\".ticket_options li\").bind(\"click\",function() {\n\t\t\t\t\t$(this).siblings().addClass(\"faded\");\n\t\t\t\t\t// $(\".ticket_options\").addClass(\"final\").removeClass(\"selecting\");\n\n\t\t\t\t\t$(\".schedule_container\").removeClass(\"step2\").removeClass(\"step3\").removeClass(\"step4\");\n\t\t\t\t\t$(\".schedule_container\").addClass(\"step4\");\n\n\t\t\t\t\tif ($(this).hasClass(\"upgrade\")) {\n\t\t\t\t\t\tvar ticket = $(\".name\", $(this).prev() ).html()+ \" First\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar ticket = $(\".name\",$(this)).html();\n\t\t\t\t\t}\n\t\t\t\t\tvar price = $(\".price\",$(this)).html();\n\t\t\t\t\t$(\".itinerary .ticket\").html(ticket);\n\t\t\t\t\t$(\".itinerary .price\").html(price);\n\t\t\t\t\tresizeHandler();\n\t\t\t\t});\n\n\n\n\t\t\t\t// going back controls\n\t\t\t\t$(\".schedule .stations\").bind(\"click\",function(e) {\n\t\t\t\t\t$(\".schedule_container\").removeClass(\"step2\").removeClass(\"step3\").removeClass(\"step4\");\n\t\t\t\t\t$(\".outbound li, .returning li, .ticket_options li\").removeClass(\"faded\");\n\t\t\t\t\t// $(\".outbound, .returning, .ticket_options\").removeClass(\"final\").removeClass(\"selecting\");\n\t\t\t\t\t// $(\".outbound\").addClass(\"selecting\");\n\t\t\t\t\tcloseSchedule();\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tenterPlanning();\n\t\t\t\t\t},1200);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t});\n\t\t\t\t$(\".itinerary .outbound_train, .itinerary datetime.outbound, .itinerary div.outbound\").bind(\"click\",function() {\n\t\t\t\t\t$(\".schedule_container\").removeClass(\"step1 step2 step3 step4\");\n\t\t\t\t\t$(\".schedule_container\").addClass(\"step1\");\n\t\t\t\t\t// $(\".returning\").removeClass(\"final\").removeClass(\"selecting\");\n\t\t\t\t\t// $(\".ticket_options\").removeClass(\"final\").removeClass(\"selecting\");\n\t\t\t\t\t$(\".outbound li, .returning li, .ticket_options li\").removeClass(\"faded\");\n\t\t\t\t\n\t\t\t\t\tresizeHandler();\n\t\t\t\t});\n\n\t\t\t\t$(\".itinerary .returning_train, .itinerary datetime.returning, .itinerary div.returning\").bind(\"click\",function() {\n\t\t\t\t\t\n\t\t\t\t\t$(\".schedule_container\").removeClass(\"step1 step2 step3 step4\");;\n\t\t\t\t\t$(\".schedule_container\").addClass(\"step2\");\n\n\t\t\t\t\t// $(\".returning\").removeClass(\"final\").addClass(\"selecting\");\n\t\t\t\t\t// $(\".ticket_options\").removeClass(\"final\").removeClass(\"selecting\");\n\t\t\t\t\t\n\t\t\t\t\t$(\".outbound li, .returning li, .ticket_options li\").removeClass(\"faded\");\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t// $(\".returning\").removeClass(\"final\").addClass(\"selecting\");\n\t\t\t\t\t},300);\n\t\t\t\t\tresizeHandler();\n\t\t\t\t});\n\n\t\t\t\t$(\"h3.ticket\").bind(\"click\",function() {\n\n\t\t\t\t\t$(\".schedule_container\").removeClass(\"step1 step2 step3 step4\");;\n\t\t\t\t\t$(\".schedule_container\").addClass(\"step3\");\n\n\t\t\t\t\t// $(\".ticket_options\").removeClass(\"final\").addClass(\"selecting\");\n\t\t\t\t\t$(\".ticket_options li\").removeClass(\"faded\");\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t// $(\".ticket_options\").removeClass(\"final\").addClass(\"selecting\");\n\t\t\t\t\t},300);\n\t\t\t\t\tresizeHandler();\n\t\t\t\t\n\t\t\t\t});\n\t\t\t},\n\t\t\tsizeUp: function() {\n\t\t\t\tresizeHandler();\n\t\t\t}\n\t\t}\n\t}();\n$(function() {\n\tschedule.Init();\n});\n\t\n\t\n","\tvar travellers = function() {\n\t\tvar children = 0;\n\t\tvar adults = 0;\n\t\tvar adultCounter = 0;\n\t\tvar childCounter = 0;\n\t\tvar adultCharacters = [\"img/gfx-passenger-male-2.svg\",\"img/gfx-passenger-female-1.svg\",\"img/gfx-passenger-male-1.svg\",\"img/gfx-passenger-male-3.svg\"];\n\t\tvar childCharacters = [\"img/gfx-passenger-child-1.svg\"];\n\t\tvar totalAmount = 1;\n\t\t\n\t\tfunction control(e) {\n\t\t\t$(\".stage\").css(\"width\",\"auto\");\n\t\t\tvar target = e.target;\n\t\t\tvar value = -1;\n\t\t\tvar adultLabel = \"adults\";\n\t\t\tvar childLabel = \"children\";\n\n\t\t\te.preventDefault();\n\t\t\tcategory = e.target.parentNode.className;\n\t\t\t\n\n\t\t\tif (e.target.innerHTML==\"+\") {\n\t\t\t\tvalue=1;\n\t\t\t\tif (category ==\"adults\") {\n\n\t\t\t\t\t\n\t\t\t\t\tif (totalAmount % 2) {\n\t\t\t\t\t\t$(\".travellers .stage\").append('<img src=\"'+adultCharacters[adultCounter]+'\" class=\"adult\">');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".travellers .stage .adult:last\").addClass(\"added\");\n\t\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\t\telm.addClass(\"inplace\");\n\t\t\t\t\t\t\t},900,$(\".travellers .stage .adult:last\"));\n\t\t\t\t\t\t},200);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\".travellers .stage\").prepend('<img src=\"'+adultCharacters[adultCounter]+'\" class=\"adult\">');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".travellers .stage .adult:first\").addClass(\"added\");\n\t\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\t\telm.addClass(\"inplace\");\n\t\t\t\t\t\t\t},900,$(\".travellers .stage .adult:first\"));\n\t\t\t\t\t\t},200);\n\t\t\t\t\t}\n\t\t\t\t\tadultCounter++;\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tif (totalAmount % 2) {\n\t\t\t\t\t\t$(\".travellers .stage\").append('<img src=\"'+childCharacters[childCounter]+'\" class=\"child\">');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".travellers .stage .child:last\").addClass(\"added\");\n\t\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\t\telm.addClass(\"inplace\");\n\t\t\t\t\t\t\t},900,$(\".travellers .stage .child:last\"));\n\t\t\t\t\t\t},200);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\".travellers .stage\").prepend('<img src=\"'+childCharacters[childCounter]+'\" class=\"child\">');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$(\".travellers .stage .child:first\").addClass(\"added\");\n\t\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\t\telm.addClass(\"inplace\");\n\t\t\t\t\t\t\t},900,$(\".travellers .stage .child:first\"));\n\t\t\t\t\t\t},200);\n\t\t\t\t\t}\n\t\t\t\t\tchildCounter++;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tvalue=-1;\t\t\t\n\t\t\t\tif (category ==\"adults\") {\n\t\t\t\t\tif (totalAmount % 2) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\telm.remove();\n\t\t\t\t\t\t},850,$(\".travellers .stage .adult.added\").filter(\":last\"));\n\t\t\t\t\t\t$(\".travellers .stage .adult.added\").filter(\":last\").removeClass(\"added\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\telm.remove();\n\t\t\t\t\t\t},850,$(\".travellers .stage .adult.added\").filter(\":first\"))\n\t\t\t\t\t\t$(\".travellers .stage .adult.added\").filter(\":first\").removeClass(\"added\");\n\t\t\t\t\t}\n\t\t\t\t\tadultCounter--;\n\t\t\t\t} else {\n\t\t\t\t\tif (totalAmount % 2) {\n\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\telm.remove();\n\t\t\t\t\t\t},850,$(\".travellers .stage .child.added\").filter(\":last\"));\n\t\t\t\t\t\t$(\".travellers .stage .child.added\").filter(\":last\").removeClass(\"added\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(function(elm) {\n\t\t\t\t\t\t\telm.remove();\n\t\t\t\t\t\t},850,$(\".travellers .stage .child.added\").filter(\":first\"))\n\t\t\t\t\t\t$(\".travellers .stage .child.added\").filter(\":first\").removeClass(\"added\");\n\t\t\t\t\t}\n\t\t\t\t\tchildCounter--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (adultCounter<0) adultCounter=0;\n\t\t\tif (childCounter<0) childCounter=0;\n\t\t\tif (adultCounter>=adultCharacters.length) adultCounter=0;\n\t\t\tif (childCounter>=childCharacters.length) childCounter=0;\n\t\t\tif (category ==\"adults\") {\n\t\t\t\tadults+=value;\n\t\t\t} else {\n\t\t\t\tchildren+=value;\n\t\t\t}\n\t\t\t\n\t\t\tif (adults<0) adults=0;\n\t\t\tif (children<0) children=0;\n\t\t\ttotalAmount = adults + children;\n\n\t\t\t$(\"input#adults\").val(adults);\n\t\t\t$(\"input#children\").val(children);\n\t\t\tif (adults==1) {\n\t\t\t\tadultLabel= \"adult\";\n\t\t\t} else {\n\t\t\t\tadultLabel=\"adults\";\n\t\t\t}\n\t\t\tif (children==1) {\n\t\t\t\tchildrenLabel=\"child\";\n\t\t\t} else {\n\t\t\t\tchildrenLabel=\"children\";\n\t\t\t}\n\t\t\t$(\".travellers_info\").html(adults + \" \" + adultLabel +\", \"+ children + \" \"+ childrenLabel);\n\t\t\t\n\t\t\t\n\t\t}\n\t\tfunction showRailcards() {\n\t\t\t$(\".railcards .choices\").css(\"height\",$(\".railcards .choices\")[0].scrollHeight);\n\t\t}\n\n\t\treturn {\n\t\t\tInit: function() {\n\t\t\t\t$(\".travellers a\").bind(\"touchstart click\",control);\n\t\t\t\t$(\".swap\").bind(\"click\",function() {\n\t\t\t\t\tvar tempTo = $(\"input#to\").val();\n\t\t\t\t\t$(\"input#to\").val($(\"input#from\").val());\n\t\t\t\t\t$(\"input#from\").val(tempTo);\n\t\t\t\t});\n\t\t\t\t$(\".railcards .add\").bind(\"click\",showRailcards);\n\t\t\t}\n\t\t}\n\t}();\n$(function() {\n\ttravellers.Init();\n});"],"sourceRoot":"/source/"}