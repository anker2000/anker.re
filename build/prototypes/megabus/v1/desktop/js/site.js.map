{"version":3,"sources":["accordion.js","builditinerary.js","datahandler.js","datepicker.js","easing.js","findTickets.js","formDropdown.js","googlemaps.js","grabScroller.js","hashChangeHandler.js","jquery-ui.js","livereload.js","markerHandler.js","multiselect.js","people.js","searchHandler.js","tabNav.js","ticketDetails.js","ticketdatahandler.js","tools.js"],"names":["accordion","expand","e","obj","$","target","parent","toggleClass","is","Init","each","this","find","bind","buildItinerary","full","document","location","hash","replace","journey","entireJourney","outJourney","nav","indexOf","journeyStops","time","pad","tripTime","Date","now","getMonth","getDate","getFullYear","substring","i","leg","length","a","stop","classname","extra","tempTime","getTime","departure_time","carrier","arrival_time","getHours","getMinutes","city","outJourneyHTML","returnJourney","returnJourneyHTML","html","console","log","itineraryClickHandler","thisNo","index","addClass","siblings","removeClass","openItineraryDrawer","closest","journeyData","getBusStops","getJSON","busStopFile","format","data","departure_data","globalJSON","busStopHandler","done","fail","getJourneys","journeyFile","journeyHandler","clone","copy","constructor","attr","hasOwnProperty","Math","random","updateDatePickerCells","dp","setTimeout","idx","elem","value","cellContents","className","CryptoJS","MD5","toString","addCSSRule","roundRange","t","children","saveTheDate","returning","dateSingle","direction","width","height","dateDouble","enableContinueButton","removeTodayHighlighting","calendarDirection","parentNode","hasClass","calendarContinue","trigger","j","widthDate","numberTraveller","numberCards","locateTarget","shortmonth","weekday","setHours","setMinutes","setSeconds","sliderValues","leaving","val","numberIsInArray","rand","generateRandomNumb","push","dynamicCSSRules","datepicker","_defaults","onAfterUpdate","datepicker__updateDatepicker","_updateDatepicker","inst","call","_get","apply","input","cur","prv","numberOfMonths","changeMonth","weekHeader","dayNames","firstDay","minDate","changeYear","showButtonPanel","beforeShowDay","date","min","max","onSelect","dateText","tempDate","getDay","selectedYear","selectedMonth","selectedDay","localStorage","setItem","JSON","stringify","appendTo","on","d","v","split","parseDate","show","jQuery","extend","easing","def","easeOutExpo","x","b","c","pow","easeInOutQuad","easeOutElastic","s","p","abs","PI","asin","sin","factory","exports","require","define","amd","bez","encodedFuncName","coOrdArray","isArray","join","polyBez","p1","p2","A","B","C","bezCoOrd","ax","xDeriv","xForT","z","initiateTicketing","firstLoad","parse","getItem","selectedDepartureDate","oneDay","totalDays","priceDiff","padding","today","daysUntilDeparture","round","startDate","unevenPadding","endDate","thisDate","addDays","dLi","createElement","innerHTML","basePrice","currency","append","grabScroller","findTickets","showLoadingScreen","selectTicket","thisTicket","animate","scrollTop","currentPage","loadReturnFile","parseFloat","slider","outjourney","loadOutFile","returnjourney","scrollEndHandler","activeObj","endObj","css","clearTimeout","thisDiff","origPrice","duration","cardClickHandler","$this","cardSize","positionCard","scrollLeft","offset","$slide","range","values","slide","event","ui","doFilter","sortOptions","dropDownHandler","clickHandler","thisDropdown","tagName","has","radioHandler","toLowerCase","elm","initMap","navigator","geolocation","getCurrentPosition","createMap","error","json","options","sortField","busStops","TAFFY","busStop","type","tempMarker","position","lat","latitude","lng","longitude","map","icon","imageCityBig","title","zIndex","imageCitySmall","tempMarkers","updateMarkers","searchHandler","setupStations","hashChangeHandler","google","maps","addListener","boundsChangeHandler","mapBounds","getBounds","getJourney","markers","clearMarkers","gridSize","zoom","allMarkers","gridSection","grid","splice","groupLat","groupLng","avrLat","avrLng","bigCityCount","begin","end","addGrid","targetInput","clusterPosition","withinLat","f","withinLng","markerDelay","clusterMarker","Marker","imageCityCluster","labelClass","groupWindow","InfoWindow","content","disableAutoPan","open","thisHTML","setZoom","panTo","LatLng","thisGridSection","thisMarker","getIcon","url","imageCityDisabled","labelElm","fillInCity","timeout","targetElm","setElementFocus","cityWindow","sourceMarker","marker","journeyStart","drawJourney","undrawJourney","getCurrentBounds","poly","setMap","lineSymbol","path","strokeOpacity","scale","strokeWeight","strokeColor","Polyline","icons","repeat","startLabel","endLabel","getPosition","from","to","stops","tempJourneyMarker","imageEnRoute","journeyMarker","journeyMarkers","setPath","drawFinalJourney","bounds","LatLngBounds","imageBusStop","extendPoint1","getNorthEast","extendPoint2","getSouthWest","fitBounds","offsetCenter","currentCenter","getCenter","increment","parseInt","repositionMapToJourney","withinBounds","thisJourney","getJourneyInformation","start","name","thisBound","contains","mapZoomHandler","zoomingIn","prevZoom","ticketLockedIn","currentLocation","Map","getElementsByClassName","center","coords","zoomLevel","styles","customStyles","disableDefaultUI","mapTypeControl","scaleControl","scrollwheel","closeDrawers","disableUnavailableDestinations","destinationsDisabled","availableCities","imageCitySelected","setIcon","enableAllDestinations","er","setMapOnAll","openStationInfo","stations","li","addEventListener","openStationMap","station_map","station_marker","country","apiKey","infoCloseTimeout","activeInfo","tripLockedIn","featureType","elementType","stylers","visibility","color","size","Size","origin","Point","anchor","datepickerScrollHandler","distance","scrollStart","pageX","scrollObj","scrollOffsetStart","scrolled","snapToNearest","childWidth","activePosition","jqueryObj","unbind","scrollTo","point","change","window","requestAnimationFrame","prevHash","delay","datepicker_getZindex","isNaN","Datepicker","_curInst","_keyEvent","_disabledInputs","_datepickerShowing","_inDialog","_mainDivId","_inlineClass","_appendClass","_triggerClass","_dialogClass","_disableClass","_unselectableClass","_currentClass","_dayOverClass","regional","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNamesShort","dayNamesMin","dateFormat","isRTL","showMonthAfterYear","yearSuffix","showOn","showAnim","showOptions","defaultDate","appendText","buttonText","buttonImage","buttonImageOnly","hideIfNoPrevNext","navigationAsDateFormat","gotoCurrent","yearRange","showOtherMonths","selectOtherMonths","showWeek","calculateWeek","iso8601Week","shortYearCutoff","maxDate","beforeShow","onChangeMonthYear","onClose","showCurrentAtPos","stepMonths","stepBigMonths","altField","altFormat","constrainInput","autoSize","disabled","en","dpDiv","datepicker_bindHover","selector","datepicker_handleMouseover","_isDisabledDatepicker","datepicker_instActive","inline","parents","datepicker_extendRemove","props","spinnerModifer","fn","previous","element","arguments","_refresh","_trigger","widgetUuid","version","widgetSlice","Array","prototype","slice","cleanData","orig","elems","events","_data","remove","triggerHandler","widget","base","existingConstructor","basePrototype","proxiedPrototype","namespace","fullName","Widget","concat","expr","_createWidget","_proto","_childConstructors","prop","isFunction","_super","_superApply","args","returnValue","__super","__superApply","widgetEventPrefix","widgetName","widgetFullName","child","childPrototype","bridge","key","inputIndex","inputLength","undefined","isPlainObject","object","isMethodCall","methodValue","instance","charAt","jquery","pushStack","get","option","_init","defaultElement","classes","create","uuid","eventNamespace","bindings","hoverable","focusable","classesElementLookup","_on","destroy","style","ownerDocument","defaultView","parentWindow","_getCreateOptions","_create","_setOptionDisabled","_getCreateEventData","noop","that","_destroy","_removeClass","off","removeData","removeAttr","parts","curOption","shift","pop","_setOptions","_setOption","_setOptionClasses","classKey","elements","currentElements","_classes","keys","add","_toggleClass","enable","disable","processClassString","checkOption","current","unique","not","match","_addClass","suppressDisabledCheck","handlers","delegateElement","handler","handlerProxy","guid","eventName","_off","_delay","_hoverable","mouseenter","currentTarget","mouseleave","_focusable","focusin","focusout","callback","Event","originalEvent","isDefaultPrevented","hide","method","defaultEffect","effect","hasOptions","effectName","isEmptyObject","complete","effects","queue","next","form","formResetMixin","_formResetHandler","instances","refresh","_bindFormResetHandler","_unbindFormResetHandler","inArray","reduce","border","margin","side","innerWidth","innerHeight","outerWidth","outerHeight","addBack","prevObject","filter","keyCode","BACKSPACE","COMMA","DELETE","DOWN","END","ENTER","ESCAPE","HOME","LEFT","PAGE_DOWN","PAGE_UP","PERIOD","RIGHT","SPACE","TAB","UP","escapeSelector","selectorEscape","labels","ancestor","id","ancestors","eq","last","onlyVisible","items","button","controlgroupLabel","checkboxradio","selectmenu","spinner","_enhance","_callChildMethod","childWidgets","contents","unwrap","_initWidgets","wrapAll","widgetElement","_updateCornerClass","_buildSimpleOptions","label","result","middle","first","_spinnerOptions","_buttonOptions","_checkboxradioOptions","_selectmenuOptions","ui-selectmenu-button-open","ui-selectmenu-button-closed","ui-checkboxradio-label","ui-checkboxradio-icon","_readType","originalLabel","nodeType","text","outerHTML","checked","_updateLabel","focus","blur","nodeName","test","_updateIcon","_getRadioGroup","group","nameSelector","_toggleClasses","iconSpace","toAdd","prependTo","after","isDisabled","ui-button","iconPosition","showLabel","isInput","hasTitle","keyup","preventDefault","click","_updateTooltip","displayBlock","_attachIcon","_attachIconSpace","newShowLabel","newIcon","uiBackCompat","primary","secondary","buttonset","controlgroup","markerClassName","maxRows","_widgetDatepicker","setDefaults","settings","_attachDatepicker","_newInst","_connectDatepicker","_inlineDatepicker","drawMonth","drawYear","_attachments","_doKeyDown","_doKeyPress","_doKeyUp","_autoSize","_disableDatepicker","_showDatepicker","src","alt","_lastInput","_hideDatepicker","findMax","maxI","names","setMonth","setDate","_formatDate","divSpan","_setDate","_getDefaultDate","_updateAlternate","_dialogDatepicker","pos","browserWidth","browserHeight","scrollX","scrollY","_dialogInst","_dialogInput","_pos","pageY","documentElement","clientWidth","clientHeight","body","blockUI","_destroyDatepicker","$target","empty","_enableDatepicker","opacity","cursor","_getInst","err","_optionDatepicker","_getDateDatepicker","_getMinMaxDate","_changeDatepicker","_refreshDatepicker","_setDateDatepicker","noDefault","_setDateFromField","_getDate","dateStr","sel","handled","_selectDay","_adjustDate","ctrlKey","metaKey","_clearDate","_gotoToday","altKey","stopPropagation","chars","chr","_possibleChars","String","fromCharCode","charCode","lastVal","_getFormatConfig","beforeShowSettings","isFixed","_findPos","offsetHeight","left","top","display","_checkOffset","_shouldFocusInput","_generateHTML","_attachHandlers","origyearshtml","numMonths","_getNumberOfMonths","cols","activeCell","yearshtml","replaceWith","dpWidth","dpHeight","inputWidth","inputHeight","viewWidth","viewHeight","filters","hidden","postProcess","_tidyDialog","unblockUI","_checkExternalClick","period","_adjustInstDate","currentDay","currentMonth","currentYear","_notifyChange","_selectMonthYear","select","selectedIndex","month","year","td","_selectDate","formatDate","noWeekends","day","checkDate","floor","iFormat","dim","iValue","shortYearCutoffTemp","doy","literal","lookAhead","matches","getNumber","isDoubled","minSize","digits","RegExp","num","getName","shortNames","longNames","k","sort","pair","substr","checkLiteral","_ticksTo1970","_getDaysInMonth","_daylightSavingAdjust","ATOM","COOKIE","ISO_8601","RFC_822","RFC_850","RFC_1036","RFC_1123","RFC_2822","RSS","TICKS","TIMESTAMP","W3C","formatNumber","len","formatName","output","dates","_restrictMinMax","_determineDate","offsetNumeric","offsetString","pattern","exec","newDate","setMilliseconds","noChange","clear","origMonth","origYear","prev","selectDay","getAttribute","selectMonth","selectYear","maxDraw","gotoDate","controls","buttonPanel","dow","row","col","selectedDate","cornerClass","calender","thead","daysInMonth","leadDays","curRows","numRows","printDate","dRow","tbody","daySettings","otherMonth","unselectable","isMultiMonth","currentDate","_canAdjustMonth","_isInRange","_generateMonthYearHeader","_getFirstDayOfMonth","ceil","inMinYear","inMaxYear","years","thisYear","determineYear","endYear","monthHtml","onChange","minMax","curYear","curMonth","yearSplit","minYear","maxYear","initialized","otherArgs","mouseHandled","ie","userAgent","cancel","_mouseInit","_mouseDown","stopImmediatePropagation","started","_mouseDestroy","_mouseMoveDelegate","_mouseUpDelegate","_mouseMoved","_mouseStarted","_mouseUp","_mouseDownEvent","btnIsLeft","which","elIsCancel","_mouseCapture","mouseDelayMet","_mouseDelayTimer","_mouseDistanceMet","_mouseDelayMet","_mouseStart","_mouseMove","documentMode","shiftKey","ignoreMissingWhich","_mouseDrag","_mouseStop","mouse","ui-slider","ui-slider-handle","ui-slider-range","orientation","step","numPages","_keySliding","_mouseSliding","_animateOff","_handleIndex","_detectOrientation","_calculateNewMax","_createRange","_createHandles","_setupEvents","_refreshValue","handleCount","existingHandles","handle","handles","_valueMin","bottom","_handleEvents","normValue","closestHandle","allowed","mouseOverHandle","o","elementSize","elementOffset","y","_normValueFromMouse","_valueMax","thisDistance","_lastChangedValue","_start","_clickOffset","_slide","_stop","_change","pixelTotal","pixelMouse","percentMouse","valueTotal","valueMouse","_trimAlignValue","_uiHash","uiHash","handleIndex","_hasMultipleValues","newVal","otherVal","currentValue","newValues","newValue","_value","vals","_values","valsLength","_refreshRange","valModStep","alignValue","toFixed","aboveMin","_precision","precision","_precisionOf","str","decimal","lastValPercent","valPercent","valueMin","valueMax","oRange","_set","keydown","curVal","safeActiveElement","activeElement","ui-spinner","ui-spinner-down","ui-spinner-up","culture","down","up","incremental","numberFormat","page","spin","_draw","_events","beforeunload","_keydown","cancelBlur","mousewheel","delta","spinning","_spin","mousewheelTimer","mousedown .ui-spinner-button","checkFocus","isActive","_repeat","mouseup .ui-spinner-button","mouseenter .ui-spinner-button","mouseleave .ui-spinner-button","uiSpinner","wrap","buttons","counter","steps","timer","_adjustValue","_increment","prevValue","_parse","_format","Globalize","aria-valuemin","aria-valuemax","aria-valuenow","isValid","allowAny","parsed","stepUp","_stepUp","stepDown","_stepDown","pageUp","pages","pageDown","_uiSpinnerHtml","_buttonHtml","host","write","markerHandler","multiselect","updateLabel","selectbox","init","selected","setInitalCheckState","getChecked","tempChecked","setupListeners","people","thisValue","minValue","maxValue","inputHandler","searchFor","searchValue","likenocase","order","resultsClickHandler","sourceElm","parentWithTagName","cityName","targetLabel","elementInFocus","expandDrawer","activeTab","checkIfSubmittable","prevJourney","activateSearch","mockEvent","targetIcon","stationEnd","tabNav","setupLinks","ticketDetails","back","outFile","dataHandler","trainDirection","returnFile","applyFilters","targetFile","orderby","timeStart","timeEnd","quickFilter","count","quick","departures","direct","leg_count","gte","temp","lt","cheapestDepartureItem","querySelector","tripCount","tripEndTime","price","transferMessage","hours","minutes","depTime","arrTime","depTimeAMPM","formatAMPM","arrTimeAMPM","seats_left","carrierInfo","arrival_city","ticketHTML","departure_city","departure_station","arrival_station","appendChild","formatMinutes","formatPrice","formattedPrice","updatePriceList","calculatePriceDifference","travellers","n","days","transformMatrixToArray","matrix","matrixArray","hasParentWithClass","objTagName","clearAllIntervals","mx","setInterval","clearInterval","rule","isElementInViewport","el","rect","getBoundingClientRect","right","containsNC","array","textContent","innerText"],"mappings":"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","file":"site.js","sourcesContent":["var accordion = function() {\n\tfunction expand(e) {\n\t\tvar obj = $(e.target);\n\n\t\tobj.parent().toggleClass(\"expand\");\n\t\tif (obj.parent().is(\".expand\")) {\n\t\t\t// obj.html(\"Close\")\n\t\t} else {\n\t\t\t// obj.html(obj.data(\"label\"));\n\t\t}\n\t}\n\treturn {\n\t\tInit: function() {\n\t\t\t$(\".accordion\").each(function() {\n\t\t\t\t$(this).find(\".accordionToggle\").bind(\"click\",expand);\n\t\t\t})\n\t\t}\n\t}\n}()\n$(function() {\n\taccordion.Init();\n});","function buildItinerary(full) {\n\n\n\n    var target=document.location.hash.replace(\"#\",\"\");\n\t\n\tvar journey = entireJourney.outJourney;\n\tif (typeof entireJourney.outJourney ==\"undefined\") {\n\t\tdocument.location.hash='/get_tickets/outbound/';\n\t\treturn;\n\t}\n\n\tvar nav = '<ol><li class=\"outbound active\">Outbound itinerary</li><li>Return itinerary</li></ol>';\n\tif (typeof entireJourney.outJourney ==\"undefined\" && full ) document.location.hash='/get_tickets/outbound/';\n\n\tif (full || target.indexOf('outbound')>-1) {\n\t\tjourneyStops='<ul class=\"active\"><li><p>Please make sure to arrive at the station well before your scheduled departure.</p><p><a href=\"#\" onclick=\"return false\" class=\"mapLink\">Show directions to the coach station</a></p></li>';\n\t\tvar time = pad(journey.time,4);\n\t\tvar tripTime=new Date(now.getMonth()+\"/\"+now.getDate()+\"/\"+now.getFullYear()+\" \"+time.substring(0,2)+\":\"+time.substring(2,4)+\":00\");\n\n\t    for (i=0;i<journey.leg.length;i++) {\n\t    \tfor (a=0;a<journey.leg[i].stop.length;a++) {\n\t    \t\t\n\t    \t\tvar classname=\"stop\"\n\t    \t\tvar extra=\"\";\n\t    \t\tvar tempTime = new Date(tripTime.getTime() + journey.leg[i].stop[a].departure_time * 60000 );\n\t    \t\tif (a==0) {\n\t    \t\t\tclassname=\"stop newleg\";\n\t    \t\t\textra='<div class=\"carrier\">'+journey.leg[i].carrier+'</div>';\n\t    \t\t} else if (a == journey.leg[i].stop.length-1) {\n\t    \t\t\tvar tempTime = new Date(tripTime.getTime() + journey.leg[i].stop[a].arrival_time * 60000 );\n\t    \t\t\textra = '';\n\t    \t\t\tclassname=\"stop endleg\";\n\t    \t\t}\n\t    \t\tvar time = \"<time>\"+pad(tempTime.getHours(),2)+':'+pad(tempTime.getMinutes(),2)+\"</time>\";\n\t    \t\tjourneyStops+='<li class=\"'+classname +'\">'+time+journey.leg[i].stop[a].city+extra+'</li>';\n\t    \t\tif (a == journey.leg[i].stop.length-1 && i<journey.leg.length-1) {\n\t    \t\t\tjourneyStops+='<li class=\"layover\">Layover in ' + journey.leg[i].stop[a].city +extra +'</li>';\n\t    \t\t}\n\t    \t}\n\t    }\n\n\t    journeyStops+=\"</ul>\";\n\t    outJourneyHTML=journeyStops;\n\t}\n\n    \n    journey = entireJourney.returnJourney;\n\n\t\n\tif (full || target.indexOf('return')>-1) {\n\t\tjourneyStops='<ul><li><p>Please make sure to arrive at the station well before your scheduled departure.</p><p><a href=\"#\" onclick=\"return false\" class=\"mapLink\">Show directions to the coach station</a></p></li>';\n\t\tvar time = pad(journey.time,4);\n\t\tvar tripTime=new Date(now.getMonth()+\"/\"+now.getDate()+\"/\"+now.getFullYear()+\" \"+time.substring(0,2)+\":\"+time.substring(2,4)+\":00\");\n\n\t    for (i=0;i<journey.leg.length;i++) {\n\t    \tfor (a=0;a<journey.leg[i].stop.length;a++) {\n\t    \t\t\n\t    \t\tvar classname=\"stop\"\n\t    \t\tvar extra=\"\";\n\t    \t\tvar tempTime = new Date(tripTime.getTime() + journey.leg[i].stop[a].departure_time * 60000 );\n\t    \t\tif (a==0) {\n\t    \t\t\tclassname=\"stop newleg\";\n\t    \t\t\textra='<div class=\"carrier\">'+journey.leg[i].carrier+'</div>';\n\t    \t\t} else if (a == journey.leg[i].stop.length-1) {\n\t    \t\t\tvar tempTime = new Date(tripTime.getTime() + journey.leg[i].stop[a].arrival_time * 60000 );\n\t    \t\t\textra = '';\n\t    \t\t\tclassname=\"stop endleg\";\n\t    \t\t}\n\t    \t\tvar time = \"<time>\"+pad(tempTime.getHours(),2)+':'+pad(tempTime.getMinutes(),2)+\"</time>\";\n\t    \t\tjourneyStops+='<li class=\"'+classname +'\">'+time+journey.leg[i].stop[a].city+extra+'</li>';\n\t    \t\tif (a == journey.leg[i].stop.length-1 && i<journey.leg.length-1) {\n\t    \t\t\tjourneyStops+='<li class=\"layover\">Layover in ' + journey.leg[i].stop[a].city +extra +'</li>';\n\t    \t\t}\n\t    \t}\n\t    }\n\n    \tjourneyStops+=\"</ul>\";\n   \t\treturnJourneyHTML=journeyStops;\n   \t}\n    \n    if (full) {\n    \t$(\".itinerary .container\").html(nav+outJourneyHTML+returnJourneyHTML+'<img src=\"img/itinerary-notes.png\" width=\"100%\">');\n    } else {\n    \tconsole.log(\"check\",outJourneyHTML)\n    \tif (target.indexOf('outbound')>-1) {\n    \t\t$(\".itineraryDrawer .container\").html(outJourneyHTML+'<img src=\"img/itinerary-notes.png\" width=\"100%\">');\n    \t} else {\n    \t\t$(\".itineraryDrawer .container\").html(returnJourneyHTML+'<img src=\"img/itinerary-notes.png\" width=\"100%\">');\n    \t}\n    }\n    $(\".itinerary .container ol li\").bind(\"click\",itineraryClickHandler);\n}\nfunction itineraryClickHandler(e) {\n\tthisNo = $(e.target).index();\n\t$(e.target).addClass(\"active\").siblings().removeClass(\"active\");\n\t$(\".itinerary .container ul\").removeClass(\"active\");\n\t$(\".itinerary .container ul:nth-of-type(\"+(thisNo+1)+\")\").addClass(\"active\");\n}\n\nfunction openItineraryDrawer(obj) {\n\tvar target=document.location.hash.replace(\"#\",\"\");\n\tif (target.indexOf('outbound')>-1) {\n\t\tentireJourney.outJourney = $(obj).closest(\"li\")[0].journeyData;\n\t} else {\n\t\tentireJourney.returnJourney = $(obj).closest(\"li\")[0].journeyData;\n\t}\n\n\tbuildItinerary(false);\n\t$(\".itineraryDrawer\").addClass(\"active\");\n}\n$(function() {\n\t$(\".itineraryDrawer .close_button\").bind(\"click\",function() {\n\t\t$(\".itineraryDrawer\").toggleClass(\"active\");\n\t})\n})","var globalJSON;\nvar busStopFile = \"eu-bus-stops.json?\"+Math.random();\nvar journeyFile = \"eu-journey.json?\"+Math.random();\n\nfunction getBusStops() {\n\tvar jqxhr = $.getJSON( \"feeds/\"+busStopFile, {format: \"json\"}, function(data) {\n\t\tdeparture_data = data;\n\n\t\tglobalJSON = data;\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tbusStopHandler(data, { },'type');\n\t\n\t}).done(function() {\n\t\t// console.log( \"second success\" );\n\t})\n\t.fail(function(e) {\n\t\tconsole.log( \"error\",e );\n\t})\n\n};\nfunction getJourneys() {\n\tvar jqxhr = $.getJSON( \"feeds/\"+journeyFile, {format: \"json\"}, function(data) {\n\t\tdeparture_data = data;\n\n\t\tglobalJSON = data;\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tjourneyHandler(data);\n\t\n\t}).done(function() {\n\t\t// console.log( \"second success\" );\n\t})\n\t.fail(function(e) {\n\t\tconsole.log( \"error\",e );\n\t})\n}\n\n\nfunction clone(obj) {\n\tif (null == obj || \"object\" != typeof obj) return obj;\n\tvar copy = obj.constructor();\n\tfor (var attr in obj) {\n\t\tif (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n\t}\n\treturn copy;\n}","var i = 0,\n    j, widthDate, cellContents = [],\n    numberTraveller = 1,\n    numberCards = 0,\n    locateTarget = !1,\n    direction = \"leaving\",\n    shortmonth = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n    weekday = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n    now = new Date;\nnow.setHours(0), now.setMinutes(0), now.setSeconds(0);\nvar sliderValues, saveTheDate = {\n    leaving: now,\n    returning: \"\"\n};\n\n$(\"#jrange.dates input.leaving\").val(\"Today\"), $(\".date .direction .leaving .value\").html(\"Today\").addClass(\"validates\");\nvar cellContents = [];\nfor (var i = 0; 170 > i; i++) {\n    var numberIsInArray = !1,\n        rand = generateRandomNumb(45, 50);\n    cellContents.push(\"\" + rand)\n}\nfunction updateDatePickerCells(dp) {\n    setTimeout(function () {\n\n        $('.ui-datepicker td > *').each(function (idx, elem) {\n            var value = cellContents[idx + 1] || 0;\n            var className = 'datepicker-content-' + CryptoJS.MD5(value).toString();\n\n            if (value == 0)\n                addCSSRule('.ui-datepicker td a.' + className + ':after {content: \"\\\\a0\";}'); //&nbsp;\n            else\n                addCSSRule('.ui-datepicker td a.' + className + ':after {content: \"' + value + '\";}');\n\n            $(this).addClass(className);\n        });\n    }, 10);\n}\nvar dynamicCSSRules = [];\n\n\nfunction roundRange() {\n    $(\".ui-datepicker td.date-range-selected\").each(function(e, t) {\n        0 == e && $(t).addClass(\"start\"), e == $(\".ui-datepicker td.date-range-selected\").children().length - 1 && \"\" != saveTheDate.returning && $(t).addClass(\"end\")\n    })\n}\nfunction dateSingle(e) {\n    console.log(\"date Single\");\n    direction = \"leaving\";\n    $(\".search_drawer .date\").toggleClass(\"show\");\n    $(\".search_drawer .date .direction .returning\").removeClass(\"active\");\n    $(\".search_drawer .date .direction .leaving\").addClass(\"active\");\n    var t = $(\".ui-datepicker td a\").width();\n    $(\".ui-datepicker td a, .ui-state-highlight\").height(t), updateDatePickerCells()\n}\n\nfunction dateDouble(e) {\n    direction = \"returning\";\n    $(\".search_drawer .date\").toggleClass(\"show\");\n    $(\".search_drawer .date .direction .leaving\").removeClass(\"active\");\n    $(\".search_drawer .date .direction .returning\").addClass(\"active\");\n    var t = $(\".ui-datepicker td a\").width();\n    $(\".ui-datepicker td a, .ui-state-highlight\").height(t);\n    enableContinueButton();\n}\nfunction removeTodayHighlighting() {\n    $(\".ui-datepicker td\").removeClass(\" ui-datepicker-current-day, date-range-selected, ui-datepicker-current-day\")\n}\nfunction enableContinueButton() {\n    $(\".container.cta button\").removeClass(\"outofreach\")\n}\n\nfunction calendarDirection(e) {\n    var t = e.target.parentNode;\n    enableContinueButton(), $(t).hasClass(\"leaving\") ? (direction = \"leaving\", $(\".date .direction .returning\").removeClass(\"active\"), $(\".date .direction .leaving\").addClass(\"active\")) : (direction = \"returning\", $(\".date .direction .leaving\").removeClass(\"active\"), $(\".date .direction .returning\").addClass(\"active\"))\n}\n\nfunction calendarContinue() {\n    if (\"leaving\" == direction) { \n    \t$(\".date .direction .leaving\").removeClass(\"active\");\n    \t$(\".date .direction .returning\").addClass(\"active\");\n    \tdirection = \"returning\"\n    } else {\n  \t\t$(\".search_drawer .date .close_button\").trigger(\"click\");\n  \t\tconsole.log(\"closing\");\n  \t}\n}\n$(function () {\n\n\n\t$(\".date .direction .leaving, .date .direction .returning\").bind(\"click\", calendarDirection)\n\tfor (var i = 0; i < 170; i++) {\n\t    var numberIsInArray = false;\n\t    var rand = generateRandomNumb(1, 12);\n\t    cellContents.push(\"\" + rand);\n\t}\n\n\n\t$.datepicker._defaults.onAfterUpdate = null;\n    var datepicker__updateDatepicker = $.datepicker._updateDatepicker;\n    $.datepicker._updateDatepicker = function (inst) {\n        datepicker__updateDatepicker.call(this, inst);\n        var onAfterUpdate = this._get(inst, 'onAfterUpdate');\n        if (onAfterUpdate)\n            onAfterUpdate.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ''), inst]);\n    }\n  \n\n        var cur = -1, prv = -1;\n        $('#calendar')\n            .datepicker({\n                numberOfMonths: 4\n                , changeMonth: false\n                , weekHeader: false\n                , dayNames: false\n                , firstDay: 0\n                , minDate: 0\n                , changeYear: false\n                , showButtonPanel: true\n                , beforeShowDay: function (date) {\n                    if ($(\"#calendar\").is(\".single\")) {\n                        return [true, ((date.getTime() == cur) ? 'date-range-selected' : '')];\n                    } else {\n                        return [true, ((date.getTime() >= Math.min(prv, cur) && date.getTime() <= Math.max(prv, cur)) ? 'date-range-selected' : '')];\n                    }\n                }\n                , onSelect: function (dateText, inst, dp) {\n                    console.log(dateText);\n                    var tempDate = new Date(dateText);\n\n                    dateText=(weekday[tempDate.getDay()]+ \" \" +tempDate.getDate()+\" \" + shortmonth[tempDate.getMonth()]);\n                    // console.log(dateText, inst, dp);\n                    if (tempDate.toString() == now.toString()) {\n                        dateText = \"Today\";\n                    } else {\n                        console.log(tempDate, now);\n                    }\n                     // enableContinueButton();\n                    if (direction==\"leaving\") {\n                        cur = (new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay)).getTime();\n                        saveTheDate.leaving=cur;\n                        localStorage.setItem('leaving', dateText);\n                        $('#jrange input.singleB').val(dateText);\n                        // prv = (new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay)).getTime();\n                        $(\".date .direction .leaving .value\").html(dateText).addClass(\"validates\");\n                        if (saveTheDate.returning!='') {\n                            prv = saveTheDate.returning;\n\n                        } else {\n                            prv = cur;\n                            $(\"td.ui-datepicker-current-day\").removeClass(\"ui-datepicker-current-day\");\n                        }\n                    } else {\n                        cur = (new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay)).getTime();\n                        saveTheDate.returning=cur;\n                        localStorage.setItem('returning', dateText);\n                        $('#jrange input.returnB').val(dateText);\n\n                        $(\".date .direction .returning .value\").html(dateText).addClass(\"validates\");\n                        $(\"#jrange\").parent().removeClass(\"alert\");\n                         if (saveTheDate.leaving!='') {\n                            prv = saveTheDate.leaving;\n                        } else {\n                            prv = cur;\n                        }\n                    }\n                    if (typeof saveTheDate.returning != \"undefined\" && saveTheDate.returning!=\"\") {\n                        localStorage.setItem('saveTheDate', JSON.stringify(saveTheDate));\n                        console.log(\"setting local storage\",saveTheDate);\n                    }\n                }\n                , onAfterUpdate: function (inst, dp) {\n                    var widthDate = $(\".ui-datepicker td a\").width();\n                    $(\".ui-datepicker td a, .ui-state-highlight\").height(widthDate); \n\n                    if (saveTheDate.leaving=='' || saveTheDate.returning =='') {\n                        $(\"td.date-range-selected\").removeClass(\"date-range-selected\");\n                        $(\"a.ui-state-active\").parent().addClass(\"date-range-selected\");\n                    }\n                    roundRange();\n                    $('<button type=\"button\" class=\"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all\" data-handler=\"hide\" data-event=\"click\">Done</button>')\n                        .appendTo($('#calendar .ui-datepicker-buttonpane'));\n                    updateDatePickerCells();\n                   \n                }\n            })\n            .datepicker(\"setDate\", null)\n\n    updateDatePickerCells();\n    $('#jrange input').on('focus', function (e) {\n        var v = this.value\n            , d;\n        try {\n            if (v.indexOf(' - ') > -1) {\n                d = v.split(' - ');\n                prv = $.datepicker.parseDate('mm/dd/yy', d[0]).getTime();\n                cur = $.datepicker.parseDate('mm/dd/yy', d[1]).getTime();\n            } else if (v.length > 0) {\n                prv = cur = $.datepicker.parseDate('mm/dd/yy', v).getTime();\n            }\n        } catch (e) {\n            cur = prv = -1;\n        }\n        $('#calendar').datepicker('refresh').show();\n        if (cur > -1) {\n            $('#calendar').datepicker('setDate', new Date(cur));\n            console.log(\"1\");\n        } else {\n            $('#calendar').datepicker('setDate', null).find(\".date-range-selected\").removeClass(\"date-range-selected, ui-datepicker-current-day\");\n            removeTodayHighlighting();\n            console.log(\"2\");\n        }\n        widthDate = $(\".ui-datepicker td a\").width();\n        $(\".ui-datepicker td a,.ui-state-highlight\").height(widthDate);\n    });\n});","jQuery.extend( jQuery.easing, {\n\tdef: 'easeOutQuad',\n\teaseOutExpo: function (x, t, b, c, d) {\n\t\treturn (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n\t},\n\teaseInOutQuad: function (x, t, b, c, d) {\n\t    if ((t /= d / 2) < 1) return c / 2 * t * t + b;\n\t    return -c / 2 * ((--t) * (t - 2) - 1) + b;\n\t},\n\teaseOutElastic: function (x, t, b, c, d) {\n\t    var s = 1.70158;\n\t    var p = 0;\n\t    var a = c;\n\t    if (t == 0) return b;\n\t    if ((t /= d) == 1) return b + c;\n\t    if (!p) p = d * .3;\n\t    if (a < Math.abs(c)) {\n\t      a = c;\n\t      var s = p / 4;\n\t    }\n\t    else var s = p / (2 * Math.PI) * Math.asin(c / a);\n\t    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n\t}\n});\n/*!\n * Bez 1.0.11\n * http://github.com/rdallasgray/bez\n *\n * A plugin to convert CSS3 cubic-bezier co-ordinates to jQuery-compatible easing functions\n *\n * With thanks to Nikolay Nemshilov for clarification on the cubic-bezier maths\n * See http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html\n *\n * Copyright 2016 Robert Dallas Gray. All rights reserved.\n * Provided under the FreeBSD license: https://github.com/rdallasgray/bez/blob/master/LICENSE.txt\n */\n(function(factory) {\n  if (typeof exports === \"object\") {\n    factory(require(\"jquery\"));\n  } else if (typeof define === \"function\" && define.amd) {\n    define([\"jquery\"], factory);\n  } else {\n    factory(jQuery);\n  }\n}(function($) {\n  $.extend({ bez: function(encodedFuncName, coOrdArray) {\n    if ($.isArray(encodedFuncName)) {\n      coOrdArray = encodedFuncName;\n      encodedFuncName = 'bez_' + coOrdArray.join('_').replace(/\\./g, 'p');\n    }\n    if (typeof $.easing[encodedFuncName] !== \"function\") {\n      var polyBez = function(p1, p2) {\n        var A = [null, null], B = [null, null], C = [null, null],\n            bezCoOrd = function(t, ax) {\n              C[ax] = 3 * p1[ax], B[ax] = 3 * (p2[ax] - p1[ax]) - C[ax], A[ax] = 1 - C[ax] - B[ax];\n              return t * (C[ax] + t * (B[ax] + t * A[ax]));\n            },\n            xDeriv = function(t) {\n              return C[0] + t * (2 * B[0] + 3 * A[0] * t);\n            },\n            xForT = function(t) {\n              var x = t, i = 0, z;\n              while (++i < 14) {\n                z = bezCoOrd(x, 0) - t;\n                if (Math.abs(z) < 1e-3) break;\n                x -= z / xDeriv(x);\n              }\n              return x;\n            };\n        return function(t) {\n          return bezCoOrd(xForT(t), 1);\n        }\n      };\n      $.easing[encodedFuncName] = function(x, t, b, c, d) {\n        return c * polyBez([coOrdArray[0], coOrdArray[1]], [coOrdArray[2], coOrdArray[3]])(t/d) + b;\n      }\n    }\n    return encodedFuncName;\n  }});\n}));","var priceDiff = [-5,1,2,3,0,-1,-2,3,1];\nvar basePrice = 35;\n\n\nfunction initiateTicketing(target,firstLoad) {\n\t// $(\".ticket_finder\").removeClass(\"outbound return summary\")\n\t\n\tif (target.indexOf('outbound')>-1) {\n\t\t$(\".ticket_finder\")[0].className=\"outbound ticket_finder time\";\n\t}\n\tif (target.indexOf('return')>-1) {\n\t\t$(\".ticket_finder\")[0].className=\"return ticket_finder time\";\n\t}\n\tif (target.indexOf('summary')>-1) {\n\t\t$(\".ticket_finder\")[0].className=\"summary ticket_finder time\";\n\t\tbuildItinerary(true);\n\t} \n\n\tvar daysAroundDate=4;\n\t\n\tif (typeof saveTheDate.returning == \"undefined\" || saveTheDate.returning == \"\") {\n\t\tsaveTheDate=JSON.parse(localStorage.getItem('saveTheDate'));\n\t}\n\tconsole.log(\"save the date\",saveTheDate);\n\tif ($(\".ticket_finder\").hasClass(\"return\")) {\n\t\tvar selectedDepartureDate=new Date(saveTheDate.returning);\n\t} else {\n\n\t\tvar selectedDepartureDate=new Date(saveTheDate.leaving);\n\t}\n\tconsole.log(\"Selected departure date\",selectedDepartureDate);\n\t$(\".ticket_finder .datepicker\").html(\"\");\n\n\tvar oneDay = 24*60*60*1000\n\tvar totalDays=priceDiff.length;\n\tvar padding = (totalDays-1)/2;\n\tvar today = new Date();\n\n\tvar daysUntilDeparture = Math.round(Math.abs((today.getTime() - selectedDepartureDate.getTime())/(oneDay)));\n\tvar startDate = 0-padding;\n\tvar unevenPadding = false;\n\n\tconsole.log('days until departure',daysUntilDeparture);\n\tif (padding > daysUntilDeparture) {\n\t\tstartDate = 0-daysUntilDeparture;\n\t\tunevenPadding = true;\n\t}\n\tendDate = startDate+9;\n\tvar a=0;\n\tfor (i=startDate;i<endDate;i++) {\n\t\tthisDate = addDays(selectedDepartureDate,i);\n\t\tvar dLi = document.createElement(\"LI\");\n\t\tif (i==0) {\n\t\t\tdLi.className=\"highlight\";\n\t\t\tif (unevenPadding) {\n\t\t\t\tdLi.className=\"highlight today\";\n\t\t\t}\n\t\t}\n\t\tdLi.innerHTML='<div class=\"date\" data-date=\"'+thisDate.getTime()+'\"><span class=\"datedate\">'+weekday[thisDate.getDay()]+' '+thisDate.getDate()+' ' + shortmonth[thisDate.getMonth()]+'</span><br/><span class=\"price\" data-price=\"'+((basePrice+priceDiff[a])*numberTraveller)+'\">'+currency+((basePrice+priceDiff[a])*numberTraveller)+'</span></div>';\n\t\t$(\".ticket_finder .datepicker\").append(dLi);\n\t\ta++;\n\t}\n\tif (target.indexOf('summary')==-1) {\n\t\tgrabScroller.Init($(\"ul.datepicker\"));\n\t}\n}\n\nfunction findTickets() {\n\tdocument.location.hash='/get_tickets/outbound/';\n\n}\nfunction showLoadingScreen() {\n\t$(\"content .loading_screen\").addClass(\"active\");\n\tsetTimeout(function() {\n\t\t$(\"content .loading_screen\").removeClass(\"active\");\n\t\t\n\t},2000);\n\tsetTimeout(function() {\n\t\t$(\".message_bar\").removeClass(\"loading\");\n\t},4500);\n}\nvar entireJourney = {};\nfunction selectTicket(obj) {\n\t\n\tthisTicket = $(obj).closest(\"li\");\n\t// buildItinerary(thisTicket[0].journeyData);\n\t$(\".ticket_finder content .cards\").animate({ scrollTop: \"0px\" },300);\n\tif (currentPage.indexOf('/get_tickets/outbound/')>-1) {\n\t\tentireJourney.outJourney = thisTicket[0].journeyData;\n\t\tshowLoadingScreen();\n\t\tdocument.location.hash='/get_tickets/return/';\n\t\t$(\".message_bar\").addClass(\"loading\");\n\t\tsetTimeout(loadReturnFile,1500);\n\n\t\t$(\".out_bar time\").html($(\".datepicker .highlight .datedate\").html());\n\t\t$(\".out_bar li:nth-child(2)\").html(thisTicket.find(\".deptime .left p\").html());\n\t\t$(\".out_bar .price\").html(thisTicket.find(\".deptime .price\").html());\n\n\t   \treturn false;\n\t} else if (currentPage.indexOf('/get_tickets/return/')>-1) {\n\t\tentireJourney.returnJourney = thisTicket[0].journeyData;\n\t\tdocument.location.hash='/get_tickets/summary/';\n\t\tsetTimeout(function() {\n\t\t\t$(\".message_bar\").addClass(\"loading\");\n\t\t},800);\n\t\tsetTimeout(function() {\n\t\t\t$(\".message_bar\").removeClass(\"loading\");\n\t\t},3000);\n\t\t$(\".return_bar time\").html($(\".datepicker .highlight .datedate\").html());\n\t\t$(\".return_bar li:nth-child(2)\").html(thisTicket.find(\".deptime .left p\").html());\n\t\t$(\".return_bar .price\").html(thisTicket.find(\".deptime .price\").html());\n\n\t\t$(\".total .price\").html(currency+(parseFloat($(\".out_bar .price\").html().replace(currency,\"\"))+parseFloat($(\".return_bar .price\").html().replace(currency,\"\"))));\n\n\t\t$(\".ticket_finder\").removeClass(\"filtered\");\n\t\t$(\"#slider-range\").slider('values',0,0);\n\t\t$(\".range input#start\").val(\"00:00\")\n\t\t$(\"#slider-range\").slider('values',1,24);\n\t\t$(\".range input#end\").val(\"24:00\")\n\t}\n}\nfunction outjourney() {\n\tdocument.location.hash='/get_tickets/outbound/'\n\tconsole.log(\"Outbound journey\");\n\tsetTimeout(loadOutFile,1500);\n\t$(\".ticket_finder content .cards\").animate({ scrollTop: \"0px\" },300);\n\tshowLoadingScreen();\n\n}\nfunction returnjourney() {\n\tdocument.location.hash='/get_tickets/return/'\n\tconsole.log(\"Return journey\");\n\tsetTimeout(loadReturnFile,1500);\n\t$(\".ticket_finder content .cards\").animate({ scrollTop: \"0px\" },300);\n\tshowLoadingScreen();\n}\nvar endObj;\nfunction scrollEndHandler(activeObj) {\n\tendObj=activeObj;\n\t$(\".datepicker li.highlight\").removeClass(\"highlight\");\n\t$(\".datepicker li:nth-child(\"+(activeObj+1)+\")\").addClass(\"highlight\");\n\t$(\".cards\").css(\"opacity\", \"0\");\n\t$(\".cards ul li\").removeClass(\"current push\");\n\tclearTimeout($.data(this, \"scrollCheck\"));\n\t$.data(this, \"scrollCheck\", setTimeout(function () {\n\t\t$(\".cards\").css(\"opacity\", \"1\");\n\t\tvar thisDiff = priceDiff[activeObj];\n\n\t\t$(\".cards li\").each(function() {\n\t\t\tvar origPrice = parseFloat($(this).find(\".price\").data(\"price\"));\n\t\t\t$(this).find(\".price\").html(currency+(numberTraveller*(origPrice+thisDiff))).data(\"buyprice\",numberTraveller*(origPrice+thisDiff));\n\t\t\tvar duration = parseFloat($(this).find(\".deptime\").data(\"duration\"))*60000;\n\t\t\tvar arrivalDate = new Date($(\".ticket_finder .datepicker li.highlight .date\").data(\"date\")+duration);\n\t\t}).removeClass(\"show\");\n\t}, 250));\n};\n$(\"ul.datepicker\").on(\"click\", \"li.previous\", function () {\n\tvar $this = $(this);\n\tvar width = $this.width();\n\tvar numberCards = $(\".datepicker li\").length;\n\tvar cardSize = $(\".datepicker li:nth-of-type(2)\").width();\n\tvar positionCard = cardSize * $this.index() - cardSize;\n\t$(\"ul.datepicker\").animate({\n\t\tscrollLeft: positionCard\n\t}, 150);\n});\n\n$(\"ul.datepicker\").on(\"click\", \"li.next\", function () {\n\tvar $this = $(this);\n\tvar offset = $this.offset();\n\tvar width = $this.width();\n\tvar numberCards = $(\".datepicker li\").length;\n\tvar cardSize = $(\".datepicker li:nth-of-type(2)\").width();\n\tvar positionCard = cardSize * $this.index() - cardSize;\n\t$(\"ul.datepicker\").animate({\n\t\tscrollLeft: positionCard\n\t}, 500);\n});\nfunction cardClickHandler(e) {\n\t$(e.target).closest(\"li\").toggleClass(\"show\");\n}\n$(function() {\n\t$(\".initial h2\").bind(\"click\",function() {\n\t\tdocument.location.hash='/ticket_details/';\n\t});\n\t$slide = $(\"#slider-range\").slider({\n\t\trange: true\n\t\t, min: 0\n\t\t, max: 24\n\t\t, values: [0, 24]\n\t\t, slide: function (event, ui) {\n\t\t\tif (ui.values[0] < 10) {\n\t\t\t\t$(\"#start\").val(\"0\" + ui.values[0] + \":00\");\n\t\t\t} else {\n\t\t\t\t$(\"#start\").val(ui.values[0] + \":00\");\n\t\t\t}\n\n\t\t\tif (ui.values[1] < 10) {\n\t\t\t\t$(\"#end\").val(\"0\" + ui.values[1] + \":00\");\n\t\t\t} else {\n\t\t\t\t$(\"#end\").val(ui.values[1] + \":00\");\n\t\t\t}\n\t\t\tdoFilter();\n\t\t}\n\t});\n\t$(\".toggle.direct\").bind(\"click\",doFilter);\n\t$(\"#start\").val(\"0\" + $(\"#slider-range\").slider(\"values\", 0) + \":00\");\n\t$(\"#end\").val($(\"#slider-range\").slider(\"values\", 1) + \":00\");\n\n})\n\t","var sortOptions='';\nvar dropDownHandler = function() {\n\n\tfunction clickHandler(e) {\n\t\tvar thisDropdown = $(e.target).closest(\".formDropdown\");\n\t\tthisDropdown.toggleClass(\"active\");\n\t\t$(document).bind(\"mouseup\", function (e) {\n\t\t\tif (e.target.tagName==\"H4\" && e.target.parentNode.className==\"sortoptions\") {\n\t\t\t\tthisDropdown.removeClass(\"active\");\n\t\t\t} else if (!thisDropdown.is(e.target) && thisDropdown.has(e.target).length === 0) {\n\t\t       \tthisDropdown.removeClass(\"active\");\n\t\t    }\n\t\t});\n\t}\n\tfunction radioHandler(e) {\n\t\tvar thisDropdown = $(e.target).closest(\".formDropdown\");\n\t\tsortOptions = thisDropdown.find(\"input:checked\").val();\n\t\tvalue=thisDropdown.find(\"input:checked + label p\").html().toLowerCase();\n\t\tthisDropdown.find(\".sortlabel\").html(value);\n\t\tdoFilter();\n\t\tsetTimeout(function(thisDropdown) {\n\t\t\tthisDropdown.removeClass(\"active\");\n\t\t},700,thisDropdown);\n\t}\n\treturn {\n\t\tInit: function(elm) {\n\t\t\t$(\".formDropdown\").each(function() {\n\t\t\t\t$(this).find(\"input[type=radio]\").bind(\"click\",radioHandler);\n\t\t\t\t$(this).find(\".sortingby\").bind(\"click\",clickHandler);\n\t\t\t});\n\t\t}\n\t}\n}();\n$(function() {\n\tdropDownHandler.Init();\n});","var apiKey = \"AIzaSyCHh4oobxVPkxm0NuPSpusns3QNe9ZdJHU\";\nvar map;\nvar tempMarkers = [];\nvar markers = [];\nvar infoCloseTimeout;\nvar activeInfo;\nvar zoomLevel = 7;\nvar prevZoom = 7;\nvar busStops, journey; // Taffy vars\nvar poly;\nvar tripLockedIn = false;\nvar mapBounds;\nvar destinationsDisabled = false;\nvar customStyles = [{\"featureType\":\"administrative\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#cccccc\"}]},{\"featureType\":\"administrative\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"landscape\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#eeeeee\"}]},{\"featureType\":\"landscape\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"simplified\"},{\"color\":\"#ffda86\"}]},{\"featureType\":\"road\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"water\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#9edbf7\"}]},{\"featureType\":\"water\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]}];\nvar imageCitySelected = {\n\turl: 'img/maps_marker-city-selected.svg',\n\tsize: new google.maps.Size(30, 30),\n\torigin: new google.maps.Point(0, 0),\n\tanchor: new google.maps.Point(15, 15)\n};\nvar imageCityBig = {\n\turl: 'img/maps_marker-city-big.svg',\n\tsize: new google.maps.Size(30, 30),\n\torigin: new google.maps.Point(0, 0),\n\tanchor: new google.maps.Point(15, 15)\n};\nvar imageCitySmall = {\n\turl: 'img/maps_marker-city-small.svg',\n\tsize: new google.maps.Size(30, 30),\n\torigin: new google.maps.Point(0, 0),\n\tanchor: new google.maps.Point(15, 15)\n};\nvar imageCityDisabled = {\n\turl: 'img/maps_marker-city-disabled.svg',\n\tsize: new google.maps.Size(30, 30),\n\torigin: new google.maps.Point(0, 0),\n\tanchor: new google.maps.Point(15, 15)\n};\nvar imageEnRoute = {\n\turl: 'img/maps_marker-city-enroute.svg',\n\tsize: new google.maps.Size(30, 30),\n\torigin: new google.maps.Point(0, 0),\n\tanchor: new google.maps.Point(15, 15)\n}\nvar imageCityCluster = {\n\turl: 'img/maps_marker-cluster.svg',\n\tsize: new google.maps.Size(30, 30),\n\torigin: new google.maps.Point(0, 0),\n\tanchor: new google.maps.Point(15, 15)\n};\nvar imageBusStop = {\n\turl: 'img/maps_marker-busstop.svg',\n\tsize: new google.maps.Size(50, 70),\n\torigin: new google.maps.Point(0, 0),\n\tanchor: new google.maps.Point(25, 68)\n}\ninitMap();\n\n\t\nfunction initMap() {\n\tif (navigator.geolocation) {\n\t\tnavigator.geolocation.getCurrentPosition(createMap,error);\n\t} \n}\nfunction busStopHandler(json, options,sortField) {\n\tif (typeof json == \"undefined\") {\n\t\tjson = globalJSON;\n\t\tif (typeof json == \"undefined\") return false;\n\t}\n\tbusStops = TAFFY(json);\n\n\tbusStops(options).each(function(busStop) {\n\t\tif (busStop.type==\"A\") {\n\t\t\tvar tempMarker = {\n\t\t\t\tposition: {lat: busStop.latitude, lng: busStop.longitude},\n\t\t\t\tmap: map,\n\t\t\t\ticon: imageCityBig,\n\t\t\t\ttitle: busStop.city,\n\t\t\t\tzIndex:2,\n\t\t\t\ttype:busStop.type\n\t\t    };\n\t\t} else {\n\t\t\tvar tempMarker = {\n\t\t\t\tposition: {lat: busStop.latitude, lng: busStop.longitude},\n\t\t\t\tmap: map,\n\t\t\t\ticon: imageCitySmall,\n\t\t\t\ttitle: busStop.city,\n\t\t\t\tzIndex:1,\n\t\t\t\ttype:busStop.type\n\t\t    };\n\t\t}\n\t\ttempMarkers.push(tempMarker);\n\t});\n\tsetTimeout(function() {\n\t\tupdateMarkers();\n\t\tsearchHandler.setupStations();\n\t\thashChangeHandler.Init();\n\t},2000);\n\tgoogle.maps.event.addListener(map, 'bounds_changed',boundsChangeHandler);\n}\nfunction boundsChangeHandler() {\n\tmapBounds=map.getBounds();\n}\nfunction updateMarkers() {\n\tif (document.location.hash.indexOf('ticket_details')>-1) return;\n\tconsole.log(\"map bounds\",mapBounds);\n\tif (typeof mapBounds==\"undefined\") {\n\t\tboundsChangeHandler();\n\t\tsetTimeout(updateMarkers,1000);\n\t\treturn;\n\t}\n\tvar journey = searchHandler.getJourney();\n\tif (markers.length>0) {\n\t\tclearMarkers();\n\t}\n\n\tvar gridSize = 4;\n\tswitch(map.zoom) {\n\t\tcase 5:\n\t\t\tgridSize=2.4;\n\t\t\tbreak;\n\t\tcase 6:\n\t\t\tgridSize=1.2;\n\t\t\tbreak;\n\t\tcase 7:\n\t\t\tgridSize=0.4;\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\tgridSize=0.2;\n\t\t\tbreak;\n\t}\n\n\tvar allMarkers = tempMarkers;\n\tvar gridSection = [];\n\tvar grid = [];\n\n\t//looping through each section of the globe grid and grouping cities within each section\n\tfor (lng=-10.5;lng<=22;lng+=gridSize) {\n\t\tfor (lat=36;lat<=61;lat+=gridSize) {\n\t\t\tgridSection = [];\n\t\t\tfor (i=0;i<allMarkers.length;i++) {\n\t\t\t\tif ((allMarkers[i].position.lng >= lng && allMarkers[i].position.lng<lng+gridSize) && (allMarkers[i].position.lat >= lat && allMarkers[i].position.lat<lat+gridSize)) {\n\t\t\t\t\tgridSection.push(allMarkers[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (gridSection.length>0) {\n\t\t\t\tgrid.push(gridSection.splice(0));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor (i=0;i<grid.length;i++) {\n\t\tgridSection = grid[i].splice(0);\n\t\tif (gridSection.length>1 && map.zoom<8) {\n\t\t\tvar groupLat = 0;\n\t\t\tvar groupLng = 0;\n\t\t\tvar avrLat = 0;\n\t\t\tvar avrLng = 0;\n\t\t\tvar bigCityCount=0;\n\n\t\t\t// going through the position of each city within group to find average coordinates/center point for the group \n\t\t\tfor (a=0;a<gridSection.length;a++) {\n\t\t\t\tavrLat += gridSection[a].position.lat;\n\t\t\t\tavrLng += gridSection[a].position.lng;\n\t\t\t\tif ((gridSection[a].title!=journey.begin && gridSection[a].title!=journey.end)) {\n\t\t\t\t\tif (gridSection[a].zIndex==2) {\n\t\t\t\t\t\t// if there's a big city within the group that becomes the center point for the group\n\t\t\t\t\t\tgroupLat = gridSection[a].position.lat;\n\t\t\t\t\t\tgroupLng = gridSection[a].position.lng;\n\t\t\t\t\t\tbigCityCount++;\n\t\t\t\t\t}\n\t\t\t\t} else { // if bus stop has been selected or is part of a selected journey\n\t\t\t\t\tvar addGrid = [];\n\t\t\t\t\tif (gridSection[a].title==journey.begin) {\n\t\t\t\t\t\tgridSection[a].targetInput = $(\".journey input[tabindex=1]\");\n\t\t\t\t\t} else if (gridSection[a].title==journey.end) {\n\t\t\t\t\t\tgridSection[a].targetInput = $(\".journey input[tabindex=2]\");\n\t\t\t\t\t}\n\t\t\t\t\taddGrid.push(gridSection[a]);\n\t\t\t\t\tgrid.push(addGrid);\n\t\t\t\t\tgridSection.splice(a,1);\n\t\t\t\t\ta--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// calculate average location if there's either no big cities within the group OR more than one big city\n\t\t\tif (bigCityCount!=1) {\n\t\t\t\tgroupLat = avrLat/gridSection.length;\n\t\t\t\tgroupLng = avrLng/gridSection.length\n\t\t\t}\n\n\t\t\tvar clusterPosition = { lat: groupLat, lng: groupLng };\n\n\t\t\tvar withinLat = (clusterPosition.lat>=mapBounds.f.f && clusterPosition.lat<=mapBounds.f.b); \n\t\t\tvar withinLng = (clusterPosition.lng<=mapBounds.b.f && clusterPosition.lng>=mapBounds.b.b);\n\t\t\tvar markerDelay = 0;\n\t\t\tif (!withinLat || !withinLng) {\n\t\t\t\tmarkerDelay = 2000;\n\t\t\t\t\n\t\t\t}\n\t\t\tsetTimeout(function(position,title) {\n\t\t\t\tvar clusterMarker = new google.maps.Marker({\n\t\t\t\t\tposition: {lat: position.lat, lng: position.lng },\n\t\t\t\t\tmap: map,\n\t\t\t\t\ticon: imageCityCluster,\n\t\t\t\t\ttitle: title,\n\t\t\t        labelClass: \"labels\", // the CSS class for the label\n\t\t\t        type: \"cluster\",\n\t\t\t\t\tzIndex:2,\n\t\t\t    });\n\t\t\t\t\n\t\t\t\tvar groupWindow = new google.maps.InfoWindow({\n\t\t\t\t\tcontent: '<div class=\"labelHook\">'+title+'</div>',\n\t\t\t\t\tdisableAutoPan : true\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tgroupWindow.open(map, clusterMarker);\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(\".labelHook\").each(function() {\n\t\t\t\t\t\tvar thisHTML=$(this).html();\n\t\t\t\t\t\t$(this).parent().parent().parent().parent().html(thisHTML).addClass(\"groupLabel\");\n\t\t\t\t\t})\n\t\t\t\t},100);\n\t\t\t    markers.push(clusterMarker);\n\t\t\t    google.maps.event.addListener(clusterMarker,'click',function() {\n\t\t\t\t\tsetTimeout(clearMarkers,200);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tmap.setZoom(map.zoom + 1);\n\t\t\t\t\t},400,clusterMarker);\n\t\t\t\t\tmap.panTo(new google.maps.LatLng(this.position.lat(), this.position.lng()));\n\t\t\t\t});\n\t\t\t},markerDelay, clusterPosition,gridSection.length.toString());\n\t\t\t\n\n\t\t} else {\n\t\t\tfor (a=0;a<gridSection.length;a++) {\n\t\t\t\tif (gridSection[a].title==journey.begin) {\n\t\t\t\t\tgridSection[a].targetInput = $(\".journey input[tabindex=1]\");\n\t\t\t\t} else if (gridSection[a].title==journey.end) {\n\t\t\t\t\tgridSection[a].targetInput = $(\".journey input[tabindex=2]\");\n\t\t\t\t}\n\t\t\t\t\n\n\t\t\t\tvar clusterPosition = { lat: groupLat, lng: groupLng };\n\n\t\t\t\tvar withinLat = (gridSection[a].position.lat>=mapBounds.f.f && gridSection[a].position.lat<=mapBounds.f.b); \n\t\t\t\tvar withinLng = (gridSection[a].position.lng<=mapBounds.b.f && gridSection[a].position.lng>=mapBounds.b.b);\n\t\t\t\tvar markerDelay = 0;\n\t\t\t\tif (!withinLat || !withinLng) {\n\t\t\t\t\tmarkerDelay = 3000;\n\t\t\t\t}\n\n\t\t\t\tsetTimeout(function(thisGridSection) {\n\t\t\t\t\tvar thisMarker = new google.maps.Marker(thisGridSection);\n\t\t\t\t\tmarkers.push(thisMarker);\n\t\t\t\t\tgoogle.maps.event.addListener(thisMarker,'click',function(e) {\n\t\t\t\t\t\t$(\".station_info\").removeClass(\"expanded\");\n\t\t\t\t\t\tif (this.getIcon().url==imageCityDisabled.url) return;\n\t\t\t\t\t\tif (typeof this.labelElm == \"undefined\") {\n\t\t\t\t\t\t\tthis.labelElm = $('.cityLabel h3:contains(\"'+this.title+'\")').parent().parent();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// google.maps.event.trigger(this,\"mouseout\");\n\t\t\t\t\t\tthis.labelElm.trigger(\"mouseout\");\n\t\t\t\t\t\t$(\".journey\").removeClass(\"expanded\");\n\t\t\t\t\t\tsearchHandler.fillInCity(this);\n\t\t\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\t\t});\n\t\t\t\t\tif ((thisGridSection.title==journey.begin || thisGridSection.title==journey.end)) {\n\t\t\t\t\t\tsetTimeout(function(thisMarker,targetElm) {\n\t\t\t\t\t\t\tsearchHandler.setElementFocus(targetElm);\n\t\t\t\t\t\t\tgoogle.maps.event.trigger(thisMarker, \"click\");\n\t\t\t\t\t\t\tsearchHandler.setElementFocus(targetElm);\n\t\t\t\t\t\t},300,thisMarker,thisGridSection.targetInput);\n\t\t\t\t\t}\n\t\t\t\t\tgoogle.maps.event.addListener(thisMarker,'mouseover',function(e) {\n\t\t\t\t\t\tif (this.getIcon().url==imageCityDisabled.url) return;\n\t\t\t\t\t\tif (typeof this.labelElm == \"undefined\") {\n\t\t\t\t\t\t\tthis.labelElm = $('.cityLabel h3:contains(\"'+this.title+'\")').parent().parent();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthisMarker.cityWindow = new google.maps.InfoWindow({\n\t\t  \t\t\t\tcontent: '<div class=\"labelCityHook\"><div class=\"labelbg\"></div><div class=\"label'+thisGridSection.zIndex+'\"><h3>'+thisGridSection.title+'</h3><a href=\"#/station_info/'+thisGridSection.title+'\">Show stop details</a></div></div>',\n\t\t  \t\t\t\tdisableAutoPan : true\n\t\t\t\t\t});\n\t\t\t\t\tthisMarker.cityWindow.open(map, thisMarker);\n\t\t\t\t\tsetTimeout(function(sourceMarker) { // timeout because of the delay of cityWindow.open()\n\t\t\t\t\t\t$('.labelCityHook h3:contains(\"'+sourceMarker.title+'\")').each(function() {\n\t\t\t\t\t\t\tvar thisHTML=$(this).parent().parent().html();\n\t\t\t\t\t\t\tvar targetElm = $(this).parent().parent().parent().parent().parent().parent();\n\n\t\t\t\t\t\t\tif ($(\".label1\",$(this)).length>0) {\n\t\t\t\t\t\t\t\ttargetElm.html(thisHTML).addClass(\"cityLabel\").addClass(\"small\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttargetElm.html(thisHTML).addClass(\"cityLabel\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttargetElm.bind(\"mouseover\",function() {\n\t\t\t\t\t\t\t\tif (this.marker.getIcon().url==imageCityDisabled.url) return;\n\t\t\t\t\t\t\t\tif (typeof this.zIndex==\"undefined\") {\n\t\t\t\t\t\t\t\t\tthis.zIndex = $(this).parent().css(\"z-index\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$(this).parent().css(\"z-index\",100000);\n\t\t\t\t\t\t\t\tvar journeyStart = searchHandler.getJourney().begin;\n\t\t\t\t\t\t\t\tif (typeof journeyStart == \"undefined\" || $(\".journey input[tabindex=1]\").hasClass(\"active\")) return;\n\t\t\t\t\t\t\t\tdrawJourney({ begin: journeyStart, end: this.marker.title });\n\t\t\t\t\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\ttargetElm.bind(\"mouseout\",function() {\n\t\t\t\t\t\t\t\tif (this.marker.getIcon().url==imageCityDisabled.url) return;\n\t\t\t\t\t\t\t\tthis.timeout = setTimeout(undrawJourney,100);\n\t\t\t\t\t\t\t\t$(this).parent().css(\"z-index\",this.zIndex);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\ttargetElm.bind(\"click\",function(e) {\n\t\t\t\t\t\t\t\t$(\".station_info\").removeClass(\"expanded\");\n\t\t\t\t\t\t\t\tif (this.marker.getIcon().url==imageCityDisabled.url) return;\n\t\t\t\t\t\t\t\tif (e.target.tagName!==\"A\") google.maps.event.trigger(this.marker,\"click\",e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\ttargetElm[0].marker = sourceMarker;\n\t\t\t\t\t\t});\n\t\t\t\t\t},250, thisMarker)\n\t\t\t\t},markerDelay,gridSection[a])\n\t\t\t}\n\t\t}\n\n\t}\n\t// if (journey.begin && journey.end) {\n\t// \tdrawJourney(journey);\n\t// }\n}\nfunction getCurrentBounds() {\n\treturn map.getBounds(); \n}\nfunction journeyHandler(json) {\n\tif (typeof json == \"undefined\") {\n\t\tjson = globalJSON;\n\t\tif (typeof json == \"undefined\") return false;\n\t}\n\tjourney = TAFFY(json);\n}\nvar journeyMarkers = [];\nfunction drawJourney(journeyData) {\n\tif (typeof poly != \"undefined\") poly.setMap(null);\n\t\n\n\tvar lineSymbol = {\n\t\tpath: 'M 0,-1 0,1',\n\t\tstrokeOpacity: 1,\n\t\tscale: 3,\n\t\tstrokeWeight: 2.2,\n\t\tstrokeColor: '#aaaaaa',\n\t};\n\n\tpoly = new google.maps.Polyline({\n\t\t\n\t\tstrokeOpacity: 0,\n\t\tstrokeWeight: 2,\n\t    icons: [{\n\t\t\ticon: lineSymbol,\n\t\t\toffset: '0',\n\t\t\trepeat: '15px'\n\t    }],\n\t    zIndex: 10,\n\t\tmap: map,\n\t});\n\n\tvar startLabel = $('.cityLabel h3:contains(\"'+journeyData.begin+'\")').parent().parent();\n\tvar endLabel = $('.cityLabel h3:contains(\"'+journeyData.end+'\")').parent().parent();\n\n\tvar path = [startLabel[0].marker.getPosition()]; // replace with data from the json file since this will be deleted\n\t\n\tjourney({from:journeyData.begin}, {to:journeyData.end }).each(function(journey) {\n\t\tif (typeof journey.stops!=\"undefined\") {\n\t\t\tfor (i=0;i<journey.stops.length;i++) {\n\t\t\t\tbusStops({city:journey.stops[i].city}).each(function(city) {\n\t\t\t\t\tvar tempJourneyMarker = {\n\t\t\t\t\t\tposition: {lat: city.latitude, lng: city.longitude},\n\t\t\t\t\t\tmap: map,\n\t\t\t\t\t\ticon: imageEnRoute,\n\t\t\t\t\t\ttitle: city.city,\n\t\t\t\t\t\tzIndex:3,\n\t\t\t\t\t\ttype:city.type\n\t\t\t\t    };\n\t\t\t\t    var journeyMarker = new google.maps.Marker(tempJourneyMarker);\n\t\t\t\t    journeyMarkers.push(journeyMarker);\n\t\t\t\t    path.push(journeyMarker.getPosition());\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t});\n\tpath.push(endLabel[0].marker.getPosition());// replace with data from the json file since this will be deleted\n \tpoly.setPath(path);\n}\nfunction drawFinalJourney(journeyData) {\n\t\n\tvar bounds = new google.maps.LatLngBounds();\n\n\tif (typeof poly != \"undefined\") poly.setMap(null);\n\n\n\tpoly = new google.maps.Polyline({\n\t\tstrokeOpacity: 1,\n\t\tstrokeWeight: 2,\n\t    strokeColor:'#cccccc',\n\t    zIndex: 10,\n\t\tmap: map,\n\t});\n\n\n\tvar path = []; // replace with data from the json file since this will be deleted\n\tif (typeof journeyData.begin==\"undefined\") {\n\t\tjourneyData ={\n\t\t\tbegin:\"Birmingham\",\n\t\t\tend:\"Milan\"\n\t\t}\n\t}\n\n\tbusStops({city:journeyData.begin}).each(function(city) {\n\t\tvar tempJourneyMarker = {\n\t\t\tposition: {lat: city.latitude, lng: city.longitude},\n\t\t\tmap: map,\n\t\t\ticon: imageBusStop,\n\t\t\ttitle: city.city,\n\t\t\tzIndex:3,\n\t\t\ttype:city.type\n\t    };\n\t    var journeyMarker = new google.maps.Marker(tempJourneyMarker);\n\t    journeyMarkers.push(journeyMarker);\n\t    path.push(journeyMarker.getPosition());\n\t    bounds.extend(journeyMarker.getPosition());\n\t    journeyMarker.cityWindow = new google.maps.InfoWindow({\n\t\t\tcontent: '<div class=\"labelCityHook\"><div class=\"labelbg\"></div><div class=\"label'+journeyMarker.zIndex+'\"><h3>'+journeyMarker.title+'</h3></div></div>',\n\t\t\tdisableAutoPan : true\n\t\t});\n\t\tjourneyMarker.cityWindow.open(map, journeyMarker);\n\t\tsetTimeout(function(sourceMarker) { // timeout because of the delay of cityWindow.open()\n\t\t\t$('.labelCityHook h3:contains(\"'+sourceMarker.title+'\")').each(function() {\n\t\t\t\tvar thisHTML=$(this).parent().parent().html();\n\t\t\t\tvar targetElm = $(this).parent().parent().parent().parent().parent().parent();\n\t\t\t\ttargetElm.html(thisHTML).addClass(\"cityLabel\").addClass(\"show\");\n\t\t\t});\n\t\t},300,journeyMarker);\n\t});\n\t\n\tjourney({from:journeyData.begin}, {to:journeyData.end }).each(function(journey) {\n\t\tif (typeof journey.stops!=\"undefined\") {\n\t\t\tfor (i=0;i<journey.stops.length;i++) {\n\t\t\t\tbusStops({city:journey.stops[i].city}).each(function(city) {\n\t\t\t\t\tvar tempJourneyMarker = {\n\t\t\t\t\t\tposition: {lat: city.latitude, lng: city.longitude},\n\t\t\t\t\t\tmap: map,\n\t\t\t\t\t\ticon: imageEnRoute,\n\t\t\t\t\t\ttitle: city.city,\n\t\t\t\t\t\tzIndex:3,\n\t\t\t\t\t\ttype:city.type\n\t\t\t\t    };\n\t\t\t\t    var journeyMarker = new google.maps.Marker(tempJourneyMarker);\n\t\t\t\t    journeyMarkers.push(journeyMarker);\n\t\t\t\t    path.push(journeyMarker.getPosition());\n\t\t\t\t    bounds.extend(journeyMarker.getPosition());\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t});\n\tbusStops({city:journeyData.end}).each(function(city) {\n\t\tvar tempJourneyMarker = {\n\t\t\tposition: {lat: city.latitude, lng: city.longitude},\n\t\t\tmap: map,\n\t\t\ticon: imageBusStop,\n\t\t\ttitle: city.city,\n\t\t\tzIndex:3,\n\t\t\ttype:city.type\n\t    };\n\t    var journeyMarker = new google.maps.Marker(tempJourneyMarker);\n\t    journeyMarkers.push(journeyMarker);\n\t    path.push(journeyMarker.getPosition());\n\t    bounds.extend(journeyMarker.getPosition());\n\t    journeyMarker.cityWindow = new google.maps.InfoWindow({\n\t\t\tcontent: '<div class=\"labelCityHook\"><div class=\"labelbg\"></div><div class=\"label'+journeyMarker.zIndex+'\"><h3>'+journeyMarker.title+'</h3></div></div>',\n\t\t\tdisableAutoPan : true\n\t\t});\n\t\tjourneyMarker.cityWindow.open(map, journeyMarker);\n\t\tsetTimeout(function(sourceMarker) { // timeout because of the delay of cityWindow.open()\n\t\t\t$('.labelCityHook h3:contains(\"'+sourceMarker.title+'\")').each(function() {\n\t\t\t\tvar thisHTML=$(this).parent().parent().html();\n\t\t\t\tvar targetElm = $(this).parent().parent().parent().parent().parent().parent();\n\t\t\t\ttargetElm.html(thisHTML).addClass(\"cityLabel\").addClass(\"show\");\n\t\t\t});\n\t\t},300,journeyMarker);\n\t});\n\tvar extendPoint1 = new google.maps.LatLng(bounds.getNorthEast().lat() + 1.5, bounds.getNorthEast().lng());\n\tvar extendPoint2 = new google.maps.LatLng(bounds.getSouthWest().lat(), bounds.getSouthWest().lng()-2.5);\n\tbounds.extend(extendPoint1);\n\tbounds.extend(extendPoint2);\n\n \tmap.fitBounds(bounds);\n \tsetTimeout(offsetCenter,300);\n \tsetTimeout(clearMarkers,500);\n \tsetTimeout(function(poly, path,journeyMarkers) {\n \t\tpoly.setPath(path);\n \t},1000,poly,path, journeyMarkers);\n}\nfunction offsetCenter() {\n\tvar currentCenter = map.getCenter();\n\tvar increment = 0.4;\n\tswitch (parseInt(map.zoom)) {\n\t\tcase 6:\n\t\t\tincrement = -3;\n\t\t\tbreak;\n\t\tcase 7:\n\t\t\tincrement = -1.4;\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\tincrement = -0.2;\n\t\t\tbreak;\n\t}\n\tmap.panTo(new google.maps.LatLng(currentCenter.lat(), currentCenter.lng()+increment));\n}\nfunction repositionMapToJourney() {\n\tconsole.log(\"repositioning\");\n\tvar withinBounds=true;\n\tvar bounds = new google.maps.LatLngBounds();\n\tvar thisJourney = searchHandler.getJourneyInformation();\n\n\tjourney({from: thisJourney.start.name}, {to: thisJourney.end.name}).each(function(journey) {\n\t\tif (typeof journey.stops!=\"undefined\") {\n\t\t\tfor (i=0;i<journey.stops.length;i++) {\n\t\t\t\tbusStops({city:journey.stops[i].city}).each(function(city) {\n\t\t\t\t\tthisBound=new google.maps.LatLng(city.latitude, city.longitude);\n\t\t\t\t\tif (!mapBounds.contains(thisBound)) {\n\t\t\t\t\t\twithinBounds=false;\n\t\t\t\t\t\tconsole.log(city.name,\"is outside\");\n\t\t\t\t\t}\n\t\t\t\t    bounds.extend(thisBound);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tbounds.extend( thisJourney.start.marker.getPosition() );\n\tbounds.extend( thisJourney.end.marker.getPosition() );\n\tif (!mapBounds.contains(thisJourney.start.marker.getPosition()) || !mapBounds.contains(thisJourney.end.marker.getPosition() )) {\n\t\twithinBounds=false;\n\t}\n\t\n\n\tvar extendPoint1 = new google.maps.LatLng(bounds.getNorthEast().lat() + 1.15, bounds.getNorthEast().lng() + 1.15);\n\tvar extendPoint2 = new google.maps.LatLng(bounds.getSouthWest().lat() - 1.15, bounds.getSouthWest().lng() - 1.15);\n\tbounds.extend(extendPoint1);\n\tbounds.extend(extendPoint2);\n\tif (!withinBounds) {\n\t\tsetTimeout(function() {\n\t\t\tmap.fitBounds(bounds)\n\t\t},400);\n\t\tsetTimeout(function() {\n\t\t\tvar currentCenter = map.getCenter();\n\t    \tvar increment = 0.4\n\t    \tswitch (parseInt(map.zoom)) {\n\t\t\t\tcase 6:\n\t\t\t\t\tincrement = -3;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 7:\n\t\t\t\t\tincrement = -1.4;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\tincrement = -0.2;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmap.panTo(new google.maps.LatLng(currentCenter.lat(), currentCenter.lng()+increment));\n\t\t},1000);\n\t}\n}\nfunction undrawJourney() {\n\tif (typeof poly != \"undefined\") poly.setMap(null);\n\tfor (var i = 0; i < journeyMarkers.length; i++) {\n\t\tjourneyMarkers[i].setMap(null);\n\t}\n}\nfunction mapZoomHandler() {\n\tconsole.log(\"zoom level\",map.zoom);\n\tsearchHandler.setElementFocus($(\".journey input[tabindex=1]\"));\n\n\tvar zoomingIn = (map.zoom>prevZoom);\n\n\tclearMarkers(zoomingIn);\n\tif (!ticketLockedIn) setTimeout(updateMarkers,1000);\n}\nfunction createMap(currentLocation) {\n\tconsole.log(\"current location\",currentLocation);\n\tmap = new google.maps.Map(document.getElementsByClassName('bgmap')[0], {\n\t\tcenter: {lat: currentLocation.coords.latitude, lng: currentLocation.coords.longitude},\n\t\tzoom: zoomLevel,\n\t\tstyles: customStyles,\n\t\tdisableDefaultUI: false,\n\t\tmapTypeControl: false,\n\t\tscaleControl: true,\n\t\tscrollwheel: false,\n\t});\n\tgetBusStops();\n\tgetJourneys();\n\tgoogle.maps.event.addListener(map, 'zoom_changed', mapZoomHandler);\n\tmap.addListener(\"click\", closeDrawers);\n\tmap.addListener(\"dragstart\", closeDrawers);\n\tmap.addListener(\"dblclick\", closeDrawers);\n}\nfunction disableUnavailableDestinations(journeyData) {\n\tdestinationsDisabled = true;\n\tsetTimeout(function(journeyData) {\n\t\tvar availableCities = [];\n\t\tjourney({from:journeyData.start.name}).each(function(journey) {\n\t\t\tif (typeof journey.stops!=\"undefined\") {\n\t\t\t\tfor (i=0;i<journey.stops.length;i++) {\n\t\t\t\t\tavailableCities.push(journey.stops[i].city);\n\t\t\t\t}\n\t\t\t}\n\t\t\tavailableCities.push(journey.from);\n\t\t\tavailableCities.push(journey.to);\n\t\t});\n\n\t\tfor (i=0;i<markers.length;i++) {\n\t\t\tif (availableCities.indexOf(markers[i].title)==-1 && markers[i].getIcon().url!=imageCitySelected.url && markers[i].type!=\"cluster\") {\n\t\t\t\tmarkers[i].setIcon(imageCityDisabled);\n\t\t\t} else if (markers[i].getIcon().url!=imageCitySelected.url) {\n\t\t\t\tswitch (markers[i].type) {\n\t\t\t\t\tcase \"A\":\n\t\t\t\t\t\tmarkers[i].setIcon(imageCityBig);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"B\":\n\t\t\t\t\t\tmarkers[i].setIcon(imageCitySmall);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t},20,journeyData);\n}\nfunction enableAllDestinations() {\n\tif (destinationsDisabled) {\n\t\tfor (i=0;i<markers.length;i++) {\n\t\t\tswitch (markers[i].type) {\n\t\t\t\tcase \"A\":\n\t\t\t\t\tmarkers[i].setIcon(imageCityBig);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"B\":\n\t\t\t\t\tmarkers[i].setIcon(imageCitySmall);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tdestinationsDisabled = false;\n\t}\n}\nfunction error(er) {\n\tconsole.log(\"error\",er);\n\tconsole.log(\"defaulting to Huge London office location\");\n\tvar location = {};\n\tlocation.coords = {}\n\tlocation.coords.latitude=51.521803399999996;\n\tlocation.coords.longitude=-0.0850481;\n\tcreateMap(location);\n}\nfunction clearMarkers(zoomingIn) {\n\tsetMapOnAll(null,zoomingIn);\n\tmarkers = [];\n}\nfunction setMapOnAll(map,zoomingIn) {\n\t// console.log(\"deleting \"+markers.length+\" markers\");\n\tfor (var i = 0; i < markers.length; i++) {\n\n\t\tvar withinLat = (markers[i].position.lat()>=mapBounds.f.f && markers[i].position.lat()<=mapBounds.f.b); \n\t\tvar withinLng = (markers[i].position.lng()<=mapBounds.b.f && markers[i].position.lng()>=mapBounds.b.b);\n\t\tvar markerDelay = 0;\n\t\tif ((!withinLat || !withinLng) && zoomingIn) {\n\t\t\tsetTimeout(function(marker) {\n\t\t\t\tmarker.setMap(map);\n\t\t\t},4000,markers[i])\n\t\t} else {\n\t\t\tmarkers[i].setMap(map);\n\t\t}\n\t\t\n\t}\n}\nfunction openStationInfo(name) {\n\t$(\".station_info\").addClass(\"expanded\");\n\tbusStops({city: name}).each(function(busStop) {\n\n\t\t$(\".station_info .active\").removeClass(\"active\");\n\t\t$(\".station_info .stations ul\").html(\" \")\n\n\t\tif (typeof busStop.stations!=\"undefined\") {\n\n\t\t\t$(\".station_info .stations\").addClass(\"active\");\n\n\t\t\tfor (i=0;i<busStop.stations.length;i++) {\n\t\t\t\tvar li = document.createElement(\"LI\");\n\t\t\t\tli.innerHTML=name+\", \"+busStop.stations[i].city;\n\t\t\t\tli.addEventListener(\"click\", function() {\n\t\t\t\t\topenStationMap(busStop);\n\t\t\t\t})\n\t\t\t\t$(\".station_info .stations ul\").append(li);\n\t\t\t}\n\t\t} else {\n\t\t\topenStationMap(busStop)\n\t\t}\n\t});\n}\nvar station_marker;\nfunction openStationMap(busStop) {\n\t$(\".station_info .active\").removeClass(\"active\");\n\t$(\".station_info .info\").addClass(\"active\");\n\tvar station_map = new google.maps.Map(document.getElementsByClassName('stationmap')[0], {\n\t\tcenter: {lat: busStop.latitude, lng: busStop.longitude},\n\t\tzoom: 16,\n\t\tstyles: customStyles,\n\t\tdisableDefaultUI: true,\n\t\tmapTypeControl: false,\n\t\tscaleControl: false\n\t});\n\tif (typeof station_marker!=\"undefined\") station_marker.setMap(null);\n\n\tstation_marker = new google.maps.Marker({\n\t\tposition: {lat: busStop.latitude, lng: busStop.longitude},\n\t\tmap: station_map,\n\t\ticon: imageBusStop,\n\t\ttitle: busStop.city,\n        labelClass: \"labels\", // the CSS class for the label\n\t\tzIndex:2,\n    });\n\t$(\".station_info div.address .location\").html(busStop.city);\n\t$(\".station_info div.address .address_street\").html(\"5 Main St, NX 123, \"+busStop.country);\n}\nfunction closeDrawers() {\n\tvar target=document.location.hash.replace(\"#\",\"\");\n\tif (target.indexOf(\"/ticket_details/\")==-1) {\n\t\tsetTimeout(function() {\n\t\t\t$(\".station_info .active\").removeClass(\"active\");\n\t\t},400);\n\t\t$(\".expanded\").removeClass(\"expanded\");\n\t\tdocument.location.hash=\"\";\n\t} else {\n\t\t$(\".station_info\").removeClass(\"expanded\");\n\t}\n}\n\n\n","var grabScroller = function() {\n\tvar scrollStart=0;\n\tvar scrollOffsetStart = 0;\n\tvar scrollObj;\n\tvar childWidth;\n\tvar scrolled = false;\n\tvar activePosition;\n\n\tfunction datepickerScrollHandler(e) {\n\t\tvar distance=scrollStart-e.pageX;\n\t\t$(scrollObj).scrollLeft(distance+scrollOffsetStart);\n\t\tscrolled=true;\n\t}\n\tfunction snapToNearest(e) {\n\t\tconsole.log(\"snap to nearest\",e);\n\t\tvar position=Math.round($(scrollObj).scrollLeft()/childWidth);\n\t\tvar target = position * childWidth;\n\t\t// $(scrollObj).scrollLeft(target);\n\t\t$(scrollObj).animate({\n\t\t\tscrollLeft: target\n\t\t}, 400);\n\t\tactivePosition = position;\n\t\treturn position;\n\t}\n\treturn {\n\t\tInit: function(jqueryObj) {\n\t\t\t\n\t\t\tscrollObj = jqueryObj[0];\n\t\t\tchildWidth = $(scrollObj).find(\"li:first-child\").width();\n\n\t\t\tjqueryObj.unbind(\"mousedown\");\n\t\t\t$(\"body\").unbind(\"movemove\").unbind(\"mouseup\");\n\t\t\tjqueryObj.bind(\"mousedown\",function(e) {\n\t\t\t\tscrolled = false;\n\t\t\t\tscrollStart=e.pageX;\n\t\t\t\tscrollOffsetStart=$(this).scrollLeft();\n\t\t\t\t$(\"body\").bind(\"mousemove\",datepickerScrollHandler);\n\t\t\t\t$(jqueryObj).find(\"li\").bind(\"mouseup\",function() {\n\t\t\t\t\tif (!scrolled) {\n\t\t\t\t\t\tgrabScroller.scrollTo($(this).index()*childWidth);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$(\"body\").bind(\"mouseup\",function(e) {\n\t\t\t\t\t$(\"body\").unbind(\"mousemove\",datepickerScrollHandler);\n\t\t\t\t\t$(\"body\").unbind(\"mouseup\");\n\t\t\t\t\t\n\t\t\t\t\tif (scrolled) {\n\t\t\t\t\t\tvar target = snapToNearest();\n\t\t\t\t\t\tscrollEndHandler(target);\n\t\t\t\t\t} \n\t\t\t\t});\n\t\t\t});\n\t\t\tvar length = jqueryObj.children().length;\n\t\t\t\n\t\t\tvar center = jqueryObj.find(\".today\").index();\n\t\t\tif (center==-1) {\n\t\t\t\tcenter = (length-1)/2;\n\t\t\t}\n\t\t\tconsole.log(jqueryObj,length, center);\n\t\t\tgrabScroller.scrollTo(center*childWidth);\n\t\t},\n\t\tscrollTo: function(point) {\n\t\t\tvar position=Math.round(point/childWidth);\n\t\t\tvar target = position * childWidth;\n\t\t\t$(scrollObj).animate({\n\t\t\t\tscrollLeft: target\n\t\t\t}, 300,function() {\n\t\t\t\tscrollEndHandler(position);\n\t\t\t});\n\t\t},\n\t\tgetPosition: function() {\n\t\t\tif (typeof scrollObj != \"undefined\") {\n\t\t\t\treturn activePosition;\n\t\t\t} else {\n\t\t\t\treturn 5;\n\t\t\t}\n\t\t}\n\t}\n\t\n}();\n\n","var currentPage;\nvar hashChangeHandler = function() {\n\tvar prevHash='';\n\tfunction setupLinks() {\n\t\t\n\t}\n\tfunction change() {\n\t\tticketLockedIn = false;\n\t\tvar target=document.location.hash.replace(\"#\",\"\");\n\t\tconsole.log(\"location hash\",target);\n\t\tcurrentPage=target;\n\n\t\t$(\"div.cards\").css(\"opacity\",\"\");\n\n\t\tif (target.indexOf(\"/station_info/\")>-1) {\n\t\t\ttarget = target.replace(\"/station_info/\",\"\");\n\t\t\topenStationInfo(target);\n\t\t}\n\t\tif (target.indexOf('/ticket_details/')>-1) {\n\n\t\t\ttripLockedIn=true;\n\t\t\t$(\".ticket_details\").addClass(\"enabled\");\n\t\t\twindow.requestAnimationFrame(function() {\n\t\t\t\tdrawFinalJourney(searchHandler.getJourney());\n\t\t\t});\n\t\t\tcloseDrawers();\n\t\t\t$(\".ticket_finder\").removeClass(\"outbound return summary\")\n\t\t} else {\n\t\t\t$(\".ticket_details\").removeClass(\"enabled\");\n\t\t\tundrawJourney();\n\t\t\tif (prevHash.indexOf('/ticket_details/')>-1) updateMarkers();\n\t\t}\n\t\tif (target.indexOf('/get_tickets/')>-1) {\n\t\t\t$(\"body\").addClass(\"tickets\");\n\t\t\t$(\"div.cards\").css(\"opacity\",null);\n\t\t\tif (prevHash.indexOf('/ticket_details/')>-1) setTimeout(showLoadingScreen,900);\n\t\t\tvar delay=2000;\n\t\t\tif (prevHash.indexOf('/get_tickets/')>-1) delay=0;\n\t\t\tsetTimeout(function(target,prevHash) {\n\t\t\t\tinitiateTicketing(target, (prevHash.indexOf('/get_tickets/')==-1));\n\t\t\t},delay,target,prevHash);\n\t\t} else {\n\t\t\t$(\"body\").removeClass(\"tickets\");\n\t\t}\n\t\tprevHash = target;\n\t}\n\treturn {\n\t\tInit: function() {\n\t\t\t$(window).bind(\"hashchange\",change);\n\t\t\tchange();\n\t\t}\n\t}\n\t\n}();\n\n","/*! jQuery UI - v1.12.0-rc.2 - 2016-05-27\n* http://jqueryui.com\n* Includes: widget.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/mouse.js, widgets/slider.js, widgets/spinner.js\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n(function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([ \"jquery\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}(function( $ ) {\n\n$.ui = $.ui || {};\n\nvar version = $.ui.version = \"1.12.0-rc.2\";\n\n\n/*!\n * jQuery UI Widget 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Widget\n//>>group: Core\n//>>description: Provides a factory for creating stateful widgets with a common API.\n//>>docs: http://api.jqueryui.com/jQuery.widget/\n//>>demos: http://jqueryui.com/widget/\n\n\n\nvar widgetUuid = 0;\nvar widgetSlice = Array.prototype.slice;\n\n$.cleanData = ( function( orig ) {\n\treturn function( elems ) {\n\t\tvar events, elem, i;\n\t\tfor ( i = 0; ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\ttry {\n\n\t\t\t\t// Only trigger remove when necessary to save time\n\t\t\t\tevents = $._data( elem, \"events\" );\n\t\t\t\tif ( events && events.remove ) {\n\t\t\t\t\t$( elem ).triggerHandler( \"remove\" );\n\t\t\t\t}\n\n\t\t\t// Http://bugs.jquery.com/ticket/8235\n\t\t\t} catch ( e ) {}\n\t\t}\n\t\torig( elems );\n\t};\n} )( $.cleanData );\n\n$.widget = function( name, base, prototype ) {\n\tvar existingConstructor, constructor, basePrototype;\n\n\t// ProxiedPrototype allows the provided prototype to remain unmodified\n\t// so that it can be used as a mixin for multiple widgets (#8876)\n\tvar proxiedPrototype = {};\n\n\tvar namespace = name.split( \".\" )[ 0 ];\n\tname = name.split( \".\" )[ 1 ];\n\tvar fullName = namespace + \"-\" + name;\n\n\tif ( !prototype ) {\n\t\tprototype = base;\n\t\tbase = $.Widget;\n\t}\n\n\tif ( $.isArray( prototype ) ) {\n\t\tprototype = $.extend.apply( null, [ {} ].concat( prototype ) );\n\t}\n\n\t// Create selector for plugin\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\treturn !!$.data( elem, fullName );\n\t};\n\n\t$[ namespace ] = $[ namespace ] || {};\n\texistingConstructor = $[ namespace ][ name ];\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\n\t\t// Allow instantiation without \"new\" keyword\n\t\tif ( !this._createWidget ) {\n\t\t\treturn new constructor( options, element );\n\t\t}\n\n\t\t// Allow instantiation without initializing for simple inheritance\n\t\t// must use \"new\" keyword (the code above always passes args)\n\t\tif ( arguments.length ) {\n\t\t\tthis._createWidget( options, element );\n\t\t}\n\t};\n\n\t// Extend with the existing constructor to carry over any static properties\n\t$.extend( constructor, existingConstructor, {\n\t\tversion: prototype.version,\n\n\t\t// Copy the object used to create the prototype in case we need to\n\t\t// redefine the widget later\n\t\t_proto: $.extend( {}, prototype ),\n\n\t\t// Track widgets that inherit from this widget in case this widget is\n\t\t// redefined after a widget inherits from it\n\t\t_childConstructors: []\n\t} );\n\n\tbasePrototype = new base();\n\n\t// We need to make the options hash a property directly on the new instance\n\t// otherwise we'll modify the options hash on the prototype that we're\n\t// inheriting from\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t$.each( prototype, function( prop, value ) {\n\t\tif ( !$.isFunction( value ) ) {\n\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\treturn;\n\t\t}\n\t\tproxiedPrototype[ prop ] = ( function() {\n\t\t\tfunction _super() {\n\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t}\n\n\t\t\tfunction _superApply( args ) {\n\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\tvar __super = this._super;\n\t\t\t\tvar __superApply = this._superApply;\n\t\t\t\tvar returnValue;\n\n\t\t\t\tthis._super = _super;\n\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\tthis._super = __super;\n\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\treturn returnValue;\n\t\t\t};\n\t\t} )();\n\t} );\n\tconstructor.prototype = $.widget.extend( basePrototype, {\n\n\t\t// TODO: remove support for widgetEventPrefix\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t// don't prefix for widgets that aren't DOM-based\n\t\twidgetEventPrefix: existingConstructor ? ( basePrototype.widgetEventPrefix || name ) : name\n\t}, proxiedPrototype, {\n\t\tconstructor: constructor,\n\t\tnamespace: namespace,\n\t\twidgetName: name,\n\t\twidgetFullName: fullName\n\t} );\n\n\t// If this widget is being redefined then we need to find all widgets that\n\t// are inheriting from it and redefine all of them so that they inherit from\n\t// the new version of this widget. We're essentially trying to replace one\n\t// level in the prototype chain.\n\tif ( existingConstructor ) {\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t// Redefine the child widget using the same prototype that was\n\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor,\n\t\t\t\tchild._proto );\n\t\t} );\n\n\t\t// Remove the list of existing child constructors from the old constructor\n\t\t// so the old child constructors can be garbage collected\n\t\tdelete existingConstructor._childConstructors;\n\t} else {\n\t\tbase._childConstructors.push( constructor );\n\t}\n\n\t$.widget.bridge( name, constructor );\n\n\treturn constructor;\n};\n\n$.widget.extend = function( target ) {\n\tvar input = widgetSlice.call( arguments, 1 );\n\tvar inputIndex = 0;\n\tvar inputLength = input.length;\n\tvar key;\n\tvar value;\n\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\n\t\t\t\t// Clone objects\n\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\n\t\t\t\t\t\t$.widget.extend( {}, value );\n\n\t\t\t\t// Copy everything else by reference\n\t\t\t\t} else {\n\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n};\n\n$.widget.bridge = function( name, object ) {\n\tvar fullName = object.prototype.widgetFullName || name;\n\t$.fn[ name ] = function( options ) {\n\t\tvar isMethodCall = typeof options === \"string\";\n\t\tvar args = widgetSlice.call( arguments, 1 );\n\t\tvar returnValue = this;\n\n\t\tif ( isMethodCall ) {\n\t\t\tthis.each( function() {\n\t\t\t\tvar methodValue;\n\t\t\t\tvar instance = $.data( this, fullName );\n\n\t\t\t\tif ( options === \"instance\" ) {\n\t\t\t\t\treturnValue = instance;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( !instance ) {\n\t\t\t\t\treturn $.error( \"cannot call methods on \" + name +\n\t\t\t\t\t\t\" prior to initialization; \" +\n\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\n\t\t\t\t}\n\n\t\t\t\tif ( !$.isFunction( instance[ options ] ) || options.charAt( 0 ) === \"_\" ) {\n\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name +\n\t\t\t\t\t\t\" widget instance\" );\n\t\t\t\t}\n\n\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\n\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\tmethodValue;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\n\t\t\t// Allow multiple hashes to be passed on init\n\t\t\tif ( args.length ) {\n\t\t\t\toptions = $.widget.extend.apply( null, [ options ].concat( args ) );\n\t\t\t}\n\n\t\t\tthis.each( function() {\n\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\tif ( instance ) {\n\t\t\t\t\tinstance.option( options || {} );\n\t\t\t\t\tif ( instance._init ) {\n\t\t\t\t\t\tinstance._init();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn returnValue;\n\t};\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n\twidgetName: \"widget\",\n\twidgetEventPrefix: \"\",\n\tdefaultElement: \"<div>\",\n\n\toptions: {\n\t\tclasses: {},\n\t\tdisabled: false,\n\n\t\t// Callbacks\n\t\tcreate: null\n\t},\n\n\t_createWidget: function( options, element ) {\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\tthis.element = $( element );\n\t\tthis.uuid = widgetUuid++;\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\n\n\t\tthis.bindings = $();\n\t\tthis.hoverable = $();\n\t\tthis.focusable = $();\n\t\tthis.classesElementLookup = {};\n\n\t\tif ( element !== this ) {\n\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\tthis._on( true, this.element, {\n\t\t\t\tremove: function( event ) {\n\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\tthis.document = $( element.style ?\n\n\t\t\t\t// Element within the document\n\t\t\t\telement.ownerDocument :\n\n\t\t\t\t// Element is window or document\n\t\t\t\telement.document || element );\n\t\t\tthis.window = $( this.document[ 0 ].defaultView || this.document[ 0 ].parentWindow );\n\t\t}\n\n\t\tthis.options = $.widget.extend( {},\n\t\t\tthis.options,\n\t\t\tthis._getCreateOptions(),\n\t\t\toptions );\n\n\t\tthis._create();\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis._setOptionDisabled( this.options.disabled );\n\t\t}\n\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\n\t\tthis._init();\n\t},\n\n\t_getCreateOptions: function() {\n\t\treturn {};\n\t},\n\n\t_getCreateEventData: $.noop,\n\n\t_create: $.noop,\n\n\t_init: $.noop,\n\n\tdestroy: function() {\n\t\tvar that = this;\n\n\t\tthis._destroy();\n\t\t$.each( this.classesElementLookup, function( key, value ) {\n\t\t\tthat._removeClass( value, key );\n\t\t} );\n\n\t\t// We can probably remove the unbind calls in 2.0\n\t\t// all event bindings should go through this._on()\n\t\tthis.element\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeData( this.widgetFullName );\n\t\tthis.widget()\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeAttr( \"aria-disabled\" );\n\n\t\t// Clean up events and states\n\t\tthis.bindings.off( this.eventNamespace );\n\t},\n\n\t_destroy: $.noop,\n\n\twidget: function() {\n\t\treturn this.element;\n\t},\n\n\toption: function( key, value ) {\n\t\tvar options = key;\n\t\tvar parts;\n\t\tvar curOption;\n\t\tvar i;\n\n\t\tif ( arguments.length === 0 ) {\n\n\t\t\t// Don't return a reference to the internal hash\n\t\t\treturn $.widget.extend( {}, this.options );\n\t\t}\n\n\t\tif ( typeof key === \"string\" ) {\n\n\t\t\t// Handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n\t\t\toptions = {};\n\t\t\tparts = key.split( \".\" );\n\t\t\tkey = parts.shift();\n\t\t\tif ( parts.length ) {\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t}\n\t\t\t\tkey = parts.pop();\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t}\n\t\t\t\tcurOption[ key ] = value;\n\t\t\t} else {\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t}\n\t\t\t\toptions[ key ] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._setOptions( options );\n\n\t\treturn this;\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar key;\n\n\t\tfor ( key in options ) {\n\t\t\tthis._setOption( key, options[ key ] );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"classes\" ) {\n\t\t\tthis._setOptionClasses( value );\n\t\t}\n\n\t\tthis.options[ key ] = value;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._setOptionDisabled( value );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOptionClasses: function( value ) {\n\t\tvar classKey, elements, currentElements;\n\n\t\tfor ( classKey in value ) {\n\t\t\tcurrentElements = this.classesElementLookup[ classKey ];\n\t\t\tif ( value[ classKey ] === this.options.classes[ classKey ] ||\n\t\t\t\t\t!currentElements ||\n\t\t\t\t\t!currentElements.length ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// We are doing this to create a new jQuery object because the _removeClass() call\n\t\t\t// on the next line is going to destroy the reference to the current elements being\n\t\t\t// tracked. We need to save a copy of this collection so that we can add the new classes\n\t\t\t// below.\n\t\t\telements = $( currentElements.get() );\n\t\t\tthis._removeClass( currentElements, classKey );\n\n\t\t\t// We don't use _addClass() here, because that uses this.options.classes\n\t\t\t// for generating the string of classes. We want to use the value passed in from\n\t\t\t// _setOption(), this is the new value of the classes option which was passed to\n\t\t\t// _setOption(). We pass this value directly to _classes().\n\t\t\telements.addClass( this._classes( {\n\t\t\t\telement: elements,\n\t\t\t\tkeys: classKey,\n\t\t\t\tclasses: value,\n\t\t\t\tadd: true\n\t\t\t} ) );\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._toggleClass( this.widget(), this.widgetFullName + \"-disabled\", null, !!value );\n\n\t\t// If the widget is becoming disabled, then nothing is interactive\n\t\tif ( value ) {\n\t\t\tthis._removeClass( this.hoverable, null, \"ui-state-hover\" );\n\t\t\tthis._removeClass( this.focusable, null, \"ui-state-focus\" );\n\t\t}\n\t},\n\n\tenable: function() {\n\t\treturn this._setOptions( { disabled: false } );\n\t},\n\n\tdisable: function() {\n\t\treturn this._setOptions( { disabled: true } );\n\t},\n\n\t_classes: function( options ) {\n\t\tvar full = [];\n\t\tvar that = this;\n\n\t\toptions = $.extend( {\n\t\t\telement: this.element,\n\t\t\tclasses: this.options.classes || {}\n\t\t}, options );\n\n\t\tfunction processClassString( classes, checkOption ) {\n\t\t\tvar current, i;\n\t\t\tfor ( i = 0; i < classes.length; i++ ) {\n\t\t\t\tcurrent = that.classesElementLookup[ classes[ i ] ] || $();\n\t\t\t\tif ( options.add ) {\n\t\t\t\t\tcurrent = $( $.unique( current.get().concat( options.element.get() ) ) );\n\t\t\t\t} else {\n\t\t\t\t\tcurrent = $( current.not( options.element ).get() );\n\t\t\t\t}\n\t\t\t\tthat.classesElementLookup[ classes[ i ] ] = current;\n\t\t\t\tfull.push( classes[ i ] );\n\t\t\t\tif ( checkOption && options.classes[ classes[ i ] ] ) {\n\t\t\t\t\tfull.push( options.classes[ classes[ i ] ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( options.keys ) {\n\t\t\tprocessClassString( options.keys.match( /\\S+/g ) || [], true );\n\t\t}\n\t\tif ( options.extra ) {\n\t\t\tprocessClassString( options.extra.match( /\\S+/g ) || [] );\n\t\t}\n\n\t\treturn full.join( \" \" );\n\t},\n\n\t_removeClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, false );\n\t},\n\n\t_addClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, true );\n\t},\n\n\t_toggleClass: function( element, keys, extra, add ) {\n\t\tadd = ( typeof add === \"boolean\" ) ? add : extra;\n\t\tvar shift = ( typeof element === \"string\" || element === null ),\n\t\t\toptions = {\n\t\t\t\textra: shift ? keys : extra,\n\t\t\t\tkeys: shift ? element : keys,\n\t\t\t\telement: shift ? this.element : element,\n\t\t\t\tadd: add\n\t\t\t};\n\t\toptions.element.toggleClass( this._classes( options ), add );\n\t\treturn this;\n\t},\n\n\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\tvar delegateElement;\n\t\tvar instance = this;\n\n\t\t// No suppressDisabledCheck flag, shuffle arguments\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\n\t\t\thandlers = element;\n\t\t\telement = suppressDisabledCheck;\n\t\t\tsuppressDisabledCheck = false;\n\t\t}\n\n\t\t// No element argument, shuffle and use this.element\n\t\tif ( !handlers ) {\n\t\t\thandlers = element;\n\t\t\telement = this.element;\n\t\t\tdelegateElement = this.widget();\n\t\t} else {\n\t\t\telement = delegateElement = $( element );\n\t\t\tthis.bindings = this.bindings.add( element );\n\t\t}\n\n\t\t$.each( handlers, function( event, handler ) {\n\t\t\tfunction handlerProxy() {\n\n\t\t\t\t// Allow widgets to customize the disabled handling\n\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\n\t\t\t// Copy the guid so direct unbinding works\n\t\t\tif ( typeof handler !== \"string\" ) {\n\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t}\n\n\t\t\tvar match = event.match( /^([\\w:-]*)\\s*(.*)$/ );\n\t\t\tvar eventName = match[ 1 ] + instance.eventNamespace;\n\t\t\tvar selector = match[ 2 ];\n\n\t\t\tif ( selector ) {\n\t\t\t\tdelegateElement.on( eventName, selector, handlerProxy );\n\t\t\t} else {\n\t\t\t\telement.on( eventName, handlerProxy );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_off: function( element, eventName ) {\n\t\teventName = ( eventName || \"\" ).split( \" \" ).join( this.eventNamespace + \" \" ) +\n\t\t\tthis.eventNamespace;\n\t\telement.off( eventName ).off( eventName );\n\n\t\t// Clear the stack to avoid memory leaks (#10056)\n\t\tthis.bindings = $( this.bindings.not( element ).get() );\n\t\tthis.focusable = $( this.focusable.not( element ).get() );\n\t\tthis.hoverable = $( this.hoverable.not( element ).get() );\n\t},\n\n\t_delay: function( handler, delay ) {\n\t\tfunction handlerProxy() {\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t.apply( instance, arguments );\n\t\t}\n\t\tvar instance = this;\n\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t},\n\n\t_hoverable: function( element ) {\n\t\tthis.hoverable = this.hoverable.add( element );\n\t\tthis._on( element, {\n\t\t\tmouseenter: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t},\n\t\t\tmouseleave: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_focusable: function( element ) {\n\t\tthis.focusable = this.focusable.add( element );\n\t\tthis._on( element, {\n\t\t\tfocusin: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t},\n\t\t\tfocusout: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_trigger: function( type, event, data ) {\n\t\tvar prop, orig;\n\t\tvar callback = this.options[ type ];\n\n\t\tdata = data || {};\n\t\tevent = $.Event( event );\n\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\ttype :\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\n\t\t// The original event may come from any element\n\t\t// so we need to reset the target on the new event\n\t\tevent.target = this.element[ 0 ];\n\n\t\t// Copy original event properties over to the new event\n\t\torig = event.originalEvent;\n\t\tif ( orig ) {\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element.trigger( event, data );\n\t\treturn !( $.isFunction( callback ) &&\n\t\t\tcallback.apply( this.element[ 0 ], [ event ].concat( data ) ) === false ||\n\t\t\tevent.isDefaultPrevented() );\n\t}\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n\t\tif ( typeof options === \"string\" ) {\n\t\t\toptions = { effect: options };\n\t\t}\n\n\t\tvar hasOptions;\n\t\tvar effectName = !options ?\n\t\t\tmethod :\n\t\t\toptions === true || typeof options === \"number\" ?\n\t\t\t\tdefaultEffect :\n\t\t\t\toptions.effect || defaultEffect;\n\n\t\toptions = options || {};\n\t\tif ( typeof options === \"number\" ) {\n\t\t\toptions = { duration: options };\n\t\t}\n\n\t\thasOptions = !$.isEmptyObject( options );\n\t\toptions.complete = callback;\n\n\t\tif ( options.delay ) {\n\t\t\telement.delay( options.delay );\n\t\t}\n\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\telement[ method ]( options );\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t} else {\n\t\t\telement.queue( function( next ) {\n\t\t\t\t$( this )[ method ]();\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t}\n\t\t\t\tnext();\n\t\t\t} );\n\t\t}\n\t};\n} );\n\nvar widget = $.widget;\n\n\n\n\n// Support: IE8 Only\n// IE8 does not support the form attribute and when it is supplied. It overwrites the form prop\n// with a string, so we need to find the proper form.\nvar form = $.fn.form = function() {\n\treturn typeof this[ 0 ].form === \"string\" ? this.closest( \"form\" ) : $( this[ 0 ].form );\n};\n\n\n/*!\n * jQuery UI Form Reset Mixin 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Form Reset Mixin\n//>>group: Core\n//>>description: Refresh input widgets when their form is reset\n//>>docs: http://api.jqueryui.com/form-reset-mixin/\n\n\n\nvar formResetMixin = $.ui.formResetMixin = {\n\t_formResetHandler: function() {\n\t\tvar form = $( this );\n\n\t\t// Wait for the form reset to actually happen before refreshing\n\t\tsetTimeout( function() {\n\t\t\tvar instances = form.data( \"ui-form-reset-instances\" );\n\t\t\t$.each( instances, function() {\n\t\t\t\tthis.refresh();\n\t\t\t} );\n\t\t} );\n\t},\n\n\t_bindFormResetHandler: function() {\n\t\tthis.form = this.element.form();\n\t\tif ( !this.form.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar instances = this.form.data( \"ui-form-reset-instances\" ) || [];\n\t\tif ( !instances.length ) {\n\n\t\t\t// We don't use _on() here because we use a single event handler per form\n\t\t\tthis.form.on( \"reset.ui-form-reset\", this._formResetHandler );\n\t\t}\n\t\tinstances.push( this );\n\t\tthis.form.data( \"ui-form-reset-instances\", instances );\n\t},\n\n\t_unbindFormResetHandler: function() {\n\t\tif ( !this.form.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar instances = this.form.data( \"ui-form-reset-instances\" );\n\t\tinstances.splice( $.inArray( this, instances ), 1 );\n\t\tif ( instances.length ) {\n\t\t\tthis.form.data( \"ui-form-reset-instances\", instances );\n\t\t} else {\n\t\t\tthis.form\n\t\t\t\t.removeData( \"ui-form-reset-instances\" )\n\t\t\t\t.off( \"reset.ui-form-reset\" );\n\t\t}\n\t}\n};\n\n\n/*!\n * jQuery UI Support for jQuery core 1.7.x 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n */\n\n//>>label: jQuery 1.7 Support\n//>>group: Core\n//>>description: Support version 1.7.x of jQuery core\n\n\n\n// Support: jQuery 1.7 only\n// Not a great way to check versions, but since we only support 1.7+ and only\n// need to detect <1.8, this is a simple check that should suffice. Checking\n// for \"1.7.\" would be a bit safer, but the version string is 1.7, not 1.7.0\n// and we'll never reach 1.70.0 (if we do, we certainly won't be supporting\n// 1.7 anymore). See #11197 for why we're not using feature detection.\nif ( $.fn.jquery.substring( 0, 3 ) === \"1.7\" ) {\n\n\t// Setters for .innerWidth(), .innerHeight(), .outerWidth(), .outerHeight()\n\t// Unlike jQuery Core 1.8+, these only support numeric values to set the\n\t// dimensions in pixels\n\t$.each( [ \"Width\", \"Height\" ], function( i, name ) {\n\t\tvar side = name === \"Width\" ? [ \"Left\", \"Right\" ] : [ \"Top\", \"Bottom\" ],\n\t\t\ttype = name.toLowerCase(),\n\t\t\torig = {\n\t\t\t\tinnerWidth: $.fn.innerWidth,\n\t\t\t\tinnerHeight: $.fn.innerHeight,\n\t\t\t\touterWidth: $.fn.outerWidth,\n\t\t\t\touterHeight: $.fn.outerHeight\n\t\t\t};\n\n\t\tfunction reduce( elem, size, border, margin ) {\n\t\t\t$.each( side, function() {\n\t\t\t\tsize -= parseFloat( $.css( elem, \"padding\" + this ) ) || 0;\n\t\t\t\tif ( border ) {\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"border\" + this + \"Width\" ) ) || 0;\n\t\t\t\t}\n\t\t\t\tif ( margin ) {\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"margin\" + this ) ) || 0;\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn size;\n\t\t}\n\n\t\t$.fn[ \"inner\" + name ] = function( size ) {\n\t\t\tif ( size === undefined ) {\n\t\t\t\treturn orig[ \"inner\" + name ].call( this );\n\t\t\t}\n\n\t\t\treturn this.each( function() {\n\t\t\t\t$( this ).css( type, reduce( this, size ) + \"px\" );\n\t\t\t} );\n\t\t};\n\n\t\t$.fn[ \"outer\" + name ] = function( size, margin ) {\n\t\t\tif ( typeof size !== \"number\" ) {\n\t\t\t\treturn orig[ \"outer\" + name ].call( this, size );\n\t\t\t}\n\n\t\t\treturn this.each( function() {\n\t\t\t\t$( this ).css( type, reduce( this, size, true, margin ) + \"px\" );\n\t\t\t} );\n\t\t};\n\t} );\n\n\t$.fn.addBack = function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t};\n}\n\n;\n/*!\n * jQuery UI Keycode 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Keycode\n//>>group: Core\n//>>description: Provide keycodes as keynames\n//>>docs: http://api.jqueryui.com/jQuery.ui.keyCode/\n\n\nvar keycode = $.ui.keyCode = {\n\tBACKSPACE: 8,\n\tCOMMA: 188,\n\tDELETE: 46,\n\tDOWN: 40,\n\tEND: 35,\n\tENTER: 13,\n\tESCAPE: 27,\n\tHOME: 36,\n\tLEFT: 37,\n\tPAGE_DOWN: 34,\n\tPAGE_UP: 33,\n\tPERIOD: 190,\n\tRIGHT: 39,\n\tSPACE: 32,\n\tTAB: 9,\n\tUP: 38\n};\n\n\n\n\n// Internal use only\nvar escapeSelector = $.ui.escapeSelector = ( function() {\n\tvar selectorEscape = /([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~])/g;\n\treturn function( selector ) {\n\t\treturn selector.replace( selectorEscape, \"\\\\$1\" );\n\t};\n} )();\n\n\n/*!\n * jQuery UI Labels 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: labels\n//>>group: Core\n//>>description: Find all the labels associated with a given input\n//>>docs: http://api.jqueryui.com/labels/\n\n\n\nvar labels = $.fn.labels = function() {\n\tvar ancestor, selector, id, labels, ancestors;\n\n\t// Check control.labels first\n\tif ( this[ 0 ].labels && this[ 0 ].labels.length ) {\n\t\treturn this.pushStack( this[ 0 ].labels );\n\t}\n\n\t// Support: IE <= 11, FF <= 37, Android <= 2.3 only\n\t// Above browsers do not support control.labels. Everything below is to support them\n\t// as well as document fragments. control.labels does not work on document fragments\n\tlabels = this.eq( 0 ).parents( \"label\" );\n\n\t// Look for the label based on the id\n\tid = this.attr( \"id\" );\n\tif ( id ) {\n\n\t\t// We don't search against the document in case the element\n\t\t// is disconnected from the DOM\n\t\tancestor = this.eq( 0 ).parents().last();\n\n\t\t// Get a full set of top level ancestors\n\t\tancestors = ancestor.add( ancestor.length ? ancestor.siblings() : this.siblings() );\n\n\t\t// Create a selector for the label based on the id\n\t\tselector = \"label[for='\" + $.ui.escapeSelector( id ) + \"']\";\n\n\t\tlabels = labels.add( ancestors.find( selector ).addBack( selector ) );\n\n\t}\n\n\t// Return whatever we have found for labels\n\treturn this.pushStack( labels );\n};\n\n\n/*!\n * jQuery UI Controlgroup 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Controlgroup\n//>>group: Widgets\n//>>description: Visually groups form control widgets\n//>>docs: http://api.jqueryui.com/controlgroup/\n//>>demos: http://jqueryui.com/controlgroup/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/controlgroup.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\nvar widgetsControlgroup = $.widget( \"ui.controlgroup\", {\n\tversion: \"1.12.0-rc.2\",\n\tdefaultElement: \"<div>\",\n\toptions: {\n\t\tdirection: \"horizontal\",\n\t\tdisabled: null,\n\t\tonlyVisible: true,\n\t\titems: {\n\t\t\t\"button\": \"input[type=button], input[type=submit], input[type=reset], button, a\",\n\t\t\t\"controlgroupLabel\": \".ui-controlgroup-label\",\n\t\t\t\"checkboxradio\": \"input[type='checkbox'], input[type='radio']\",\n\t\t\t\"selectmenu\": \"select\",\n\t\t\t\"spinner\": \".ui-spinner-input\"\n\t\t}\n\t},\n\n\t_create: function() {\n\t\tthis._enhance();\n\t},\n\n\t// To support the enhanced option in jQuery Mobile, we isolate DOM manipulation\n\t_enhance: function() {\n\t\tthis.element.attr( \"role\", \"toolbar\" );\n\t\tthis.refresh();\n\t},\n\n\t_destroy: function() {\n\t\tthis._callChildMethod( \"destroy\" );\n\t\tthis.childWidgets.removeData( \"ui-controlgroup-data\" );\n\t\tthis.element.removeAttr( \"role\" );\n\t\tif ( this.options.items.controlgroupLabel ) {\n\t\t\tthis.element\n\t\t\t\t.find( this.options.items.controlgroupLabel )\n\t\t\t\t.find( \".ui-controlgroup-label-contents\" )\n\t\t\t\t.contents().unwrap();\n\t\t}\n\t},\n\n\t_initWidgets: function() {\n\t\tvar that = this,\n\t\t\tchildWidgets = [];\n\n\t\t// First we iterate over each of the items options\n\t\t$.each( this.options.items, function( widget, selector ) {\n\t\t\tvar labels;\n\t\t\tvar options = {};\n\n\t\t\t// Make sure the widget has a selector set\n\t\t\tif ( !selector ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( widget === \"controlgroupLabel\" ) {\n\t\t\t\tlabels = that.element.find( selector );\n\t\t\t\tlabels.each( function() {\n\t\t\t\t\t$( this ).contents()\n\t\t\t\t\t\t.wrapAll( \"<span class='ui-controlgroup-label-contents'></span>\" );\n\t\t\t\t} );\n\t\t\t\tthat._addClass( labels, null, \"ui-widget ui-widget-content ui-state-default\" );\n\t\t\t\tchildWidgets = childWidgets.concat( labels.get() );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Make sure the widget actually exists\n\t\t\tif ( !$.fn[ widget ] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// We assume everything is in the middle to start because we can't determine\n\t\t\t// first / last elements until all enhancments are done.\n\t\t\tif ( that[ \"_\" + widget + \"Options\" ] ) {\n\t\t\t\toptions = that[ \"_\" + widget + \"Options\" ]( \"middle\" );\n\t\t\t}\n\n\t\t\t// Find instances of this widget inside controlgroup and init them\n\t\t\tthat.element\n\t\t\t\t.find( selector )[ widget ]( options )\n\t\t\t\t.each( function() {\n\t\t\t\t\tvar element = $( this );\n\n\t\t\t\t\t// Store an instance of the controlgroup to be able to reference\n\t\t\t\t\t// from the outermost element for changing options and refresh\n\t\t\t\t\tvar widgetElement = element[ widget ]( \"widget\" );\n\t\t\t\t\t$.data( widgetElement[ 0 ], \"ui-controlgroup-data\",\n\t\t\t\t\t\telement[ widget ]( \"instance\" ) );\n\n\t\t\t\t\tchildWidgets.push( widgetElement[ 0 ] );\n\t\t\t\t} );\n\t\t} );\n\n\t\tthis.childWidgets = $( $.unique( childWidgets ) );\n\t\tthis._addClass( this.childWidgets, \"ui-controlgroup-item\" );\n\t},\n\n\t_callChildMethod: function( method ) {\n\t\tthis.childWidgets.each( function() {\n\t\t\tvar element = $( this ),\n\t\t\t\tdata = element.data( \"ui-controlgroup-data\" );\n\t\t\tif ( data && data[ method ] ) {\n\t\t\t\tdata[ method ]();\n\t\t\t}\n\t\t} );\n\t},\n\n\t_updateCornerClass: function( element, position ) {\n\t\tvar remove = \"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right\";\n\t\tvar add = this._buildSimpleOptions( position, \"label\" ).classes.label;\n\n\t\tthis._removeClass( element, null, remove );\n\t\tthis._addClass( element, null, add );\n\t},\n\n\t_buildSimpleOptions: function( position, key ) {\n\t\tvar direction = this.options.direction === \"vertical\";\n\t\tvar result = {\n\t\t\tclasses: {}\n\t\t};\n\t\tresult.classes[ key ] = {\n\t\t\t\"middle\": null,\n\t\t\t\"first\": \"ui-corner-\" + ( direction ? \"top\" : \"left\" ),\n\t\t\t\"last\": \"ui-corner-\" + ( direction ? \"bottom\" : \"right\" )\n\t\t}[ position ];\n\n\t\treturn result;\n\t},\n\n\t_spinnerOptions: function( position ) {\n\t\tvar options = this._buildSimpleOptions( position, \"ui-spinner\" );\n\n\t\toptions.classes[ \"ui-spinner-up\" ] = \"\";\n\t\toptions.classes[ \"ui-spinner-down\" ] = \"\";\n\n\t\treturn options;\n\t},\n\n\t_buttonOptions: function( position ) {\n\t\treturn this._buildSimpleOptions( position, \"ui-button\" );\n\t},\n\n\t_checkboxradioOptions: function( position ) {\n\t\treturn this._buildSimpleOptions( position, \"ui-checkboxradio-label\" );\n\t},\n\n\t_selectmenuOptions: function( position ) {\n\t\tvar direction = this.options.direction === \"vertical\";\n\t\treturn {\n\t\t\twidth: direction ? \"auto\" : false,\n\t\t\tclasses: {\n\t\t\t\tmiddle: {\n\t\t\t\t\t\"ui-selectmenu-button-open\": null,\n\t\t\t\t\t\"ui-selectmenu-button-closed\": null\n\t\t\t\t},\n\t\t\t\tfirst: {\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-\" + ( direction ? \"top\" : \"tl\" ),\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-\" + ( direction ? \"top\" : \"left\" )\n\t\t\t\t},\n\t\t\t\tlast: {\n\t\t\t\t\t\"ui-selectmenu-button-open\": direction ? null : \"ui-corner-tr\",\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-\" + ( direction ? \"bottom\" : \"right\" )\n\t\t\t\t}\n\n\t\t\t}[ position ]\n\t\t};\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"direction\" ) {\n\t\t\tthis._removeClass( \"ui-controlgroup-\" + this.options.direction );\n\t\t}\n\n\t\tthis._super( key, value );\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._callChildMethod( value ? \"disable\" : \"enable\" );\n\t\t\treturn;\n\t\t}\n\n\t\tthis.refresh();\n\t},\n\n\trefresh: function() {\n\t\tvar children,\n\t\t\tthat = this;\n\n\t\tthis._addClass( \"ui-controlgroup ui-controlgroup-\" + this.options.direction );\n\n\t\tif ( this.options.direction === \"horizontal\" ) {\n\t\t\tthis._addClass( null, \"ui-helper-clearfix\" );\n\t\t}\n\t\tthis._initWidgets();\n\n\t\tchildren = this.childWidgets;\n\n\t\t// We filter here because we need to track all childWidgets not just the visible ones\n\t\tif ( this.options.onlyVisible ) {\n\t\t\tchildren = children.filter( \":visible\" );\n\t\t}\n\n\t\tif ( children.length ) {\n\n\t\t\t// We do this last because we need to make sure all enhancment is done\n\t\t\t// before determining first and last\n\t\t\t$.each( [ \"first\", \"last\" ], function( index, value ) {\n\t\t\t\tvar instance = children[ value ]().data( \"ui-controlgroup-data\" );\n\n\t\t\t\tif ( instance && that[ \"_\" + instance.widgetName + \"Options\" ] ) {\n\t\t\t\t\tinstance.element[ instance.widgetName ](\n\t\t\t\t\t\tthat[ \"_\" + instance.widgetName + \"Options\" ]( value )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthat._updateCornerClass( children[ value ](), value );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Finally call the refresh method on each of the child widgets.\n\t\t\tthis._callChildMethod( \"refresh\" );\n\t\t}\n\t}\n} );\n\n/*!\n * jQuery UI Checkboxradio 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Checkboxradio\n//>>group: Widgets\n//>>description: Enhances a form with multiple themeable checkboxes or radio buttons.\n//>>docs: http://api.jqueryui.com/checkboxradio/\n//>>demos: http://jqueryui.com/checkboxradio/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/button.css\n//>>css.structure: ../../themes/base/checkboxradio.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\n$.widget( \"ui.checkboxradio\", [ $.ui.formResetMixin, {\n\tversion: \"1.12.0-rc.2\",\n\toptions: {\n\t\tdisabled: null,\n\t\tlabel: null,\n\t\ticon: true,\n\t\tclasses: {\n\t\t\t\"ui-checkboxradio-label\": \"ui-corner-all\",\n\t\t\t\"ui-checkboxradio-icon\": \"ui-corner-all\"\n\t\t}\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar disabled, labels;\n\t\tvar that = this;\n\t\tvar options = this._super() || {};\n\n\t\t// We read the type here, because it makes more sense to throw a element type error first,\n\t\t// rather then the error for lack of a label. Often if its the wrong type, it\n\t\t// won't have a label (e.g. calling on a div, btn, etc)\n\t\tthis._readType();\n\n\t\tlabels = this.element.labels();\n\n\t\t// If there are multiple labels, use the last one\n\t\tthis.label = $( labels[ labels.length - 1 ] );\n\t\tif ( !this.label.length ) {\n\t\t\t$.error( \"No label found for checkboxradio widget\" );\n\t\t}\n\n\t\tthis.originalLabel = \"\";\n\n\t\t// We need to get the label text but this may also need to make sure it does not contain the\n\t\t// input itself.\n\t\tthis.label.contents().not( this.element ).each( function() {\n\n\t\t\t// The label contents could be text, html, or a mix. We concat each element to get a\n\t\t\t// string representation of the label, without the input as part of it.\n\t\t\tthat.originalLabel += this.nodeType === 3 ? $( this ).text() : this.outerHTML;\n\t\t} );\n\n\t\t// Set the label option if we found label text\n\t\tif ( this.originalLabel ) {\n\t\t\toptions.label = this.originalLabel;\n\t\t}\n\n\t\tdisabled = this.element[ 0 ].disabled;\n\t\tif ( disabled != null ) {\n\t\t\toptions.disabled = disabled;\n\t\t}\n\t\treturn options;\n\t},\n\n\t_create: function() {\n\t\tvar checked = this.element[ 0 ].checked;\n\n\t\tthis._bindFormResetHandler();\n\n\t\tif ( this.options.disabled == null ) {\n\t\t\tthis.options.disabled = this.element[ 0 ].disabled;\n\t\t}\n\n\t\tthis._setOption( \"disabled\", this.options.disabled );\n\t\tthis._addClass( \"ui-checkboxradio\", \"ui-helper-hidden-accessible\" );\n\t\tthis._addClass( this.label, \"ui-checkboxradio-label\", \"ui-button ui-widget\" );\n\n\t\tif ( this.type === \"radio\" ) {\n\t\t\tthis._addClass( this.label, \"ui-checkboxradio-radio-label\" );\n\t\t}\n\n\t\tif ( this.options.label && this.options.label !== this.originalLabel ) {\n\t\t\tthis._updateLabel();\n\t\t} else if ( this.originalLabel ) {\n\t\t\tthis.options.label = this.originalLabel;\n\t\t}\n\n\t\tthis._enhance();\n\n\t\tif ( checked ) {\n\t\t\tthis._addClass( this.label, \"ui-checkboxradio-checked\", \"ui-state-active\" );\n\t\t\tif ( this.icon ) {\n\t\t\t\tthis._addClass( this.icon, null, \"ui-state-hover\" );\n\t\t\t}\n\t\t}\n\n\t\tthis._on( {\n\t\t\tchange: \"_toggleClasses\",\n\t\t\tfocus: function() {\n\t\t\t\tthis._addClass( this.label, null, \"ui-state-focus ui-visual-focus\" );\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\tthis._removeClass( this.label, null, \"ui-state-focus ui-visual-focus\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_readType: function() {\n\t\tvar nodeName = this.element[ 0 ].nodeName.toLowerCase();\n\t\tthis.type = this.element[ 0 ].type;\n\t\tif ( nodeName !== \"input\" || !/radio|checkbox/.test( this.type ) ) {\n\t\t\t$.error( \"Can't create checkboxradio on element.nodeName=\" + nodeName +\n\t\t\t\t\" and element.type=\" + this.type );\n\t\t}\n\t},\n\n\t// Support jQuery Mobile enhanced option\n\t_enhance: function() {\n\t\tthis._updateIcon( this.element[ 0 ].checked );\n\t},\n\n\twidget: function() {\n\t\treturn this.label;\n\t},\n\n\t_getRadioGroup: function() {\n\t\tvar group;\n\t\tvar name = this.element[ 0 ].name;\n\t\tvar nameSelector = \"input[name='\" + $.ui.escapeSelector( name ) + \"']\";\n\n\t\tif ( !name ) {\n\t\t\treturn $( [] );\n\t\t}\n\n\t\tif ( this.form.length ) {\n\t\t\tgroup = $( this.form[ 0 ].elements ).filter( nameSelector );\n\t\t} else {\n\n\t\t\t// Not inside a form, check all inputs that also are not inside a form\n\t\t\tgroup = $( nameSelector ).filter( function() {\n\t\t\t\treturn $( this ).form().length === 0;\n\t\t\t} );\n\t\t}\n\n\t\treturn group.not( this.element );\n\t},\n\n\t_toggleClasses: function() {\n\t\tvar checked = this.element[ 0 ].checked;\n\t\tthis._toggleClass( this.label, \"ui-checkboxradio-checked\", \"ui-state-active\", checked );\n\n\t\tif ( this.options.icon && this.type === \"checkbox\" ) {\n\n\t\t\t// We add ui-state-highlight to change the icon color\n\t\t\tthis._toggleClass( this.icon, null, \"ui-icon-check ui-state-highlight\", checked )\n\t\t\t\t._toggleClass( this.icon, null, \"ui-icon-blank\", !checked );\n\t\t}\n\t\tif ( this.type === \"radio\" ) {\n\t\t\tthis._getRadioGroup()\n\t\t\t\t.each( function() {\n\t\t\t\t\tvar instance = $( this ).checkboxradio( \"instance\" );\n\n\t\t\t\t\tif ( instance ) {\n\t\t\t\t\t\tinstance._removeClass( instance.label,\n\t\t\t\t\t\t\t\"ui-checkboxradio-checked\", \"ui-state-active\" );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tthis._unbindFormResetHandler();\n\n\t\tif ( this.icon ) {\n\t\t\tthis.icon.remove();\n\t\t\tthis.iconSpace.remove();\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\n\t\t// We don't allow the value to be set to nothing\n\t\tif ( key === \"label\" && !value ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._toggleClass( this.label, null, \"ui-state-disabled\", value );\n\t\t\tthis.element[ 0 ].disabled = value;\n\n\t\t\t// Don't refresh when setting disabled\n\t\t\treturn;\n\t\t}\n\t\tthis.refresh();\n\t},\n\n\t_updateIcon: function( checked ) {\n\t\tvar toAdd = \"ui-icon ui-icon-background \";\n\n\t\tif ( this.options.icon ) {\n\t\t\tif ( !this.icon ) {\n\t\t\t\tthis.icon = $( \"<span>\" );\n\t\t\t\tthis.iconSpace = $( \"<span> </span>\" );\n\t\t\t\tthis._addClass( this.iconSpace, \"ui-checkboxradio-icon-space\" );\n\t\t\t}\n\n\t\t\tif ( this.type === \"checkbox\" ) {\n\t\t\t\ttoAdd += checked ? \"ui-icon-check ui-state-highlight\" : \"ui-icon-blank\";\n\t\t\t\tthis._removeClass( this.icon, null, checked ? \"ui-icon-blank\" : \"ui-icon-check\" );\n\t\t\t} else {\n\t\t\t\ttoAdd += \"ui-icon-blank\";\n\t\t\t}\n\t\t\tthis._addClass( this.icon, \"ui-checkboxradio-icon\", toAdd );\n\t\t\tif ( !checked ) {\n\t\t\t\tthis._removeClass( this.icon, null, \"ui-icon-check ui-state-highlight\" );\n\t\t\t}\n\t\t\tthis.icon.prependTo( this.label ).after( this.iconSpace );\n\t\t} else if ( this.icon !== undefined ) {\n\t\t\tthis.icon.remove();\n\t\t\tthis.iconSpace.remove();\n\t\t\tdelete this.icon;\n\t\t}\n\t},\n\n\t_updateLabel: function() {\n\n\t\t// Remove the contents of the label ( minus the icon, icon space, and input )\n\t\tthis.label.contents().not( this.element.add( this.icon ).add( this.iconSpace ) ).remove();\n\t\tthis.label.append( this.options.label );\n\t},\n\n\trefresh: function() {\n\t\tvar checked = this.element[ 0 ].checked,\n\t\t\tisDisabled = this.element[ 0 ].disabled;\n\n\t\tthis._updateIcon( checked );\n\t\tthis._toggleClass( this.label, \"ui-checkboxradio-checked\", \"ui-state-active\", checked );\n\t\tif ( this.options.label !== null ) {\n\t\t\tthis._updateLabel();\n\t\t}\n\n\t\tif ( isDisabled !== this.options.disabled ) {\n\t\t\tthis._setOptions( { \"disabled\": isDisabled } );\n\t\t}\n\t}\n\n} ] );\n\nvar widgetsCheckboxradio = $.ui.checkboxradio;\n\n\n/*!\n * jQuery UI Button 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Button\n//>>group: Widgets\n//>>description: Enhances a form with themeable buttons.\n//>>docs: http://api.jqueryui.com/button/\n//>>demos: http://jqueryui.com/button/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/button.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\n$.widget( \"ui.button\", {\n\tversion: \"1.12.0-rc.2\",\n\tdefaultElement: \"<button>\",\n\toptions: {\n\t\tclasses: {\n\t\t\t\"ui-button\": \"ui-corner-all\"\n\t\t},\n\t\tdisabled: null,\n\t\ticon: null,\n\t\ticonPosition: \"beginning\",\n\t\tlabel: null,\n\t\tshowLabel: true\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar disabled,\n\n\t\t\t// This is to support cases like in jQuery Mobile where the base widget does have\n\t\t\t// an implementation of _getCreateOptions\n\t\t\toptions = this._super() || {};\n\n\t\tthis.isInput = this.element.is( \"input\" );\n\n\t\tdisabled = this.element[ 0 ].disabled;\n\t\tif ( disabled != null ) {\n\t\t\toptions.disabled = disabled;\n\t\t}\n\n\t\tthis.originalLabel = this.isInput ? this.element.val() : this.element.html();\n\t\tif ( this.originalLabel ) {\n\t\t\toptions.label = this.originalLabel;\n\t\t}\n\n\t\treturn options;\n\t},\n\n\t_create: function() {\n\t\tif ( !this.option.showLabel & !this.options.icon ) {\n\t\t\tthis.options.showLabel = true;\n\t\t}\n\n\t\t// We have to check the option again here even though we did in _getCreateOptions,\n\t\t// because null may have been passed on init which would override what was set in\n\t\t// _getCreateOptions\n\t\tif ( this.options.disabled == null ) {\n\t\t\tthis.options.disabled = this.element[ 0 ].disabled || false;\n\t\t}\n\n\t\tthis.hasTitle = !!this.element.attr( \"title\" );\n\n\t\t// Check to see if the label needs to be set or if its already correct\n\t\tif ( this.options.label && this.options.label !== this.originalLabel ) {\n\t\t\tif ( this.isInput ) {\n\t\t\t\tthis.element.val( this.options.label );\n\t\t\t} else {\n\t\t\t\tthis.element.html( this.options.label );\n\t\t\t}\n\t\t}\n\t\tthis._addClass( \"ui-button\", \"ui-widget\" );\n\t\tthis._setOption( \"disabled\", this.options.disabled );\n\t\tthis._enhance();\n\n\t\tif ( this.element.is( \"a\" ) ) {\n\t\t\tthis._on( {\n\t\t\t\t\"keyup\": function( event ) {\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE ) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Support: PhantomJS <= 1.9, IE 8 Only\n\t\t\t\t\t\t// If a native click is available use it so we actually cause navigation\n\t\t\t\t\t\t// otherwise just trigger a click event\n\t\t\t\t\t\tif ( this.element[ 0 ].click ) {\n\t\t\t\t\t\t\tthis.element[ 0 ].click();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.element.trigger( \"click\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t},\n\n\t_enhance: function() {\n\t\tif ( !this.element.is( \"button\" ) ) {\n\t\t\tthis.element.attr( \"role\", \"button\" );\n\t\t}\n\n\t\tif ( this.options.icon ) {\n\t\t\tthis._updateIcon( \"icon\", this.options.icon );\n\t\t\tthis._updateTooltip();\n\t\t}\n\t},\n\n\t_updateTooltip: function() {\n\t\tthis.title = this.element.attr( \"title\" );\n\n\t\tif ( !this.options.showLabel && !this.title ) {\n\t\t\tthis.element.attr( \"title\", this.options.label );\n\t\t}\n\t},\n\n\t_updateIcon: function( option, value ) {\n\t\tvar icon = option !== \"iconPosition\",\n\t\t\tposition = icon ? this.options.iconPosition : value,\n\t\t\tdisplayBlock = position === \"top\" || position === \"bottom\";\n\n\t\t// Create icon\n\t\tif ( !this.icon ) {\n\t\t\tthis.icon = $( \"<span>\" );\n\n\t\t\tthis._addClass( this.icon, \"ui-button-icon\", \"ui-icon\" );\n\n\t\t\tif ( !this.options.showLabel ) {\n\t\t\t\tthis._addClass( \"ui-button-icon-only\" );\n\t\t\t}\n\t\t} else if ( icon ) {\n\n\t\t\t// If we are updating the icon remove the old icon class\n\t\t\tthis._removeClass( this.icon, null, this.options.icon );\n\t\t}\n\n\t\t// If we are updating the icon add the new icon class\n\t\tif ( icon ) {\n\t\t\tthis._addClass( this.icon, null, value );\n\t\t}\n\n\t\tthis._attachIcon( position );\n\n\t\t// If the icon is on top or bottom we need to add the ui-widget-icon-block class and remove\n\t\t// the iconSpace if there is one.\n\t\tif ( displayBlock ) {\n\t\t\tthis._addClass( this.icon, null, \"ui-widget-icon-block\" );\n\t\t\tif ( this.iconSpace ) {\n\t\t\t\tthis.iconSpace.remove();\n\t\t\t}\n\t\t} else {\n\n\t\t\t// Position is beginning or end so remove the ui-widget-icon-block class and add the\n\t\t\t// space if it does not exist\n\t\t\tif ( !this.iconSpace ) {\n\t\t\t\tthis.iconSpace = $( \"<span> </span>\" );\n\t\t\t\tthis._addClass( this.iconSpace, \"ui-button-icon-space\" );\n\t\t\t}\n\t\t\tthis._removeClass( this.icon, null, \"ui-wiget-icon-block\" );\n\t\t\tthis._attachIconSpace( position );\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tthis.element.removeAttr( \"role\" );\n\n\t\tif ( this.icon ) {\n\t\t\tthis.icon.remove();\n\t\t}\n\t\tif ( this.iconSpace ) {\n\t\t\tthis.iconSpace.remove();\n\t\t}\n\t\tif ( !this.hasTitle ) {\n\t\t\tthis.element.removeAttr( \"title\" );\n\t\t}\n\t},\n\n\t_attachIconSpace: function( iconPosition ) {\n\t\tthis.icon[ /^(?:end|bottom)/.test( iconPosition ) ? \"before\" : \"after\" ]( this.iconSpace );\n\t},\n\n\t_attachIcon: function( iconPosition ) {\n\t\tthis.element[ /^(?:end|bottom)/.test( iconPosition ) ? \"append\" : \"prepend\" ]( this.icon );\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar newShowLabel = options.showLabel === undefined ?\n\t\t\t\tthis.options.showLabel :\n\t\t\t\toptions.showLabel,\n\t\t\tnewIcon = options.icon === undefined ? this.options.icon : options.icon;\n\n\t\tif ( !newShowLabel && !newIcon ) {\n\t\t\toptions.showLabel = true;\n\t\t}\n\t\tthis._super( options );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icon\" ) {\n\t\t\tif ( value ) {\n\t\t\t\tthis._updateIcon( key, value );\n\t\t\t} else if ( this.icon ) {\n\t\t\t\tthis.icon.remove();\n\t\t\t\tif ( this.iconSpace ) {\n\t\t\t\t\tthis.iconSpace.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"iconPosition\" ) {\n\t\t\tthis._updateIcon( key, value );\n\t\t}\n\n\t\t// Make sure we can't end up with a button that has neither text nor icon\n\t\tif ( key === \"showLabel\" ) {\n\t\t\t\tthis._toggleClass( \"ui-button-icon-only\", null, !value );\n\t\t\t\tthis._updateTooltip();\n\t\t}\n\n\t\tif ( key === \"label\" ) {\n\t\t\tif ( this.isInput ) {\n\t\t\t\tthis.element.val( value );\n\t\t\t} else {\n\n\t\t\t\t// If there is an icon, append it, else nothing then append the value\n\t\t\t\t// this avoids removal of the icon when setting label text\n\t\t\t\tthis.element.html( value );\n\t\t\t\tif ( this.icon ) {\n\t\t\t\t\tthis._attachIcon( this.options.iconPosition );\n\t\t\t\t\tthis._attachIconSpace( this.options.iconPosition );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._toggleClass( null, \"ui-state-disabled\", value );\n\t\t\tthis.element[ 0 ].disabled = value;\n\t\t\tif ( value ) {\n\t\t\t\tthis.element.blur();\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function() {\n\n\t\t// Make sure to only check disabled if its an element that supports this otherwise\n\t\t// check for the disabled class to determine state\n\t\tvar isDisabled = this.element.is( \"input, button\" ) ?\n\t\t\tthis.element[ 0 ].disabled : this.element.hasClass( \"ui-button-disabled\" );\n\n\t\tif ( isDisabled !== this.options.disabled ) {\n\t\t\tthis._setOptions( { disabled: isDisabled } );\n\t\t}\n\n\t\tthis._updateTooltip();\n\t}\n} );\n\n// DEPRECATED\nif ( $.uiBackCompat !== false ) {\n\n\t// Text and Icons options\n\t$.widget( \"ui.button\", $.ui.button, {\n\t\toptions: {\n\t\t\ttext: true,\n\t\t\ticons: {\n\t\t\t\tprimary: null,\n\t\t\t\tsecondary: null\n\t\t\t}\n\t\t},\n\n\t\t_create: function() {\n\t\t\tif ( this.options.showLabel && !this.options.text ) {\n\t\t\t\tthis.options.showLabel = this.options.text;\n\t\t\t}\n\t\t\tif ( !this.options.showLabel && this.options.text ) {\n\t\t\t\tthis.options.text = this.options.showLabel;\n\t\t\t}\n\t\t\tif ( !this.options.icon && ( this.options.icons.primary ||\n\t\t\t\t\tthis.options.icons.secondary ) ) {\n\t\t\t\tif ( this.options.icons.primary ) {\n\t\t\t\t\tthis.options.icon = this.options.icons.primary;\n\t\t\t\t} else {\n\t\t\t\t\tthis.options.icon = this.options.icons.secondary;\n\t\t\t\t\tthis.options.iconPosition = \"end\";\n\t\t\t\t}\n\t\t\t} else if ( this.options.icon ) {\n\t\t\t\tthis.options.icons.primary = this.options.icon;\n\t\t\t}\n\t\t\tthis._super();\n\t\t},\n\n\t\t_setOption: function( key, value ) {\n\t\t\tif ( key === \"text\" ) {\n\t\t\t\tthis._super( \"showLabel\", value );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( key === \"showLabel\" ) {\n\t\t\t\tthis.options.text = value;\n\t\t\t}\n\t\t\tif ( key === \"icon\" ) {\n\t\t\t\tthis.options.icons.primary = value;\n\t\t\t}\n\t\t\tif ( key === \"icons\" ) {\n\t\t\t\tif ( value.primary ) {\n\t\t\t\t\tthis._super( \"icon\", value.primary );\n\t\t\t\t\tthis._super( \"iconPosition\", \"beginning\" );\n\t\t\t\t} else if ( value.secondary ) {\n\t\t\t\t\tthis._super( \"icon\", value.secondary );\n\t\t\t\t\tthis._super( \"iconPosition\", \"end\" );\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._superApply( arguments );\n\t\t}\n\t} );\n\n\t$.fn.button = ( function( orig ) {\n\t\treturn function() {\n\t\t\tif ( !this.length || ( this.length && this[ 0 ].tagName !== \"INPUT\" ) ||\n\t\t\t\t\t( this.length && this[ 0 ].tagName === \"INPUT\" && (\n\t\t\t\t\t\tthis.attr( \"type\" ) !== \"checkbox\" && this.attr( \"type\" ) !== \"radio\"\n\t\t\t\t\t) ) ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t}\n\t\t\tif ( !$.ui.checkboxradio ) {\n\t\t\t\t$.error( \"Checkboxradio widget missing\" );\n\t\t\t}\n\t\t\tif ( arguments.length === 0 ) {\n\t\t\t\treturn this.checkboxradio( {\n\t\t\t\t\t\"icon\": false\n\t\t\t\t} );\n\t\t\t}\n\t\t\treturn this.checkboxradio.apply( this, arguments );\n\t\t};\n\t} )( $.fn.button );\n\n\t$.fn.buttonset = function() {\n\t\tif ( !$.ui.controlgroup ) {\n\t\t\t$.error( \"Controlgroup widget missing\" );\n\t\t}\n\t\tif ( arguments[ 0 ] === \"option\" && arguments[ 1 ] === \"items\" && arguments[ 2 ] ) {\n\t\t\treturn this.controlgroup.apply( this,\n\t\t\t\t[ arguments[ 0 ], \"items.button\", arguments[ 2 ] ] );\n\t\t}\n\t\tif ( arguments[ 0 ] === \"option\" && arguments[ 1 ] === \"items\" ) {\n\t\t\treturn this.controlgroup.apply( this, [ arguments[ 0 ], \"items.button\" ] );\n\t\t}\n\t\tif ( typeof arguments[ 0 ] === \"object\" && arguments[ 0 ].items ) {\n\t\t\targuments[ 0 ].items = {\n\t\t\t\tbutton: arguments[ 0 ].items\n\t\t\t};\n\t\t}\n\t\treturn this.controlgroup.apply( this, arguments );\n\t};\n}\n\nvar widgetsButton = $.ui.button;\n\n\n// jscs:disable maximumLineLength\n/* jscs:disable requireCamelCaseOrUpperCaseIdentifiers */\n/*!\n * jQuery UI Datepicker 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Datepicker\n//>>group: Widgets\n//>>description: Displays a calendar from an input or inline for selecting dates.\n//>>docs: http://api.jqueryui.com/datepicker/\n//>>demos: http://jqueryui.com/datepicker/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/datepicker.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\n$.extend( $.ui, { datepicker: { version: \"1.12.0-rc.2\" } } );\n\nvar datepicker_instActive;\n\nfunction datepicker_getZindex( elem ) {\n\tvar position, value;\n\twhile ( elem.length && elem[ 0 ] !== document ) {\n\n\t\t// Ignore z-index if position is set to a value where z-index is ignored by the browser\n\t\t// This makes behavior of this function consistent across browsers\n\t\t// WebKit always returns auto if the element is positioned\n\t\tposition = elem.css( \"position\" );\n\t\tif ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n\n\t\t\t// IE returns 0 when zIndex is not specified\n\t\t\t// other browsers return a string\n\t\t\t// we ignore the case of nested elements with an explicit value of 0\n\t\t\t// <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n\t\t\tvalue = parseInt( elem.css( \"zIndex\" ), 10 );\n\t\t\tif ( !isNaN( value ) && value !== 0 ) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t\telem = elem.parent();\n\t}\n\n\treturn 0;\n}\n/* Date picker manager.\n   Use the singleton instance of this class, $.datepicker, to interact with the date picker.\n   Settings for (groups of) date pickers are maintained in an instance object,\n   allowing multiple different settings on the same page. */\n\nfunction Datepicker() {\n\tthis._curInst = null; // The current instance in use\n\tthis._keyEvent = false; // If the last event was a key event\n\tthis._disabledInputs = []; // List of date picker inputs that have been disabled\n\tthis._datepickerShowing = false; // True if the popup picker is showing , false if not\n\tthis._inDialog = false; // True if showing within a \"dialog\", false if not\n\tthis._mainDivId = \"ui-datepicker-div\"; // The ID of the main datepicker division\n\tthis._inlineClass = \"ui-datepicker-inline\"; // The name of the inline marker class\n\tthis._appendClass = \"ui-datepicker-append\"; // The name of the append marker class\n\tthis._triggerClass = \"ui-datepicker-trigger\"; // The name of the trigger marker class\n\tthis._dialogClass = \"ui-datepicker-dialog\"; // The name of the dialog marker class\n\tthis._disableClass = \"ui-datepicker-disabled\"; // The name of the disabled covering marker class\n\tthis._unselectableClass = \"ui-datepicker-unselectable\"; // The name of the unselectable cell marker class\n\tthis._currentClass = \"ui-datepicker-current-day\"; // The name of the current day marker class\n\tthis._dayOverClass = \"ui-datepicker-days-cell-over\"; // The name of the day hover marker class\n\tthis.regional = []; // Available regional settings, indexed by language code\n\tthis.regional[ \"\" ] = { // Default regional settings\n\t\tcloseText: \"Done\", // Display text for close link\n\t\tprevText: \"Prev\", // Display text for previous month link\n\t\tnextText: \"Next\", // Display text for next month link\n\t\tcurrentText: \"Today\", // Display text for current month link\n\t\tmonthNames: [ \"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\n\t\t\t\"July\",\"August\",\"September\",\"October\",\"November\",\"December\" ], // Names of months for drop-down and formatting\n\t\tmonthNamesShort: [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ], // For formatting\n\t\tdayNames: [ \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\" ], // For formatting\n\t\tdayNamesShort: [ \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\" ], // For formatting\n\t\tdayNamesMin: [ \"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\" ], // Column headings for days starting at Sunday\n\t\tweekHeader: \"Wk\", // Column header for week of the year\n\t\tdateFormat: \"mm/dd/yy\", // See format options on parseDate\n\t\tfirstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...\n\t\tisRTL: false, // True if right-to-left language, false if left-to-right\n\t\tshowMonthAfterYear: false, // True if the year select precedes month, false for month then year\n\t\tyearSuffix: \"\" // Additional text to append to the year in the month headers\n\t};\n\tthis._defaults = { // Global defaults for all the date picker instances\n\t\tshowOn: \"focus\", // \"focus\" for popup on focus,\n\t\t\t// \"button\" for trigger button, or \"both\" for either\n\t\tshowAnim: \"fadeIn\", // Name of jQuery animation for popup\n\t\tshowOptions: {}, // Options for enhanced animations\n\t\tdefaultDate: null, // Used when field is blank: actual date,\n\t\t\t// +/-number for offset from today, null for today\n\t\tappendText: \"\", // Display text following the input box, e.g. showing the format\n\t\tbuttonText: \"...\", // Text for trigger button\n\t\tbuttonImage: \"\", // URL for trigger button image\n\t\tbuttonImageOnly: false, // True if the image appears alone, false if it appears on a button\n\t\thideIfNoPrevNext: false, // True to hide next/previous month links\n\t\t\t// if not applicable, false to just disable them\n\t\tnavigationAsDateFormat: false, // True if date formatting applied to prev/today/next links\n\t\tgotoCurrent: false, // True if today link goes back to current selection instead\n\t\tchangeMonth: false, // True if month can be selected directly, false if only prev/next\n\t\tchangeYear: false, // True if year can be selected directly, false if only prev/next\n\t\tyearRange: \"c-10:c+10\", // Range of years to display in drop-down,\n\t\t\t// either relative to today's year (-nn:+nn), relative to currently displayed year\n\t\t\t// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)\n\t\tshowOtherMonths: false, // True to show dates in other months, false to leave blank\n\t\tselectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable\n\t\tshowWeek: false, // True to show week of the year, false to not show it\n\t\tcalculateWeek: this.iso8601Week, // How to calculate the week of the year,\n\t\t\t// takes a Date and returns the number of the week for it\n\t\tshortYearCutoff: \"+10\", // Short year values < this are in the current century,\n\t\t\t// > this are in the previous century,\n\t\t\t// string value starting with \"+\" for current year + value\n\t\tminDate: null, // The earliest selectable date, or null for no limit\n\t\tmaxDate: null, // The latest selectable date, or null for no limit\n\t\tduration: \"fast\", // Duration of display/closure\n\t\tbeforeShowDay: null, // Function that takes a date and returns an array with\n\t\t\t// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or \"\",\n\t\t\t// [2] = cell title (optional), e.g. $.datepicker.noWeekends\n\t\tbeforeShow: null, // Function that takes an input field and\n\t\t\t// returns a set of custom settings for the date picker\n\t\tonSelect: null, // Define a callback function when a date is selected\n\t\tonChangeMonthYear: null, // Define a callback function when the month or year is changed\n\t\tonClose: null, // Define a callback function when the datepicker is closed\n\t\tnumberOfMonths: 1, // Number of months to show at a time\n\t\tshowCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)\n\t\tstepMonths: 1, // Number of months to step back/forward\n\t\tstepBigMonths: 12, // Number of months to step back/forward for the big links\n\t\taltField: \"\", // Selector for an alternate field to store selected dates into\n\t\taltFormat: \"\", // The date format to use for the alternate field\n\t\tconstrainInput: true, // The input is constrained by the current date format\n\t\tshowButtonPanel: false, // True to show button panel, false to not show it\n\t\tautoSize: false, // True to size the input for the date format, false to leave as is\n\t\tdisabled: false // The initial disabled state\n\t};\n\t$.extend( this._defaults, this.regional[ \"\" ] );\n\tthis.regional.en = $.extend( true, {}, this.regional[ \"\" ] );\n\tthis.regional[ \"en-US\" ] = $.extend( true, {}, this.regional.en );\n\tthis.dpDiv = datepicker_bindHover( $( \"<div id='\" + this._mainDivId + \"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\" ) );\n}\n\n$.extend( Datepicker.prototype, {\n\t/* Class name added to elements to indicate already configured with a date picker. */\n\tmarkerClassName: \"hasDatepicker\",\n\n\t//Keep track of the maximum number of rows displayed (see #7043)\n\tmaxRows: 4,\n\n\t// TODO rename to \"widget\" when switching to widget factory\n\t_widgetDatepicker: function() {\n\t\treturn this.dpDiv;\n\t},\n\n\t/* Override the default settings for all instances of the date picker.\n\t * @param  settings  object - the new settings to use as defaults (anonymous object)\n\t * @return the manager object\n\t */\n\tsetDefaults: function( settings ) {\n\t\tdatepicker_extendRemove( this._defaults, settings || {} );\n\t\treturn this;\n\t},\n\n\t/* Attach the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t * @param  settings  object - the new settings to use for this date picker instance (anonymous)\n\t */\n\t_attachDatepicker: function( target, settings ) {\n\t\tvar nodeName, inline, inst;\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tinline = ( nodeName === \"div\" || nodeName === \"span\" );\n\t\tif ( !target.id ) {\n\t\t\tthis.uuid += 1;\n\t\t\ttarget.id = \"dp\" + this.uuid;\n\t\t}\n\t\tinst = this._newInst( $( target ), inline );\n\t\tinst.settings = $.extend( {}, settings || {} );\n\t\tif ( nodeName === \"input\" ) {\n\t\t\tthis._connectDatepicker( target, inst );\n\t\t} else if ( inline ) {\n\t\t\tthis._inlineDatepicker( target, inst );\n\t\t}\n\t},\n\n\t/* Create a new instance object. */\n\t_newInst: function( target, inline ) {\n\t\tvar id = target[ 0 ].id.replace( /([^A-Za-z0-9_\\-])/g, \"\\\\\\\\$1\" ); // escape jQuery meta chars\n\t\treturn { id: id, input: target, // associated target\n\t\t\tselectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection\n\t\t\tdrawMonth: 0, drawYear: 0, // month being drawn\n\t\t\tinline: inline, // is datepicker inline or not\n\t\t\tdpDiv: ( !inline ? this.dpDiv : // presentation div\n\t\t\tdatepicker_bindHover( $( \"<div class='\" + this._inlineClass + \" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\" ) ) ) };\n\t},\n\n\t/* Attach the date picker to an input field. */\n\t_connectDatepicker: function( target, inst ) {\n\t\tvar input = $( target );\n\t\tinst.append = $( [] );\n\t\tinst.trigger = $( [] );\n\t\tif ( input.hasClass( this.markerClassName ) ) {\n\t\t\treturn;\n\t\t}\n\t\tthis._attachments( input, inst );\n\t\tinput.addClass( this.markerClassName ).on( \"keydown\", this._doKeyDown ).\n\t\t\ton( \"keypress\", this._doKeyPress ).on( \"keyup\", this._doKeyUp );\n\t\tthis._autoSize( inst );\n\t\t$.data( target, \"datepicker\", inst );\n\n\t\t//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)\n\t\tif ( inst.settings.disabled ) {\n\t\t\tthis._disableDatepicker( target );\n\t\t}\n\t},\n\n\t/* Make attachments based on settings. */\n\t_attachments: function( input, inst ) {\n\t\tvar showOn, buttonText, buttonImage,\n\t\t\tappendText = this._get( inst, \"appendText\" ),\n\t\t\tisRTL = this._get( inst, \"isRTL\" );\n\n\t\tif ( inst.append ) {\n\t\t\tinst.append.remove();\n\t\t}\n\t\tif ( appendText ) {\n\t\t\tinst.append = $( \"<span class='\" + this._appendClass + \"'>\" + appendText + \"</span>\" );\n\t\t\tinput[ isRTL ? \"before\" : \"after\" ]( inst.append );\n\t\t}\n\n\t\tinput.off( \"focus\", this._showDatepicker );\n\n\t\tif ( inst.trigger ) {\n\t\t\tinst.trigger.remove();\n\t\t}\n\n\t\tshowOn = this._get( inst, \"showOn\" );\n\t\tif ( showOn === \"focus\" || showOn === \"both\" ) { // pop-up date picker when in the marked field\n\t\t\tinput.on( \"focus\", this._showDatepicker );\n\t\t}\n\t\tif ( showOn === \"button\" || showOn === \"both\" ) { // pop-up date picker when button clicked\n\t\t\tbuttonText = this._get( inst, \"buttonText\" );\n\t\t\tbuttonImage = this._get( inst, \"buttonImage\" );\n\t\t\tinst.trigger = $( this._get( inst, \"buttonImageOnly\" ) ?\n\t\t\t\t$( \"<img/>\" ).addClass( this._triggerClass ).\n\t\t\t\t\tattr( { src: buttonImage, alt: buttonText, title: buttonText } ) :\n\t\t\t\t$( \"<button type='button'></button>\" ).addClass( this._triggerClass ).\n\t\t\t\t\thtml( !buttonImage ? buttonText : $( \"<img/>\" ).attr(\n\t\t\t\t\t{ src:buttonImage, alt:buttonText, title:buttonText } ) ) );\n\t\t\tinput[ isRTL ? \"before\" : \"after\" ]( inst.trigger );\n\t\t\tinst.trigger.on( \"click\", function() {\n\t\t\t\tif ( $.datepicker._datepickerShowing && $.datepicker._lastInput === input[ 0 ] ) {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t} else if ( $.datepicker._datepickerShowing && $.datepicker._lastInput !== input[ 0 ] ) {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t\t$.datepicker._showDatepicker( input[ 0 ] );\n\t\t\t\t} else {\n\t\t\t\t\t$.datepicker._showDatepicker( input[ 0 ] );\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} );\n\t\t}\n\t},\n\n\t/* Apply the maximum length for the date format. */\n\t_autoSize: function( inst ) {\n\t\tif ( this._get( inst, \"autoSize\" ) && !inst.inline ) {\n\t\t\tvar findMax, max, maxI, i,\n\t\t\t\tdate = new Date( 2009, 12 - 1, 20 ), // Ensure double digits\n\t\t\t\tdateFormat = this._get( inst, \"dateFormat\" );\n\n\t\t\tif ( dateFormat.match( /[DM]/ ) ) {\n\t\t\t\tfindMax = function( names ) {\n\t\t\t\t\tmax = 0;\n\t\t\t\t\tmaxI = 0;\n\t\t\t\t\tfor ( i = 0; i < names.length; i++ ) {\n\t\t\t\t\t\tif ( names[ i ].length > max ) {\n\t\t\t\t\t\t\tmax = names[ i ].length;\n\t\t\t\t\t\t\tmaxI = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn maxI;\n\t\t\t\t};\n\t\t\t\tdate.setMonth( findMax( this._get( inst, ( dateFormat.match( /MM/ ) ?\n\t\t\t\t\t\"monthNames\" : \"monthNamesShort\" ) ) ) );\n\t\t\t\tdate.setDate( findMax( this._get( inst, ( dateFormat.match( /DD/ ) ?\n\t\t\t\t\t\"dayNames\" : \"dayNamesShort\" ) ) ) + 20 - date.getDay() );\n\t\t\t}\n\t\t\tinst.input.attr( \"size\", this._formatDate( inst, date ).length );\n\t\t}\n\t},\n\n\t/* Attach an inline date picker to a div. */\n\t_inlineDatepicker: function( target, inst ) {\n\t\tvar divSpan = $( target );\n\t\tif ( divSpan.hasClass( this.markerClassName ) ) {\n\t\t\treturn;\n\t\t}\n\t\tdivSpan.addClass( this.markerClassName ).append( inst.dpDiv );\n\t\t$.data( target, \"datepicker\", inst );\n\t\tthis._setDate( inst, this._getDefaultDate( inst ), true );\n\t\tthis._updateDatepicker( inst );\n\t\tthis._updateAlternate( inst );\n\n\t\t//If disabled option is true, disable the datepicker before showing it (see ticket #5665)\n\t\tif ( inst.settings.disabled ) {\n\t\t\tthis._disableDatepicker( target );\n\t\t}\n\n\t\t// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements\n\t\t// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height\n\t\tinst.dpDiv.css( \"display\", \"block\" );\n\t},\n\n\t/* Pop-up the date picker in a \"dialog\" box.\n\t * @param  input element - ignored\n\t * @param  date\tstring or Date - the initial date to display\n\t * @param  onSelect  function - the function to call when a date is selected\n\t * @param  settings  object - update the dialog date picker instance's settings (anonymous object)\n\t * @param  pos int[2] - coordinates for the dialog's position within the screen or\n\t *\t\t\t\t\tevent - with x/y coordinates or\n\t *\t\t\t\t\tleave empty for default (screen centre)\n\t * @return the manager object\n\t */\n\t_dialogDatepicker: function( input, date, onSelect, settings, pos ) {\n\t\tvar id, browserWidth, browserHeight, scrollX, scrollY,\n\t\t\tinst = this._dialogInst; // internal instance\n\n\t\tif ( !inst ) {\n\t\t\tthis.uuid += 1;\n\t\t\tid = \"dp\" + this.uuid;\n\t\t\tthis._dialogInput = $( \"<input type='text' id='\" + id +\n\t\t\t\t\"' style='position: absolute; top: -100px; width: 0px;'/>\" );\n\t\t\tthis._dialogInput.on( \"keydown\", this._doKeyDown );\n\t\t\t$( \"body\" ).append( this._dialogInput );\n\t\t\tinst = this._dialogInst = this._newInst( this._dialogInput, false );\n\t\t\tinst.settings = {};\n\t\t\t$.data( this._dialogInput[ 0 ], \"datepicker\", inst );\n\t\t}\n\t\tdatepicker_extendRemove( inst.settings, settings || {} );\n\t\tdate = ( date && date.constructor === Date ? this._formatDate( inst, date ) : date );\n\t\tthis._dialogInput.val( date );\n\n\t\tthis._pos = ( pos ? ( pos.length ? pos : [ pos.pageX, pos.pageY ] ) : null );\n\t\tif ( !this._pos ) {\n\t\t\tbrowserWidth = document.documentElement.clientWidth;\n\t\t\tbrowserHeight = document.documentElement.clientHeight;\n\t\t\tscrollX = document.documentElement.scrollLeft || document.body.scrollLeft;\n\t\t\tscrollY = document.documentElement.scrollTop || document.body.scrollTop;\n\t\t\tthis._pos = // should use actual width/height below\n\t\t\t\t[ ( browserWidth / 2 ) - 100 + scrollX, ( browserHeight / 2 ) - 150 + scrollY ];\n\t\t}\n\n\t\t// Move input on screen for focus, but hidden behind dialog\n\t\tthis._dialogInput.css( \"left\", ( this._pos[ 0 ] + 20 ) + \"px\" ).css( \"top\", this._pos[ 1 ] + \"px\" );\n\t\tinst.settings.onSelect = onSelect;\n\t\tthis._inDialog = true;\n\t\tthis.dpDiv.addClass( this._dialogClass );\n\t\tthis._showDatepicker( this._dialogInput[ 0 ] );\n\t\tif ( $.blockUI ) {\n\t\t\t$.blockUI( this.dpDiv );\n\t\t}\n\t\t$.data( this._dialogInput[ 0 ], \"datepicker\", inst );\n\t\treturn this;\n\t},\n\n\t/* Detach a datepicker from its control.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_destroyDatepicker: function( target ) {\n\t\tvar nodeName,\n\t\t\t$target = $( target ),\n\t\t\tinst = $.data( target, \"datepicker\" );\n\n\t\tif ( !$target.hasClass( this.markerClassName ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\t$.removeData( target, \"datepicker\" );\n\t\tif ( nodeName === \"input\" ) {\n\t\t\tinst.append.remove();\n\t\t\tinst.trigger.remove();\n\t\t\t$target.removeClass( this.markerClassName ).\n\t\t\t\toff( \"focus\", this._showDatepicker ).\n\t\t\t\toff( \"keydown\", this._doKeyDown ).\n\t\t\t\toff( \"keypress\", this._doKeyPress ).\n\t\t\t\toff( \"keyup\", this._doKeyUp );\n\t\t} else if ( nodeName === \"div\" || nodeName === \"span\" ) {\n\t\t\t$target.removeClass( this.markerClassName ).empty();\n\t\t}\n\n\t\tif ( datepicker_instActive === inst ) {\n\t\t\tdatepicker_instActive = null;\n\t\t}\n\t},\n\n\t/* Enable the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_enableDatepicker: function( target ) {\n\t\tvar nodeName, inline,\n\t\t\t$target = $( target ),\n\t\t\tinst = $.data( target, \"datepicker\" );\n\n\t\tif ( !$target.hasClass( this.markerClassName ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tif ( nodeName === \"input\" ) {\n\t\t\ttarget.disabled = false;\n\t\t\tinst.trigger.filter( \"button\" ).\n\t\t\t\teach( function() { this.disabled = false; } ).end().\n\t\t\t\tfilter( \"img\" ).css( { opacity: \"1.0\", cursor: \"\" } );\n\t\t} else if ( nodeName === \"div\" || nodeName === \"span\" ) {\n\t\t\tinline = $target.children( \".\" + this._inlineClass );\n\t\t\tinline.children().removeClass( \"ui-state-disabled\" );\n\t\t\tinline.find( \"select.ui-datepicker-month, select.ui-datepicker-year\" ).\n\t\t\t\tprop( \"disabled\", false );\n\t\t}\n\t\tthis._disabledInputs = $.map( this._disabledInputs,\n\t\t\tfunction( value ) { return ( value === target ? null : value ); } ); // delete entry\n\t},\n\n\t/* Disable the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_disableDatepicker: function( target ) {\n\t\tvar nodeName, inline,\n\t\t\t$target = $( target ),\n\t\t\tinst = $.data( target, \"datepicker\" );\n\n\t\tif ( !$target.hasClass( this.markerClassName ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tif ( nodeName === \"input\" ) {\n\t\t\ttarget.disabled = true;\n\t\t\tinst.trigger.filter( \"button\" ).\n\t\t\t\teach( function() { this.disabled = true; } ).end().\n\t\t\t\tfilter( \"img\" ).css( { opacity: \"0.5\", cursor: \"default\" } );\n\t\t} else if ( nodeName === \"div\" || nodeName === \"span\" ) {\n\t\t\tinline = $target.children( \".\" + this._inlineClass );\n\t\t\tinline.children().addClass( \"ui-state-disabled\" );\n\t\t\tinline.find( \"select.ui-datepicker-month, select.ui-datepicker-year\" ).\n\t\t\t\tprop( \"disabled\", true );\n\t\t}\n\t\tthis._disabledInputs = $.map( this._disabledInputs,\n\t\t\tfunction( value ) { return ( value === target ? null : value ); } ); // delete entry\n\t\tthis._disabledInputs[ this._disabledInputs.length ] = target;\n\t},\n\n\t/* Is the first field in a jQuery collection disabled as a datepicker?\n\t * @param  target\telement - the target input field or division or span\n\t * @return boolean - true if disabled, false if enabled\n\t */\n\t_isDisabledDatepicker: function( target ) {\n\t\tif ( !target ) {\n\t\t\treturn false;\n\t\t}\n\t\tfor ( var i = 0; i < this._disabledInputs.length; i++ ) {\n\t\t\tif ( this._disabledInputs[ i ] === target ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/* Retrieve the instance data for the target control.\n\t * @param  target  element - the target input field or division or span\n\t * @return  object - the associated instance data\n\t * @throws  error if a jQuery problem getting data\n\t */\n\t_getInst: function( target ) {\n\t\ttry {\n\t\t\treturn $.data( target, \"datepicker\" );\n\t\t}\n\t\tcatch ( err ) {\n\t\t\tthrow \"Missing instance data for this datepicker\";\n\t\t}\n\t},\n\n\t/* Update or retrieve the settings for a date picker attached to an input field or division.\n\t * @param  target  element - the target input field or division or span\n\t * @param  name\tobject - the new settings to update or\n\t *\t\t\t\tstring - the name of the setting to change or retrieve,\n\t *\t\t\t\twhen retrieving also \"all\" for all instance settings or\n\t *\t\t\t\t\"defaults\" for all global defaults\n\t * @param  value   any - the new value for the setting\n\t *\t\t\t\t(omit if above is an object or to retrieve a value)\n\t */\n\t_optionDatepicker: function( target, name, value ) {\n\t\tvar settings, date, minDate, maxDate,\n\t\t\tinst = this._getInst( target );\n\n\t\tif ( arguments.length === 2 && typeof name === \"string\" ) {\n\t\t\treturn ( name === \"defaults\" ? $.extend( {}, $.datepicker._defaults ) :\n\t\t\t\t( inst ? ( name === \"all\" ? $.extend( {}, inst.settings ) :\n\t\t\t\tthis._get( inst, name ) ) : null ) );\n\t\t}\n\n\t\tsettings = name || {};\n\t\tif ( typeof name === \"string\" ) {\n\t\t\tsettings = {};\n\t\t\tsettings[ name ] = value;\n\t\t}\n\n\t\tif ( inst ) {\n\t\t\tif ( this._curInst === inst ) {\n\t\t\t\tthis._hideDatepicker();\n\t\t\t}\n\n\t\t\tdate = this._getDateDatepicker( target, true );\n\t\t\tminDate = this._getMinMaxDate( inst, \"min\" );\n\t\t\tmaxDate = this._getMinMaxDate( inst, \"max\" );\n\t\t\tdatepicker_extendRemove( inst.settings, settings );\n\n\t\t\t// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided\n\t\t\tif ( minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined ) {\n\t\t\t\tinst.settings.minDate = this._formatDate( inst, minDate );\n\t\t\t}\n\t\t\tif ( maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined ) {\n\t\t\t\tinst.settings.maxDate = this._formatDate( inst, maxDate );\n\t\t\t}\n\t\t\tif ( \"disabled\" in settings ) {\n\t\t\t\tif ( settings.disabled ) {\n\t\t\t\t\tthis._disableDatepicker( target );\n\t\t\t\t} else {\n\t\t\t\t\tthis._enableDatepicker( target );\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._attachments( $( target ), inst );\n\t\t\tthis._autoSize( inst );\n\t\t\tthis._setDate( inst, date );\n\t\t\tthis._updateAlternate( inst );\n\t\t\tthis._updateDatepicker( inst );\n\t\t}\n\t},\n\n\t// Change method deprecated\n\t_changeDatepicker: function( target, name, value ) {\n\t\tthis._optionDatepicker( target, name, value );\n\t},\n\n\t/* Redraw the date picker attached to an input field or division.\n\t * @param  target  element - the target input field or division or span\n\t */\n\t_refreshDatepicker: function( target ) {\n\t\tvar inst = this._getInst( target );\n\t\tif ( inst ) {\n\t\t\tthis._updateDatepicker( inst );\n\t\t}\n\t},\n\n\t/* Set the dates for a jQuery selection.\n\t * @param  target element - the target input field or division or span\n\t * @param  date\tDate - the new date\n\t */\n\t_setDateDatepicker: function( target, date ) {\n\t\tvar inst = this._getInst( target );\n\t\tif ( inst ) {\n\t\t\tthis._setDate( inst, date );\n\t\t\tthis._updateDatepicker( inst );\n\t\t\tthis._updateAlternate( inst );\n\t\t}\n\t},\n\n\t/* Get the date(s) for the first entry in a jQuery selection.\n\t * @param  target element - the target input field or division or span\n\t * @param  noDefault boolean - true if no default date is to be used\n\t * @return Date - the current date\n\t */\n\t_getDateDatepicker: function( target, noDefault ) {\n\t\tvar inst = this._getInst( target );\n\t\tif ( inst && !inst.inline ) {\n\t\t\tthis._setDateFromField( inst, noDefault );\n\t\t}\n\t\treturn ( inst ? this._getDate( inst ) : null );\n\t},\n\n\t/* Handle keystrokes. */\n\t_doKeyDown: function( event ) {\n\t\tvar onSelect, dateStr, sel,\n\t\t\tinst = $.datepicker._getInst( event.target ),\n\t\t\thandled = true,\n\t\t\tisRTL = inst.dpDiv.is( \".ui-datepicker-rtl\" );\n\n\t\tinst._keyEvent = true;\n\t\tif ( $.datepicker._datepickerShowing ) {\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase 9: $.datepicker._hideDatepicker();\n\t\t\t\t\t\thandled = false;\n\t\t\t\t\t\tbreak; // hide on tab out\n\t\t\t\tcase 13: sel = $( \"td.\" + $.datepicker._dayOverClass + \":not(.\" +\n\t\t\t\t\t\t\t\t\t$.datepicker._currentClass + \")\", inst.dpDiv );\n\t\t\t\t\t\tif ( sel[ 0 ] ) {\n\t\t\t\t\t\t\t$.datepicker._selectDay( event.target, inst.selectedMonth, inst.selectedYear, sel[ 0 ] );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonSelect = $.datepicker._get( inst, \"onSelect\" );\n\t\t\t\t\t\tif ( onSelect ) {\n\t\t\t\t\t\t\tdateStr = $.datepicker._formatDate( inst );\n\n\t\t\t\t\t\t\t// Trigger custom callback\n\t\t\t\t\t\t\tonSelect.apply( ( inst.input ? inst.input[ 0 ] : null ), [ dateStr, inst ] );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false; // don't submit the form\n\t\t\t\tcase 27: $.datepicker._hideDatepicker();\n\t\t\t\t\t\tbreak; // hide on escape\n\t\t\t\tcase 33: $.datepicker._adjustDate( event.target, ( event.ctrlKey ?\n\t\t\t\t\t\t\t-$.datepicker._get( inst, \"stepBigMonths\" ) :\n\t\t\t\t\t\t\t-$.datepicker._get( inst, \"stepMonths\" ) ), \"M\" );\n\t\t\t\t\t\tbreak; // previous month/year on page up/+ ctrl\n\t\t\t\tcase 34: $.datepicker._adjustDate( event.target, ( event.ctrlKey ?\n\t\t\t\t\t\t\t+$.datepicker._get( inst, \"stepBigMonths\" ) :\n\t\t\t\t\t\t\t+$.datepicker._get( inst, \"stepMonths\" ) ), \"M\" );\n\t\t\t\t\t\tbreak; // next month/year on page down/+ ctrl\n\t\t\t\tcase 35: if ( event.ctrlKey || event.metaKey ) {\n\t\t\t\t\t\t\t$.datepicker._clearDate( event.target );\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // clear on ctrl or command +end\n\t\t\t\tcase 36: if ( event.ctrlKey || event.metaKey ) {\n\t\t\t\t\t\t\t$.datepicker._gotoToday( event.target );\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // current on ctrl or command +home\n\t\t\t\tcase 37: if ( event.ctrlKey || event.metaKey ) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate( event.target, ( isRTL ? +1 : -1 ), \"D\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\n\t\t\t\t\t\t// -1 day on ctrl or command +left\n\t\t\t\t\t\tif ( event.originalEvent.altKey ) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate( event.target, ( event.ctrlKey ?\n\t\t\t\t\t\t\t\t-$.datepicker._get( inst, \"stepBigMonths\" ) :\n\t\t\t\t\t\t\t\t-$.datepicker._get( inst, \"stepMonths\" ) ), \"M\" );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// next month/year on alt +left on Mac\n\t\t\t\t\t\tbreak;\n\t\t\t\tcase 38: if ( event.ctrlKey || event.metaKey ) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate( event.target, -7, \"D\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // -1 week on ctrl or command +up\n\t\t\t\tcase 39: if ( event.ctrlKey || event.metaKey ) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate( event.target, ( isRTL ? -1 : +1 ), \"D\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\n\t\t\t\t\t\t// +1 day on ctrl or command +right\n\t\t\t\t\t\tif ( event.originalEvent.altKey ) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate( event.target, ( event.ctrlKey ?\n\t\t\t\t\t\t\t\t+$.datepicker._get( inst, \"stepBigMonths\" ) :\n\t\t\t\t\t\t\t\t+$.datepicker._get( inst, \"stepMonths\" ) ), \"M\" );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// next month/year on alt +right\n\t\t\t\t\t\tbreak;\n\t\t\t\tcase 40: if ( event.ctrlKey || event.metaKey ) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate( event.target, +7, \"D\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // +1 week on ctrl or command +down\n\t\t\t\tdefault: handled = false;\n\t\t\t}\n\t\t} else if ( event.keyCode === 36 && event.ctrlKey ) { // display the date picker on ctrl+home\n\t\t\t$.datepicker._showDatepicker( this );\n\t\t} else {\n\t\t\thandled = false;\n\t\t}\n\n\t\tif ( handled ) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t},\n\n\t/* Filter entered characters - based on date format. */\n\t_doKeyPress: function( event ) {\n\t\tvar chars, chr,\n\t\t\tinst = $.datepicker._getInst( event.target );\n\n\t\tif ( $.datepicker._get( inst, \"constrainInput\" ) ) {\n\t\t\tchars = $.datepicker._possibleChars( $.datepicker._get( inst, \"dateFormat\" ) );\n\t\t\tchr = String.fromCharCode( event.charCode == null ? event.keyCode : event.charCode );\n\t\t\treturn event.ctrlKey || event.metaKey || ( chr < \" \" || !chars || chars.indexOf( chr ) > -1 );\n\t\t}\n\t},\n\n\t/* Synchronise manual entry and field/alternate field. */\n\t_doKeyUp: function( event ) {\n\t\tvar date,\n\t\t\tinst = $.datepicker._getInst( event.target );\n\n\t\tif ( inst.input.val() !== inst.lastVal ) {\n\t\t\ttry {\n\t\t\t\tdate = $.datepicker.parseDate( $.datepicker._get( inst, \"dateFormat\" ),\n\t\t\t\t\t( inst.input ? inst.input.val() : null ),\n\t\t\t\t\t$.datepicker._getFormatConfig( inst ) );\n\n\t\t\t\tif ( date ) { // only if valid\n\t\t\t\t\t$.datepicker._setDateFromField( inst );\n\t\t\t\t\t$.datepicker._updateAlternate( inst );\n\t\t\t\t\t$.datepicker._updateDatepicker( inst );\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch ( err ) {\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/* Pop-up the date picker for a given input field.\n\t * If false returned from beforeShow event handler do not show.\n\t * @param  input  element - the input field attached to the date picker or\n\t *\t\t\t\t\tevent - if triggered by focus\n\t */\n\t_showDatepicker: function( input ) {\n\t\tinput = input.target || input;\n\t\tif ( input.nodeName.toLowerCase() !== \"input\" ) { // find from button/image trigger\n\t\t\tinput = $( \"input\", input.parentNode )[ 0 ];\n\t\t}\n\n\t\tif ( $.datepicker._isDisabledDatepicker( input ) || $.datepicker._lastInput === input ) { // already here\n\t\t\treturn;\n\t\t}\n\n\t\tvar inst, beforeShow, beforeShowSettings, isFixed,\n\t\t\toffset, showAnim, duration;\n\n\t\tinst = $.datepicker._getInst( input );\n\t\tif ( $.datepicker._curInst && $.datepicker._curInst !== inst ) {\n\t\t\t$.datepicker._curInst.dpDiv.stop( true, true );\n\t\t\tif ( inst && $.datepicker._datepickerShowing ) {\n\t\t\t\t$.datepicker._hideDatepicker( $.datepicker._curInst.input[ 0 ] );\n\t\t\t}\n\t\t}\n\n\t\tbeforeShow = $.datepicker._get( inst, \"beforeShow\" );\n\t\tbeforeShowSettings = beforeShow ? beforeShow.apply( input, [ input, inst ] ) : {};\n\t\tif ( beforeShowSettings === false ) {\n\t\t\treturn;\n\t\t}\n\t\tdatepicker_extendRemove( inst.settings, beforeShowSettings );\n\n\t\tinst.lastVal = null;\n\t\t$.datepicker._lastInput = input;\n\t\t$.datepicker._setDateFromField( inst );\n\n\t\tif ( $.datepicker._inDialog ) { // hide cursor\n\t\t\tinput.value = \"\";\n\t\t}\n\t\tif ( !$.datepicker._pos ) { // position below input\n\t\t\t$.datepicker._pos = $.datepicker._findPos( input );\n\t\t\t$.datepicker._pos[ 1 ] += input.offsetHeight; // add the height\n\t\t}\n\n\t\tisFixed = false;\n\t\t$( input ).parents().each( function() {\n\t\t\tisFixed |= $( this ).css( \"position\" ) === \"fixed\";\n\t\t\treturn !isFixed;\n\t\t} );\n\n\t\toffset = { left: $.datepicker._pos[ 0 ], top: $.datepicker._pos[ 1 ] };\n\t\t$.datepicker._pos = null;\n\n\t\t//to avoid flashes on Firefox\n\t\tinst.dpDiv.empty();\n\n\t\t// determine sizing offscreen\n\t\tinst.dpDiv.css( { position: \"absolute\", display: \"block\", top: \"-1000px\" } );\n\t\t$.datepicker._updateDatepicker( inst );\n\n\t\t// fix width for dynamic number of date pickers\n\t\t// and adjust position before showing\n\t\toffset = $.datepicker._checkOffset( inst, offset, isFixed );\n\t\tinst.dpDiv.css( { position: ( $.datepicker._inDialog && $.blockUI ?\n\t\t\t\"static\" : ( isFixed ? \"fixed\" : \"absolute\" ) ), display: \"none\",\n\t\t\tleft: offset.left + \"px\", top: offset.top + \"px\" } );\n\n\t\tif ( !inst.inline ) {\n\t\t\tshowAnim = $.datepicker._get( inst, \"showAnim\" );\n\t\t\tduration = $.datepicker._get( inst, \"duration\" );\n\t\t\tinst.dpDiv.css( \"z-index\", datepicker_getZindex( $( input ) ) + 1 );\n\t\t\t$.datepicker._datepickerShowing = true;\n\n\t\t\tif ( $.effects && $.effects.effect[ showAnim ] ) {\n\t\t\t\tinst.dpDiv.show( showAnim, $.datepicker._get( inst, \"showOptions\" ), duration );\n\t\t\t} else {\n\t\t\t\tinst.dpDiv[ showAnim || \"show\" ]( showAnim ? duration : null );\n\t\t\t}\n\n\t\t\tif ( $.datepicker._shouldFocusInput( inst ) ) {\n\t\t\t\tinst.input.trigger( \"focus\" );\n\t\t\t}\n\n\t\t\t$.datepicker._curInst = inst;\n\t\t}\n\t},\n\n\t/* Generate the date picker content. */\n\t_updateDatepicker: function( inst ) {\n\t\tthis.maxRows = 4; //Reset the max number of rows being displayed (see #7043)\n\t\tdatepicker_instActive = inst; // for delegate hover events\n\t\tinst.dpDiv.empty().append( this._generateHTML( inst ) );\n\t\tthis._attachHandlers( inst );\n\n\t\tvar origyearshtml,\n\t\t\tnumMonths = this._getNumberOfMonths( inst ),\n\t\t\tcols = numMonths[ 1 ],\n\t\t\twidth = 17,\n\t\t\tactiveCell = inst.dpDiv.find( \".\" + this._dayOverClass + \" a\" );\n\n\t\tif ( activeCell.length > 0 ) {\n\t\t\tdatepicker_handleMouseover.apply( activeCell.get( 0 ) );\n\t\t}\n\n\t\tinst.dpDiv.removeClass( \"ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4\" ).width( \"\" );\n\t\tif ( cols > 1 ) {\n\t\t\tinst.dpDiv.addClass( \"ui-datepicker-multi-\" + cols ).css( \"width\", ( width * cols ) + \"em\" );\n\t\t}\n\t\tinst.dpDiv[ ( numMonths[ 0 ] !== 1 || numMonths[ 1 ] !== 1 ? \"add\" : \"remove\" ) +\n\t\t\t\"Class\" ]( \"ui-datepicker-multi\" );\n\t\tinst.dpDiv[ ( this._get( inst, \"isRTL\" ) ? \"add\" : \"remove\" ) +\n\t\t\t\"Class\" ]( \"ui-datepicker-rtl\" );\n\n\t\tif ( inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput( inst ) ) {\n\t\t\tinst.input.trigger( \"focus\" );\n\t\t}\n\n\t\t// Deffered render of the years select (to avoid flashes on Firefox)\n\t\tif ( inst.yearshtml ) {\n\t\t\torigyearshtml = inst.yearshtml;\n\t\t\tsetTimeout( function() {\n\n\t\t\t\t//assure that inst.yearshtml didn't change.\n\t\t\t\tif ( origyearshtml === inst.yearshtml && inst.yearshtml ) {\n\t\t\t\t\tinst.dpDiv.find( \"select.ui-datepicker-year:first\" ).replaceWith( inst.yearshtml );\n\t\t\t\t}\n\t\t\t\torigyearshtml = inst.yearshtml = null;\n\t\t\t}, 0 );\n\t\t}\n\t},\n\n\t// #6694 - don't focus the input if it's already focused\n\t// this breaks the change event in IE\n\t// Support: IE and jQuery <1.9\n\t_shouldFocusInput: function( inst ) {\n\t\treturn inst.input && inst.input.is( \":visible\" ) && !inst.input.is( \":disabled\" ) && !inst.input.is( \":focus\" );\n\t},\n\n\t/* Check positioning to remain on screen. */\n\t_checkOffset: function( inst, offset, isFixed ) {\n\t\tvar dpWidth = inst.dpDiv.outerWidth(),\n\t\t\tdpHeight = inst.dpDiv.outerHeight(),\n\t\t\tinputWidth = inst.input ? inst.input.outerWidth() : 0,\n\t\t\tinputHeight = inst.input ? inst.input.outerHeight() : 0,\n\t\t\tviewWidth = document.documentElement.clientWidth + ( isFixed ? 0 : $( document ).scrollLeft() ),\n\t\t\tviewHeight = document.documentElement.clientHeight + ( isFixed ? 0 : $( document ).scrollTop() );\n\n\t\toffset.left -= ( this._get( inst, \"isRTL\" ) ? ( dpWidth - inputWidth ) : 0 );\n\t\toffset.left -= ( isFixed && offset.left === inst.input.offset().left ) ? $( document ).scrollLeft() : 0;\n\t\toffset.top -= ( isFixed && offset.top === ( inst.input.offset().top + inputHeight ) ) ? $( document ).scrollTop() : 0;\n\n\t\t// Now check if datepicker is showing outside window viewport - move to a better place if so.\n\t\toffset.left -= Math.min( offset.left, ( offset.left + dpWidth > viewWidth && viewWidth > dpWidth ) ?\n\t\t\tMath.abs( offset.left + dpWidth - viewWidth ) : 0 );\n\t\toffset.top -= Math.min( offset.top, ( offset.top + dpHeight > viewHeight && viewHeight > dpHeight ) ?\n\t\t\tMath.abs( dpHeight + inputHeight ) : 0 );\n\n\t\treturn offset;\n\t},\n\n\t/* Find an object's position on the screen. */\n\t_findPos: function( obj ) {\n\t\tvar position,\n\t\t\tinst = this._getInst( obj ),\n\t\t\tisRTL = this._get( inst, \"isRTL\" );\n\n\t\twhile ( obj && ( obj.type === \"hidden\" || obj.nodeType !== 1 || $.expr.filters.hidden( obj ) ) ) {\n\t\t\tobj = obj[ isRTL ? \"previousSibling\" : \"nextSibling\" ];\n\t\t}\n\n\t\tposition = $( obj ).offset();\n\t\treturn [ position.left, position.top ];\n\t},\n\n\t/* Hide the date picker from view.\n\t * @param  input  element - the input field attached to the date picker\n\t */\n\t_hideDatepicker: function( input ) {\n\t\tvar showAnim, duration, postProcess, onClose,\n\t\t\tinst = this._curInst;\n\n\t\tif ( !inst || ( input && inst !== $.data( input, \"datepicker\" ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._datepickerShowing ) {\n\t\t\tshowAnim = this._get( inst, \"showAnim\" );\n\t\t\tduration = this._get( inst, \"duration\" );\n\t\t\tpostProcess = function() {\n\t\t\t\t$.datepicker._tidyDialog( inst );\n\t\t\t};\n\n\t\t\t// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed\n\t\t\tif ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {\n\t\t\t\tinst.dpDiv.hide( showAnim, $.datepicker._get( inst, \"showOptions\" ), duration, postProcess );\n\t\t\t} else {\n\t\t\t\tinst.dpDiv[ ( showAnim === \"slideDown\" ? \"slideUp\" :\n\t\t\t\t\t( showAnim === \"fadeIn\" ? \"fadeOut\" : \"hide\" ) ) ]( ( showAnim ? duration : null ), postProcess );\n\t\t\t}\n\n\t\t\tif ( !showAnim ) {\n\t\t\t\tpostProcess();\n\t\t\t}\n\t\t\tthis._datepickerShowing = false;\n\n\t\t\tonClose = this._get( inst, \"onClose\" );\n\t\t\tif ( onClose ) {\n\t\t\t\tonClose.apply( ( inst.input ? inst.input[ 0 ] : null ), [ ( inst.input ? inst.input.val() : \"\" ), inst ] );\n\t\t\t}\n\n\t\t\tthis._lastInput = null;\n\t\t\tif ( this._inDialog ) {\n\t\t\t\tthis._dialogInput.css( { position: \"absolute\", left: \"0\", top: \"-100px\" } );\n\t\t\t\tif ( $.blockUI ) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t\t$( \"body\" ).append( this.dpDiv );\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._inDialog = false;\n\t\t}\n\t},\n\n\t/* Tidy up after a dialog display. */\n\t_tidyDialog: function( inst ) {\n\t\tinst.dpDiv.removeClass( this._dialogClass ).off( \".ui-datepicker-calendar\" );\n\t},\n\n\t/* Close date picker if clicked elsewhere. */\n\t_checkExternalClick: function( event ) {\n\t\tif ( !$.datepicker._curInst ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $target = $( event.target ),\n\t\t\tinst = $.datepicker._getInst( $target[ 0 ] );\n\n\t\tif ( ( ( $target[ 0 ].id !== $.datepicker._mainDivId &&\n\t\t\t\t$target.parents( \"#\" + $.datepicker._mainDivId ).length === 0 &&\n\t\t\t\t!$target.hasClass( $.datepicker.markerClassName ) &&\n\t\t\t\t!$target.closest( \".\" + $.datepicker._triggerClass ).length &&\n\t\t\t\t$.datepicker._datepickerShowing && !( $.datepicker._inDialog && $.blockUI ) ) ) ||\n\t\t\t( $target.hasClass( $.datepicker.markerClassName ) && $.datepicker._curInst !== inst ) ) {\n\t\t\t\t$.datepicker._hideDatepicker();\n\t\t}\n\t},\n\n\t/* Adjust one of the date sub-fields. */\n\t_adjustDate: function( id, offset, period ) {\n\t\tvar target = $( id ),\n\t\t\tinst = this._getInst( target[ 0 ] );\n\n\t\tif ( this._isDisabledDatepicker( target[ 0 ] ) ) {\n\t\t\treturn;\n\t\t}\n\t\tthis._adjustInstDate( inst, offset +\n\t\t\t( period === \"M\" ? this._get( inst, \"showCurrentAtPos\" ) : 0 ), // undo positioning\n\t\t\tperiod );\n\t\tthis._updateDatepicker( inst );\n\t},\n\n\t/* Action for current link. */\n\t_gotoToday: function( id ) {\n\t\tvar date,\n\t\t\ttarget = $( id ),\n\t\t\tinst = this._getInst( target[ 0 ] );\n\n\t\tif ( this._get( inst, \"gotoCurrent\" ) && inst.currentDay ) {\n\t\t\tinst.selectedDay = inst.currentDay;\n\t\t\tinst.drawMonth = inst.selectedMonth = inst.currentMonth;\n\t\t\tinst.drawYear = inst.selectedYear = inst.currentYear;\n\t\t} else {\n\t\t\tdate = new Date();\n\t\t\tinst.selectedDay = date.getDate();\n\t\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\t}\n\t\tthis._notifyChange( inst );\n\t\tthis._adjustDate( target );\n\t},\n\n\t/* Action for selecting a new month/year. */\n\t_selectMonthYear: function( id, select, period ) {\n\t\tvar target = $( id ),\n\t\t\tinst = this._getInst( target[ 0 ] );\n\n\t\tinst[ \"selected\" + ( period === \"M\" ? \"Month\" : \"Year\" ) ] =\n\t\tinst[ \"draw\" + ( period === \"M\" ? \"Month\" : \"Year\" ) ] =\n\t\t\tparseInt( select.options[ select.selectedIndex ].value, 10 );\n\n\t\tthis._notifyChange( inst );\n\t\tthis._adjustDate( target );\n\t},\n\n\t/* Action for selecting a day. */\n\t_selectDay: function( id, month, year, td ) {\n\t\tvar inst,\n\t\t\ttarget = $( id );\n\n\t\tif ( $( td ).hasClass( this._unselectableClass ) || this._isDisabledDatepicker( target[ 0 ] ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tinst = this._getInst( target[ 0 ] );\n\t\tinst.selectedDay = inst.currentDay = $( \"a\", td ).html();\n\t\tinst.selectedMonth = inst.currentMonth = month;\n\t\tinst.selectedYear = inst.currentYear = year;\n\t\tthis._selectDate( id, this._formatDate( inst,\n\t\t\tinst.currentDay, inst.currentMonth, inst.currentYear ) );\n\t},\n\n\t/* Erase the input field and hide the date picker. */\n\t_clearDate: function( id ) {\n\t\tvar target = $( id );\n\t\tthis._selectDate( target, \"\" );\n\t},\n\n\t/* Update the input field with the selected date. */\n\t_selectDate: function( id, dateStr ) {\n\t\tvar onSelect,\n\t\t\ttarget = $( id ),\n\t\t\tinst = this._getInst( target[ 0 ] );\n\n\t\tdateStr = ( dateStr != null ? dateStr : this._formatDate( inst ) );\n\t\tif ( inst.input ) {\n\t\t\tinst.input.val( dateStr );\n\t\t}\n\t\tthis._updateAlternate( inst );\n\n\t\tonSelect = this._get( inst, \"onSelect\" );\n\t\tif ( onSelect ) {\n\t\t\tonSelect.apply( ( inst.input ? inst.input[ 0 ] : null ), [ dateStr, inst ] );  // trigger custom callback\n\t\t} else if ( inst.input ) {\n\t\t\tinst.input.trigger( \"change\" ); // fire the change event\n\t\t}\n\n\t\tif ( inst.inline ) {\n\t\t\tthis._updateDatepicker( inst );\n\t\t} else {\n\t\t\tthis._hideDatepicker();\n\t\t\tthis._lastInput = inst.input[ 0 ];\n\t\t\tif ( typeof( inst.input[ 0 ] ) !== \"object\" ) {\n\t\t\t\tinst.input.trigger( \"focus\" ); // restore focus\n\t\t\t}\n\t\t\tthis._lastInput = null;\n\t\t}\n\t},\n\n\t/* Update any alternate field to synchronise with the main field. */\n\t_updateAlternate: function( inst ) {\n\t\tvar altFormat, date, dateStr,\n\t\t\taltField = this._get( inst, \"altField\" );\n\n\t\tif ( altField ) { // update alternate field too\n\t\t\taltFormat = this._get( inst, \"altFormat\" ) || this._get( inst, \"dateFormat\" );\n\t\t\tdate = this._getDate( inst );\n\t\t\tdateStr = this.formatDate( altFormat, date, this._getFormatConfig( inst ) );\n\t\t\t$( altField ).val( dateStr );\n\t\t}\n\t},\n\n\t/* Set as beforeShowDay function to prevent selection of weekends.\n\t * @param  date  Date - the date to customise\n\t * @return [boolean, string] - is this date selectable?, what is its CSS class?\n\t */\n\tnoWeekends: function( date ) {\n\t\tvar day = date.getDay();\n\t\treturn [ ( day > 0 && day < 6 ), \"\" ];\n\t},\n\n\t/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.\n\t * @param  date  Date - the date to get the week for\n\t * @return  number - the number of the week within the year that contains this date\n\t */\n\tiso8601Week: function( date ) {\n\t\tvar time,\n\t\t\tcheckDate = new Date( date.getTime() );\n\n\t\t// Find Thursday of this week starting on Monday\n\t\tcheckDate.setDate( checkDate.getDate() + 4 - ( checkDate.getDay() || 7 ) );\n\n\t\ttime = checkDate.getTime();\n\t\tcheckDate.setMonth( 0 ); // Compare with Jan 1\n\t\tcheckDate.setDate( 1 );\n\t\treturn Math.floor( Math.round( ( time - checkDate ) / 86400000 ) / 7 ) + 1;\n\t},\n\n\t/* Parse a string value into a date object.\n\t * See formatDate below for the possible formats.\n\t *\n\t * @param  format string - the expected format of the date\n\t * @param  value string - the date in the above format\n\t * @param  settings Object - attributes include:\n\t *\t\t\t\t\tshortYearCutoff  number - the cutoff year for determining the century (optional)\n\t *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\n\t *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\n\t *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\n\t *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\n\t * @return  Date - the extracted date value or null if value is blank\n\t */\n\tparseDate: function( format, value, settings ) {\n\t\tif ( format == null || value == null ) {\n\t\t\tthrow \"Invalid arguments\";\n\t\t}\n\n\t\tvalue = ( typeof value === \"object\" ? value.toString() : value + \"\" );\n\t\tif ( value === \"\" ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar iFormat, dim, extra,\n\t\t\tiValue = 0,\n\t\t\tshortYearCutoffTemp = ( settings ? settings.shortYearCutoff : null ) || this._defaults.shortYearCutoff,\n\t\t\tshortYearCutoff = ( typeof shortYearCutoffTemp !== \"string\" ? shortYearCutoffTemp :\n\t\t\t\tnew Date().getFullYear() % 100 + parseInt( shortYearCutoffTemp, 10 ) ),\n\t\t\tdayNamesShort = ( settings ? settings.dayNamesShort : null ) || this._defaults.dayNamesShort,\n\t\t\tdayNames = ( settings ? settings.dayNames : null ) || this._defaults.dayNames,\n\t\t\tmonthNamesShort = ( settings ? settings.monthNamesShort : null ) || this._defaults.monthNamesShort,\n\t\t\tmonthNames = ( settings ? settings.monthNames : null ) || this._defaults.monthNames,\n\t\t\tyear = -1,\n\t\t\tmonth = -1,\n\t\t\tday = -1,\n\t\t\tdoy = -1,\n\t\t\tliteral = false,\n\t\t\tdate,\n\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function( match ) {\n\t\t\t\tvar matches = ( iFormat + 1 < format.length && format.charAt( iFormat + 1 ) === match );\n\t\t\t\tif ( matches ) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t},\n\n\t\t\t// Extract a number from the string value\n\t\t\tgetNumber = function( match ) {\n\t\t\t\tvar isDoubled = lookAhead( match ),\n\t\t\t\t\tsize = ( match === \"@\" ? 14 : ( match === \"!\" ? 20 :\n\t\t\t\t\t( match === \"y\" && isDoubled ? 4 : ( match === \"o\" ? 3 : 2 ) ) ) ),\n\t\t\t\t\tminSize = ( match === \"y\" ? size : 1 ),\n\t\t\t\t\tdigits = new RegExp( \"^\\\\d{\" + minSize + \",\" + size + \"}\" ),\n\t\t\t\t\tnum = value.substring( iValue ).match( digits );\n\t\t\t\tif ( !num ) {\n\t\t\t\t\tthrow \"Missing number at position \" + iValue;\n\t\t\t\t}\n\t\t\t\tiValue += num[ 0 ].length;\n\t\t\t\treturn parseInt( num[ 0 ], 10 );\n\t\t\t},\n\n\t\t\t// Extract a name from the string value and convert to an index\n\t\t\tgetName = function( match, shortNames, longNames ) {\n\t\t\t\tvar index = -1,\n\t\t\t\t\tnames = $.map( lookAhead( match ) ? longNames : shortNames, function( v, k ) {\n\t\t\t\t\t\treturn [ [ k, v ] ];\n\t\t\t\t\t} ).sort( function( a, b ) {\n\t\t\t\t\t\treturn -( a[ 1 ].length - b[ 1 ].length );\n\t\t\t\t\t} );\n\n\t\t\t\t$.each( names, function( i, pair ) {\n\t\t\t\t\tvar name = pair[ 1 ];\n\t\t\t\t\tif ( value.substr( iValue, name.length ).toLowerCase() === name.toLowerCase() ) {\n\t\t\t\t\t\tindex = pair[ 0 ];\n\t\t\t\t\t\tiValue += name.length;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tif ( index !== -1 ) {\n\t\t\t\t\treturn index + 1;\n\t\t\t\t} else {\n\t\t\t\t\tthrow \"Unknown name at position \" + iValue;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Confirm that a literal character matches the string value\n\t\t\tcheckLiteral = function() {\n\t\t\t\tif ( value.charAt( iValue ) !== format.charAt( iFormat ) ) {\n\t\t\t\t\tthrow \"Unexpected literal at position \" + iValue;\n\t\t\t\t}\n\t\t\t\tiValue++;\n\t\t\t};\n\n\t\tfor ( iFormat = 0; iFormat < format.length; iFormat++ ) {\n\t\t\tif ( literal ) {\n\t\t\t\tif ( format.charAt( iFormat ) === \"'\" && !lookAhead( \"'\" ) ) {\n\t\t\t\t\tliteral = false;\n\t\t\t\t} else {\n\t\t\t\t\tcheckLiteral();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch ( format.charAt( iFormat ) ) {\n\t\t\t\t\tcase \"d\":\n\t\t\t\t\t\tday = getNumber( \"d\" );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"D\":\n\t\t\t\t\t\tgetName( \"D\", dayNamesShort, dayNames );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"o\":\n\t\t\t\t\t\tdoy = getNumber( \"o\" );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"m\":\n\t\t\t\t\t\tmonth = getNumber( \"m\" );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"M\":\n\t\t\t\t\t\tmonth = getName( \"M\", monthNamesShort, monthNames );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"y\":\n\t\t\t\t\t\tyear = getNumber( \"y\" );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"@\":\n\t\t\t\t\t\tdate = new Date( getNumber( \"@\" ) );\n\t\t\t\t\t\tyear = date.getFullYear();\n\t\t\t\t\t\tmonth = date.getMonth() + 1;\n\t\t\t\t\t\tday = date.getDate();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"!\":\n\t\t\t\t\t\tdate = new Date( ( getNumber( \"!\" ) - this._ticksTo1970 ) / 10000 );\n\t\t\t\t\t\tyear = date.getFullYear();\n\t\t\t\t\t\tmonth = date.getMonth() + 1;\n\t\t\t\t\t\tday = date.getDate();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\tif ( lookAhead( \"'\" ) ) {\n\t\t\t\t\t\t\tcheckLiteral();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcheckLiteral();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( iValue < value.length ) {\n\t\t\textra = value.substr( iValue );\n\t\t\tif ( !/^\\s+/.test( extra ) ) {\n\t\t\t\tthrow \"Extra/unparsed characters found in date: \" + extra;\n\t\t\t}\n\t\t}\n\n\t\tif ( year === -1 ) {\n\t\t\tyear = new Date().getFullYear();\n\t\t} else if ( year < 100 ) {\n\t\t\tyear += new Date().getFullYear() - new Date().getFullYear() % 100 +\n\t\t\t\t( year <= shortYearCutoff ? 0 : -100 );\n\t\t}\n\n\t\tif ( doy > -1 ) {\n\t\t\tmonth = 1;\n\t\t\tday = doy;\n\t\t\tdo {\n\t\t\t\tdim = this._getDaysInMonth( year, month - 1 );\n\t\t\t\tif ( day <= dim ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tmonth++;\n\t\t\t\tday -= dim;\n\t\t\t} while ( true );\n\t\t}\n\n\t\tdate = this._daylightSavingAdjust( new Date( year, month - 1, day ) );\n\t\tif ( date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day ) {\n\t\t\tthrow \"Invalid date\"; // E.g. 31/02/00\n\t\t}\n\t\treturn date;\n\t},\n\n\t/* Standard date formats. */\n\tATOM: \"yy-mm-dd\", // RFC 3339 (ISO 8601)\n\tCOOKIE: \"D, dd M yy\",\n\tISO_8601: \"yy-mm-dd\",\n\tRFC_822: \"D, d M y\",\n\tRFC_850: \"DD, dd-M-y\",\n\tRFC_1036: \"D, d M y\",\n\tRFC_1123: \"D, d M yy\",\n\tRFC_2822: \"D, d M yy\",\n\tRSS: \"D, d M y\", // RFC 822\n\tTICKS: \"!\",\n\tTIMESTAMP: \"@\",\n\tW3C: \"yy-mm-dd\", // ISO 8601\n\n\t_ticksTo1970: ( ( ( 1970 - 1 ) * 365 + Math.floor( 1970 / 4 ) - Math.floor( 1970 / 100 ) +\n\t\tMath.floor( 1970 / 400 ) ) * 24 * 60 * 60 * 10000000 ),\n\n\t/* Format a date object into a string value.\n\t * The format can be combinations of the following:\n\t * d  - day of month (no leading zero)\n\t * dd - day of month (two digit)\n\t * o  - day of year (no leading zeros)\n\t * oo - day of year (three digit)\n\t * D  - day name short\n\t * DD - day name long\n\t * m  - month of year (no leading zero)\n\t * mm - month of year (two digit)\n\t * M  - month name short\n\t * MM - month name long\n\t * y  - year (two digit)\n\t * yy - year (four digit)\n\t * @ - Unix timestamp (ms since 01/01/1970)\n\t * ! - Windows ticks (100ns since 01/01/0001)\n\t * \"...\" - literal text\n\t * '' - single quote\n\t *\n\t * @param  format string - the desired format of the date\n\t * @param  date Date - the date value to format\n\t * @param  settings Object - attributes include:\n\t *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\n\t *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\n\t *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\n\t *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\n\t * @return  string - the date in the above format\n\t */\n\tformatDate: function( format, date, settings ) {\n\t\tif ( !date ) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tvar iFormat,\n\t\t\tdayNamesShort = ( settings ? settings.dayNamesShort : null ) || this._defaults.dayNamesShort,\n\t\t\tdayNames = ( settings ? settings.dayNames : null ) || this._defaults.dayNames,\n\t\t\tmonthNamesShort = ( settings ? settings.monthNamesShort : null ) || this._defaults.monthNamesShort,\n\t\t\tmonthNames = ( settings ? settings.monthNames : null ) || this._defaults.monthNames,\n\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function( match ) {\n\t\t\t\tvar matches = ( iFormat + 1 < format.length && format.charAt( iFormat + 1 ) === match );\n\t\t\t\tif ( matches ) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t},\n\n\t\t\t// Format a number, with leading zero if necessary\n\t\t\tformatNumber = function( match, value, len ) {\n\t\t\t\tvar num = \"\" + value;\n\t\t\t\tif ( lookAhead( match ) ) {\n\t\t\t\t\twhile ( num.length < len ) {\n\t\t\t\t\t\tnum = \"0\" + num;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn num;\n\t\t\t},\n\n\t\t\t// Format a name, short or long as requested\n\t\t\tformatName = function( match, value, shortNames, longNames ) {\n\t\t\t\treturn ( lookAhead( match ) ? longNames[ value ] : shortNames[ value ] );\n\t\t\t},\n\t\t\toutput = \"\",\n\t\t\tliteral = false;\n\n\t\tif ( date ) {\n\t\t\tfor ( iFormat = 0; iFormat < format.length; iFormat++ ) {\n\t\t\t\tif ( literal ) {\n\t\t\t\t\tif ( format.charAt( iFormat ) === \"'\" && !lookAhead( \"'\" ) ) {\n\t\t\t\t\t\tliteral = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput += format.charAt( iFormat );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tswitch ( format.charAt( iFormat ) ) {\n\t\t\t\t\t\tcase \"d\":\n\t\t\t\t\t\t\toutput += formatNumber( \"d\", date.getDate(), 2 );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"D\":\n\t\t\t\t\t\t\toutput += formatName( \"D\", date.getDay(), dayNamesShort, dayNames );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"o\":\n\t\t\t\t\t\t\toutput += formatNumber( \"o\",\n\t\t\t\t\t\t\t\tMath.round( ( new Date( date.getFullYear(), date.getMonth(), date.getDate() ).getTime() - new Date( date.getFullYear(), 0, 0 ).getTime() ) / 86400000 ), 3 );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"m\":\n\t\t\t\t\t\t\toutput += formatNumber( \"m\", date.getMonth() + 1, 2 );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"M\":\n\t\t\t\t\t\t\toutput += formatName( \"M\", date.getMonth(), monthNamesShort, monthNames );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"y\":\n\t\t\t\t\t\t\toutput += ( lookAhead( \"y\" ) ? date.getFullYear() :\n\t\t\t\t\t\t\t\t( date.getFullYear() % 100 < 10 ? \"0\" : \"\" ) + date.getFullYear() % 100 );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"@\":\n\t\t\t\t\t\t\toutput += date.getTime();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"!\":\n\t\t\t\t\t\t\toutput += date.getTime() * 10000 + this._ticksTo1970;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\t\tif ( lookAhead( \"'\" ) ) {\n\t\t\t\t\t\t\t\toutput += \"'\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\toutput += format.charAt( iFormat );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t},\n\n\t/* Extract all possible characters from the date format. */\n\t_possibleChars: function( format ) {\n\t\tvar iFormat,\n\t\t\tchars = \"\",\n\t\t\tliteral = false,\n\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function( match ) {\n\t\t\t\tvar matches = ( iFormat + 1 < format.length && format.charAt( iFormat + 1 ) === match );\n\t\t\t\tif ( matches ) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t};\n\n\t\tfor ( iFormat = 0; iFormat < format.length; iFormat++ ) {\n\t\t\tif ( literal ) {\n\t\t\t\tif ( format.charAt( iFormat ) === \"'\" && !lookAhead( \"'\" ) ) {\n\t\t\t\t\tliteral = false;\n\t\t\t\t} else {\n\t\t\t\t\tchars += format.charAt( iFormat );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch ( format.charAt( iFormat ) ) {\n\t\t\t\t\tcase \"d\": case \"m\": case \"y\": case \"@\":\n\t\t\t\t\t\tchars += \"0123456789\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"D\": case \"M\":\n\t\t\t\t\t\treturn null; // Accept anything\n\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\tif ( lookAhead( \"'\" ) ) {\n\t\t\t\t\t\t\tchars += \"'\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tchars += format.charAt( iFormat );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn chars;\n\t},\n\n\t/* Get a setting value, defaulting if necessary. */\n\t_get: function( inst, name ) {\n\t\treturn inst.settings[ name ] !== undefined ?\n\t\t\tinst.settings[ name ] : this._defaults[ name ];\n\t},\n\n\t/* Parse existing date and initialise date picker. */\n\t_setDateFromField: function( inst, noDefault ) {\n\t\tif ( inst.input.val() === inst.lastVal ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar dateFormat = this._get( inst, \"dateFormat\" ),\n\t\t\tdates = inst.lastVal = inst.input ? inst.input.val() : null,\n\t\t\tdefaultDate = this._getDefaultDate( inst ),\n\t\t\tdate = defaultDate,\n\t\t\tsettings = this._getFormatConfig( inst );\n\n\t\ttry {\n\t\t\tdate = this.parseDate( dateFormat, dates, settings ) || defaultDate;\n\t\t} catch ( event ) {\n\t\t\tdates = ( noDefault ? \"\" : dates );\n\t\t}\n\t\tinst.selectedDay = date.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\tinst.currentDay = ( dates ? date.getDate() : 0 );\n\t\tinst.currentMonth = ( dates ? date.getMonth() : 0 );\n\t\tinst.currentYear = ( dates ? date.getFullYear() : 0 );\n\t\tthis._adjustInstDate( inst );\n\t},\n\n\t/* Retrieve the default date shown on opening. */\n\t_getDefaultDate: function( inst ) {\n\t\treturn this._restrictMinMax( inst,\n\t\t\tthis._determineDate( inst, this._get( inst, \"defaultDate\" ), new Date() ) );\n\t},\n\n\t/* A date may be specified as an exact value or a relative one. */\n\t_determineDate: function( inst, date, defaultDate ) {\n\t\tvar offsetNumeric = function( offset ) {\n\t\t\t\tvar date = new Date();\n\t\t\t\tdate.setDate( date.getDate() + offset );\n\t\t\t\treturn date;\n\t\t\t},\n\t\t\toffsetString = function( offset ) {\n\t\t\t\ttry {\n\t\t\t\t\treturn $.datepicker.parseDate( $.datepicker._get( inst, \"dateFormat\" ),\n\t\t\t\t\t\toffset, $.datepicker._getFormatConfig( inst ) );\n\t\t\t\t}\n\t\t\t\tcatch ( e ) {\n\n\t\t\t\t\t// Ignore\n\t\t\t\t}\n\n\t\t\t\tvar date = ( offset.toLowerCase().match( /^c/ ) ?\n\t\t\t\t\t$.datepicker._getDate( inst ) : null ) || new Date(),\n\t\t\t\t\tyear = date.getFullYear(),\n\t\t\t\t\tmonth = date.getMonth(),\n\t\t\t\t\tday = date.getDate(),\n\t\t\t\t\tpattern = /([+\\-]?[0-9]+)\\s*(d|D|w|W|m|M|y|Y)?/g,\n\t\t\t\t\tmatches = pattern.exec( offset );\n\n\t\t\t\twhile ( matches ) {\n\t\t\t\t\tswitch ( matches[ 2 ] || \"d\" ) {\n\t\t\t\t\t\tcase \"d\" : case \"D\" :\n\t\t\t\t\t\t\tday += parseInt( matches[ 1 ], 10 ); break;\n\t\t\t\t\t\tcase \"w\" : case \"W\" :\n\t\t\t\t\t\t\tday += parseInt( matches[ 1 ], 10 ) * 7; break;\n\t\t\t\t\t\tcase \"m\" : case \"M\" :\n\t\t\t\t\t\t\tmonth += parseInt( matches[ 1 ], 10 );\n\t\t\t\t\t\t\tday = Math.min( day, $.datepicker._getDaysInMonth( year, month ) );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"y\": case \"Y\" :\n\t\t\t\t\t\t\tyear += parseInt( matches[ 1 ], 10 );\n\t\t\t\t\t\t\tday = Math.min( day, $.datepicker._getDaysInMonth( year, month ) );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmatches = pattern.exec( offset );\n\t\t\t\t}\n\t\t\t\treturn new Date( year, month, day );\n\t\t\t},\n\t\t\tnewDate = ( date == null || date === \"\" ? defaultDate : ( typeof date === \"string\" ? offsetString( date ) :\n\t\t\t\t( typeof date === \"number\" ? ( isNaN( date ) ? defaultDate : offsetNumeric( date ) ) : new Date( date.getTime() ) ) ) );\n\n\t\tnewDate = ( newDate && newDate.toString() === \"Invalid Date\" ? defaultDate : newDate );\n\t\tif ( newDate ) {\n\t\t\tnewDate.setHours( 0 );\n\t\t\tnewDate.setMinutes( 0 );\n\t\t\tnewDate.setSeconds( 0 );\n\t\t\tnewDate.setMilliseconds( 0 );\n\t\t}\n\t\treturn this._daylightSavingAdjust( newDate );\n\t},\n\n\t/* Handle switch to/from daylight saving.\n\t * Hours may be non-zero on daylight saving cut-over:\n\t * > 12 when midnight changeover, but then cannot generate\n\t * midnight datetime, so jump to 1AM, otherwise reset.\n\t * @param  date  (Date) the date to check\n\t * @return  (Date) the corrected date\n\t */\n\t_daylightSavingAdjust: function( date ) {\n\t\tif ( !date ) {\n\t\t\treturn null;\n\t\t}\n\t\tdate.setHours( date.getHours() > 12 ? date.getHours() + 2 : 0 );\n\t\treturn date;\n\t},\n\n\t/* Set the date(s) directly. */\n\t_setDate: function( inst, date, noChange ) {\n\t\tvar clear = !date,\n\t\t\torigMonth = inst.selectedMonth,\n\t\t\torigYear = inst.selectedYear,\n\t\t\tnewDate = this._restrictMinMax( inst, this._determineDate( inst, date, new Date() ) );\n\n\t\tinst.selectedDay = inst.currentDay = newDate.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();\n\t\tinst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();\n\t\tif ( ( origMonth !== inst.selectedMonth || origYear !== inst.selectedYear ) && !noChange ) {\n\t\t\tthis._notifyChange( inst );\n\t\t}\n\t\tthis._adjustInstDate( inst );\n\t\tif ( inst.input ) {\n\t\t\tinst.input.val( clear ? \"\" : this._formatDate( inst ) );\n\t\t}\n\t},\n\n\t/* Retrieve the date(s) directly. */\n\t_getDate: function( inst ) {\n\t\tvar startDate = ( !inst.currentYear || ( inst.input && inst.input.val() === \"\" ) ? null :\n\t\t\tthis._daylightSavingAdjust( new Date(\n\t\t\tinst.currentYear, inst.currentMonth, inst.currentDay ) ) );\n\t\t\treturn startDate;\n\t},\n\n\t/* Attach the onxxx handlers.  These are declared statically so\n\t * they work with static code transformers like Caja.\n\t */\n\t_attachHandlers: function( inst ) {\n\t\tvar stepMonths = this._get( inst, \"stepMonths\" ),\n\t\t\tid = \"#\" + inst.id.replace( /\\\\\\\\/g, \"\\\\\" );\n\t\tinst.dpDiv.find( \"[data-handler]\" ).map( function() {\n\t\t\tvar handler = {\n\t\t\t\tprev: function() {\n\t\t\t\t\t$.datepicker._adjustDate( id, -stepMonths, \"M\" );\n\t\t\t\t},\n\t\t\t\tnext: function() {\n\t\t\t\t\t$.datepicker._adjustDate( id, +stepMonths, \"M\" );\n\t\t\t\t},\n\t\t\t\thide: function() {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t},\n\t\t\t\ttoday: function() {\n\t\t\t\t\t$.datepicker._gotoToday( id );\n\t\t\t\t},\n\t\t\t\tselectDay: function() {\n\t\t\t\t\t$.datepicker._selectDay( id, +this.getAttribute( \"data-month\" ), +this.getAttribute( \"data-year\" ), this );\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tselectMonth: function() {\n\t\t\t\t\t$.datepicker._selectMonthYear( id, this, \"M\" );\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tselectYear: function() {\n\t\t\t\t\t$.datepicker._selectMonthYear( id, this, \"Y\" );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\t\t\t$( this ).on( this.getAttribute( \"data-event\" ), handler[ this.getAttribute( \"data-handler\" ) ] );\n\t\t} );\n\t},\n\n\t/* Generate the HTML for the current state of the date picker. */\n\t_generateHTML: function( inst ) {\n\t\tvar maxDraw, prevText, prev, nextText, next, currentText, gotoDate,\n\t\t\tcontrols, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,\n\t\t\tmonthNames, monthNamesShort, beforeShowDay, showOtherMonths,\n\t\t\tselectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,\n\t\t\tcornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,\n\t\t\tprintDate, dRow, tbody, daySettings, otherMonth, unselectable,\n\t\t\ttempDate = new Date(),\n\t\t\ttoday = this._daylightSavingAdjust(\n\t\t\t\tnew Date( tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate() ) ), // clear time\n\t\t\tisRTL = this._get( inst, \"isRTL\" ),\n\t\t\tshowButtonPanel = this._get( inst, \"showButtonPanel\" ),\n\t\t\thideIfNoPrevNext = this._get( inst, \"hideIfNoPrevNext\" ),\n\t\t\tnavigationAsDateFormat = this._get( inst, \"navigationAsDateFormat\" ),\n\t\t\tnumMonths = this._getNumberOfMonths( inst ),\n\t\t\tshowCurrentAtPos = this._get( inst, \"showCurrentAtPos\" ),\n\t\t\tstepMonths = this._get( inst, \"stepMonths\" ),\n\t\t\tisMultiMonth = ( numMonths[ 0 ] !== 1 || numMonths[ 1 ] !== 1 ),\n\t\t\tcurrentDate = this._daylightSavingAdjust( ( !inst.currentDay ? new Date( 9999, 9, 9 ) :\n\t\t\t\tnew Date( inst.currentYear, inst.currentMonth, inst.currentDay ) ) ),\n\t\t\tminDate = this._getMinMaxDate( inst, \"min\" ),\n\t\t\tmaxDate = this._getMinMaxDate( inst, \"max\" ),\n\t\t\tdrawMonth = inst.drawMonth - showCurrentAtPos,\n\t\t\tdrawYear = inst.drawYear;\n\n\t\tif ( drawMonth < 0 ) {\n\t\t\tdrawMonth += 12;\n\t\t\tdrawYear--;\n\t\t}\n\t\tif ( maxDate ) {\n\t\t\tmaxDraw = this._daylightSavingAdjust( new Date( maxDate.getFullYear(),\n\t\t\t\tmaxDate.getMonth() - ( numMonths[ 0 ] * numMonths[ 1 ] ) + 1, maxDate.getDate() ) );\n\t\t\tmaxDraw = ( minDate && maxDraw < minDate ? minDate : maxDraw );\n\t\t\twhile ( this._daylightSavingAdjust( new Date( drawYear, drawMonth, 1 ) ) > maxDraw ) {\n\t\t\t\tdrawMonth--;\n\t\t\t\tif ( drawMonth < 0 ) {\n\t\t\t\t\tdrawMonth = 11;\n\t\t\t\t\tdrawYear--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tinst.drawMonth = drawMonth;\n\t\tinst.drawYear = drawYear;\n\n\t\tprevText = this._get( inst, \"prevText\" );\n\t\tprevText = ( !navigationAsDateFormat ? prevText : this.formatDate( prevText,\n\t\t\tthis._daylightSavingAdjust( new Date( drawYear, drawMonth - stepMonths, 1 ) ),\n\t\t\tthis._getFormatConfig( inst ) ) );\n\n\t\tprev = ( this._canAdjustMonth( inst, -1, drawYear, drawMonth ) ?\n\t\t\t\"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'\" +\n\t\t\t\" title='\" + prevText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"e\" : \"w\" ) + \"'>\" + prevText + \"</span></a>\" :\n\t\t\t( hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='\" + prevText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"e\" : \"w\" ) + \"'>\" + prevText + \"</span></a>\" ) );\n\n\t\tnextText = this._get( inst, \"nextText\" );\n\t\tnextText = ( !navigationAsDateFormat ? nextText : this.formatDate( nextText,\n\t\t\tthis._daylightSavingAdjust( new Date( drawYear, drawMonth + stepMonths, 1 ) ),\n\t\t\tthis._getFormatConfig( inst ) ) );\n\n\t\tnext = ( this._canAdjustMonth( inst, +1, drawYear, drawMonth ) ?\n\t\t\t\"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'\" +\n\t\t\t\" title='\" + nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"w\" : \"e\" ) + \"'>\" + nextText + \"</span></a>\" :\n\t\t\t( hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='\" + nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"w\" : \"e\" ) + \"'>\" + nextText + \"</span></a>\" ) );\n\n\t\tcurrentText = this._get( inst, \"currentText\" );\n\t\tgotoDate = ( this._get( inst, \"gotoCurrent\" ) && inst.currentDay ? currentDate : today );\n\t\tcurrentText = ( !navigationAsDateFormat ? currentText :\n\t\t\tthis.formatDate( currentText, gotoDate, this._getFormatConfig( inst ) ) );\n\n\t\tcontrols = ( !inst.inline ? \"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>\" +\n\t\t\tthis._get( inst, \"closeText\" ) + \"</button>\" : \"\" );\n\n\t\tbuttonPanel = ( showButtonPanel ) ? \"<div class='ui-datepicker-buttonpane ui-widget-content'>\" + ( isRTL ? controls : \"\" ) +\n\t\t\t( this._isInRange( inst, gotoDate ) ? \"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'\" +\n\t\t\t\">\" + currentText + \"</button>\" : \"\" ) + ( isRTL ? \"\" : controls ) + \"</div>\" : \"\";\n\n\t\tfirstDay = parseInt( this._get( inst, \"firstDay\" ), 10 );\n\t\tfirstDay = ( isNaN( firstDay ) ? 0 : firstDay );\n\n\t\tshowWeek = this._get( inst, \"showWeek\" );\n\t\tdayNames = this._get( inst, \"dayNames\" );\n\t\tdayNamesMin = this._get( inst, \"dayNamesMin\" );\n\t\tmonthNames = this._get( inst, \"monthNames\" );\n\t\tmonthNamesShort = this._get( inst, \"monthNamesShort\" );\n\t\tbeforeShowDay = this._get( inst, \"beforeShowDay\" );\n\t\tshowOtherMonths = this._get( inst, \"showOtherMonths\" );\n\t\tselectOtherMonths = this._get( inst, \"selectOtherMonths\" );\n\t\tdefaultDate = this._getDefaultDate( inst );\n\t\thtml = \"\";\n\n\t\tfor ( row = 0; row < numMonths[ 0 ]; row++ ) {\n\t\t\tgroup = \"\";\n\t\t\tthis.maxRows = 4;\n\t\t\tfor ( col = 0; col < numMonths[ 1 ]; col++ ) {\n\t\t\t\tselectedDate = this._daylightSavingAdjust( new Date( drawYear, drawMonth, inst.selectedDay ) );\n\t\t\t\tcornerClass = \" ui-corner-all\";\n\t\t\t\tcalender = \"\";\n\t\t\t\tif ( isMultiMonth ) {\n\t\t\t\t\tcalender += \"<div class='ui-datepicker-group\";\n\t\t\t\t\tif ( numMonths[ 1 ] > 1 ) {\n\t\t\t\t\t\tswitch ( col ) {\n\t\t\t\t\t\t\tcase 0: calender += \" ui-datepicker-group-first\";\n\t\t\t\t\t\t\t\tcornerClass = \" ui-corner-\" + ( isRTL ? \"right\" : \"left\" ); break;\n\t\t\t\t\t\t\tcase numMonths[ 1 ] - 1: calender += \" ui-datepicker-group-last\";\n\t\t\t\t\t\t\t\tcornerClass = \" ui-corner-\" + ( isRTL ? \"left\" : \"right\" ); break;\n\t\t\t\t\t\t\tdefault: calender += \" ui-datepicker-group-middle\"; cornerClass = \"\"; break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcalender += \"'>\";\n\t\t\t\t}\n\t\t\t\tcalender += \"<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix\" + cornerClass + \"'>\" +\n\t\t\t\t\t( /all|left/.test( cornerClass ) && row === 0 ? ( isRTL ? next : prev ) : \"\" ) +\n\t\t\t\t\t( /all|right/.test( cornerClass ) && row === 0 ? ( isRTL ? prev : next ) : \"\" ) +\n\t\t\t\t\tthis._generateMonthYearHeader( inst, drawMonth, drawYear, minDate, maxDate,\n\t\t\t\t\trow > 0 || col > 0, monthNames, monthNamesShort ) + // draw month headers\n\t\t\t\t\t\"</div><table class='ui-datepicker-calendar'><thead>\" +\n\t\t\t\t\t\"<tr>\";\n\t\t\t\tthead = ( showWeek ? \"<th class='ui-datepicker-week-col'>\" + this._get( inst, \"weekHeader\" ) + \"</th>\" : \"\" );\n\t\t\t\tfor ( dow = 0; dow < 7; dow++ ) { // days of the week\n\t\t\t\t\tday = ( dow + firstDay ) % 7;\n\t\t\t\t\tthead += \"<th scope='col'\" + ( ( dow + firstDay + 6 ) % 7 >= 5 ? \" class='ui-datepicker-week-end'\" : \"\" ) + \">\" +\n\t\t\t\t\t\t\"<span title='\" + dayNames[ day ] + \"'>\" + dayNamesMin[ day ] + \"</span></th>\";\n\t\t\t\t}\n\t\t\t\tcalender += thead + \"</tr></thead><tbody>\";\n\t\t\t\tdaysInMonth = this._getDaysInMonth( drawYear, drawMonth );\n\t\t\t\tif ( drawYear === inst.selectedYear && drawMonth === inst.selectedMonth ) {\n\t\t\t\t\tinst.selectedDay = Math.min( inst.selectedDay, daysInMonth );\n\t\t\t\t}\n\t\t\t\tleadDays = ( this._getFirstDayOfMonth( drawYear, drawMonth ) - firstDay + 7 ) % 7;\n\t\t\t\tcurRows = Math.ceil( ( leadDays + daysInMonth ) / 7 ); // calculate the number of rows to generate\n\t\t\t\tnumRows = ( isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows ); //If multiple months, use the higher number of rows (see #7043)\n\t\t\t\tthis.maxRows = numRows;\n\t\t\t\tprintDate = this._daylightSavingAdjust( new Date( drawYear, drawMonth, 1 - leadDays ) );\n\t\t\t\tfor ( dRow = 0; dRow < numRows; dRow++ ) { // create date picker rows\n\t\t\t\t\tcalender += \"<tr>\";\n\t\t\t\t\ttbody = ( !showWeek ? \"\" : \"<td class='ui-datepicker-week-col'>\" +\n\t\t\t\t\t\tthis._get( inst, \"calculateWeek\" )( printDate ) + \"</td>\" );\n\t\t\t\t\tfor ( dow = 0; dow < 7; dow++ ) { // create date picker days\n\t\t\t\t\t\tdaySettings = ( beforeShowDay ?\n\t\t\t\t\t\t\tbeforeShowDay.apply( ( inst.input ? inst.input[ 0 ] : null ), [ printDate ] ) : [ true, \"\" ] );\n\t\t\t\t\t\totherMonth = ( printDate.getMonth() !== drawMonth );\n\t\t\t\t\t\tunselectable = ( otherMonth && !selectOtherMonths ) || !daySettings[ 0 ] ||\n\t\t\t\t\t\t\t( minDate && printDate < minDate ) || ( maxDate && printDate > maxDate );\n\t\t\t\t\t\ttbody += \"<td class='\" +\n\t\t\t\t\t\t\t( ( dow + firstDay + 6 ) % 7 >= 5 ? \" ui-datepicker-week-end\" : \"\" ) + // highlight weekends\n\t\t\t\t\t\t\t( otherMonth ? \" ui-datepicker-other-month\" : \"\" ) + // highlight days from other months\n\t\t\t\t\t\t\t( ( printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent ) || // user pressed key\n\t\t\t\t\t\t\t( defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime() ) ?\n\n\t\t\t\t\t\t\t// or defaultDate is current printedDate and defaultDate is selectedDate\n\t\t\t\t\t\t\t\" \" + this._dayOverClass : \"\" ) + // highlight selected day\n\t\t\t\t\t\t\t( unselectable ? \" \" + this._unselectableClass + \" ui-state-disabled\" : \"\" ) +  // highlight unselectable days\n\t\t\t\t\t\t\t( otherMonth && !showOtherMonths ? \"\" : \" \" + daySettings[ 1 ] + // highlight custom dates\n\t\t\t\t\t\t\t( printDate.getTime() === currentDate.getTime() ? \" \" + this._currentClass : \"\" ) + // highlight selected day\n\t\t\t\t\t\t\t( printDate.getTime() === today.getTime() ? \" ui-datepicker-today\" : \"\" ) ) + \"'\" + // highlight today (if different)\n\t\t\t\t\t\t\t( ( !otherMonth || showOtherMonths ) && daySettings[ 2 ] ? \" title='\" + daySettings[ 2 ].replace( /'/g, \"&#39;\" ) + \"'\" : \"\" ) + // cell title\n\t\t\t\t\t\t\t( unselectable ? \"\" : \" data-handler='selectDay' data-event='click' data-month='\" + printDate.getMonth() + \"' data-year='\" + printDate.getFullYear() + \"'\" ) + \">\" + // actions\n\t\t\t\t\t\t\t( otherMonth && !showOtherMonths ? \"&#xa0;\" : // display for other months\n\t\t\t\t\t\t\t( unselectable ? \"<span class='ui-state-default'>\" + printDate.getDate() + \"</span>\" : \"<a class='ui-state-default\" +\n\t\t\t\t\t\t\t( printDate.getTime() === today.getTime() ? \" ui-state-highlight\" : \"\" ) +\n\t\t\t\t\t\t\t( printDate.getTime() === currentDate.getTime() ? \" ui-state-active\" : \"\" ) + // highlight selected day\n\t\t\t\t\t\t\t( otherMonth ? \" ui-priority-secondary\" : \"\" ) + // distinguish dates from other months\n\t\t\t\t\t\t\t\"' href='#'>\" + printDate.getDate() + \"</a>\" ) ) + \"</td>\"; // display selectable date\n\t\t\t\t\t\tprintDate.setDate( printDate.getDate() + 1 );\n\t\t\t\t\t\tprintDate = this._daylightSavingAdjust( printDate );\n\t\t\t\t\t}\n\t\t\t\t\tcalender += tbody + \"</tr>\";\n\t\t\t\t}\n\t\t\t\tdrawMonth++;\n\t\t\t\tif ( drawMonth > 11 ) {\n\t\t\t\t\tdrawMonth = 0;\n\t\t\t\t\tdrawYear++;\n\t\t\t\t}\n\t\t\t\tcalender += \"</tbody></table>\" + ( isMultiMonth ? \"</div>\" +\n\t\t\t\t\t\t\t( ( numMonths[ 0 ] > 0 && col === numMonths[ 1 ] - 1 ) ? \"<div class='ui-datepicker-row-break'></div>\" : \"\" ) : \"\" );\n\t\t\t\tgroup += calender;\n\t\t\t}\n\t\t\thtml += group;\n\t\t}\n\t\thtml += buttonPanel;\n\t\tinst._keyEvent = false;\n\t\treturn html;\n\t},\n\n\t/* Generate the month and year header. */\n\t_generateMonthYearHeader: function( inst, drawMonth, drawYear, minDate, maxDate,\n\t\t\tsecondary, monthNames, monthNamesShort ) {\n\n\t\tvar inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,\n\t\t\tchangeMonth = this._get( inst, \"changeMonth\" ),\n\t\t\tchangeYear = this._get( inst, \"changeYear\" ),\n\t\t\tshowMonthAfterYear = this._get( inst, \"showMonthAfterYear\" ),\n\t\t\thtml = \"<div class='ui-datepicker-title'>\",\n\t\t\tmonthHtml = \"\";\n\n\t\t// Month selection\n\t\tif ( secondary || !changeMonth ) {\n\t\t\tmonthHtml += \"<span class='ui-datepicker-month'>\" + monthNames[ drawMonth ] + \"</span>\";\n\t\t} else {\n\t\t\tinMinYear = ( minDate && minDate.getFullYear() === drawYear );\n\t\t\tinMaxYear = ( maxDate && maxDate.getFullYear() === drawYear );\n\t\t\tmonthHtml += \"<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>\";\n\t\t\tfor ( month = 0; month < 12; month++ ) {\n\t\t\t\tif ( ( !inMinYear || month >= minDate.getMonth() ) && ( !inMaxYear || month <= maxDate.getMonth() ) ) {\n\t\t\t\t\tmonthHtml += \"<option value='\" + month + \"'\" +\n\t\t\t\t\t\t( month === drawMonth ? \" selected='selected'\" : \"\" ) +\n\t\t\t\t\t\t\">\" + monthNamesShort[ month ] + \"</option>\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tmonthHtml += \"</select>\";\n\t\t}\n\n\t\tif ( !showMonthAfterYear ) {\n\t\t\thtml += monthHtml + ( secondary || !( changeMonth && changeYear ) ? \"&#xa0;\" : \"\" );\n\t\t}\n\n\t\t// Year selection\n\t\tif ( !inst.yearshtml ) {\n\t\t\tinst.yearshtml = \"\";\n\t\t\tif ( secondary || !changeYear ) {\n\t\t\t\thtml += \"<span class='ui-datepicker-year'>\" + drawYear + \"</span>\";\n\t\t\t} else {\n\n\t\t\t\t// determine range of years to display\n\t\t\t\tyears = this._get( inst, \"yearRange\" ).split( \":\" );\n\t\t\t\tthisYear = new Date().getFullYear();\n\t\t\t\tdetermineYear = function( value ) {\n\t\t\t\t\tvar year = ( value.match( /c[+\\-].*/ ) ? drawYear + parseInt( value.substring( 1 ), 10 ) :\n\t\t\t\t\t\t( value.match( /[+\\-].*/ ) ? thisYear + parseInt( value, 10 ) :\n\t\t\t\t\t\tparseInt( value, 10 ) ) );\n\t\t\t\t\treturn ( isNaN( year ) ? thisYear : year );\n\t\t\t\t};\n\t\t\t\tyear = determineYear( years[ 0 ] );\n\t\t\t\tendYear = Math.max( year, determineYear( years[ 1 ] || \"\" ) );\n\t\t\t\tyear = ( minDate ? Math.max( year, minDate.getFullYear() ) : year );\n\t\t\t\tendYear = ( maxDate ? Math.min( endYear, maxDate.getFullYear() ) : endYear );\n\t\t\t\tinst.yearshtml += \"<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>\";\n\t\t\t\tfor ( ; year <= endYear; year++ ) {\n\t\t\t\t\tinst.yearshtml += \"<option value='\" + year + \"'\" +\n\t\t\t\t\t\t( year === drawYear ? \" selected='selected'\" : \"\" ) +\n\t\t\t\t\t\t\">\" + year + \"</option>\";\n\t\t\t\t}\n\t\t\t\tinst.yearshtml += \"</select>\";\n\n\t\t\t\thtml += inst.yearshtml;\n\t\t\t\tinst.yearshtml = null;\n\t\t\t}\n\t\t}\n\n\t\thtml += this._get( inst, \"yearSuffix\" );\n\t\tif ( showMonthAfterYear ) {\n\t\t\thtml += ( secondary || !( changeMonth && changeYear ) ? \"&#xa0;\" : \"\" ) + monthHtml;\n\t\t}\n\t\thtml += \"</div>\"; // Close datepicker_header\n\t\treturn html;\n\t},\n\n\t/* Adjust one of the date sub-fields. */\n\t_adjustInstDate: function( inst, offset, period ) {\n\t\tvar year = inst.selectedYear + ( period === \"Y\" ? offset : 0 ),\n\t\t\tmonth = inst.selectedMonth + ( period === \"M\" ? offset : 0 ),\n\t\t\tday = Math.min( inst.selectedDay, this._getDaysInMonth( year, month ) ) + ( period === \"D\" ? offset : 0 ),\n\t\t\tdate = this._restrictMinMax( inst, this._daylightSavingAdjust( new Date( year, month, day ) ) );\n\n\t\tinst.selectedDay = date.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\tif ( period === \"M\" || period === \"Y\" ) {\n\t\t\tthis._notifyChange( inst );\n\t\t}\n\t},\n\n\t/* Ensure a date is within any min/max bounds. */\n\t_restrictMinMax: function( inst, date ) {\n\t\tvar minDate = this._getMinMaxDate( inst, \"min\" ),\n\t\t\tmaxDate = this._getMinMaxDate( inst, \"max\" ),\n\t\t\tnewDate = ( minDate && date < minDate ? minDate : date );\n\t\treturn ( maxDate && newDate > maxDate ? maxDate : newDate );\n\t},\n\n\t/* Notify change of month/year. */\n\t_notifyChange: function( inst ) {\n\t\tvar onChange = this._get( inst, \"onChangeMonthYear\" );\n\t\tif ( onChange ) {\n\t\t\tonChange.apply( ( inst.input ? inst.input[ 0 ] : null ),\n\t\t\t\t[ inst.selectedYear, inst.selectedMonth + 1, inst ] );\n\t\t}\n\t},\n\n\t/* Determine the number of months to show. */\n\t_getNumberOfMonths: function( inst ) {\n\t\tvar numMonths = this._get( inst, \"numberOfMonths\" );\n\t\treturn ( numMonths == null ? [ 1, 1 ] : ( typeof numMonths === \"number\" ? [ 1, numMonths ] : numMonths ) );\n\t},\n\n\t/* Determine the current maximum date - ensure no time components are set. */\n\t_getMinMaxDate: function( inst, minMax ) {\n\t\treturn this._determineDate( inst, this._get( inst, minMax + \"Date\" ), null );\n\t},\n\n\t/* Find the number of days in a given month. */\n\t_getDaysInMonth: function( year, month ) {\n\t\treturn 32 - this._daylightSavingAdjust( new Date( year, month, 32 ) ).getDate();\n\t},\n\n\t/* Find the day of the week of the first of a month. */\n\t_getFirstDayOfMonth: function( year, month ) {\n\t\treturn new Date( year, month, 1 ).getDay();\n\t},\n\n\t/* Determines if we should allow a \"next/prev\" month display change. */\n\t_canAdjustMonth: function( inst, offset, curYear, curMonth ) {\n\t\tvar numMonths = this._getNumberOfMonths( inst ),\n\t\t\tdate = this._daylightSavingAdjust( new Date( curYear,\n\t\t\tcurMonth + ( offset < 0 ? offset : numMonths[ 0 ] * numMonths[ 1 ] ), 1 ) );\n\n\t\tif ( offset < 0 ) {\n\t\t\tdate.setDate( this._getDaysInMonth( date.getFullYear(), date.getMonth() ) );\n\t\t}\n\t\treturn this._isInRange( inst, date );\n\t},\n\n\t/* Is the given date in the accepted range? */\n\t_isInRange: function( inst, date ) {\n\t\tvar yearSplit, currentYear,\n\t\t\tminDate = this._getMinMaxDate( inst, \"min\" ),\n\t\t\tmaxDate = this._getMinMaxDate( inst, \"max\" ),\n\t\t\tminYear = null,\n\t\t\tmaxYear = null,\n\t\t\tyears = this._get( inst, \"yearRange\" );\n\t\t\tif ( years ) {\n\t\t\t\tyearSplit = years.split( \":\" );\n\t\t\t\tcurrentYear = new Date().getFullYear();\n\t\t\t\tminYear = parseInt( yearSplit[ 0 ], 10 );\n\t\t\t\tmaxYear = parseInt( yearSplit[ 1 ], 10 );\n\t\t\t\tif ( yearSplit[ 0 ].match( /[+\\-].*/ ) ) {\n\t\t\t\t\tminYear += currentYear;\n\t\t\t\t}\n\t\t\t\tif ( yearSplit[ 1 ].match( /[+\\-].*/ ) ) {\n\t\t\t\t\tmaxYear += currentYear;\n\t\t\t\t}\n\t\t\t}\n\n\t\treturn ( ( !minDate || date.getTime() >= minDate.getTime() ) &&\n\t\t\t( !maxDate || date.getTime() <= maxDate.getTime() ) &&\n\t\t\t( !minYear || date.getFullYear() >= minYear ) &&\n\t\t\t( !maxYear || date.getFullYear() <= maxYear ) );\n\t},\n\n\t/* Provide the configuration settings for formatting/parsing. */\n\t_getFormatConfig: function( inst ) {\n\t\tvar shortYearCutoff = this._get( inst, \"shortYearCutoff\" );\n\t\tshortYearCutoff = ( typeof shortYearCutoff !== \"string\" ? shortYearCutoff :\n\t\t\tnew Date().getFullYear() % 100 + parseInt( shortYearCutoff, 10 ) );\n\t\treturn { shortYearCutoff: shortYearCutoff,\n\t\t\tdayNamesShort: this._get( inst, \"dayNamesShort\" ), dayNames: this._get( inst, \"dayNames\" ),\n\t\t\tmonthNamesShort: this._get( inst, \"monthNamesShort\" ), monthNames: this._get( inst, \"monthNames\" ) };\n\t},\n\n\t/* Format the given date for display. */\n\t_formatDate: function( inst, day, month, year ) {\n\t\tif ( !day ) {\n\t\t\tinst.currentDay = inst.selectedDay;\n\t\t\tinst.currentMonth = inst.selectedMonth;\n\t\t\tinst.currentYear = inst.selectedYear;\n\t\t}\n\t\tvar date = ( day ? ( typeof day === \"object\" ? day :\n\t\t\tthis._daylightSavingAdjust( new Date( year, month, day ) ) ) :\n\t\t\tthis._daylightSavingAdjust( new Date( inst.currentYear, inst.currentMonth, inst.currentDay ) ) );\n\t\treturn this.formatDate( this._get( inst, \"dateFormat\" ), date, this._getFormatConfig( inst ) );\n\t}\n} );\n\n/*\n * Bind hover events for datepicker elements.\n * Done via delegate so the binding only occurs once in the lifetime of the parent div.\n * Global datepicker_instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.\n */\nfunction datepicker_bindHover( dpDiv ) {\n\tvar selector = \"button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a\";\n\treturn dpDiv.on( \"mouseout\", selector, function() {\n\t\t\t$( this ).removeClass( \"ui-state-hover\" );\n\t\t\tif ( this.className.indexOf( \"ui-datepicker-prev\" ) !== -1 ) {\n\t\t\t\t$( this ).removeClass( \"ui-datepicker-prev-hover\" );\n\t\t\t}\n\t\t\tif ( this.className.indexOf( \"ui-datepicker-next\" ) !== -1 ) {\n\t\t\t\t$( this ).removeClass( \"ui-datepicker-next-hover\" );\n\t\t\t}\n\t\t} )\n\t\t.on( \"mouseover\", selector, datepicker_handleMouseover );\n}\n\nfunction datepicker_handleMouseover() {\n\tif ( !$.datepicker._isDisabledDatepicker( datepicker_instActive.inline ? datepicker_instActive.dpDiv.parent()[ 0 ] : datepicker_instActive.input[ 0 ] ) ) {\n\t\t$( this ).parents( \".ui-datepicker-calendar\" ).find( \"a\" ).removeClass( \"ui-state-hover\" );\n\t\t$( this ).addClass( \"ui-state-hover\" );\n\t\tif ( this.className.indexOf( \"ui-datepicker-prev\" ) !== -1 ) {\n\t\t\t$( this ).addClass( \"ui-datepicker-prev-hover\" );\n\t\t}\n\t\tif ( this.className.indexOf( \"ui-datepicker-next\" ) !== -1 ) {\n\t\t\t$( this ).addClass( \"ui-datepicker-next-hover\" );\n\t\t}\n\t}\n}\n\n/* jQuery extend now ignores nulls! */\nfunction datepicker_extendRemove( target, props ) {\n\t$.extend( target, props );\n\tfor ( var name in props ) {\n\t\tif ( props[ name ] == null ) {\n\t\t\ttarget[ name ] = props[ name ];\n\t\t}\n\t}\n\treturn target;\n}\n\n/* Invoke the datepicker functionality.\n   @param  options  string - a command, optionally followed by additional parameters or\n\t\t\t\t\tObject - settings for attaching new datepicker functionality\n   @return  jQuery object */\n$.fn.datepicker = function( options ) {\n\n\t/* Verify an empty collection wasn't passed - Fixes #6976 */\n\tif ( !this.length ) {\n\t\treturn this;\n\t}\n\n\t/* Initialise the date picker. */\n\tif ( !$.datepicker.initialized ) {\n\t\t$( document ).on( \"mousedown\", $.datepicker._checkExternalClick );\n\t\t$.datepicker.initialized = true;\n\t}\n\n\t/* Append datepicker main container to body if not exist. */\n\tif ( $( \"#\" + $.datepicker._mainDivId ).length === 0 ) {\n\t\t$( \"body\" ).append( $.datepicker.dpDiv );\n\t}\n\n\tvar otherArgs = Array.prototype.slice.call( arguments, 1 );\n\tif ( typeof options === \"string\" && ( options === \"isDisabled\" || options === \"getDate\" || options === \"widget\" ) ) {\n\t\treturn $.datepicker[ \"_\" + options + \"Datepicker\" ].\n\t\t\tapply( $.datepicker, [ this[ 0 ] ].concat( otherArgs ) );\n\t}\n\tif ( options === \"option\" && arguments.length === 2 && typeof arguments[ 1 ] === \"string\" ) {\n\t\treturn $.datepicker[ \"_\" + options + \"Datepicker\" ].\n\t\t\tapply( $.datepicker, [ this[ 0 ] ].concat( otherArgs ) );\n\t}\n\treturn this.each( function() {\n\t\ttypeof options === \"string\" ?\n\t\t\t$.datepicker[ \"_\" + options + \"Datepicker\" ].\n\t\t\t\tapply( $.datepicker, [ this ].concat( otherArgs ) ) :\n\t\t\t$.datepicker._attachDatepicker( this, options );\n\t} );\n};\n\n$.datepicker = new Datepicker(); // singleton instance\n$.datepicker.initialized = false;\n$.datepicker.uuid = new Date().getTime();\n$.datepicker.version = \"1.12.0-rc.2\";\n\nvar widgetsDatepicker = $.datepicker;\n\n\n\n\n// This file is deprecated\nvar ie = $.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n\n/*!\n * jQuery UI Mouse 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Mouse\n//>>group: Widgets\n//>>description: Abstracts mouse-based interactions to assist in creating certain widgets.\n//>>docs: http://api.jqueryui.com/mouse/\n\n\n\nvar mouseHandled = false;\n$( document ).on( \"mouseup\", function() {\n\tmouseHandled = false;\n} );\n\nvar widgetsMouse = $.widget( \"ui.mouse\", {\n\tversion: \"1.12.0-rc.2\",\n\toptions: {\n\t\tcancel: \"input, textarea, button, select, option\",\n\t\tdistance: 1,\n\t\tdelay: 0\n\t},\n\t_mouseInit: function() {\n\t\tvar that = this;\n\n\t\tthis.element\n\t\t\t.on( \"mousedown.\" + this.widgetName, function( event ) {\n\t\t\t\treturn that._mouseDown( event );\n\t\t\t} )\n\t\t\t.on( \"click.\" + this.widgetName, function( event ) {\n\t\t\t\tif ( true === $.data( event.target, that.widgetName + \".preventClickEvent\" ) ) {\n\t\t\t\t\t$.removeData( event.target, that.widgetName + \".preventClickEvent\" );\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\n\t\tthis.started = false;\n\t},\n\n\t// TODO: make sure destroying one instance of mouse doesn't mess with\n\t// other instances of mouse\n\t_mouseDestroy: function() {\n\t\tthis.element.off( \".\" + this.widgetName );\n\t\tif ( this._mouseMoveDelegate ) {\n\t\t\tthis.document\n\t\t\t\t.off( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t\t.off( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\t\t}\n\t},\n\n\t_mouseDown: function( event ) {\n\n\t\t// don't let more than one widget handle mouseStart\n\t\tif ( mouseHandled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._mouseMoved = false;\n\n\t\t// We may have missed mouseup (out of window)\n\t\t( this._mouseStarted && this._mouseUp( event ) );\n\n\t\tthis._mouseDownEvent = event;\n\n\t\tvar that = this,\n\t\t\tbtnIsLeft = ( event.which === 1 ),\n\n\t\t\t// event.target.nodeName works around a bug in IE 8 with\n\t\t\t// disabled inputs (#7620)\n\t\t\telIsCancel = ( typeof this.options.cancel === \"string\" && event.target.nodeName ?\n\t\t\t\t$( event.target ).closest( this.options.cancel ).length : false );\n\t\tif ( !btnIsLeft || elIsCancel || !this._mouseCapture( event ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.mouseDelayMet = !this.options.delay;\n\t\tif ( !this.mouseDelayMet ) {\n\t\t\tthis._mouseDelayTimer = setTimeout( function() {\n\t\t\t\tthat.mouseDelayMet = true;\n\t\t\t}, this.options.delay );\n\t\t}\n\n\t\tif ( this._mouseDistanceMet( event ) && this._mouseDelayMet( event ) ) {\n\t\t\tthis._mouseStarted = ( this._mouseStart( event ) !== false );\n\t\t\tif ( !this._mouseStarted ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Click event may never have fired (Gecko & Opera)\n\t\tif ( true === $.data( event.target, this.widgetName + \".preventClickEvent\" ) ) {\n\t\t\t$.removeData( event.target, this.widgetName + \".preventClickEvent\" );\n\t\t}\n\n\t\t// These delegates are required to keep context\n\t\tthis._mouseMoveDelegate = function( event ) {\n\t\t\treturn that._mouseMove( event );\n\t\t};\n\t\tthis._mouseUpDelegate = function( event ) {\n\t\t\treturn that._mouseUp( event );\n\t\t};\n\n\t\tthis.document\n\t\t\t.on( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.on( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tevent.preventDefault();\n\n\t\tmouseHandled = true;\n\t\treturn true;\n\t},\n\n\t_mouseMove: function( event ) {\n\n\t\t// Only check for mouseups outside the document if you've moved inside the document\n\t\t// at least once. This prevents the firing of mouseup in the case of IE<9, which will\n\t\t// fire a mousemove event if content is placed under the cursor. See #7778\n\t\t// Support: IE <9\n\t\tif ( this._mouseMoved ) {\n\n\t\t\t// IE mouseup check - mouseup happened when mouse was out of window\n\t\t\tif ( $.ui.ie && ( !document.documentMode || document.documentMode < 9 ) &&\n\t\t\t\t\t!event.button ) {\n\t\t\t\treturn this._mouseUp( event );\n\n\t\t\t// Iframe mouseup check - mouseup occurred in another document\n\t\t\t} else if ( !event.which ) {\n\n\t\t\t\t// Support: Safari <=8 - 9\n\t\t\t\t// Safari sets which to 0 if you press any of the following keys\n\t\t\t\t// during a drag (#14461)\n\t\t\t\tif ( event.originalEvent.altKey || event.originalEvent.ctrlKey ||\n\t\t\t\t\t\tevent.originalEvent.metaKey || event.originalEvent.shiftKey ) {\n\t\t\t\t\tthis.ignoreMissingWhich = true;\n\t\t\t\t} else if ( !this.ignoreMissingWhich ) {\n\t\t\t\t\treturn this._mouseUp( event );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( event.which || event.button ) {\n\t\t\tthis._mouseMoved = true;\n\t\t}\n\n\t\tif ( this._mouseStarted ) {\n\t\t\tthis._mouseDrag( event );\n\t\t\treturn event.preventDefault();\n\t\t}\n\n\t\tif ( this._mouseDistanceMet( event ) && this._mouseDelayMet( event ) ) {\n\t\t\tthis._mouseStarted =\n\t\t\t\t( this._mouseStart( this._mouseDownEvent, event ) !== false );\n\t\t\t( this._mouseStarted ? this._mouseDrag( event ) : this._mouseUp( event ) );\n\t\t}\n\n\t\treturn !this._mouseStarted;\n\t},\n\n\t_mouseUp: function( event ) {\n\t\tthis.document\n\t\t\t.off( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.off( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tif ( this._mouseStarted ) {\n\t\t\tthis._mouseStarted = false;\n\n\t\t\tif ( event.target === this._mouseDownEvent.target ) {\n\t\t\t\t$.data( event.target, this.widgetName + \".preventClickEvent\", true );\n\t\t\t}\n\n\t\t\tthis._mouseStop( event );\n\t\t}\n\n\t\tif ( this._mouseDelayTimer ) {\n\t\t\tclearTimeout( this._mouseDelayTimer );\n\t\t\tdelete this._mouseDelayTimer;\n\t\t}\n\n\t\tthis.ignoreMissingWhich = false;\n\t\tmouseHandled = false;\n\t\tevent.preventDefault();\n\t},\n\n\t_mouseDistanceMet: function( event ) {\n\t\treturn ( Math.max(\n\t\t\t\tMath.abs( this._mouseDownEvent.pageX - event.pageX ),\n\t\t\t\tMath.abs( this._mouseDownEvent.pageY - event.pageY )\n\t\t\t) >= this.options.distance\n\t\t);\n\t},\n\n\t_mouseDelayMet: function( /* event */ ) {\n\t\treturn this.mouseDelayMet;\n\t},\n\n\t// These are placeholder methods, to be overriden by extending plugin\n\t_mouseStart: function( /* event */ ) {},\n\t_mouseDrag: function( /* event */ ) {},\n\t_mouseStop: function( /* event */ ) {},\n\t_mouseCapture: function( /* event */ ) { return true; }\n} );\n\n\n/*!\n * jQuery UI Slider 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Slider\n//>>group: Widgets\n//>>description: Displays a flexible slider with ranges and accessibility via keyboard.\n//>>docs: http://api.jqueryui.com/slider/\n//>>demos: http://jqueryui.com/slider/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/slider.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\nvar widgetsSlider = $.widget( \"ui.slider\", $.ui.mouse, {\n\tversion: \"1.12.0-rc.2\",\n\twidgetEventPrefix: \"slide\",\n\n\toptions: {\n\t\tanimate: false,\n\t\tclasses: {\n\t\t\t\"ui-slider\": \"ui-corner-all\",\n\t\t\t\"ui-slider-handle\": \"ui-corner-all\",\n\n\t\t\t// Note: ui-widget-header isn't the most fittingly semantic framework class for this\n\t\t\t// element, but worked best visually with a variety of themes\n\t\t\t\"ui-slider-range\": \"ui-corner-all ui-widget-header\"\n\t\t},\n\t\tdistance: 0,\n\t\tmax: 100,\n\t\tmin: 0,\n\t\torientation: \"horizontal\",\n\t\trange: false,\n\t\tstep: 1,\n\t\tvalue: 0,\n\t\tvalues: null,\n\n\t\t// Callbacks\n\t\tchange: null,\n\t\tslide: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t// Number of pages in a slider\n\t// (how many times can you page up/down to go through the whole range)\n\tnumPages: 5,\n\n\t_create: function() {\n\t\tthis._keySliding = false;\n\t\tthis._mouseSliding = false;\n\t\tthis._animateOff = true;\n\t\tthis._handleIndex = null;\n\t\tthis._detectOrientation();\n\t\tthis._mouseInit();\n\t\tthis._calculateNewMax();\n\n\t\tthis._addClass( \"ui-slider ui-slider-\" + this.orientation,\n\t\t\t\"ui-widget ui-widget-content\" );\n\n\t\tthis._refresh();\n\n\t\tthis._animateOff = false;\n\t},\n\n\t_refresh: function() {\n\t\tthis._createRange();\n\t\tthis._createHandles();\n\t\tthis._setupEvents();\n\t\tthis._refreshValue();\n\t},\n\n\t_createHandles: function() {\n\t\tvar i, handleCount,\n\t\t\toptions = this.options,\n\t\t\texistingHandles = this.element.find( \".ui-slider-handle\" ),\n\t\t\thandle = \"<span tabindex='0'></span>\",\n\t\t\thandles = [];\n\n\t\thandleCount = ( options.values && options.values.length ) || 1;\n\n\t\tif ( existingHandles.length > handleCount ) {\n\t\t\texistingHandles.slice( handleCount ).remove();\n\t\t\texistingHandles = existingHandles.slice( 0, handleCount );\n\t\t}\n\n\t\tfor ( i = existingHandles.length; i < handleCount; i++ ) {\n\t\t\thandles.push( handle );\n\t\t}\n\n\t\tthis.handles = existingHandles.add( $( handles.join( \"\" ) ).appendTo( this.element ) );\n\n\t\tthis._addClass( this.handles, \"ui-slider-handle\", \"ui-state-default\" );\n\n\t\tthis.handle = this.handles.eq( 0 );\n\n\t\tthis.handles.each( function( i ) {\n\t\t\t$( this ).data( \"ui-slider-handle-index\", i );\n\t\t} );\n\t},\n\n\t_createRange: function() {\n\t\tvar options = this.options;\n\n\t\tif ( options.range ) {\n\t\t\tif ( options.range === true ) {\n\t\t\t\tif ( !options.values ) {\n\t\t\t\t\toptions.values = [ this._valueMin(), this._valueMin() ];\n\t\t\t\t} else if ( options.values.length && options.values.length !== 2 ) {\n\t\t\t\t\toptions.values = [ options.values[ 0 ], options.values[ 0 ] ];\n\t\t\t\t} else if ( $.isArray( options.values ) ) {\n\t\t\t\t\toptions.values = options.values.slice( 0 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !this.range || !this.range.length ) {\n\t\t\t\tthis.range = $( \"<div>\" )\n\t\t\t\t\t.appendTo( this.element );\n\n\t\t\t\tthis._addClass( this.range, \"ui-slider-range\" );\n\t\t\t} else {\n\t\t\t\tthis._removeClass( this.range, \"ui-slider-range-min ui-slider-range-max\" );\n\n\t\t\t\t// Handle range switching from true to min/max\n\t\t\t\tthis.range.css( {\n\t\t\t\t\t\"left\": \"\",\n\t\t\t\t\t\"bottom\": \"\"\n\t\t\t\t} );\n\t\t\t}\n\t\t\tif ( options.range === \"min\" || options.range === \"max\" ) {\n\t\t\t\tthis._addClass( this.range, \"ui-slider-range-\" + options.range );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( this.range ) {\n\t\t\t\tthis.range.remove();\n\t\t\t}\n\t\t\tthis.range = null;\n\t\t}\n\t},\n\n\t_setupEvents: function() {\n\t\tthis._off( this.handles );\n\t\tthis._on( this.handles, this._handleEvents );\n\t\tthis._hoverable( this.handles );\n\t\tthis._focusable( this.handles );\n\t},\n\n\t_destroy: function() {\n\t\tthis.handles.remove();\n\t\tif ( this.range ) {\n\t\t\tthis.range.remove();\n\t\t}\n\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseCapture: function( event ) {\n\t\tvar position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,\n\t\t\tthat = this,\n\t\t\to = this.options;\n\n\t\tif ( o.disabled ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.elementSize = {\n\t\t\twidth: this.element.outerWidth(),\n\t\t\theight: this.element.outerHeight()\n\t\t};\n\t\tthis.elementOffset = this.element.offset();\n\n\t\tposition = { x: event.pageX, y: event.pageY };\n\t\tnormValue = this._normValueFromMouse( position );\n\t\tdistance = this._valueMax() - this._valueMin() + 1;\n\t\tthis.handles.each( function( i ) {\n\t\t\tvar thisDistance = Math.abs( normValue - that.values( i ) );\n\t\t\tif ( ( distance > thisDistance ) ||\n\t\t\t\t( distance === thisDistance &&\n\t\t\t\t\t( i === that._lastChangedValue || that.values( i ) === o.min ) ) ) {\n\t\t\t\tdistance = thisDistance;\n\t\t\t\tclosestHandle = $( this );\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t} );\n\n\t\tallowed = this._start( event, index );\n\t\tif ( allowed === false ) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._mouseSliding = true;\n\n\t\tthis._handleIndex = index;\n\n\t\tthis._addClass( closestHandle, null, \"ui-state-active\" );\n\t\tclosestHandle.trigger( \"focus\" );\n\n\t\toffset = closestHandle.offset();\n\t\tmouseOverHandle = !$( event.target ).parents().addBack().is( \".ui-slider-handle\" );\n\t\tthis._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {\n\t\t\tleft: event.pageX - offset.left - ( closestHandle.width() / 2 ),\n\t\t\ttop: event.pageY - offset.top -\n\t\t\t\t( closestHandle.height() / 2 ) -\n\t\t\t\t( parseInt( closestHandle.css( \"borderTopWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( closestHandle.css( \"borderBottomWidth\" ), 10 ) || 0 ) +\n\t\t\t\t( parseInt( closestHandle.css( \"marginTop\" ), 10 ) || 0 )\n\t\t};\n\n\t\tif ( !this.handles.hasClass( \"ui-state-hover\" ) ) {\n\t\t\tthis._slide( event, index, normValue );\n\t\t}\n\t\tthis._animateOff = true;\n\t\treturn true;\n\t},\n\n\t_mouseStart: function() {\n\t\treturn true;\n\t},\n\n\t_mouseDrag: function( event ) {\n\t\tvar position = { x: event.pageX, y: event.pageY },\n\t\t\tnormValue = this._normValueFromMouse( position );\n\n\t\tthis._slide( event, this._handleIndex, normValue );\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\t\tthis._removeClass( this.handles, null, \"ui-state-active\" );\n\t\tthis._mouseSliding = false;\n\n\t\tthis._stop( event, this._handleIndex );\n\t\tthis._change( event, this._handleIndex );\n\n\t\tthis._handleIndex = null;\n\t\tthis._clickOffset = null;\n\t\tthis._animateOff = false;\n\n\t\treturn false;\n\t},\n\n\t_detectOrientation: function() {\n\t\tthis.orientation = ( this.options.orientation === \"vertical\" ) ? \"vertical\" : \"horizontal\";\n\t},\n\n\t_normValueFromMouse: function( position ) {\n\t\tvar pixelTotal,\n\t\t\tpixelMouse,\n\t\t\tpercentMouse,\n\t\t\tvalueTotal,\n\t\t\tvalueMouse;\n\n\t\tif ( this.orientation === \"horizontal\" ) {\n\t\t\tpixelTotal = this.elementSize.width;\n\t\t\tpixelMouse = position.x - this.elementOffset.left -\n\t\t\t\t( this._clickOffset ? this._clickOffset.left : 0 );\n\t\t} else {\n\t\t\tpixelTotal = this.elementSize.height;\n\t\t\tpixelMouse = position.y - this.elementOffset.top -\n\t\t\t\t( this._clickOffset ? this._clickOffset.top : 0 );\n\t\t}\n\n\t\tpercentMouse = ( pixelMouse / pixelTotal );\n\t\tif ( percentMouse > 1 ) {\n\t\t\tpercentMouse = 1;\n\t\t}\n\t\tif ( percentMouse < 0 ) {\n\t\t\tpercentMouse = 0;\n\t\t}\n\t\tif ( this.orientation === \"vertical\" ) {\n\t\t\tpercentMouse = 1 - percentMouse;\n\t\t}\n\n\t\tvalueTotal = this._valueMax() - this._valueMin();\n\t\tvalueMouse = this._valueMin() + percentMouse * valueTotal;\n\n\t\treturn this._trimAlignValue( valueMouse );\n\t},\n\n\t_uiHash: function( index, value, values ) {\n\t\tvar uiHash = {\n\t\t\thandle: this.handles[ index ],\n\t\t\thandleIndex: index,\n\t\t\tvalue: value !== undefined ? value : this.value()\n\t\t};\n\n\t\tif ( this._hasMultipleValues() ) {\n\t\t\tuiHash.value = value !== undefined ? value : this.values( index );\n\t\t\tuiHash.values = values || this.values();\n\t\t}\n\n\t\treturn uiHash;\n\t},\n\n\t_hasMultipleValues: function() {\n\t\treturn this.options.values && this.options.values.length;\n\t},\n\n\t_start: function( event, index ) {\n\t\treturn this._trigger( \"start\", event, this._uiHash( index ) );\n\t},\n\n\t_slide: function( event, index, newVal ) {\n\t\tvar allowed, otherVal,\n\t\t\tcurrentValue = this.value(),\n\t\t\tnewValues = this.values();\n\n\t\tif ( this._hasMultipleValues() ) {\n\t\t\totherVal = this.values( index ? 0 : 1 );\n\t\t\tcurrentValue = this.values( index );\n\n\t\t\tif ( this.options.values.length === 2 && this.options.range === true ) {\n\t\t\t\tnewVal =  index === 0 ? Math.min( otherVal, newVal ) : Math.max( otherVal, newVal );\n\t\t\t}\n\n\t\t\tnewValues[ index ] = newVal;\n\t\t}\n\n\t\tif ( newVal === currentValue ) {\n\t\t\treturn;\n\t\t}\n\n\t\tallowed = this._trigger( \"slide\", event, this._uiHash( index, newVal, newValues ) );\n\n\t\t// A slide can be canceled by returning false from the slide callback\n\t\tif ( allowed === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._hasMultipleValues() ) {\n\t\t\tthis.values( index, newVal );\n\t\t} else {\n\t\t\tthis.value( newVal );\n\t\t}\n\t},\n\n\t_stop: function( event, index ) {\n\t\tthis._trigger( \"stop\", event, this._uiHash( index ) );\n\t},\n\n\t_change: function( event, index ) {\n\t\tif ( !this._keySliding && !this._mouseSliding ) {\n\n\t\t\t//store the last changed value index for reference when handles overlap\n\t\t\tthis._lastChangedValue = index;\n\t\t\tthis._trigger( \"change\", event, this._uiHash( index ) );\n\t\t}\n\t},\n\n\tvalue: function( newValue ) {\n\t\tif ( arguments.length ) {\n\t\t\tthis.options.value = this._trimAlignValue( newValue );\n\t\t\tthis._refreshValue();\n\t\t\tthis._change( null, 0 );\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._value();\n\t},\n\n\tvalues: function( index, newValue ) {\n\t\tvar vals,\n\t\t\tnewValues,\n\t\t\ti;\n\n\t\tif ( arguments.length > 1 ) {\n\t\t\tthis.options.values[ index ] = this._trimAlignValue( newValue );\n\t\t\tthis._refreshValue();\n\t\t\tthis._change( null, index );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( arguments.length ) {\n\t\t\tif ( $.isArray( arguments[ 0 ] ) ) {\n\t\t\t\tvals = this.options.values;\n\t\t\t\tnewValues = arguments[ 0 ];\n\t\t\t\tfor ( i = 0; i < vals.length; i += 1 ) {\n\t\t\t\t\tvals[ i ] = this._trimAlignValue( newValues[ i ] );\n\t\t\t\t\tthis._change( null, i );\n\t\t\t\t}\n\t\t\t\tthis._refreshValue();\n\t\t\t} else {\n\t\t\t\tif ( this._hasMultipleValues() ) {\n\t\t\t\t\treturn this._values( index );\n\t\t\t\t} else {\n\t\t\t\t\treturn this.value();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn this._values();\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar i,\n\t\t\tvalsLength = 0;\n\n\t\tif ( key === \"range\" && this.options.range === true ) {\n\t\t\tif ( value === \"min\" ) {\n\t\t\t\tthis.options.value = this._values( 0 );\n\t\t\t\tthis.options.values = null;\n\t\t\t} else if ( value === \"max\" ) {\n\t\t\t\tthis.options.value = this._values( this.options.values.length - 1 );\n\t\t\t\tthis.options.values = null;\n\t\t\t}\n\t\t}\n\n\t\tif ( $.isArray( this.options.values ) ) {\n\t\t\tvalsLength = this.options.values.length;\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tswitch ( key ) {\n\t\t\tcase \"orientation\":\n\t\t\t\tthis._detectOrientation();\n\t\t\t\tthis._removeClass( \"ui-slider-horizontal ui-slider-vertical\" )\n\t\t\t\t\t._addClass( \"ui-slider-\" + this.orientation );\n\t\t\t\tthis._refreshValue();\n\t\t\t\tif ( this.options.range ) {\n\t\t\t\t\tthis._refreshRange( value );\n\t\t\t\t}\n\n\t\t\t\t// Reset positioning from previous orientation\n\t\t\t\tthis.handles.css( value === \"horizontal\" ? \"bottom\" : \"left\", \"\" );\n\t\t\t\tbreak;\n\t\t\tcase \"value\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refreshValue();\n\t\t\t\tthis._change( null, 0 );\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"values\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refreshValue();\n\n\t\t\t\t// Start from the last handle to prevent unreachable handles (#9046)\n\t\t\t\tfor ( i = valsLength - 1; i >= 0; i-- ) {\n\t\t\t\t\tthis._change( null, i );\n\t\t\t\t}\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"step\":\n\t\t\tcase \"min\":\n\t\t\tcase \"max\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._calculateNewMax();\n\t\t\t\tthis._refreshValue();\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"range\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refresh();\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._super( value );\n\n\t\tthis._toggleClass( null, \"ui-state-disabled\", !!value );\n\t},\n\n\t//internal value getter\n\t// _value() returns value trimmed by min and max, aligned by step\n\t_value: function() {\n\t\tvar val = this.options.value;\n\t\tval = this._trimAlignValue( val );\n\n\t\treturn val;\n\t},\n\n\t//internal values getter\n\t// _values() returns array of values trimmed by min and max, aligned by step\n\t// _values( index ) returns single value trimmed by min and max, aligned by step\n\t_values: function( index ) {\n\t\tvar val,\n\t\t\tvals,\n\t\t\ti;\n\n\t\tif ( arguments.length ) {\n\t\t\tval = this.options.values[ index ];\n\t\t\tval = this._trimAlignValue( val );\n\n\t\t\treturn val;\n\t\t} else if ( this._hasMultipleValues() ) {\n\n\t\t\t// .slice() creates a copy of the array\n\t\t\t// this copy gets trimmed by min and max and then returned\n\t\t\tvals = this.options.values.slice();\n\t\t\tfor ( i = 0; i < vals.length; i += 1 ) {\n\t\t\t\tvals[ i ] = this._trimAlignValue( vals[ i ] );\n\t\t\t}\n\n\t\t\treturn vals;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t},\n\n\t// Returns the step-aligned value that val is closest to, between (inclusive) min and max\n\t_trimAlignValue: function( val ) {\n\t\tif ( val <= this._valueMin() ) {\n\t\t\treturn this._valueMin();\n\t\t}\n\t\tif ( val >= this._valueMax() ) {\n\t\t\treturn this._valueMax();\n\t\t}\n\t\tvar step = ( this.options.step > 0 ) ? this.options.step : 1,\n\t\t\tvalModStep = ( val - this._valueMin() ) % step,\n\t\t\talignValue = val - valModStep;\n\n\t\tif ( Math.abs( valModStep ) * 2 >= step ) {\n\t\t\talignValue += ( valModStep > 0 ) ? step : ( -step );\n\t\t}\n\n\t\t// Since JavaScript has problems with large floats, round\n\t\t// the final value to 5 digits after the decimal point (see #4124)\n\t\treturn parseFloat( alignValue.toFixed( 5 ) );\n\t},\n\n\t_calculateNewMax: function() {\n\t\tvar max = this.options.max,\n\t\t\tmin = this._valueMin(),\n\t\t\tstep = this.options.step,\n\t\t\taboveMin = Math.round( ( max - min ) / step ) * step;\n\t\tmax = aboveMin + min;\n\t\tif ( max > this.options.max ) {\n\n\t\t\t//If max is not divisible by step, rounding off may increase its value\n\t\t\tmax -= step;\n\t\t}\n\t\tthis.max = parseFloat( max.toFixed( this._precision() ) );\n\t},\n\n\t_precision: function() {\n\t\tvar precision = this._precisionOf( this.options.step );\n\t\tif ( this.options.min !== null ) {\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\n\t\t}\n\t\treturn precision;\n\t},\n\n\t_precisionOf: function( num ) {\n\t\tvar str = num.toString(),\n\t\t\tdecimal = str.indexOf( \".\" );\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\n\t},\n\n\t_valueMin: function() {\n\t\treturn this.options.min;\n\t},\n\n\t_valueMax: function() {\n\t\treturn this.max;\n\t},\n\n\t_refreshRange: function( orientation ) {\n\t\tif ( orientation === \"vertical\" ) {\n\t\t\tthis.range.css( { \"width\": \"\", \"left\": \"\" } );\n\t\t}\n\t\tif ( orientation === \"horizontal\" ) {\n\t\t\tthis.range.css( { \"height\": \"\", \"bottom\": \"\" } );\n\t\t}\n\t},\n\n\t_refreshValue: function() {\n\t\tvar lastValPercent, valPercent, value, valueMin, valueMax,\n\t\t\toRange = this.options.range,\n\t\t\to = this.options,\n\t\t\tthat = this,\n\t\t\tanimate = ( !this._animateOff ) ? o.animate : false,\n\t\t\t_set = {};\n\n\t\tif ( this._hasMultipleValues() ) {\n\t\t\tthis.handles.each( function( i ) {\n\t\t\t\tvalPercent = ( that.values( i ) - that._valueMin() ) / ( that._valueMax() -\n\t\t\t\t\tthat._valueMin() ) * 100;\n\t\t\t\t_set[ that.orientation === \"horizontal\" ? \"left\" : \"bottom\" ] = valPercent + \"%\";\n\t\t\t\t$( this ).stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( _set, o.animate );\n\t\t\t\tif ( that.options.range === true ) {\n\t\t\t\t\tif ( that.orientation === \"horizontal\" ) {\n\t\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\t\tthat.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( {\n\t\t\t\t\t\t\t\tleft: valPercent + \"%\"\n\t\t\t\t\t\t\t}, o.animate );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( i === 1 ) {\n\t\t\t\t\t\t\tthat.range[ animate ? \"animate\" : \"css\" ]( {\n\t\t\t\t\t\t\t\twidth: ( valPercent - lastValPercent ) + \"%\"\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tqueue: false,\n\t\t\t\t\t\t\t\tduration: o.animate\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\t\tthat.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( {\n\t\t\t\t\t\t\t\tbottom: ( valPercent ) + \"%\"\n\t\t\t\t\t\t\t}, o.animate );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( i === 1 ) {\n\t\t\t\t\t\t\tthat.range[ animate ? \"animate\" : \"css\" ]( {\n\t\t\t\t\t\t\t\theight: ( valPercent - lastValPercent ) + \"%\"\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tqueue: false,\n\t\t\t\t\t\t\t\tduration: o.animate\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlastValPercent = valPercent;\n\t\t\t} );\n\t\t} else {\n\t\t\tvalue = this.value();\n\t\t\tvalueMin = this._valueMin();\n\t\t\tvalueMax = this._valueMax();\n\t\t\tvalPercent = ( valueMax !== valueMin ) ?\n\t\t\t\t\t( value - valueMin ) / ( valueMax - valueMin ) * 100 :\n\t\t\t\t\t0;\n\t\t\t_set[ this.orientation === \"horizontal\" ? \"left\" : \"bottom\" ] = valPercent + \"%\";\n\t\t\tthis.handle.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( _set, o.animate );\n\n\t\t\tif ( oRange === \"min\" && this.orientation === \"horizontal\" ) {\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( {\n\t\t\t\t\twidth: valPercent + \"%\"\n\t\t\t\t}, o.animate );\n\t\t\t}\n\t\t\tif ( oRange === \"max\" && this.orientation === \"horizontal\" ) {\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( {\n\t\t\t\t\twidth: ( 100 - valPercent ) + \"%\"\n\t\t\t\t}, o.animate );\n\t\t\t}\n\t\t\tif ( oRange === \"min\" && this.orientation === \"vertical\" ) {\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( {\n\t\t\t\t\theight: valPercent + \"%\"\n\t\t\t\t}, o.animate );\n\t\t\t}\n\t\t\tif ( oRange === \"max\" && this.orientation === \"vertical\" ) {\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( {\n\t\t\t\t\theight: ( 100 - valPercent ) + \"%\"\n\t\t\t\t}, o.animate );\n\t\t\t}\n\t\t}\n\t},\n\n\t_handleEvents: {\n\t\tkeydown: function( event ) {\n\t\t\tvar allowed, curVal, newVal, step,\n\t\t\t\tindex = $( event.target ).data( \"ui-slider-handle-index\" );\n\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\tcase $.ui.keyCode.END:\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif ( !this._keySliding ) {\n\t\t\t\t\t\tthis._keySliding = true;\n\t\t\t\t\t\tthis._addClass( $( event.target ), null, \"ui-state-active\" );\n\t\t\t\t\t\tallowed = this._start( event, index );\n\t\t\t\t\t\tif ( allowed === false ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tstep = this.options.step;\n\t\t\tif ( this._hasMultipleValues() ) {\n\t\t\t\tcurVal = newVal = this.values( index );\n\t\t\t} else {\n\t\t\t\tcurVal = newVal = this.value();\n\t\t\t}\n\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\t\tnewVal = this._valueMin();\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.END:\n\t\t\t\t\tnewVal = this._valueMax();\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\t\tnewVal = this._trimAlignValue(\n\t\t\t\t\t\tcurVal + ( ( this._valueMax() - this._valueMin() ) / this.numPages )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\t\tnewVal = this._trimAlignValue(\n\t\t\t\t\t\tcurVal - ( ( this._valueMax() - this._valueMin() ) / this.numPages ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\t\tif ( curVal === this._valueMax() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal + step );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\t\tif ( curVal === this._valueMin() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal - step );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis._slide( event, index, newVal );\n\t\t},\n\t\tkeyup: function( event ) {\n\t\t\tvar index = $( event.target ).data( \"ui-slider-handle-index\" );\n\n\t\t\tif ( this._keySliding ) {\n\t\t\t\tthis._keySliding = false;\n\t\t\t\tthis._stop( event, index );\n\t\t\t\tthis._change( event, index );\n\t\t\t\tthis._removeClass( $( event.target ), null, \"ui-state-active\" );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n\n\nvar safeActiveElement = $.ui.safeActiveElement = function( document ) {\n\tvar activeElement;\n\n\t// Support: IE 9 only\n\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\ttry {\n\t\tactiveElement = document.activeElement;\n\t} catch ( error ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE may return null instead of an element\n\t// Interestingly, this only seems to occur when NOT in an iframe\n\tif ( !activeElement ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 11 only\n\t// IE11 returns a seemingly empty object in some cases when accessing\n\t// document.activeElement from an <iframe>\n\tif ( !activeElement.nodeName ) {\n\t\tactiveElement = document.body;\n\t}\n\n\treturn activeElement;\n};\n\n\n/*!\n * jQuery UI Spinner 1.12.0-rc.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Spinner\n//>>group: Widgets\n//>>description: Displays buttons to easily input numbers via the keyboard or mouse.\n//>>docs: http://api.jqueryui.com/spinner/\n//>>demos: http://jqueryui.com/spinner/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/spinner.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\nfunction spinnerModifer( fn ) {\n\treturn function() {\n\t\tvar previous = this.element.val();\n\t\tfn.apply( this, arguments );\n\t\tthis._refresh();\n\t\tif ( previous !== this.element.val() ) {\n\t\t\tthis._trigger( \"change\" );\n\t\t}\n\t};\n}\n\n$.widget( \"ui.spinner\", {\n\tversion: \"1.12.0-rc.2\",\n\tdefaultElement: \"<input>\",\n\twidgetEventPrefix: \"spin\",\n\toptions: {\n\t\tclasses: {\n\t\t\t\"ui-spinner\": \"ui-corner-all\",\n\t\t\t\"ui-spinner-down\": \"ui-corner-br\",\n\t\t\t\"ui-spinner-up\": \"ui-corner-tr\"\n\t\t},\n\t\tculture: null,\n\t\ticons: {\n\t\t\tdown: \"ui-icon-triangle-1-s\",\n\t\t\tup: \"ui-icon-triangle-1-n\"\n\t\t},\n\t\tincremental: true,\n\t\tmax: null,\n\t\tmin: null,\n\t\tnumberFormat: null,\n\t\tpage: 10,\n\t\tstep: 1,\n\n\t\tchange: null,\n\t\tspin: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_create: function() {\n\n\t\t// handle string values that need to be parsed\n\t\tthis._setOption( \"max\", this.options.max );\n\t\tthis._setOption( \"min\", this.options.min );\n\t\tthis._setOption( \"step\", this.options.step );\n\n\t\t// Only format if there is a value, prevents the field from being marked\n\t\t// as invalid in Firefox, see #9573.\n\t\tif ( this.value() !== \"\" ) {\n\n\t\t\t// Format the value, but don't constrain.\n\t\t\tthis._value( this.element.val(), true );\n\t\t}\n\n\t\tthis._draw();\n\t\tthis._on( this._events );\n\t\tthis._refresh();\n\n\t\t// Turning off autocomplete prevents the browser from remembering the\n\t\t// value when navigating through history, so we re-enable autocomplete\n\t\t// if the page is unloaded before the widget is destroyed. #7790\n\t\tthis._on( this.window, {\n\t\t\tbeforeunload: function() {\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar options = this._super();\n\t\tvar element = this.element;\n\n\t\t$.each( [ \"min\", \"max\", \"step\" ], function( i, option ) {\n\t\t\tvar value = element.attr( option );\n\t\t\tif ( value != null && value.length ) {\n\t\t\t\toptions[ option ] = value;\n\t\t\t}\n\t\t} );\n\n\t\treturn options;\n\t},\n\n\t_events: {\n\t\tkeydown: function( event ) {\n\t\t\tif ( this._start( event ) && this._keydown( event ) ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tkeyup: \"_stop\",\n\t\tfocus: function() {\n\t\t\tthis.previous = this.element.val();\n\t\t},\n\t\tblur: function( event ) {\n\t\t\tif ( this.cancelBlur ) {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._stop();\n\t\t\tthis._refresh();\n\t\t\tif ( this.previous !== this.element.val() ) {\n\t\t\t\tthis._trigger( \"change\", event );\n\t\t\t}\n\t\t},\n\t\tmousewheel: function( event, delta ) {\n\t\t\tif ( !delta ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !this.spinning && !this._start( event ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis._spin( ( delta > 0 ? 1 : -1 ) * this.options.step, event );\n\t\t\tclearTimeout( this.mousewheelTimer );\n\t\t\tthis.mousewheelTimer = this._delay( function() {\n\t\t\t\tif ( this.spinning ) {\n\t\t\t\t\tthis._stop( event );\n\t\t\t\t}\n\t\t\t}, 100 );\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t\"mousedown .ui-spinner-button\": function( event ) {\n\t\t\tvar previous;\n\n\t\t\t// We never want the buttons to have focus; whenever the user is\n\t\t\t// interacting with the spinner, the focus should be on the input.\n\t\t\t// If the input is focused then this.previous is properly set from\n\t\t\t// when the input first received focus. If the input is not focused\n\t\t\t// then we need to set this.previous based on the value before spinning.\n\t\t\tprevious = this.element[ 0 ] === $.ui.safeActiveElement( this.document[ 0 ] ) ?\n\t\t\t\tthis.previous : this.element.val();\n\t\t\tfunction checkFocus() {\n\t\t\t\tvar isActive = this.element[ 0 ] === $.ui.safeActiveElement( this.document[ 0 ] );\n\t\t\t\tif ( !isActive ) {\n\t\t\t\t\tthis.element.trigger( \"focus\" );\n\t\t\t\t\tthis.previous = previous;\n\n\t\t\t\t\t// support: IE\n\t\t\t\t\t// IE sets focus asynchronously, so we need to check if focus\n\t\t\t\t\t// moved off of the input because the user clicked on the button.\n\t\t\t\t\tthis._delay( function() {\n\t\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Ensure focus is on (or stays on) the text field\n\t\t\tevent.preventDefault();\n\t\t\tcheckFocus.call( this );\n\n\t\t\t// Support: IE\n\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\n\t\t\t// so we set a flag to know when we should ignore the blur event\n\t\t\t// and check (again) if focus moved off of the input.\n\t\t\tthis.cancelBlur = true;\n\t\t\tthis._delay( function() {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\tcheckFocus.call( this );\n\t\t\t} );\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._repeat( null, $( event.currentTarget )\n\t\t\t\t.hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\t\t\"mouseup .ui-spinner-button\": \"_stop\",\n\t\t\"mouseenter .ui-spinner-button\": function( event ) {\n\n\t\t\t// button will add ui-state-active if mouse was down while mouseleave and kept down\n\t\t\tif ( !$( event.currentTarget ).hasClass( \"ui-state-active\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._repeat( null, $( event.currentTarget )\n\t\t\t\t.hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\n\t\t// TODO: do we really want to consider this a stop?\n\t\t// shouldn't we just stop the repeater and wait until mouseup before\n\t\t// we trigger the stop event?\n\t\t\"mouseleave .ui-spinner-button\": \"_stop\"\n\t},\n\n\t// Support mobile enhanced option and make backcompat more sane\n\t_enhance: function() {\n\t\tthis.uiSpinner = this.element\n\t\t\t.attr( \"autocomplete\", \"off\" )\n\t\t\t.wrap( \"<span>\" )\n\t\t\t.parent()\n\n\t\t\t\t// Add buttons\n\t\t\t\t.append(\n\t\t\t\t\t\"<a></a><a></a>\"\n\t\t\t\t);\n\t},\n\n\t_draw: function() {\n\t\tthis._enhance();\n\n\t\tthis._addClass( this.uiSpinner, \"ui-spinner\", \"ui-widget ui-widget-content\" );\n\t\tthis._addClass( \"ui-spinner-input\" );\n\n\t\tthis.element.attr( \"role\", \"spinbutton\" );\n\n\t\t// Button bindings\n\t\tthis.buttons = this.uiSpinner.children( \"a\" )\n\t\t\t.attr( \"tabIndex\", -1 )\n\t\t\t.attr( \"aria-hidden\", true )\n\t\t\t.button( {\n\t\t\t\tclasses: {\n\t\t\t\t\t\"ui-button\": \"\"\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// TODO: Right now button does not support classes this is already updated in button PR\n\t\tthis._removeClass( this.buttons, \"ui-corner-all\" );\n\n\t\tthis._addClass( this.buttons.first(), \"ui-spinner-button ui-spinner-up\" );\n\t\tthis._addClass( this.buttons.last(), \"ui-spinner-button ui-spinner-down\" );\n\t\tthis.buttons.first().button( {\n\t\t\t\"icon\": this.options.icons.up,\n\t\t\t\"showLabel\": false\n\t\t} );\n\t\tthis.buttons.last().button( {\n\t\t\t\"icon\": this.options.icons.down,\n\t\t\t\"showLabel\": false\n\t\t} );\n\n\t\t// IE 6 doesn't understand height: 50% for the buttons\n\t\t// unless the wrapper has an explicit height\n\t\tif ( this.buttons.height() > Math.ceil( this.uiSpinner.height() * 0.5 ) &&\n\t\t\t\tthis.uiSpinner.height() > 0 ) {\n\t\t\tthis.uiSpinner.height( this.uiSpinner.height() );\n\t\t}\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar options = this.options,\n\t\t\tkeyCode = $.ui.keyCode;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase keyCode.UP:\n\t\t\tthis._repeat( null, 1, event );\n\t\t\treturn true;\n\t\tcase keyCode.DOWN:\n\t\t\tthis._repeat( null, -1, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_UP:\n\t\t\tthis._repeat( null, options.page, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_DOWN:\n\t\t\tthis._repeat( null, -options.page, event );\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_start: function( event ) {\n\t\tif ( !this.spinning && this._trigger( \"start\", event ) === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\t\tthis.spinning = true;\n\t\treturn true;\n\t},\n\n\t_repeat: function( i, steps, event ) {\n\t\ti = i || 500;\n\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay( function() {\n\t\t\tthis._repeat( 40, steps, event );\n\t\t}, i );\n\n\t\tthis._spin( steps * this.options.step, event );\n\t},\n\n\t_spin: function( step, event ) {\n\t\tvar value = this.value() || 0;\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\n\t\tvalue = this._adjustValue( value + step * this._increment( this.counter ) );\n\n\t\tif ( !this.spinning || this._trigger( \"spin\", event, { value: value } ) !== false ) {\n\t\t\tthis._value( value );\n\t\t\tthis.counter++;\n\t\t}\n\t},\n\n\t_increment: function( i ) {\n\t\tvar incremental = this.options.incremental;\n\n\t\tif ( incremental ) {\n\t\t\treturn $.isFunction( incremental ) ?\n\t\t\t\tincremental( i ) :\n\t\t\t\tMath.floor( i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1 );\n\t\t}\n\n\t\treturn 1;\n\t},\n\n\t_precision: function() {\n\t\tvar precision = this._precisionOf( this.options.step );\n\t\tif ( this.options.min !== null ) {\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\n\t\t}\n\t\treturn precision;\n\t},\n\n\t_precisionOf: function( num ) {\n\t\tvar str = num.toString(),\n\t\t\tdecimal = str.indexOf( \".\" );\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\n\t},\n\n\t_adjustValue: function( value ) {\n\t\tvar base, aboveMin,\n\t\t\toptions = this.options;\n\n\t\t// Make sure we're at a valid step\n\t\t// - find out where we are relative to the base (min or 0)\n\t\tbase = options.min !== null ? options.min : 0;\n\t\taboveMin = value - base;\n\n\t\t// - round to the nearest step\n\t\taboveMin = Math.round( aboveMin / options.step ) * options.step;\n\n\t\t// - rounding is based on 0, so adjust back to our base\n\t\tvalue = base + aboveMin;\n\n\t\t// Fix precision from bad JS floating point math\n\t\tvalue = parseFloat( value.toFixed( this._precision() ) );\n\n\t\t// Clamp the value\n\t\tif ( options.max !== null && value > options.max ) {\n\t\t\treturn options.max;\n\t\t}\n\t\tif ( options.min !== null && value < options.min ) {\n\t\t\treturn options.min;\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t_stop: function( event ) {\n\t\tif ( !this.spinning ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout( this.timer );\n\t\tclearTimeout( this.mousewheelTimer );\n\t\tthis.counter = 0;\n\t\tthis.spinning = false;\n\t\tthis._trigger( \"stop\", event );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar prevValue, first, last;\n\n\t\tif ( key === \"culture\" || key === \"numberFormat\" ) {\n\t\t\tprevValue = this._parse( this.element.val() );\n\t\t\tthis.options[ key ] = value;\n\t\t\tthis.element.val( this._format( prevValue ) );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"max\" || key === \"min\" || key === \"step\" ) {\n\t\t\tif ( typeof value === \"string\" ) {\n\t\t\t\tvalue = this._parse( value );\n\t\t\t}\n\t\t}\n\t\tif ( key === \"icons\" ) {\n\t\t\tfirst = this.buttons.first().find( \".ui-icon\" );\n\t\t\tthis._removeClass( first, null, this.options.icons.up );\n\t\t\tthis._addClass( first, null, value.up );\n\t\t\tlast = this.buttons.last().find( \".ui-icon\" );\n\t\t\tthis._removeClass( last, null, this.options.icons.down );\n\t\t\tthis._addClass( last, null, value.down );\n\t\t}\n\n\t\tthis._super( key, value );\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._super( value );\n\n\t\tthis._toggleClass( this.uiSpinner, null, \"ui-state-disabled\", !!value );\n\t\tthis.element.prop( \"disabled\", !!value );\n\t\tthis.buttons.button( value ? \"disable\" : \"enable\" );\n\t},\n\n\t_setOptions: spinnerModifer( function( options ) {\n\t\tthis._super( options );\n\t} ),\n\n\t_parse: function( val ) {\n\t\tif ( typeof val === \"string\" && val !== \"\" ) {\n\t\t\tval = window.Globalize && this.options.numberFormat ?\n\t\t\t\tGlobalize.parseFloat( val, 10, this.options.culture ) : +val;\n\t\t}\n\t\treturn val === \"\" || isNaN( val ) ? null : val;\n\t},\n\n\t_format: function( value ) {\n\t\tif ( value === \"\" ) {\n\t\t\treturn \"\";\n\t\t}\n\t\treturn window.Globalize && this.options.numberFormat ?\n\t\t\tGlobalize.format( value, this.options.numberFormat, this.options.culture ) :\n\t\t\tvalue;\n\t},\n\n\t_refresh: function() {\n\t\tthis.element.attr( {\n\t\t\t\"aria-valuemin\": this.options.min,\n\t\t\t\"aria-valuemax\": this.options.max,\n\n\t\t\t// TODO: what should we do with values that can't be parsed?\n\t\t\t\"aria-valuenow\": this._parse( this.element.val() )\n\t\t} );\n\t},\n\n\tisValid: function() {\n\t\tvar value = this.value();\n\n\t\t// Null is invalid\n\t\tif ( value === null ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If value gets adjusted, it's invalid\n\t\treturn value === this._adjustValue( value );\n\t},\n\n\t// Update the value without triggering change\n\t_value: function( value, allowAny ) {\n\t\tvar parsed;\n\t\tif ( value !== \"\" ) {\n\t\t\tparsed = this._parse( value );\n\t\t\tif ( parsed !== null ) {\n\t\t\t\tif ( !allowAny ) {\n\t\t\t\t\tparsed = this._adjustValue( parsed );\n\t\t\t\t}\n\t\t\t\tvalue = this._format( parsed );\n\t\t\t}\n\t\t}\n\t\tthis.element.val( value );\n\t\tthis._refresh();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.prop( \"disabled\", false )\n\t\t\t.removeAttr( \"autocomplete role aria-valuemin aria-valuemax aria-valuenow\" );\n\n\t\tthis.uiSpinner.replaceWith( this.element );\n\t},\n\n\tstepUp: spinnerModifer( function( steps ) {\n\t\tthis._stepUp( steps );\n\t} ),\n\t_stepUp: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( ( steps || 1 ) * this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tstepDown: spinnerModifer( function( steps ) {\n\t\tthis._stepDown( steps );\n\t} ),\n\t_stepDown: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( ( steps || 1 ) * -this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tpageUp: spinnerModifer( function( pages ) {\n\t\tthis._stepUp( ( pages || 1 ) * this.options.page );\n\t} ),\n\n\tpageDown: spinnerModifer( function( pages ) {\n\t\tthis._stepDown( ( pages || 1 ) * this.options.page );\n\t} ),\n\n\tvalue: function( newVal ) {\n\t\tif ( !arguments.length ) {\n\t\t\treturn this._parse( this.element.val() );\n\t\t}\n\t\tspinnerModifer( this._value ).call( this, newVal );\n\t},\n\n\twidget: function() {\n\t\treturn this.uiSpinner;\n\t}\n} );\n\n// DEPRECATED\n// TODO: switch return back to widget declaration at top of file when this is removed\nif ( $.uiBackCompat !== false ) {\n\n\t// Backcompat for spinner html extension points\n\t$.widget( \"ui.spinner\", $.ui.spinner, {\n\t\t_enhance: function() {\n\t\t\tthis.uiSpinner = this.element\n\t\t\t\t.attr( \"autocomplete\", \"off\" )\n\t\t\t\t.wrap( this._uiSpinnerHtml() )\n\t\t\t\t.parent()\n\n\t\t\t\t\t// Add buttons\n\t\t\t\t\t.append( this._buttonHtml() );\n\t\t},\n\t\t_uiSpinnerHtml: function() {\n\t\t\treturn \"<span>\";\n\t\t},\n\n\t\t_buttonHtml: function() {\n\t\t\treturn \"<a></a><a></a>\";\n\t\t}\n\t} );\n}\n\nvar widgetsSpinner = $.ui.spinner;\n\n\n\n\n}));","if (location.host.indexOf(\"test.somethingyoulove.com\")<0) {\n\tdocument.write('<script src=\"http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1\"></' + 'script>');\n}","var markerHandler = function() {\n\t\n\tfunction inputHandler(e) {\n\t\n\t}\n\t\n\treturn {\n\t\tInit: function(elm) {\n\t\t\t\n\t\t}\n\t}\n}();","var multiselect = function() {\n\tfunction updateLabel(selectbox, init) {\n\t\tvar label = \"Showing \"+ selectbox.selected.length + \" carriers\";\n\t\tif (selectbox.items.length == selectbox.selected.length) {\n\t\t\tlabel = \"Showing all carriers\";\n\t\t} else if (selectbox.selected.length == 1) {\n\t\t\tlabel = \"Showing 1 carrier\";\n\t\t}\n\t\t$(selectbox).find(\".multiselect-field\").html(label);\n\t}\n\tfunction setInitalCheckState(selectbox) {\n\t\tfor (i=0; i<selectbox.selected.length; i++) {\n\t\t\t$(\".multiselect-list li:nth-child(\"+(parseInt(selectbox.selected[i])+1)+\") input[type=checkbox]\").prop(\"checked\",true);\n\t\t}\n\t}\n\tfunction getChecked(selectbox) {\n\t\tvar tempChecked = [];\n\t\t$(selectbox).find(\"input[type=checkbox]\").each(function() {\n\t\t\tif ($(this).prop(\"checked\")) {\n\t\t\t\ttempChecked.push($(this).parent().index());\n\t\t\t}\n\t\t});\n\t\tselectbox.selected = tempChecked;\n\t\tconsole.log(\"currently checked\",selectbox.selected);\n\t}\n\tfunction setupListeners(selectbox) {\n\t\t$(selectbox.items).find(\"input[type=checkbox]\").bind(\"change\",function() {\n\t\t\tgetChecked(selectbox);\n\t\t\tupdateLabel(selectbox);\n\t\t});\n\t\t$(selectbox).find(\".multiselect-field\").bind(\"click\",function() {\n\t\t\t$(this).parent().toggleClass(\"open\");\n\t\t});\n\t}\n\treturn {\n\t\tInit: function() {\n\t\t\t$(\".multiselect\").each(function() {\n\t\t\t\tthis.selected = $(this).data(\"initially-selected\").split(\",\");\n\t\t\t\tthis.items = $(this).find(\".multiselect-list li\");\n\t\t\t\t\n\n\t\t\t\tupdateLabel(this);\n\t\t\t\tsetInitalCheckState(this);\n\t\t\t\tsetupListeners(this);\n\t\t\t});\n\t\t}\n\t}\n}();\nmultiselect.Init();\n","function people(e) {\n\t$(\".popover.people\").toggleClass(\"show\");\n\tif ($(e).hasClass(\"btn\")) {\n\t\tif ($(\"#spinner\").val() == 1) {\n\t\t\t$(\".btn.people p\").html($(\"#spinner\").val() + \" person\");\n\t\t} else {\n\t\t\t$(\".btn.people p\").html($(\"#spinner\").val() + \" persons\");\n\t\t}\n\t}\n}\n$(function() {\n\n\t$(\"#spinner\").spinner({\n\t\tmin: 1\n\t\t, max: 9\n\t});\n\t$(\"#spinner2\").spinner({\n\t\tmin: 0\n\t\t, max: 9,\n\t\tval:0\n\t});\n\t$(\"#spinnerCard\").spinner({\n\t\tmin: 0\n\t\t, max: numberTraveller\n\t});\n\t$('.ui-spinner-button').click(function() {\n\t\t$(this).siblings('input').change();\n\t});\n\n\t$(\"#spinner\").bind(\"change\",function() {\n\t\tvar thisValue=$(this).val();\n\t\t$(\"#spinner2\").spinner(\"option\",\"max\",thisValue);\n\t\tif ($(\"#spinner2\").val()>thisValue) {\n\t\t\t$(\"#spinner2\").val(thisValue);\n\t\t}\n\t});\n\n\t$(\".people\").on('click', '.ui-spinner-button', function (e) {\n\t\te.preventDefault();\n\t\tnumberTraveller = $(this).parent().find(\"input\").val();\n\t\tif (numberTraveller == 1) {\n\t\t\t$(\".cards .travellers\").html(\"For 1 traveller\");\n\t\t\t$(\".ticket_finder header .initial .summary\").html(\"Return trip, 1 traveller\");\n\t\t} else {\n\t\t\t$(\".cards .travellers\").html(\"For \"+numberTraveller+\" travellers\");\n\t\t\t$(\".ticket_finder header .initial .summary\").html(\"Return trip, \"+numberTraveller+\" travellers\");\n\t\t}\n\t\tif ($(\"#spinner\").val() == 1) {\n\t\t\t$(\".btn.peopleButton p\").html($(\"#spinner\").val() + \" person\");\n\t\t} else {\n\t\t\t$(\".btn.peopleButton p\").html($(\"#spinner\").val() + \" persons\");\n\t\t}\n\t\tvar minValue = parseInt($(this).parent().find(\"input\").spinner(\"option\",\"min\"));\n\t\tvar maxValue = parseInt($(this).parent().find(\"input\").spinner(\"option\",\"max\"));\n\t\tif (numberTraveller < minValue+1) {\n\t\t\t$(this).parent().find(\".ui-spinner-down\").css(\"opacity\", \"0.4\")\n\t\t} else if (numberTraveller >= maxValue) {\n\t\t\t$(this).parent().find(\".ui-spinner-up\").css(\"opacity\", \"0.4\")\n\t\t} else {\n\t\t\t$(this).parent().find(\".ui-spinner-down, .ui-spinner-up\").css(\"opacity\", \"1\")\n\t\t}\n\t\treturn false;\n\t});\n});","var searchHandler = function() {\n\tvar elementInFocus;\n\n\tvar journey = { \n\t\tstart: {\n\t\t\tposition: {}\n\t\t},\n\t\tend: {\n\t\t\tposition: {}\n\t\t}\n\t}\n\tvar prevJourney = jQuery.extend(true, {}, journey);\n\tfunction inputHandler(e) {\n\t\tvar searchFor = $(e.target).val();\n\t\tif (e.target.searchValue==searchFor && e.keyCode!=13) {\n\t\t\treturn;\n\t\t} \n\t\tif (typeof e.altKey != \"undefined\") $(\".tabNav.locations .nav li:contains(Network)\").trigger(\"click\");\n\n\t\t$(\".results.network\").html(\" \");\n\t\tbusStops([{city:{\"likenocase\":searchFor}},{country:{\"likenocase\":searchFor}}]).order(\"country,city\").each(function(busStop) {\n\t\t\tvar stop = document.createElement(\"li\");\n\t\t\tstop.innerHTML = \"<p>\"+busStop.city+\"</p>\";\n\t\t\t$(\".results.network\").append(stop);\n\t\t\t$(stop).unbind(\"click\");\n\t\t\t$(stop).bind(\"click\",resultsClickHandler);\n\t\t});\n\n\t\tif ($(e.target).attr(\"tabindex\")==1) {\n\t\t\tjourney.start.name = undefined;\n\t\t\tenableAllDestinations();\n\t\t}\n\n\t\te.target.searchValue=searchFor;\n\n\t\tif (e.keyCode == 13) {\n\n\t\t\t$(\".results.network li:containsNC(\"+searchFor+\")\").trigger(\"click\");\n\t\t\t$(e.target).blur();\n\t\t}\n\t}\n\tfunction resultsClickHandler(e) {\n\t\t\n\t\tvar sourceElm = parentWithTagName(e.target,\"li\");\n\t\tvar cityName = $(sourceElm).find(\"p\").html();\n\t\tvar targetLabel = $('.cityLabel h3:contains(\"'+cityName+'\")').parent().parent();\n\t\t// $(elementInFocus).val(cityName);\n\t\tif ($(elementInFocus).attr(\"tabindex\")==1) {\n\t\t\tjourney.start.name=cityName;\n\t\t\tif (typeof targetLabel[0]!=\"undefined\") {\n\t\t\t\tjourney.start.position.lat=targetLabel[0].marker.position.lat();\n\t\t\t\tjourney.start.position.lng=targetLabel[0].marker.position.lng();\n\t\t\t\tjourney.start.marker = targetLabel[0].marker;\n\t\t\t\t$(\".ticket_details .from\").html(journey.start.name);\n\t\t\t}\n\t\t} else {\n\t\t\tif (cityName==journey.start.name) {\n\t\t\t\tjourney.end.name='';\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tjourney.end.name=cityName;\n\t\t\tif (typeof targetLabel[0]!=\"undefined\") {\n\t\t\t\tjourney.end.position.lat=targetLabel[0].marker.position.lat();\n\t\t\t\tjourney.end.position.lng=targetLabel[0].marker.position.lng();\n\t\t\t\tjourney.end.marker = targetLabel[0].marker;\n\t\t\t\t$(\".ticket_details .to\").html(journey.end.name);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof targetLabel[0]==\"undefined\") { //update Markers to pull city out of cluster\n\t\t\tupdateMarkers();\n\t\t} else {\n\t\t\tgoogle.maps.event.trigger(targetLabel[0].marker, \"click\");\n\t\t}\n\t\t$(\".journey\").removeClass(\"expanded\");\n\t\t\n\t}\n\tfunction expandDrawer(e) {\n\t\t$(elementInFocus).removeClass(\"active\");\n\t\telementInFocus = e.target;\n\t\t$(elementInFocus).addClass(\"active\");\n\t\t$(\".journey\").addClass(\"expanded\");\n\t\tif (typeof elementInFocus.activeTab !=\"undefined\") {\n\t\t\t$(\".journey .locations ul.nav\").find(\"li:nth-child(\"+(elementInFocus.activeTab+1)+\")\").trigger(\"click\");\n\t\t} else {\n\t\t\tif ($(elementInFocus).attr(\"tabindex\")==1) {\n\t\t\t\t$(\".journey .locations ul.nav\").find(\"li:nth-child(1)\").trigger(\"click\");\n\t\t\t} else {\n\t\t\t\t$(\".journey .locations ul.nav\").find(\"li:nth-child(2)\").trigger(\"click\");\n\t\t\t}\n\t\t}\n\t\t// if ($(\".journey .locations .active\").html()==\"Network\") {\n\t\t// \tconsole.log(\"reset search\");\n\t\t// \tsearchHandler.activateSearch($(\".journey input.active\")[0]);\n\t\t// }\n\t}\n\tfunction checkIfSubmittable() {\n\t\tif (typeof journey.start.name != \"undefined\" && typeof journey.end.name!= \"undefined\") {\n\t\t\tif (!$(\".journey\").hasClass(\"submittable\") || (journey.start.name!=prevJourney.start.name ||journey.end.name!=prevJourney.end.name)) {\n\t\t\t\tconsole.log(\"submittable\",$(\".journey\"));\n\t\t\t\t$(\".journey\").addClass(\"submittable\");\n\t\t\t\tsetTimeout(repositionMapToJourney,100);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(\"not submittable\");\n\t\t\t$(\".journey\").removeClass(\"submittable\");\n\t\t}\n\t\tprevJourney = jQuery.extend(true, {}, journey);\n\t\tif (typeof journey.start.name != \"undefined\") {\n\t\t\tdisableUnavailableDestinations(journey);\n\t\t}\n\t}\n\treturn {\n\t\tactivateSearch: function(obj) {\n\t\t\t$(obj).focus();\n\t\t\tvar mockEvent = { target: obj };\n\t\t\tinputHandler(mockEvent);\n\t\t},\n\t\tsetElementFocus: function(elm) {\n\t\t\telementInFocus=elm[0];\n\t\t\t$(\".journey input[type=search]\").removeClass(\"active\");\n\t\t\telm.addClass(\"active\");\n\t\t},\n\t\tsetupStations: function() {\n\t\t\tbusStops().order(\"country,city\").each(function(busStop) {\n\t\t\t\tvar stop = document.createElement(\"li\");\n\t\t\t\tstop.innerHTML = busStop.city;\n\t\t\t\t$(\".results.network\").append(stop);\n\t\t\t});\n\t\t},\n\t\tInit: function() {\n\t\t\t$(\".journey input[type=search]\").each(function() {\n\t\t\t\tif ($(this).hasClass(\"active\")) elementInFocus=this;\n\t\t\t\t$(this).bind(\"keyup\",inputHandler);\n\t\t\t\t$(this).bind(\"focus\",expandDrawer);\n\t\t\t});\n\t\t\t$(\".options .results li\").unbind(\"click\").bind(\"click\",resultsClickHandler);\n\t\t},\n\t\tgetJourney: function() {\n\t\t\treturn { begin: journey.start.name, end: journey.end.name };\n\t\t},\n\t\tgetJourneyInformation: function() {\n\t\t\treturn journey;\n\t\t},\n\t\tfillInCity: function(obj) {\n\n\t\t\tif (elementInFocus.getAttribute(\"tabindex\")==2 && obj.title==journey.start.name) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof elementInFocus.marker != \"undefined\") {\n\t\t\t\tif (elementInFocus.marker.type==\"A\") {\n\t\t\t\t\ttargetIcon = imageCityBig;\n\t\t\t\t} else {\n\t\t\t\t\ttargetIcon = imageCitySmall;\n\t\t\t\t}\n\t\t\t\telementInFocus.marker.setIcon(targetIcon)\n\t\t\t\telementInFocus.marker.labelElm.removeClass(\"selected\");\n\t\t\t}\n\t\t\telementInFocus.marker = obj;\n\t\t\t$(elementInFocus).val(obj.title);\n\t\t\t// obj.setAnimation(google.maps.Animation.DROP);\n\t\t\tobj.setIcon(imageCitySelected);\n\t\t\tobj.labelElm.addClass(\"selected\");\n\t\t\tif (elementInFocus.getAttribute(\"tabindex\")==1) {\n\t\t\t\tjourney.start.name = obj.title;\n\t\t\t\t$(elementInFocus).removeClass(\"active\");\n\t\t\t\telementInFocus=$(\".journey input[tabindex=2]\")[0];\n\t\t\t\t$(elementInFocus).addClass(\"active\");\n\n\t\t\t\tjourney.start.name = obj.title;\n\t\t\t\tjourney.start.position.lat=obj.position.lat();\n\t\t\t\tjourney.start.position.lng=obj.position.lng();\n\t\t\t\tjourney.start.marker = obj;\n\t\t\t\t$(\".ticket_details .from\").html(journey.start.name);\n\t\t\t} else {\n\t\t\t\tstationEnd = obj.title;\n\t\t\t\tjourney.end.name = obj.title;\n\t\t\t\tjourney.end.position.lat=obj.position.lat();\n\t\t\t\tjourney.end.position.lng=obj.position.lng();\n\t\t\t\tjourney.end.marker = obj;\n\t\t\t\t$(\".ticket_details .to\").html(journey.end.name);\n\t\t\t}\n\n\t\t\tcheckIfSubmittable();\n\n\t\t}\n\t}\n}();\nsearchHandler.Init();\n","var tabNav = function() {\n\tvar activeTab;\n\tvar nav, options;\n\tfunction setupLinks() {\n\t\tnav.find(\"li\").bind(\"click\",function(e) {\n\n\t\t\t$(\".journey input.active\")[0].activeTab=$(this).index();\n\n\t\t\tnav.find(\"li\").removeClass(\"active\");\n\t\t\t$(this).addClass(\"active\");\n\t\t\t\n\t\t\t// if ($(this).html().indexOf('Network')>-1) {\n\t\t\t// \tsearchHandler.activateSearch($(\".journey input.active\")[0]);\n\t\t\t// }\n\n\t\t\toptions.find(\"ul\").removeClass(\"active\");\n\t\t\toptions.find(\"ul:nth-child(\"+($(this).index()+1)+\")\").addClass(\"active\");\n\t\t\tsetTimeout(function(options) {\n\t\t\t\toptions.scrollTop(0);\n\t\t\t},300,options); // waiting for transition\n\t\t});\n\t}\n\treturn {\n\t\tInit: function(elm) {\n\t\t\tnav = $(elm).find(\".nav\");\n\t\t\toptions = $(elm).find(\".options\");\n\t\t\tnav.find(\"li:first-child\").addClass(\"active\");\n\t\t\toptions.find(\"ul:first-child\").addClass(\"active\");\n\t\t\tsetupLinks();\n\t\t}\n\t}\n\t\n}();\n$(\".tabNav\").each(function() {\n\ttabNav.Init(this);\n})","var ticketDetails = function() {\n\tfunction back(e) {\n\t\tconsole.log(\"back request from\",e.target);\n\t\tif ($(e.target).hasClass(\"from\")) {\n\t\t\t$(\".journey input[tabindex=1]\").trigger(\"focus\");\n\t\t} else {\n\t\t\t$(\".journey input[tabindex=2]\").trigger(\"focus\");\n\t\t}\n\t\ttripLockedIn = false;\n\t\tdocument.location.hash=\"#\";\n\t\tupdateMarkers();\n\t\t$(\".journey .locations li:contains(Recent)\").trigger(\"click\");\n\t}\n\treturn {\n\t\tInit: function() {\n\t\t\t$(\".ticket_details\").find(\".to, .from\").bind(\"click\", back);\n\t\t}\n\t}\n}();\n$(function() {\n\tticketDetails.Init();\n})\n","var trainDirection = \"\";\nvar globalJSON;\nvar currency=\"\";\n\nvar outFile = \"birmingham-milan.json\";\nvar returnFile = \"milan-birmingham.json\";\nvar travellers = 1;\nfunction loadOutFile() {\n\tconsole.log(\"loading out file\");\n\t$(\".popover.time\").removeClass(\"filtered\");\n\t$(\"#slider-range\").slider('values',0,0);\n\t$(\".range input#start\").val(\"00:00\")\n\t$(\"#slider-range\").slider('values',1,24);\n\t$(\".range input#end\").val(\"24:00\");\n\t$(\"#departure2\").prop( \"checked\", true );\n\t$(\".popover.filters .overscroll\").scrollTop(0);\n\n\tvar jqxhr = $.getJSON( \"feeds/\"+outFile, {format: \"json\"}, function(data) {\n\t\tdeparture_data = data;\n\n\t\tglobalJSON = data;\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tdataHandler(data, { direction:trainDirection },'time');\n\t\n\t}).done(function() {\n\t\t// console.log( \"second success\" );\n\t})\n\t.fail(function(e) {\n\t\tconsole.log( \"error\",e );\n\t})\n\n};\n\nfunction loadReturnFile() {\n\t$(\".popover.time\").removeClass(\"filtered\");\n\t$(\"#slider-range\").slider('values',0,0);\n\t$(\".range input#start\").val(\"00:00\")\n\t$(\"#slider-range\").slider('values',1,24);\n\t$(\".range input#end\").val(\"24:00\");\n\t$(\"#departure2\").prop( \"checked\", true );\n\t$(\".popover.filters .overscroll\").scrollTop(0);\n\n\tvar jqxhr = $.getJSON( \"feeds/\"+returnFile, {format: \"json\"}, function(data) {\n\t\tdeparture_data = data;\n\n\t\tglobalJSON = data;\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tdataHandler(data, { direction:trainDirection },'time');\n\t\n\t}).done(function() {\n\t\t// console.log( \"second success\" );\n\t})\n\t.fail(function(e) {\n\t\tconsole.log( \"error\",e );\n\t})\n}\n\nfunction applyFilters() { //reset filters in fact\n\t$(\".popover.time\").removeClass(\"filtered\");\n\t$(\"#slider-range\").slider('values',0,0);\n\t$(\".range input#start\").val(\"00:00\")\n\t$(\"#slider-range\").slider('values',1,24);\n\t$(\".range input#end\").val(\"24:00\");\n\t$(\"#departure2\").prop( \"checked\", true );\n\t$(\".popover.filters .overscroll\").scrollTop(0);\n\n\tif ($(\".popover.time\").hasClass(\"return\")) {\n\t\ttargetFile = returnFile;\n\t} else {\n\t\ttargetFile = outFile;\n\t}\n\tconsole.log($(\"#cost2\").prop(\"checked\"), $(\"#duration2\").prop(\"checked\"));\n\torderby='time';\n\tif ($(\"#cost2\").prop(\"checked\")) {\n\t\torderby='price'\n\t} else if ($(\"#duration2\").prop(\"checked\")) {\n\t\torderby='duration'\n\t}\n\tvar jqxhr = $.getJSON( \"feeds/\"+targetFile, {format: \"json\"}, function(data) {\n\t\tdeparture_data = data;\n\n\t\tglobalJSON = data;\n\t\tvar timeStart = parseInt($(\".range input#start\").val().replace(\":\",\"\"));\n\t\tvar timeEnd = parseInt($(\".range input#end\").val().replace(\":\"),\"\");\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tdataHandler(data, false ,orderby,false);\n\t\tconsole.log(orderby)\n\t}).done(function() {\n\t\t// console.log( \"second success\" );\n\t})\n\t.fail(function(e) {\n\t\tconsole.log( \"error\",e );\n\t})\n}\nfunction doFilter() {\n\n\tif ($(\".popover.time\").hasClass(\"return\")) {\n\t\ttargetFile = returnFile;\n\t} else {\n\t\ttargetFile = outFile;\n\t}\n\tconsole.log($(\"#cost2\").prop(\"checked\"), $(\"#duration2\").prop(\"checked\"));\n\torderby='time';\n\tif ($(\"#cost2\").prop(\"checked\")) {\n\t\torderby='price'\n\t} else if ($(\"#duration2\").prop(\"checked\")) {\n\t\torderby='duration'\n\t} \n\tvar jqxhr = $.getJSON( \"feeds/\"+targetFile, {format: \"json\"}, function(data) {\n\t\tdeparture_data = data;\n\n\t\tglobalJSON = data;\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tvar timeStart = parseFloat($(\".range input#start\").val().replace(\":\",\"\"));\n\t\tvar timeEnd = parseFloat($(\".range input#end\").val().replace(\":\",\"\"));\n\t\tconsole.log(\"filtering time:\",timeStart,timeEnd);\n\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tdataHandler(data, false ,orderby,false);\n\t\tconsole.log(orderby)\n\t}).done(function() {\n\t\t// console.log( \"second success\" );\n\t})\n\t.fail(function(e) {\n\t\tconsole.log( \"error\",e );\n\t})\n}\nfunction quickFilter() {\n\tif ($(\".popover.time\").hasClass(\"return\")) {\n\t\ttargetFile = returnFile;\n\t} else {\n\t\ttargetFile = outFile;\n\t}\n\n\tvar orderby= 'time';\n\tif ($(\"#cost2\").prop(\"checked\")) {\n\t\torderby='price'\n\t} else if ($(\"#duration2\").prop(\"checked\")) {\n\t\torderby='duration'\n\t}\n\tvar jqxhr = $.getJSON( \"feeds/\"+targetFile, {format: \"json\"}, function(data) {\n\t\tdeparture_data = data;\n\n\t\tglobalJSON = data;\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tvar timeStart = parseInt($(\".range input#start\").val().replace(\":\",\"\"));\n\t\tvar timeEnd = parseInt($(\".range input#end\").val().replace(\":\",\"\"));\n\t\t// $(\".outbound ul.travel_list\").html(dataHandler(data));\n\t\tcount = dataHandler(data,false ,orderby,true);\n\t\t$(\".popover.filters button\").html(\"See \"+count+\" results\")\n\t}).done(function() {\n\t\t// console.log( \"second success\" );\n\t})\n\t.fail(function(e) {\n\t\tconsole.log( \"error\",e );\n\t})\n}\n\n$(function() {\n\tloadOutFile();\n});\n\nfunction dataHandler(json, options,sortField, quick) {\n\t\n\tif (typeof json == \"undefined\") {\n\t\tjson = globalJSON;\n\t\tif (typeof json == \"undefined\") return false;\n\t}\n\tvar departures = TAFFY(json);\n\n\tif ($(\".toggle.direct .right\").hasClass(\"current\")) {\n\t\tvar direct = { leg_count:1 };\n\t} else {\n\t\tvar direct = { leg_count:{gte:1}}\n\t}\n\n\tvar timeStart = parseInt($(\".range input#start\").val().replace(\":\",\"\"));\n\tvar timeEnd = parseInt($(\".range input#end\").val().replace(\":\",\"\"));\n\n\tif (quick) {\n\t\tvar temp =  TAFFY(json);\n\t\tvar count = temp({time:{gte:timeStart}},{time:{lt:timeEnd}},direct).count();\n\t\tconsole.log(temp({time:{gte:timeStart}},{time:{lt:timeEnd}},direct) );\n\t\treturn count;\n\t}\n\n\n\t$(\".filter_drawer button\").html(\"See \"+departures().count()+\" results\");\n\t\n\tvar cheapestDepartureItem = departures().order(\"price\").first();\n\t\n\t// var sortField = '';\n\n\tdocument.querySelector(\".time .cards ul\").innerHTML=\"\";\n\tvar tripCount=0;\n\t\n\tdepartures({time:{gte:timeStart}},{time:{lt:timeEnd}},direct).order(sortField).each(function(journey) {\n\t\tvar time = pad(journey.time,4);\n\t\t// console.log(time);\n\t\tvar tempDate=(now.getMonth()+\"/\"+now.getDate()+\"/\"+now.getFullYear()+\" \"+time.substring(0,2)+\":\"+time.substring(2,4)+\":00\");\n\n\t\ttempDate=new Date(tempDate);\n\t\t// var timeAdd = tripCount*incrementMinutes;\n\t\tvar tripTime= tempDate; /*new Date(tempDate.getTime() + timeAdd);*/\n\t\tvar tripEndTime = new Date(tripTime.getTime() + journey.duration * 60000 );\n\n\t\tvar dLi = document.createElement(\"li\");\n\t\tdLi.journeyData=journey;\n\t\tdLi.addEventListener(\"click\", cardClickHandler);\n\t\t\n\t\tvar price = Math.round(journey.price/2);\n\t\tbasePrice = price;\n\t\t\n\t\tif (tripCount>7) {\n\t\t\tvar addClass=\"\"\n\t\t} else {\n\t\t\tvar addClass=\"goes\";\n\t\t}\n\t\t// console.log(journey.price, cheapestDepartureItem.price);\n\t\tif (journey.price==cheapestDepartureItem.price) {\n\t\t\tdLi.className=\"cheapest \"+addClass;\n\t\t} else {\n\t\t\tdLi.className=\"regular \"+addClass;\n\t\t}\n\n\t\tvar transferMessage;\n\t\tif (journey.leg.length!=1) {\n\t\t\ttransferMessage=(journey.leg.length-1)+\" transfers\";\n\t\t} else {\n\t\t\ttransferMessage=\"Direct\";\n\t\t}\n\n\t\tvar duration = {};\n\t\tduration.hours=Math.floor(journey.duration/60);\n\t\tduration.minutes=journey.duration-(duration.hours * 60);\n\t\t\n\n\t\tvar depTime = pad(tripTime.getHours(),2)+':'+pad(tripTime.getMinutes(),2);\n\t\tvar arrTime = pad(tripEndTime.getHours(),2)+':'+pad(tripEndTime.getMinutes(),2);\n\t\t// var ampmDep = tripTime.getHours() >= 12 ? 'pm' : 'am';\n\t\t// var ampmArr = tripTime.getHours() >= 12 ? 'pm' : 'am';\n\t\tdepTimeAMPM = formatAMPM(tripTime);\n\t\tarrTimeAMPM = formatAMPM(tripEndTime);\n\t\t\n\n\t\tif (journey.seats_left<9) {\n        \tcarrierInfo='<div class=\"hero\"><p>Megabus<br/><span>Only '+journey.seats_left+' seats left</span></p></div>';\n        } else {\n        \tcarrierInfo='<div class=\"hero\"><p>Megabus</p></div>';\n        }\n        var journeyStops='<ul>';\n        for (i=0;i<journey.leg.length;i++) {\n\t    \tfor (a=0;a<journey.leg[i].stop.length-1;a++) {\n\t    \t\tvar classname=\"stop\"\n\t    \t\tif (a==0) {\n\t    \t\t\tclassname=\"stop newleg\"\n\t    \t\t}\n\t    \t\tjourneyStops+='<li class=\"'+classname +'\" title=\"'+journey.leg[i].stop[a].city+'\"></li>';\n\t    \t}\n\t    }\n\t    journeyStops+='<li class=\"stop\" title=\"'+journey.arrival_city+'\"></li></ul>'\n\t\tticketHTML=\t'<div class=\"container\"><header class=\"deptime\" data-departure=\"'+depTime+'\" data-arrival=\"'+arrTime+'\" data-duration=\"'+journey.duration+'\">\n                           <div class=\"left\"><p>'+depTimeAMPM+' <img src=\"img/arrowright.svg\"> '+arrTimeAMPM+'</p>\n                            <span class=\"duration\">'+duration.hours+'h '+duration.minutes+'m, '+transferMessage+'</span></div>\n                            ' + carrierInfo +'\n                            <div class=\"right\"><div class=\"price\" data-price=\"'+price+'\">'+currency+price+'</div>\n                            <div class=\"travellers\">For '+numberTraveller+' traveller(s)</div></div>\n                        </header>';  \n\tticketHTML+=\t\t'<div class=\"timetable\">\n                            <div class=\"description\">\n                                <div class=\"departure\">'+depTimeAMPM+'\n                                    <br/><span class=\"stationlink\">'+journey.departure_city+', '+journey.departure_station+'</span></div>\n                                <div class=\"change\">'+(journey.leg.length-1)+' transfers</div>\n                                <div class=\"destination\">'+arrTimeAMPM+'\n                                    <br/><span class=\"stationlink\">'+journey.arrival_city+', '+journey.arrival_station+'</span></div>\n                            </div>\n                            <div class=\"route\">\n                            \t'+ journeyStops +'\n                            </div>\n                        </div>\n                         <footer>\n                         \t<div class=\"full_route\">\n                         \t\t<a href=\"#\" onclick=\"openItineraryDrawer(this);return false;\">View full route</a>\n                         \t</div>\n                            <div class=\"facilities\">\n                            \tOn-board services:\n                            \t<ul>\n                            \t\t<li><img src=\"img/facilities_wifi.svg?1\"></li>\n                            \t\t<li><img src=\"img/facilities_assisted.svg?1\"></li>\n                            \t\t<li><img src=\"img/facilities_power.svg?1\"></li>\n                            \t\t<li><img src=\"img/facilities_bicycle.svg?1\"></li>\n                            \t\t<li><img src=\"img/facilities_drink.svg?1\"></li>\n                                </ul>\n                            </div>\n                        \t<div class=\"cta\">\n                        \t\t<button type=\"button\" class=\"small\" onclick=\"selectTicket(this)\">Select ticket</button>\n                        \t</div>\n                        </footer>';\n        dLi.innerHTML=ticketHTML;\n\t\tdocument.querySelector(\".time .cards ul\").appendChild(dLi);\n\t\ttripCount++;\t\t\n\t});\n\tif (typeof endObj != \"undefined\") scrollEndHandler(endObj);\n\t$(\".filter_drawer button\").html(\"See \"+tripCount+\" results\")\n\tif ($(\".ticket_finder\").hasClass(\"show\")) {\n    \tsetTimeout(time,200);\n\t}\n\t// return scheduleHTML;\n}\n\nfunction formatMinutes(min) {\n\tvar hours = Math.floor(min/60);\n\tvar minutes = min - hours * 60\n\treturn hours +\"h \"+ minutes+\"m\";\n}\nfunction clone(obj) {\n\tif (null == obj || \"object\" != typeof obj) return obj;\n\tvar copy = obj.constructor();\n\tfor (var attr in obj) {\n\t\tif (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n\t}\n\treturn copy;\n}\nfunction formatPrice(price) {\n\tvar formattedPrice;\n\tif (price<0) {\n\t\tformattedPrice = \"- \" +currency + Math.abs(price).toFixed(2);\n\t} else {\n\t\tformattedPrice = \"+ \" +currency + price.toFixed(2);\n\t}\n\treturn formattedPrice;\n}\nfunction updatePriceList() {\n\t$(\".\"+trainDirection+\" ul.travel_list li\").each(function(i, obj) {\n\t\t// console.log(obj)\n\t\t$(\".price\",$(obj)).html(formatPrice(calculatePriceDifference(obj.journeyData)));\n\t});\n}\n","function pad(n, width, z) {\n  z = z || '0';\n  n = n + '';\n  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n}\n\nfunction addDays(date, days) {\n    var result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n}\nfunction transformMatrixToArray(matrix) {\n\tvar matrixArray = matrix.replace(\"matrix(\",\"\").replace(\")\",\"\").split(\",\");\n\treturn matrixArray;\n}\nfunction hasParentWithClass(obj, className) {\n\tif (obj.tagName==\"BODY\") {\n\t\treturn false;\n\t}\n\tif ($(obj).hasClass(className)) {\n\t\treturn true;\n\t} else {\n\t\treturn hasParentWithClass(obj.parentNode,className);\n\t}\n}\nfunction parentWithTagName(obj, tagName) {\n\tif (obj.tagName==\"BODY\") {\n\t\treturn false;\n\t}\n\tvar objTagName=obj.tagName;\n\tif (objTagName.toLowerCase()==tagName.toLowerCase()) {\n\t\treturn obj;\n\t} else {\n\t\treturn parentWithTagName(obj.parentNode,tagName);\n\t}\n}\nfunction formatMinutes(min) {\n\tvar hours = Math.floor(min/60);\n\tvar minutes = min - hours * 60\n\treturn hours +\"h \"+ minutes+\"m\";\n}\nfunction formatPrice(price) {\n\tvar formattedPrice;\n\tif (price<0) {\n\t\tformattedPrice = \"- \" +Math.abs(price).toFixed(2);\n\t} else {\n\t\tformattedPrice = \"+ \" + price.toFixed(2);\n\t}\n\treturn formattedPrice;\n}\nfunction clearAllIntervals(){\n\tif (typeof clearAllIntervals.last == 'undefined' ) {\n    \tclearAllIntervals.last = setTimeout(\"||void\",0); // Opera || IE other browsers accept \"\" or \"void\"\n    }\n    var mx = setInterval(\"||void\",0);\n    for (var i=clearAllIntervals.last; i<=mx; i++) {\n    \tclearInterval(i);\n    }\n\tclearAllIntervals.last = i;\n}\nclearAllIntervals();\nfunction generateRandomNumb(min, max) {\n    return Math.floor(Math.random() * (max - min) + min);\n}\nfunction addCSSRule(e) {\n    -1 == $.inArray(e, dynamicCSSRules) && ($(\"head\").append(\"<style>\" + e + \"</style>\"), dynamicCSSRules.push(e))\n}\nfunction addCSSRule(rule) {\n    if ($.inArray(rule, dynamicCSSRules) == -1) {\n        $('head').append('<style>' + rule + '</style>');\n        dynamicCSSRules.push(rule);\n    }\n}\nfunction isElementInViewport(el) {\n\tif (typeof jQuery === \"function\" && el instanceof jQuery) {\n\t\tel = el[0];\n\t}\n\tvar rect = el.getBoundingClientRect();\n\treturn (\n\t\trect.left >= 0 &&\n\t\trect.right <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */\n\t);\n}\nfunction formatAMPM(date) {\n\tvar hours = date.getHours();\n\tvar minutes = date.getMinutes();\n\t// var ampm = hours >= 12 ? 'PM' : 'AM';\n\t// hours = hours % 12;\n\t// hours = hours ? hours : 12; // the hour '0' should be '12'\n\tminutes = minutes < 10 ? '0'+minutes : minutes;\n\treturn hours + ':' + minutes;\n\t// var strTime = hours + ':' + minutes + ' <span class=\"ampm\">' + ampm + '</span>';\n\t// return date;\n}\n$(\".toggle .element\").on(\"click\", function() {\n    $(this).parent().find(\".element\").removeClass(\"current\");\n    $(this).addClass(\"current\");\n    $(this).is(\".right\") ? ($(\"#jrange\").addClass(\"double\"), $(\"#calendar\").addClass(\"double\").removeClass(\"single\")) : ($(\"#jrange\").removeClass(\"double\"), $(\"#calendar\").addClass(\"single\").removeClass(\"double\"))\n});\n$.extend($.expr[\":\"], {\n\"containsNC\": function(elem, i, match, array) {\nreturn (elem.textContent || elem.innerText || \"\").toLowerCase().indexOf((match[3] || \"\").toLowerCase()) >= 0;\n}\n});"],"sourceRoot":"/source/"}