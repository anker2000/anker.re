function map_range(t,e,r,n,i){return n+(i-n)*(t-e)/(r-e)}function hexToRgb(t,e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),n=function(){return void 0==this.alpha?"rgb("+this.r+", "+this.g+", "+this.b+")":(this.alpha>1?this.alpha=1:this.alpha<0&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")")};return void 0==e?r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),toString:n}:null:(e>1?e=1:0>e&&(e=0),r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),alpha:e,toString:n}:null)}function rgbToHex(t,e,r){function n(t){var e=t.toString(16);return 1==e.length?"0"+e:e}if(void 0==e||void 0==r){if("string"==typeof t){var i=/^rgb[a]?\(([\d]+)[ \n]*,[ \n]*([\d]+)[ \n]*,[ \n]*([\d]+)[ \n]*,?[ \n]*([.\d]+)?[ \n]*\)$/i.exec(t);return rgbToHex(parseInt(i[1]),parseInt(i[2]),parseInt(i[3]))}return void 0==t.r||void 0==t.g||void 0==t.b?null:rgbToHex(t.r,t.g,t.b)}var a=t;return"#"+n(a)+n(e)+n(r)}function rgbPercentage(t){return t.r=t.r/255,t.b=t.b/255,t.g=t.g/255,t}function colorIntensity(t){return console.log("intensity",t),(t.r/255+t.g/255+t.b/255)/3}var fps={startTime:0,frameNumber:0,average:60,framesCounted:60,secondsCounted:1,getFPS:function(){this.frameNumber++;var t=(new Date).getTime(),e=(t-this.startTime)/1e3,r=Math.floor(this.frameNumber/e);return e>1&&(this.framesCounted+=r,this.secondsCounted++,this.startTime=(new Date).getTime(),this.frameNumber=0,this.average=this.framesCounted/this.secondsCounted),r},reset:function(){this.framesCounted=0,this.secondsCounted=0}};
var animateText=function(){function e(e){var n=$(e.headline);n.each(function(n,t){if(Math.abs(e.proximity<.15)){var a=map_range(Math.abs(e.proximity),0,.15,1,0);TweenMax.to(t.parentNode,.5,{opacity:a,onComplete:function(){}})}else{var a=0;TweenMax.to(t.parentNode,.5,{opacity:a,onComplete:function(){}})}TweenMax.to(t,5,{y:30*Math.abs(e.proximity),ease:Power4.easeOut,onComplete:function(){}})})}return{register:function(n){n.proximity=.25;var t=document.createElement("div");t.className="current_project",document.body.appendChild(t);var a=document.createElement("button");a.className="cta",a.innerHTML="See more";var o=document.createElement("h2");o.innerHTML='<a href="#">'+n.name+"</a>",t.appendChild(o),n.headline=o,$(".current_project h2").scalem({maxSize:390}),$(".projects").bind("scroll",function(){e(n)}),t.ref=n.ref,e(n),setTimeout(e,1e3,n)},animateHeadline:function(e,n){var t=e.headline;n&&console.log(t)},render:function(){for(i=0;i<sections.length;i++)scrollHandler(sections[i])}}}();
function addPhone(e,o,a,i,s,r,n,t){var l=new $.Deferred,d=new THREE.Group,E=new THREE.PlaneGeometry(.55,1,1),c=new THREE.Mesh(E,a);c.receiveShadow=!1,c.position.z=.022,c.position.y=.05,d.add(c);var m=new THREE.Mesh(E,i);return m.receiveShadow=!1,m.position.z=.0225,m.position.y=.05,d.add(m),r.load("models/iphones7.json",function(a,i){var s=new THREE.MeshPhongMaterial(i[0]),E=new THREE.Mesh(a,s);E.position.y=-.6,E.castShadow=!0,E.receiveShadow=!0,d.add(E),E.traverse(function(e){d.position.y=-5,d.position.z=-1,E.material.emissive.r=n.r/255,E.material.emissive.g=n.g/255,E.material.emissive.b=n.b/255,E.material.color.r=t.r/255,E.material.color.g=t.g/255,E.material.color.b=t.b/255}),r.load("models/iphone-back.json",function(a,i){var s=new THREE.MeshPhongMaterial(i[0]),r=new THREE.Mesh(a,s);r.position.y=-.6,r.castShadow=!0,r.receiveShadow=!0,d.add(r),r.traverse(function(a){a.geometry.computeVertexNormals(),d.position.y=-5,d.position.z=-1,r.material.emissive.r=n.r/255,r.material.emissive.g=n.g/255,r.material.emissive.b=n.b/255,r.material.color.r=t.r/255,r.material.color.g=t.g/255,r.material.color.b=t.b/255,r.material.shininess=10,d.position.z=o.z,d.position.y=o.y,d.position.x=o.x,d.scale.set(30,30,30),d.castShadow=!0,d.rotation.x=e.x,d.rotation.y=e.y,d.rotation.z=e.z,l.resolve(d)})})}),l.promise()}function addLaptop(e,o,a,i,s,r,n,t){var l=new $.Deferred,d=new THREE.Group,E=new THREE.Object3D;console.log("rotation y",e.y);var c=(new THREE.MeshStandardMaterial({side:THREE.DoubleSide,color:16777215,metalness:.5,roughness:1}),new THREE.Object3D);return r.load("models/screen-back.json",function(n,t){var m=new THREE.MeshPhongMaterial(t[0]),p=new THREE.Mesh(n,m);p.position.y=0,p.position.x=-.5,p.position.z=0,p.castShadow=!0,m.shininess=.2,p.traverse(function(e){e instanceof THREE.Mesh&&e.geometry.computeVertexNormals(),p.material.side=THREE.DoubleSide;E.add(p)}),console.log("loaded screen back 1"),r.load("models/screen-front.json",function(n,t){var m=new THREE.MeshStandardMaterial({side:THREE.DoubleSide,color:2236962,emissive:0,metalness:.7,roughness:.2,envMap:s}),p=new THREE.Mesh(n,m);p.position.y=0,p.position.x=-.5,p.position.z=0;var h={r:0,g:0,b:0};p.castShadow=!0,E.add(p);var w=new THREE.PlaneGeometry(8.7,5.8,1),v=new THREE.Mesh(w,a);v.position.z=-3.16,v.position.y=3.3,v.rotation.x=de2ra(1),E.add(v);var g=new THREE.Mesh(w,i);g.receiveShadow=!0,g.position.z=-3.16,g.position.y=3.3,g.rotation.x=de2ra(1),E.add(g);var y=new THREE.BoxBufferGeometry(200,200,200),H=new THREE.MeshBasicMaterial({color:16777215});mesh=new THREE.Mesh(y,H),E.position.z=3.1,c.add(E),c.position.z=-3,c.position.y=0,c.rotation.x=de2ra(90),d.add(c),console.log("loaded screen front 2"),r.load("models/keyboard.json",function(i,s){var n=new THREE.MeshStandardMaterial({side:THREE.DoubleSide,color:11184810,metalness:.2,roughness:1}),t=new THREE.Mesh(i,n);t.position.x=-.5,t.castShadow=!0,d.add(t),console.log("loaded keyboard 3"),r.load("models/keys.json",function(i,s){var n=new THREE.MeshPhongMaterial(s[0]),t=new THREE.Mesh(i,n);t.position.y=.005,t.position.x=-.5,t.position.z=0,t.castShadow=!1;var E={r:0,g:0,b:0},m=E;t.material.side=THREE.DoubleSide,t.material.specular.r=E.r/255,t.material.specular.g=E.g/255,t.material.specular.b=E.b/255,t.material.emissive.r=m.r/255,t.material.emissive.g=m.g/255,t.material.emissive.b=m.b/255,t.material.shininess=15,d.add(t),console.log("loaded keys 4"),r.load("models/keys-top.json",function(i,s){var r=new THREE.MeshPhongMaterial(s[0]),n=new THREE.Mesh(i,r);n.position.y=.005,n.position.x=-.5,n.position.z=0,n.castShadow=!0;var t={r:0,g:0,b:0},E={r:15,g:15,b:15};n.material.side=THREE.DoubleSide,n.material.specular.r=t.r/255,n.material.specular.g=t.g/255,n.material.specular.b=t.b/255,n.material.emissive.r=E.r/255,n.material.emissive.g=E.g/255,n.material.emissive.b=E.b/255,n.material.shininess=21,d.scale.set(6.25,6.25,6.25),d.add(n),console.log(o),d.position.z=o.z,d.position.y=o.y,d.position.x=o.x,d.rotation.x=e.x,d.rotation.y=e.y,console.log("rotation y",e.y),d.rotation.z=e.z,d.screen=c,console.log("screenMaterial",a),console.log("loaded keys top 5"),l.resolve(d)})})})})}),l.promise()}
function addProject(e,o){function n(){i.screenWidth=screenWidthFromDistance(camera.position.z),console.log(i.screenWidth)}var a=new THREE.Group,i={};$(window).bind("resize",n),n();for(var d=new THREE.JSONLoader,s=(new THREE.MeshBasicMaterial({color:16777215}),$(e).find("video")),c=0;c<s.length;c++)s[c].pause(),a.video=s[c];var l=(new THREE.CubeTextureLoader).load(["models/environment2.jpg","models/environment2.jpg","models/environment2.jpg","models/environment2.jpg","models/environment2.jpg","models/environment2.jpg"]);l.format=THREE.RGBFormat;var h=new Array,p=$(e)[0].children;for(im=0;im<p.length;im++)"IMG"!=p[im].tagName&&"VIDEO"!=p[im].tagName||h.push(customMaterial(p[im]));var u=new THREE.MeshPhongMaterial({color:16777215});u.specular.r=1,u.specular.g=1,u.specular.b=1,u.transparent=!0,u.opacity=.05,u.shininess=20,u.envMap=l,u.reflectivity=5,u.combine=THREE.MixOperation;var m=hexToRgb($(e).data("device-light")),f=hexToRgb($(e).data("device-dark"));if(a.elm=e,a.name=$(e).find("h2").html(),a.tween=[],a.loaded=0,a.ref=e,$(e).hasClass("mobile")){var y=new THREE.Group;addPhone({x:de2ra(60),y:de2ra(-140),z:de2ra(30)},{x:-10,y:4,z:-10},h[1],u,l,d,f,m).done(function(e){e.startRotationPoint=60,y.add(e),a.loaded+=.333333,a.tween.push(TweenMax.to(e.position,3.5,{y:e.position.y-1,yoyo:!0,repeat:-1,delay:0,ease:Power2.easeInOut,onComplete:function(){}}))}),addPhone({x:de2ra(50),y:de2ra(35),z:de2ra(-80)},{x:15,y:1,z:-10},h[0],u,l,d,f,m).done(function(e){a.tween.push(TweenMax.to(e.position,3.5,{y:e.position.y-1,yoyo:!0,repeat:-1,delay:.5,ease:Power2.easeInOut,onComplete:function(){}})),e.startRotationPoint=50,y.add(e),a.loaded+=.333333}),addPhone({x:de2ra(120),y:de2ra(0),z:de2ra(-60)},{x:45,y:-11,z:-10},h[2],u,l,d,f,m).done(function(e){a.tween.push(TweenMax.to(e.position,3.5,{y:e.position.y-1,yoyo:!0,repeat:-1,delay:1.5,ease:Power2.easeInOut,onComplete:function(){}})),e.startRotationPoint=120,y.add(e),a.loaded+=.333333}),y.position.y=5,y.position.z=15,y.position.x=-12,y.begin=function(){},y.end=function(){},y.startRotationPoint=12,a.add(y)}else $(e).hasClass("desktop")&&(console.log("print out",h[0],h[1]),addLaptop({x:de2ra(60),y:de2ra(0),z:de2ra(0)},{x:0,y:-40,z:10},h[0],u,l,d,f,m).done(function(e){a.loaded+=1.5,e.startRotationPoint=0,e.opacity=0,e.begin=function(){console.log("macbook open");TweenMax.to(e.screen.rotation,1,{x:-de2ra(20),delay:.75,ease:Power4.easeInOut})},e.end=function(){TweenMax.to(e.screen.rotation,1,{x:de2ra(90),ease:Power4.easeInOut})},a.add(e),1==a.loaded&&scrollHandler(),a.kickstart&&e.begin(),console.log("macbook added")}));return a.updateRotation=function(){if(Math.abs(this.proximity)<.1)for(this.video&&this.video.play(),t=0;t<this.tween.length;t++)this.tween[t].play();else for(this.video&&this.video.pause(),t=0;t<this.tween.length;t++)this.tween[t].pause();try{if(this.name,this.type,"Group"==this.children[0].children[0].type){var e=this.children[0].startRotationPoint+100*this.proximity;for(r=0;r<this.children[0].children.length;r++)this.children[0].children[r].rotation.x=de2ra(this.children[0].children[r].startRotationPoint+200*this.proximity)}else var e=this.children[0].startRotationPoint+100*this.proximity;this.children[0].rotation.y=de2ra(e)}catch(e){}},a.updatePosition=function(){this.position.y=a.count*-1*screenWidthFromDistance(200)},a.start=function(t){if("undefined"==typeof this.loaded||"undefined"==typeof a.headline)return setTimeout(function(){a.start()},50),!1;$(a.headline.parentNode).addClass("active"),$("body").css("background",$(e).data("bg-dark")),$("body").css("color",$(e).data("text-color")),$("button.cta .arrow").css("background-color",$(e).data("text-color")),setTimeout(function(){$("button.cta").removeClass("off").css("color",$(e).data("text-color"))},1500),$("nav .toggle span").css("background-color",$(e).data("text-color")),mainLight.color=rgbPercentage(hexToRgb($(e).data("bg-dark")));var o=colorIntensity(hexToRgb($(e).data("bg-light")));TweenMax.to(groundMaterial,1,{opacity:map_range(o,0,1,.3,.04),onComplete:function(){}});for(var n=0;n<a.children.length;n++)"undefined"!=typeof a.children[n].begin&&a.children[n].begin();a.kickstart=!0},a.end=function(){for(var e=0;e<a.children.length;e++)"undefined"!=typeof a.children[e].end&&a.children[e].end();$("button.cta").addClass("off"),"object"==typeof a.headline&&$(a.headline.parentNode).removeClass("active")},o.add(a),a.checkLoad=function(){a.loaded>.98?(animateText.register(a),setTimeout(function(){$(".devices canvas").css("opacity",1)},1250),scrollHandler()):setTimeout(a.checkLoad,100)},a.checkLoad(),setTimeout(function(e){e.position.y=e.count*-1*screenWidthFromDistance(200)},100,a),a}
function customMaterial(a){console.log(a);var e=new THREE.MeshBasicMaterial({color:16777215});if("IMG"==a.tagName)var r=(new THREE.TextureLoader).load(a.src);else if("VIDEO"==a.tagName)var r=new THREE.VideoTexture(a);return r.minFilter=THREE.LinearFilter,r.magFilter=THREE.LinearFilter,r.format=THREE.RGBFormat,r.wrapS=THREE.ClampToEdgeWrapping,r.wrapT=THREE.ClampToEdgeWrapping,e.map=r,e}
function init(){setEnvironment(),setLights(),setTimeout(function(){scrollHandler(),animate(),$("section").each(function(e,n){sections.push(addProject(n,stage)),sections[e].count=e})},1e3)}function getProximity(e){if($(".projects")[0].scrollHeight>$(".projects")[0].scrollWidth)var n=$(".projects").scrollTop()/$(".projects")[0].scrollHeight;else var n=$(".projects").scrollLeft()/$(".projects")[0].scrollWidth;return e-n*sections.length}function scrollHandler(){if(scrollPercentage=$(".projects").scrollTop()/($(".projects")[0].scrollHeight-$(window).innerHeight()),progression=scrollPercentage*sections.length,activeSection=Math.floor(progression),activeSection==sections.length&&(activeSection-=1),activeSection!=prevActiveSection)for(i=0;i<sections.length;i++)if(i==activeSection)for(sections[activeSection].start(),no=0;no<sections[i].tween.length;no++)sections[i].tween[no].resume();else for(sections[i].end(),no=0;no<sections[i].tween.length;no++)sections[i].tween[no].pause();for(i=0;i<sections.length;i++)sections[i].proximity=getProximity(i),sections[i].updateRotation(),sections[i].proximity>-.75&&sections[i].proximity<.75?sections[i].visible=!0:sections[i].visible=!0;prevActiveSection=activeSection;var e=0-scrollPercentage*(screenWidthFromDistance(200)*(sections.length-1));TweenMax.to(stage.position,.75,{ease:Power4.easeOut,y:-1*e})}function setEnvironment(){var e=window.devicePixelRatio,n=document.createElement("div");n.setAttribute("class","content"),document.getElementsByClassName("devices")[0].appendChild(n),camera=new THREE.PerspectiveCamera(setFOV(),window.innerWidth/window.innerHeight,1,5e3),camera.position.z=120,scene=new THREE.Scene,stage=new THREE.Group,scene.add(stage),$(".projects").bind("scroll",scrollHandler);var i=!1;e>1&&(i=!1),renderer=new THREE.WebGLRenderer({alpha:!0,antialias:i}),renderer.setClearColor(0,0),renderer.setPixelRatio(2),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,n.appendChild(renderer.domElement);var o=renderer.domElement;o.style.position="absolute",window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){for(windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),camera.fov=setFOV(),scrollHandler(),i=0;i<sections.length;i++)sections[i].updatePosition()}function onDocumentMouseMove(e){if("undefined"==typeof e)var e={clientX:storedMouse.x,clientY:storedMouse.y};storedMouse.x=e.clientX,storedMouse.y=e.clientY,mouseX=windowHalfX-e.clientX,mouseY=windowHalfY-e.clientY,prevMouseX=mouseX,TweenMax.to(mousePosition,2,{x:0,y:mouseY,ease:Power1.easeOut})}function animate(){windowInFocus?render():frameCount>3&&(render(),frameCount=0,pixelRatioSwitchCount=0),frameCount++,"undefined"!=typeof renderer&&windowInFocus&&(renderer.getPixelRatio()<2&&!renderer.antialias?renderer.antialias=!0:renderer.antialias&&renderer.getPixelRatio()>=2&&(renderer.antialias=!1),fps.getFPS(),pixelRatioSwitchCount<4&&hasData?fps.average<25?1!=renderer.getPixelRatio()&&(renderer.setPixelRatio(1),pixelRatioSwitchCount+=1):fps.average<35?1.5!=renderer.getPixelRatio()&&(console.log("set pixel ratio 1.5"),renderer.setPixelRatio(1.5),pixelRatioSwitchCount+=1):2!=renderer.getPixelRatio()&&(console.log("set pixel ratio 2"),renderer.setPixelRatio(2),pixelRatioSwitchCount+=1):hasData&&(fps.average>25?(console.log("set pixel ratio 1.5"),renderer.setPixelRatio(1.5)):renderer.setPixelRatio(1)))}function render(){"undefined"!=typeof camera&&(camera.position.x=0-.003*(mousePosition.x-camera.position.x),camera.position.y=4-.003*(-mousePosition.y-camera.position.y),renderer.render(scene,camera))}function de2ra(e){return e*(Math.PI/180)}function screenWidthFromDistance(e){var n=window.innerWidth/window.innerHeight,i=1.75*e*Math.tan(.5*camera.fov*(Math.PI/180)),o=i*n;return o}function setFOV(){return fov=40,window.innerWidth<600&&(fov=70),fov}$(function(){init(),$(".projects").panelSnap()});var camera,scene,stage,renderer,mouseX=0,prevMouseX=0,mouseY=0,mouseDown=!1,mouseDirection,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,mouseDownCoord=new Object,sections=[],progression=0,activeSection=0,prevActiveSection=null,background={light:{r:0,g:0,b:0},dark:{r:0,g:0,b:0}},mousePosition={x:0,y:0},storedMouse={x:0,y:0};TweenMax.ticker.addEventListener("tick",animate);var hasData=!1;setTimeout(function(){hasData=!0},4e3);var pixelRatioSwitchCount=-1;setInterval(fps.reset,1e4);var windowInFocus=!0;$(window).focus(function(){windowInFocus=!0,console.log("window in focus")}),$(window).blur(function(){windowInFocus=!1,console.log("window out of focus")}),frameCount=0,$(".controls a").click(function(e){e.stopPropagation()});
!function(t){t.fn.scalem=function(e){var a=t.extend({ratio:1,reference:null,styles:"",maxSize:390},e),i=function(e,i){var r,s,n=t(e),o=n.parent(),c=n.clone().css({width:"auto",display:"none","white-space":"nowrap"}),d=t(e.getAttribute("data-scale-reference")||a.reference),h=(""+(e.getAttribute("data-scale-styles")||a.styles)).split(" "),l=Math.max(parseFloat(e.getAttribute("data-scale-ratio")||a.ratio),0),f=Math.max(parseFloat(e.getAttribute("data-max-size")||a.maxSize),0),u=d.length?d.width():o.width();if(isNaN(l)&&(l=1),o[0].scrollHeight>o.height()&&(u-=17),r=u*l,c.addClass("currentProjectH2"),c.appendTo("body"),s=c.width(),0===r||s===u)return void c.remove();for(var p=Math.round(6/c.css("font-size","6px").width()*r),w=c[0];p<r;++p)if(w.style.fontSize=p+"px",c.width()/u>l){p>f?n.css("font-size",f+"px"):n.css("font-size",p-1+"px");break}if(c.remove(),h[0]){for(var x=n.width()/s,g={},p=0,m=h.length;p<m;++p)h[p]&&(g[h[p]]=("width"===h[p]?r:Math.round(parseFloat(n.css(h[p]))*x))+"px");n.css(g)}};return this.each(function(){var e=this;i(e),t(window).resize(function(t){i(e,t)})})}}(jQuery);
document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"></script>');
$(function(){$("a").each(function(n,a){"#"!=a.href&&(console.log("link",a.href),$(a).data("link",$(a).attr("href")))})});
!function(n,e,t){"use strict";function o(n){n.each(function(n){var t=e.querySelectorAll(n.getSelectors()),o=n.getDeclaration();[].forEach.call(t,function(n){a(n,o)})})}function l(n){n.each(function(n){var t=e.querySelectorAll(n.getSelectors());[].forEach.call(t,function(n){r(n)})})}function a(n,t){if("undefined"!=typeof t["scroll-snap-coordinate"])return n.snapLengthUnit=x(t),i(n);var o=n.tagName;"body"!=o.toLowerCase()&&"html"!=o.toLowerCase()||(n=e),n.addEventListener("scroll",F,!1),"undefined"!=typeof t["scroll-snap-destination"]?n.snapLengthUnit=x(t):n.snapLengthUnit=p(t),n.snapElements=[]}function r(n){var t=n.tagName;"body"!=t.toLowerCase()&&"html"!=t.toLowerCase()||(n=e),n.removeEventListener("scroll",F,!1),n.snapLengthUnit=null,n.snapElements=[]}function i(n){for(var e=n;n&&n!==document;n=n.parentNode)"undefined"!=typeof n.snapElements&&n.snapElements.push(e)}function s(n,e,t){var o={y:d(e,e.snapLengthUnit.y),x:m(e,e.snapLengthUnit.x)},l=n.scrollTop,a=n.scrollLeft,r={y:l/o.y,x:a/o.x},i={y:H.y/o.y,x:H.x/o.x},s={y:0,x:0};s.y=c(t.y,r.y),s.x=c(t.x,r.x),s.y=f(i.y,r.y,s.y,H.y,l),s.x=f(i.x,r.x,s.x,H.x,a);var u={y:s.y*o.y,x:s.x*o.x};return u.y=y(0,h(n),u.y),u.x=y(0,v(n),u.x),u}function u(n,e,t){for(var o=e.snapElements.length,l=n.scrollTop,a=n.scrollLeft,r=Math.min(t.y,t.x),i={y:d(e,e.snapLengthUnit.y),x:m(e,e.snapLengthUnit.x)},s={y:0,x:0},u=k+r;u<o&&u>=0;u+=r)if(D=e.snapElements[u],s={y:D.offsetTop-n.offsetTop+d(D,D.snapLengthUnit.y),x:D.offsetLeft-n.offsetLeft+m(D,D.snapLengthUnit.x)},D.snapCoords=s,a<=s.x&&a+g(n)>=s.x&&l<=s.y&&l+L(n)>=s.y)return k=u,{y:y(0,h(n),s.y-i.y),x:y(0,v(n),s.x-i.x)};return 1==r&&u===o-1?(k=o-1,{y:y(0,h(n),s.y-i.y),x:y(0,v(n),s.x-i.x)}):r==-1&&0===u?(k=0,{y:y(0,h(n),s.y-i.y),x:y(0,v(n),s.x-i.x)}):{y:y(0,h(n),e.snapElements[k].snapCoords.y-i.y),x:y(0,v(n),e.snapElements[k].snapCoords.x-i.x)}}function c(n,e){return n===-1?Math.floor(e):Math.ceil(e)}function f(n,e,t,o,l){return Math.abs(n-e)>=b&&Math.abs(t-e)>T?Math.round(e):Math.abs(o-l)<N&&Math.abs(n-e)<b&&Math.abs(t-e)>w?Math.round(e):t}function y(n,e,t){return Math.max(Math.min(t,e),n)}function p(n){var e,t=/repeat\((\d+)(px|vh|vw|%)\)/g,o={y:{value:0,unit:"px"},x:{value:0,unit:"px"}};return"undefined"!==n["scroll-snap-points-y"]&&(e=t.exec(n["scroll-snap-points-y"]),null!==e&&(o.y={value:e[1],unit:e[2]})),"undefined"!==n["scroll-snap-points-x"]&&(e=t.exec(n["scroll-snap-points-x"]),null!==e&&(o.x={value:e[1],unit:e[2]})),o}function x(n){var e,t,o=/(\d+)(px|%) (\d+)(px|%)/g,l={y:{value:0,unit:"px"},x:{value:0,unit:"px"}};return"undefined"!=typeof n["scroll-snap-coordinate"]?e="scroll-snap-coordinate":"undefined"!=typeof n["scroll-snap-destination"]&&(e="scroll-snap-destination"),null!==e&&(t=o.exec(n[e]),null!==t&&(l.y={value:t[1],unit:t[2]},l.x={value:t[3],unit:t[4]})),l}function d(t,o){return"vh"==o.unit?Math.max(e.documentElement.clientHeight,n.innerHeight||1)/100*o.value:"%"==o.unit?L(t)/100*o.value:L(t)/o.value}function m(t,o){return"vw"==o.unit?Math.max(e.documentElement.clientWidth,n.innerWidth||1)/100*o.value:"%"==o.unit?g(t)/100*o.value:g(t)/o.value}function h(n){return n.scrollHeight}function v(n){return n.scrollWidth}function L(n){return n.offsetHeight}function g(n){return n.offsetWidth}function E(t){return t==e||t==n?e.documentElement.scrollTop>0||e.documentElement.scrollLeft>0?e.documentElement:e.querySelector("body"):t}function M(t,o){var l=Math.abs(t-o),a=100/Math.max(e.documentElement.clientHeight,n.innerHeight||1)*l,r=100/S*a;return isNaN(r)?0:Math.max(S/1.5,Math.min(r,S))}var T=1-.18,w=.95,N=5,b=2,U=45,S=512;if(!("scrollSnapType"in e.documentElement.style||"webkitScrollSnapType"in e.documentElement.style||"msScrollSnapType"in e.documentElement.style)){var C,q,A=null,H=null,F=function(n){C=n.target,q=E(C),P&&(cancelAnimationFrame(P)||clearTimeout(P)),A?clearTimeout(A):H={y:q.scrollTop,x:q.scrollLeft},A=setTimeout(W,U)},W=function(){if(H.y!=q.scrollTop||H.x!=q.scrollLeft){var n,e={y:H.y-q.scrollTop>0?-1:1,x:H.x-q.scrollLeft>0?-1:1};n="undefined"!=typeof q.snapElements&&q.snapElements.length>0?u(q,C,e):s(q,C,e),C.removeEventListener("scroll",F,!1),j(q,n,function(){C.addEventListener("scroll",F,!1)}),isNaN(n.x||!isNaN(n.y))||(H=n)}},D=null,k=0,R=function(n){return n*n*n},z=function(n,e,t,o){return t>o?e:n+(e-n)*R(t/o)},P=null,j=function(e,t,o){var l={y:e.scrollTop,x:e.scrollLeft},a=Date.now(),r=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){n.setTimeout(e,15)},i=Math.max(M(l.y,t.y),M(l.x,t.x)),s=function(){var n=Date.now()-a;if(isNaN(t.y)||(e.scrollTop=z(l.y,t.y,n,i)),isNaN(t.x)||(e.scrollLeft=z(l.x,t.x,n,i)),n>i){if("function"==typeof o)return o(t)}else P=r(s)};s()};new Polyfill({declarations:["scroll-snap-type:*","scroll-snap-point-y:*","scroll-snap-coordinate:*","scroll-snap-destination:*"]}).doMatched(o).undoUnmatched(l)}}(window,document);
function setLights(){var e=1024,a=new THREE.PlaneGeometry(3e3,3e3,1);groundMaterial=new THREE.ShadowMaterial,groundMaterial.opacity=.04;var t=new THREE.Mesh(a,groundMaterial);t.receiveShadow=!0,t.rotation.x=0,t.position.y=30,t.position.z=-10,t.transparent=!1,scene.add(t),mainLight=new THREE.AmbientLight({color:0,intensity:.02}),mainLight.intensity=.37,scene.add(mainLight);var i=new THREE.SpotLight(16777215);i.castShadow=!0,i.position.set(0,20,60),i.shadow.mapSize.height=e,i.shadow.mapSize.width=e,i.intensity=.15,i.exponent=.05,i.penumbra=2,i.decay=3,i.angle=de2ra(80),i.target.position={x:-10,y:10,z:0},console.log(i),scene.add(i),scene.add(i.target)}var mainLight,groundMaterial;
//# sourceMappingURL=site.js.map
