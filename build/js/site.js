function map_range(t,e,r,n,a){return n+(a-n)*(t-e)/(r-e)}function hexToRgb(t,e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),n=function(){return void 0==this.alpha?"rgb("+this.r+", "+this.g+", "+this.b+")":(this.alpha>1?this.alpha=1:this.alpha<0&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")")};return void 0==e?r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),toString:n}:null:(e>1?e=1:0>e&&(e=0),r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),alpha:e,toString:n}:null)}function rgbToHex(t,e,r){function n(t){var e=t.toString(16);return 1==e.length?"0"+e:e}if(void 0==e||void 0==r){if("string"==typeof t){var a=/^rgb[a]?\(([\d]+)[ \n]*,[ \n]*([\d]+)[ \n]*,[ \n]*([\d]+)[ \n]*,?[ \n]*([.\d]+)?[ \n]*\)$/i.exec(t);return rgbToHex(parseInt(a[1]),parseInt(a[2]),parseInt(a[3]))}return void 0==t.r||void 0==t.g||void 0==t.b?null:rgbToHex(t.r,t.g,t.b)}var i=t;return"#"+n(i)+n(e)+n(r)}function rgbPercentage(t){return t.r=t.r/255,t.b=t.b/255,t.g=t.g/255,t}function colorIntensity(t){return(t.r/255+t.g/255+t.b/255)/3}var fps={startTime:0,frameNumber:0,average:60,framesCounted:60,secondsCounted:1,getFPS:function(){this.frameNumber++;var t=(new Date).getTime(),e=(t-this.startTime)/1e3,r=Math.floor(this.frameNumber/e);return e>1&&(this.framesCounted+=r,this.secondsCounted++,this.startTime=(new Date).getTime(),this.frameNumber=0,this.average=this.framesCounted/this.secondsCounted),r},reset:function(){this.framesCounted=0,this.secondsCounted=0}};
var animateText=function(){function e(e){var n=$(e.headline);n.each(function(n,t){if(Math.abs(e.proximity<.15)){var a=map_range(Math.abs(e.proximity),0,.15,1,0);a<0&&(a=0),TweenMax.to(t.parentNode,.5,{opacity:a,onComplete:function(){}})}else{var a=0;TweenMax.to(t.parentNode,.5,{opacity:a,onComplete:function(){}})}TweenMax.to(t,5,{y:30*Math.abs(e.proximity),ease:Power4.easeOut,onComplete:function(){}})})}return{register:function(n){n.proximity=.25;var t=document.createElement("div");t.className="current_project",document.body.appendChild(t);var a=document.createElement("h2");a.innerHTML='<a href="#">'+n.name+"</a>",t.appendChild(a),n.headline=a,$(".current_project h2").scalem({maxSize:175}),snapWrapper.bind("scroll",function(){e(n)}),t.ref=n.ref,e(n),setTimeout(e,1e3,n)},animateHeadline:function(e,n){var t=e.headline;n&&console.log(t)},render:function(){for(i=0;i<sections.length;i++)scrollHandler(sections[i])}}}();
function addPhone(e,o,i,a,s,r,n){var t=new $.Deferred,d=new THREE.Group,l=new THREE.PlaneGeometry(.55,1,1),E=new THREE.Mesh(l,i);E.receiveShadow=!1,E.position.z=.022,E.position.y=.05,d.add(E);var m=new THREE.Mesh(l,a);return m.receiveShadow=!1,m.position.z=.0225,m.position.y=.05,d.add(m),s.load("models/iphones7.json",function(i,a){var l=new THREE.MeshPhongMaterial(a[0]),E=new THREE.Mesh(i,l);E.position.y=-.6,E.castShadow=!0,E.receiveShadow=!1,d.add(E),E.traverse(function(e){d.position.y=-5,d.position.z=-1,E.material.emissive.r=r.r/255,E.material.emissive.g=r.g/255,E.material.emissive.b=r.b/255,E.material.color.r=n.r/255,E.material.color.g=n.g/255,E.material.color.b=n.b/255}),s.load("models/iphone-back.json",function(i,a){var s=new THREE.MeshPhongMaterial(a[0]),l=new THREE.Mesh(i,s);l.position.y=-.6,l.castShadow=!0,l.receiveShadow=!1,d.add(l),l.traverse(function(i){i.geometry.computeVertexNormals(),d.position.y=-5,d.position.z=-1,l.material.emissive.r=r.r/255,l.material.emissive.g=r.g/255,l.material.emissive.b=r.b/255,l.material.color.r=n.r/255,l.material.color.g=n.g/255,l.material.color.b=n.b/255,l.material.shininess=10,d.position.z=o.z,d.position.y=o.y,d.position.x=o.x,d.scale.set(30,30,30),d.castShadow=!0,d.rotation.x=e.x,d.rotation.y=e.y,d.rotation.z=e.z,t.resolve(d)})})}),t.promise()}function addLaptop(e,o,i,a,s,r,n){var t=new $.Deferred,d=new THREE.Group,l=new THREE.Object3D,E=(new THREE.MeshStandardMaterial({side:THREE.DoubleSide,color:16777215,metalness:.5,roughness:1}),new THREE.Object3D);return s.load("models/screen-back.json",function(r,n){var m=new THREE.MeshPhongMaterial(n[0]),c=new THREE.Mesh(r,m);c.position.y=0,c.position.x=-.5,c.position.z=0,c.receiveShadow=!1,c.castShadow=!0,m.shininess=.2,c.traverse(function(e){e instanceof THREE.Mesh&&e.geometry.computeVertexNormals(),c.material.side=THREE.DoubleSide;l.add(c)}),s.load("models/screen-front.json",function(r,n){var m=new THREE.MeshStandardMaterial({side:THREE.DoubleSide,color:986895,emissive:0,metalness:.7,roughness:.2}),c=new THREE.Mesh(r,m);c.position.y=0,c.position.x=-.5,c.position.z=0;var h={r:0,g:0,b:0};c.castShadow=!1,c.receiveShadow=!1,l.add(c);var p=new THREE.PlaneGeometry(8.7,5.8,1),w=new THREE.Mesh(p,i);w.position.z=-3.16,w.position.y=3.3,w.rotation.x=de2ra(1),l.add(w);var v=new THREE.Mesh(p,a);v.receiveShadow=!0,v.position.z=-3.16,v.position.y=3.3,v.rotation.x=de2ra(1),l.add(v);var H=new THREE.BoxBufferGeometry(200,200,200),R=new THREE.MeshBasicMaterial({color:16777215});mesh=new THREE.Mesh(H,R),l.position.z=3.1,E.add(l),E.position.z=-3,E.position.y=0,E.rotation.x=de2ra(90),d.add(E),s.load("models/keyboard.json",function(i,a){var r=new THREE.MeshStandardMaterial({side:THREE.DoubleSide,color:13421772,metalness:.2,roughness:1}),n=new THREE.Mesh(i,r);n.position.x=-.5,n.castShadow=!1,n.receiveShadow=!0,d.add(n),s.load("models/keys.json",function(i,a){var r=new THREE.MeshPhongMaterial(a[0]),n=new THREE.Mesh(i,r);n.position.y=.005,n.position.x=-.5,n.position.z=0,n.receiveShadow=!0,n.castShadow=!0;var l={r:0,g:0,b:0},m=l;n.material.side=THREE.DoubleSide,n.material.specular.r=l.r/255,n.material.specular.g=l.g/255,n.material.specular.b=l.b/255,n.material.emissive.r=m.r/255,n.material.emissive.g=m.g/255,n.material.emissive.b=m.b/255,n.material.shininess=15,d.add(n),s.load("models/keys-top.json",function(i,a){var s=new THREE.MeshPhongMaterial(a[0]),r=new THREE.Mesh(i,s);r.position.y=.005,r.position.x=-.5,r.position.z=0,r.receiveShadow=!1,r.castShadow=!1;var n={r:0,g:0,b:0},l={r:5,g:5,b:5};r.material.side=THREE.DoubleSide,r.material.specular.r=n.r/255,r.material.specular.g=n.g/255,r.material.specular.b=n.b/255,r.material.emissive.r=l.r/255,r.material.emissive.g=l.g/255,r.material.emissive.b=l.b/255,r.material.shininess=21,d.scale.set(6.25,6.25,6.25),d.add(r),d.position.z=o.z,d.position.y=o.y,d.position.x=o.x,d.rotation.x=e.x,d.rotation.y=e.y,d.rotation.z=e.z,d.screen=E,t.resolve(d)})})})})}),t.promise()}
function addProject(e,o,n){function i(){d.screenWidth=screenWidthFromDistance(camera.position.z)}var a=new THREE.Group;a.count=n,a.position.y=a.count*-1*screenWidthFromDistance(200),n>0&&(a.visible=!1);var d={};$(window).bind("resize",i),i();for(var s=new THREE.JSONLoader,c=(new THREE.MeshBasicMaterial({color:16777215}),$(e).find("video")),h=0;h<c.length;h++)c[h].pause(),a.video=c[h];var l=new Array,p=$(e)[0].children;for(im=0;im<p.length;im++)"IMG"!=p[im].tagName&&"VIDEO"!=p[im].tagName||l.push(customMaterial(p[im]));var u=new THREE.MeshPhongMaterial({color:16777215});u.specular.r=1,u.specular.g=1,u.specular.b=1,u.transparent=!0,u.opacity=.05,u.shininess=20,u.reflectivity=5,u.combine=THREE.MixOperation;var y=hexToRgb($(e).data("device-light")),f=hexToRgb($(e).data("device-dark"));if(a.elm=e,a.name=$(e).find("h2").html(),a.tween=[],a.loaded=0,a.ref=e,$(e).hasClass("mobile")){a.type="mobile";var m=new THREE.Group;addPhone({x:de2ra(60),y:de2ra(-140),z:de2ra(30)},{x:-10,y:4,z:-8},l[1],u,s,f,y).done(function(e){e.startRotationPoint=60,m.add(e),a.loaded+=.333333,a.tween.push(TweenMax.to(e.position,3.5,{y:e.position.y-1,yoyo:!0,repeat:-1,delay:0,ease:Power2.easeInOut,onComplete:function(){}}))}),addPhone({x:de2ra(50),y:de2ra(35),z:de2ra(-80)},{x:15,y:1,z:-8},l[0],u,s,f,y).done(function(e){a.tween.push(TweenMax.to(e.position,3.5,{y:e.position.y-1,yoyo:!0,repeat:-1,delay:.5,ease:Power2.easeInOut,onComplete:function(){}})),e.startRotationPoint=50,m.add(e),a.loaded+=.333333}),addPhone({x:de2ra(120),y:de2ra(0),z:de2ra(-60)},{x:45,y:-11,z:-8},l[2],u,s,f,y).done(function(e){a.tween.push(TweenMax.to(e.position,3.5,{y:e.position.y-1,yoyo:!0,repeat:-1,delay:1.5,ease:Power2.easeInOut,onComplete:function(){}})),e.startRotationPoint=120,m.add(e),a.loaded+=.333333}),m.position.y=5,m.position.z=15,m.position.x=-12,m.begin=function(){},m.end=function(){},m.startRotationPoint=12,a.add(m)}else $(e).hasClass("desktop")&&(a.type="desktop",addLaptop({x:de2ra(60),y:de2ra(0),z:de2ra(0)},{x:0,y:-45,z:10},l[0],u,s,f,y).done(function(e){a.loaded+=1.5,a.macbookGroup=e,e.startRotationPoint=0,e.opacity=0,e.begin=function(){},e.end=function(){},a.add(e),1==a.loaded&&scrollHandler(),a.kickstart&&e.begin()}),addPhone({x:de2ra(-15),y:de2ra(10),z:de2ra(15)},{x:-50,y:-25,z:0},l[1],u,s,f,y).done(function(e){var t=new THREE.Group;e.scale.x=16,e.scale.y=16,e.scale.z=16,t.begin=function(){},t.end=function(){},t.startRotationPoint=0,e.startRotationPoint=-30,t.add(e),a.loaded=1,a.loaded+=.5,scrollHandler(),a.add(t)}));return a.updateRotation=function(){if("undefined"!=typeof a.macbookGroup&&"desktop"==a.type&&Math.abs(getProximity(this.count))<1){var e=map_range(Math.abs(getProximity(this.count)),-.15,0,90,20);e<-90&&(e=-90),TweenMax.to(a.macbookGroup.screen.rotation,1,{x:-de2ra(e),ease:Power4.easeOut})}if(Math.abs(this.proximity)<.1)for(this.video&&this.video.play(),t=0;t<this.tween.length;t++)this.tween[t].play();else for(this.video&&this.video.pause(),t=0;t<this.tween.length;t++)this.tween[t].pause();try{if("Group"==this.children[0].children[0].type&&this.children[0].children.length>2){var o=this.children[0].startRotationPoint+100*this.proximity;for(r=0;r<this.children[0].children.length;r++)this.children[0].children[r].rotation.x=de2ra(this.children[0].children[r].startRotationPoint+200*this.proximity)}else{var o=this.children[0].startRotationPoint+100*this.proximity;this.children[0].children[1].rotation.x=de2ra(this.children[0].children[1].startRotationPoint+this.proximity*-200)}this.children[0].rotation.y=de2ra(o)}catch(e){}},a.updatePosition=function(){this.position.y=a.count*-1*screenWidthFromDistance(200)},a.start=function(t){if("undefined"==typeof this.loaded||"undefined"==typeof a.headline)return setTimeout(function(){a.start()},50),!1;$(a.headline.parentNode).addClass("active"),kickOffSite(),$("body").css("background",$(e).data("bg-dark")).css("color",$(e).data("text-color")),$("nav .toggle span").css("background-color",$(e).data("text-color")),mainLight.color=rgbPercentage(hexToRgb($(e).data("bg-dark")));var o=colorIntensity(hexToRgb($(e).data("bg-light")));TweenMax.to(groundMaterial,1,{opacity:map_range(o,0,1,.3,.04),onComplete:function(){}});for(var n=0;n<a.children.length;n++)"undefined"!=typeof a.children[n].begin&&a.children[n].begin();a.kickstart=!0},a.end=function(){for(var e=0;e<a.children.length;e++)"undefined"!=typeof a.children[e].end&&a.children[e].end();"object"==typeof a.headline&&$(a.headline.parentNode).removeClass("active")},o.add(a),a.checkLoad=function(){a.loaded>.98?(animateText.register(a),scrollHandler()):setTimeout(a.checkLoad,100)},a.checkLoad(),setTimeout(function(e){e.position.y=e.count*-1*screenWidthFromDistance(200)},100,a),a}
function customMaterial(a){var e=new THREE.MeshBasicMaterial({color:16777215});if("IMG"==a.tagName)var r=(new THREE.TextureLoader).load(a.src);else if("VIDEO"==a.tagName)var r=new THREE.VideoTexture(a);return r.minFilter=THREE.LinearFilter,r.magFilter=THREE.LinearFilter,r.format=THREE.RGBFormat,r.wrapS=THREE.ClampToEdgeWrapping,r.wrapT=THREE.ClampToEdgeWrapping,r.anisotropy=.5,e.map=r,e}
function startSection(){$activeSection=$("section:nth-child("+(activeSection+1)+")"),$("a.cta").removeClass("off"),$("a.cta").css("color",$activeSection.data("text-color")),$("a.cta .arrow").css("background-color",$activeSection.data("text-color"))}function init(){var e={$menu:!1,menuSelector:"a",panelSelector:"> section",namespace:".panelSnap",onSnapStart:function(){$("a.cta").addClass("off")},onSnapFinish:function(){startSection()},onActivate:function(){},directionThreshold:10,slideSpeed:400,delay:0,easing:"swing",offset:0,navigation:{keys:{nextKey:!1,prevKey:!1},buttons:{$nextButton:!1,$prevButton:!1},wrapAround:!1}};snapWrapper.panelSnap(e),snapWrapper.bind("scroll",scrollHandler),setEnvironment(),setLights(),scrollHandler(),animate(),$("section").each(function(e,n){sections.push(addProject(n,stage,e))}),$("a.cta").bind("click",goToCaseStudy)}function getProximity(e){var n=snapWrapper.scrollTop()/snapWrapper[0].scrollHeight;return e-n*sections.length}function scrollHandler(){if(scrollPercentage=snapWrapper.scrollTop()/(snapWrapper[0].scrollHeight-$("section",snapWrapper).height()),progression=scrollPercentage*sections.length,activeSection=Math.floor(progression),activeSection==sections.length&&(activeSection-=1),activeSection!=prevActiveSection)for(i=0;i<sections.length;i++)if(i==activeSection)for(sections[activeSection].start(),no=0;no<sections[i].tween.length;no++)sections[i].tween[no].resume();else for(sections[i].end(),no=0;no<sections[i].tween.length;no++)sections[i].tween[no].pause();for(i=0;i<sections.length;i++)sections[i].proximity=getProximity(i),sections[i].updateRotation(),sections[i].proximity>-.75&&sections[i].proximity<.75?sections[i].visible=!0:sections[i].visible=!0;prevActiveSection=activeSection;var e=0-scrollPercentage*(screenWidthFromDistance(200)*(sections.length-1));TweenMax.to(stage.position,.75,{ease:Power4.easeOut,y:-1*e})}function setEnvironment(){var e=window.devicePixelRatio;e=1==e?1.5:2;var n=document.createElement("div");n.setAttribute("class","content"),document.getElementsByClassName("devices")[0].appendChild(n),camera=new THREE.PerspectiveCamera(setFOV(),window.innerWidth/window.innerHeight,1,5e3),camera.position.z=115,camera.myTarget=new THREE.Vector3(0,50,0),camera.lookAt(camera.myTarget),scene=new THREE.Scene,stage=new THREE.Group,scene.add(stage);var o=!1;e>1&&(o=!1),renderer=new THREE.WebGLRenderer({alpha:!0,antialias:o}),renderer.setClearColor(0,0),renderer.setPixelRatio(e),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,n.appendChild(renderer.domElement);var t=renderer.domElement;t.style.position="absolute",window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){for(windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),camera.fov=setFOV(),scrollHandler(),i=0;i<sections.length;i++)sections[i].updatePosition()}function kickOffSite(){$("body").hasClass("loaded")||(TweenMax.to(camera.myTarget,2,{x:0,y:0,z:0,delay:.7,ease:Power4.easeOut}),setTimeout(function(){$("body").addClass("loaded"),startSection()},2e3),setTimeout(function(){sections[activeSection].updateRotation()},1e3))}function onDocumentMouseMove(e){if("undefined"==typeof e)var e={clientX:storedMouse.x,clientY:storedMouse.y};storedMouse.x=e.clientX,storedMouse.y=e.clientY,mouseX=windowHalfX-e.clientX,mouseY=windowHalfY-e.clientY,prevMouseX=mouseX,TweenMax.to(mousePosition,1,{x:mouseX,y:mouseY,ease:Power1.easeOut})}function animate(){windowInFocus?render():frameCount>2&&(render(),frameCount=0,pixelRatioSwitchCount=0),frameCount++}function render(){"undefined"!=typeof camera&&(camera.position.x=0-.009*(mousePosition.x-camera.position.x),camera.position.y=0-.009*(-mousePosition.y-camera.position.y),camera.lookAt(camera.myTarget),renderer.render(scene,camera))}function de2ra(e){return e*(Math.PI/180)}function screenWidthFromDistance(e){var n=window.innerWidth/window.innerHeight,o=1.75*e*Math.tan(.5*camera.fov*(Math.PI/180)),t=o*n;return t}function setFOV(){return fov=40,window.innerWidth<600&&(fov=70),fov}$(function(){init()});var snapWrapper=$(".projects"),camera,scene,stage,renderer,mouseX=0,prevMouseX=0,mouseY=0,mouseDown=!1,mouseDirection,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,mouseDownCoord=new Object,sections=[],progression=0,activeSection=0,prevActiveSection=null,background={light:{r:0,g:0,b:0},dark:{r:0,g:0,b:0}},mousePosition={x:0,y:0};document.addEventListener("mousemove",onDocumentMouseMove,!1);var storedMouse={x:0,y:0};TweenMax.ticker.addEventListener("tick",animate);var hasData=!1;setTimeout(function(){hasData=!0},4e3);var pixelRatioSwitchCount=-1;setInterval(fps.reset,1e4);var windowInFocus=!0;$(window).focus(function(){windowInFocus=!0,console.log("window in focus")}),$(window).blur(function(){windowInFocus=!1,console.log("window out of focus")}),frameCount=0,$(".controls a").click(function(e){e.stopPropagation()});
"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e,t,n){"use strict";var o="panelSnap",i="plugin_"+o,a={isMouseDown:!1,isSnapping:!1,enabled:!0,scrollOffset:0,init:function(t,o){var i=this;if(i.container=o,i.$container=e(o),i.$eventContainer=i.$container,i.$snapContainer=i.$container,i.$container.is("body")){i.$eventContainer=e(n),i.$snapContainer=e(n.scrollingElement||n.documentElement);var a=navigator.userAgent;a.indexOf("WebKit")!==-1&&a.indexOf("Chrome")===-1&&(i.$snapContainer=e("body"))}if(i.options=e.extend(!0,{},e.fn.panelSnap.options,t),i.bind(),i.options.$menu!==!1&&e(".active",i.options.$menu).length>0)e(".active",i.options.$menu).click();else{var s=i.getPanel(":first");i.activatePanel(s)}return i},bind:function(){var n=this;n.bindProxied(n.$eventContainer,"scrollstop",n.scrollStop),n.bindProxied(n.$eventContainer,"mousewheel",n.mouseWheel),n.bindProxied(n.$eventContainer,"mousedown",n.mouseDown),n.bindProxied(n.$eventContainer,"mouseup",n.mouseUp),n.bindProxied(e(t),"resizestop",n.resize),n.options.$menu&&n.bindProxied(n.options.$menu,"click",n.captureMenuClick,n.options.menuSelector),(n.options.navigation.keys.nextKey||n.options.navigation.keys.prevKey)&&n.bindProxied(e(t),"keydown",n.keyDown),n.options.navigation.buttons.$nextButton&&n.bindProxied(n.options.navigation.buttons.$nextButton,"click",n.captureNextClick),n.options.navigation.buttons.$prevButton&&n.bindProxied(n.options.navigation.buttons.$prevButton,"click",n.capturePrevClick)},bindProxied:function(t,n,o,i){var a=this;i="string"==typeof i?i:null,t.on(n+a.options.namespace,i,e.proxy(function(e){return o.call(a,e)},a))},destroy:function(){var n=this;n.$eventContainer.off(n.options.namespace),e(t).off(n.options.namespace),n.options.$menu!==!1&&e(n.options.menuSelector,n.options.$menu).off(n.options.namespace),n.$container.removeData(i)},scrollStop:function(e){var t,n=this;if(e.stopPropagation(),!n.isMouseDown&&!n.isSnapping){var o=n.getPanelsInViewport();if(!n.enabled||o.length<2)return t=o.eq(0),void(t.is(n.getPanel(".active"))||n.activatePanel(t));var i,a=n.$snapContainer.scrollTop(),s=a-n.scrollOffset,r=Math.abs(s)>n.options.directionThreshold;if(s>0)i=r?1:0;else{if(!(s<0))return;i=r?0:1}t=o.eq(i);var l=n.$container[0].scrollHeight-n.scrollInterval;a<=0||a>=l?(n.activatePanel(t),n.scrollOffset=a<=0?0:l):n.snapToPanel(t)}},getPanelsInViewport:function(){var t=this,n={top:t.$snapContainer.scrollTop()};n.bottom=n.top+t.$snapContainer.height();var o=t.getPanel().filter(function(o,i){var a,s=e(i);return t.$container.is("body")?a=s.offset():(a=s.position(),a.top+=t.$snapContainer.scrollTop()),a.bottom=a.top+s.outerHeight(),!(n.bottom<a.top||n.top>a.bottom)});return o},mouseWheel:function(){var e=this;e.isSnapping&&(e.scrollOffset=e.$snapContainer.scrollTop(),e.$snapContainer.stop(!0),e.isSnapping=!1)},mouseDown:function(){var e=this;e.isMouseDown=!0},mouseUp:function(e){var t=this;t.isMouseDown=!1,t.scrollOffset!==t.$snapContainer.scrollTop()&&t.scrollStop(e)},keyDown:function(e){var t=this,n=t.options.navigation;if(t.enabled){switch(e.which){case n.keys.prevKey:case n.keys.nextKey:e.preventDefault()}if(!t.isSnapping)switch(e.which){case n.keys.prevKey:t.snapTo("prev",n.wrapAround);break;case n.keys.nextKey:t.snapTo("next",n.wrapAround)}}},captureNextClick:function(e){var t=this;e.preventDefault(),t.isSnapping||t.snapTo("next",t.options.navigation.wrapAround)},capturePrevClick:function(e){var t=this;e.preventDefault(),t.isSnapping||t.snapTo("prev",t.options.navigation.wrapAround)},resize:function(){var e=this;if(e.enabled){var t=e.getPanel(".active");e.snapToPanel(t)}},captureMenuClick:function(t){var n=this,o=e(t.currentTarget).data("panel"),i=n.getPanel('[data-panel="'+o+'"]');return n.snapToPanel(i),!1},snapToPanel:function(e){var t=this;if(e.jquery){t.isSnapping=!0,t.options.onSnapStart.call(t,e),t.$container.trigger("panelsnap:start",[e]);var n=0;n=t.$container.is("body")?e.offset().top:t.$snapContainer.scrollTop()+e.position().top,n-=t.options.offset,t.$snapContainer.stop(!0).delay(t.options.delay).animate({scrollTop:n},t.options.slideSpeed,t.options.easing,function(){t.scrollOffset=t.$snapContainer.scrollTop(),t.isSnapping=!1,t.options.onSnapFinish.call(t,e),t.$container.trigger("panelsnap:finish",[e]),t.activatePanel(e)})}},activatePanel:function(t){var n=this;if(n.getPanel(".active").removeClass("active"),t.addClass("active"),n.options.$menu!==!1){var o=n.options.menuSelector+".active";e(o,n.options.$menu).removeClass("active");var i='[data-panel="'+t.data("panel")+'"]',a=n.options.menuSelector+i,s=e(a,n.options.$menu);s.addClass("active")}var r=n.options.navigation;if(!r.wrapAround){var l=n.getPanel(),c=l.index(n.getPanel(".active"));r.buttons.$nextButton!==!1&&(t=l.eq(c+1),t.length<1?(e(r.buttons.$nextButton).attr("aria-disabled","true"),e(r.buttons.$nextButton).addClass("disabled")):(e(r.buttons.$nextButton).attr("aria-disabled","false"),e(r.buttons.$nextButton).removeClass("disabled"))),r.buttons.$prevButton!==!1&&(c<1?(e(r.buttons.$prevButton).attr("aria-disabled","true"),e(r.buttons.$prevButton).addClass("disabled")):(e(r.buttons.$prevButton).attr("aria-disabled","false"),e(r.buttons.$prevButton).removeClass("disabled")))}n.options.onActivate.call(n,t),n.$container.trigger("panelsnap:activate",[t])},getPanel:function(t){var n=this;return"undefined"==typeof t&&(t=""),e(n.options.panelSelector+t,n.$container)},snapTo:function(e,t){var n=this;"boolean"!=typeof t&&(t=!0);var o,i=n.getPanel(),a=i.index(n.getPanel(".active"));switch(e){case"prev":o=i.eq(a-1),a<1&&!t&&(o=[]);break;case"next":o=i.eq(a+1),o.length<1&&t&&(o=i.filter(":first"));break;case"first":o=i.filter(":first");break;case"last":o=i.filter(":last")}o.length>0&&n.snapToPanel(o)},enable:function(){var e=this;e.scrollOffset=e.$snapContainer.scrollTop(),e.enabled=!0},disable:function(){var e=this;e.enabled=!1},toggle:function(){var e=this;e.enabled?e.disable():e.enable()}};e.fn[o]=function(t){var n=Array.prototype.slice.call(arguments);return this.each(function(){var o=e.data(this,i);if("object"!=typeof t&&"init"!==t&&t)if(o)if(o[t]){var s=t;t=n.slice(1),o[s].apply(o,t)}else e.error("Method "+t+" does not exist on jQuery.panelSnap.");else e.error("Plugin is not initialized for this object yet.");else o?e.error("Plugin is already initialized for this object."):("init"===t&&(t=n[1]||{}),o=Object.create(a).init(t,this),e.data(this,i,o))})},e.fn[o].options={$menu:!1,menuSelector:"a",panelSelector:"> section",namespace:".panelSnap",onSnapStart:function(){},onSnapFinish:function(){},onActivate:function(){},directionThreshold:50,slideSpeed:200,delay:0,easing:"linear",offset:0,navigation:{keys:{nextKey:!1,prevKey:!1},buttons:{$nextButton:!1,$prevButton:!1},wrapAround:!1}}}(jQuery,window,document),function(e){e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){e.type=t?"scrollstart":"scrollstop",a.trigger(e)}var n,o,i=this,a=e(i);a.data("scrollwatch",!0),a.on("touchstart",function(){o=!0}),a.on("touchleave touchcancel touchend",function(){o=!1,setTimeout(function(){clearTimeout(n)},50)}),a.on("touchmove scroll",function(i){o||e.event.special.scrollstart.enabled&&(e.event.special.scrollstart.scrolling||(e.event.special.scrollstart.scrolling=!0,t(i,!0)),clearTimeout(n),n=setTimeout(function(){e.event.special.scrollstart.scrolling=!1,t(i,!1)},50))})}},e.event.special.scrollstop={setup:function(){var t=this,n=e(t);n.data("scrollwatch")||e(this).on("scrollstart",function(){})}}}(jQuery),function(e){e.event.special.resizestart={enabled:!0,setup:function(){function t(e,t){e.type=t?"resizestart":"resizestop",i.trigger(e)}var n,o=this,i=e(o);i.data("resizewatch",!0),i.on("resize",function(o){e.event.special.resizestart.enabled&&(e.event.special.resizestart.resizing||(e.event.special.resizestart.resizing=!0,t(o,!0)),clearTimeout(n),n=setTimeout(function(){e.event.special.resizestart.resizing=!1,t(o,!1)},200))})}},e.event.special.resizestop={setup:function(){var t=this,n=e(t);n.data("resizewatch")||e(this).on("resizestart",function(){})}}}(jQuery),function(e){function t(t){var n=t||window.event,o=[].slice.call(arguments,1),i=0,a=0,s=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(i=n.wheelDelta/120),n.detail&&(i=-n.detail/3),s=i,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(s=0,a=-1*i),void 0!==n.wheelDeltaY&&(s=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(a=-1*n.wheelDeltaX/120),o.unshift(t,i,a,s),(e.event.dispatch||e.event.handle).apply(this,o)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var o=n.length;o;)e.event.fixHooks[n[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);
!function(t){t.fn.scalem=function(e){var a=t.extend({ratio:1,reference:null,styles:"",maxSize:390},e),i=function(e,i){var r,s,n=t(e),o=n.parent(),c=n.clone().css({width:"auto",display:"none","white-space":"nowrap"}),d=t(e.getAttribute("data-scale-reference")||a.reference),h=(""+(e.getAttribute("data-scale-styles")||a.styles)).split(" "),l=Math.max(parseFloat(e.getAttribute("data-scale-ratio")||a.ratio),0),f=Math.max(parseFloat(e.getAttribute("data-max-size")||a.maxSize),0),u=d.length?d.width():o.width();if(isNaN(l)&&(l=1),o[0].scrollHeight>o.height()&&(u-=17),r=u*l,c.addClass("currentProjectH2"),c.appendTo("body"),s=c.width(),0===r||s===u)return void c.remove();for(var p=Math.round(6/c.css("font-size","6px").width()*r),w=c[0];p<r;++p)if(w.style.fontSize=p+"px",c.width()/u>l){p>f?n.css("font-size",f+"px"):n.css("font-size",p-1+"px");break}if(c.remove(),h[0]){for(var x=n.width()/s,g={},p=0,m=h.length;p<m;++p)h[p]&&(g[h[p]]=("width"===h[p]?r:Math.round(parseFloat(n.css(h[p]))*x))+"px");n.css(g)}};return this.each(function(){var e=this;i(e),t(window).resize(function(t){i(e,t)})})}}(jQuery);
"anker.re"!=location.host&&document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"></script>');
function goToCaseStudy(){}
$(function(){$("a").each(function(a,n){"#"!=n.href&&$(n).data("link",$(n).attr("href"))})});
function setLights(){var e=512,a=new THREE.PlaneGeometry(3e3,3e3,1);groundMaterial=new THREE.ShadowMaterial,groundMaterial.opacity=.04;var t=new THREE.Mesh(a,groundMaterial);t.receiveShadow=!0,t.rotation.x=0,t.position.y=30,t.position.z=0,t.transparent=!1,scene.add(t),mainLight=new THREE.AmbientLight({color:0,intensity:.02}),mainLight.intensity=.37,scene.add(mainLight);var i=new THREE.SpotLight(16777215);i.castShadow=!0,i.position.set(0,20,60),i.shadow.mapSize.height=e,i.shadow.mapSize.width=e,i.intensity=.15,i.exponent=.05,i.penumbra=2,i.decay=3,i.angle=de2ra(80),i.target.position={x:-10,y:10,z:0},scene.add(i),scene.add(i.target)}var mainLight,groundMaterial;
//# sourceMappingURL=site.js.map
