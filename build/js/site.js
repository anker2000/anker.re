function addProject(e,a){function t(){r.screenWidth=screenWidthFromDistance(camera.position.z),console.log(r.screenWidth)}var s=new THREE.Group,r={};$(window).bind("resize",t),t();var o=new THREE.JSONLoader,n=new THREE.MeshBasicMaterial({color:16777215}),l=$(e).find("video")[0],m=new THREE.VideoTexture(l);m.minFilter=THREE.LinearFilter,m.magFilter=THREE.LinearFilter,m.format=THREE.RGBFormat,m.wrapS=THREE.ClampToEdgeWrapping,m.wrapT=THREE.ClampToEdgeWrapping,n.map=m;var p=new THREE.MeshPhongMaterial({color:16777215});if(p.specular.r=1,p.specular.g=1,p.specular.b=1,p.transparent=!0,p.opacity=.1,p.shininess=10,$(e).hasClass("mobile")){var d=new THREE.Group,E=new THREE.PlaneGeometry(.55,.983,1),c=new THREE.Mesh(E,n);c.receiveShadow=!1,c.position.z=.0292,c.position.y=.05,c.receiveShadow=!1,c.position.z=.0292,c.position.y=.05,d.add(c);var w=new THREE.Mesh(E,p);w.receiveShadow=!0,w.position.z=.0293,w.position.y=.05,w.transparent=!0,o.load("models/phone.json",function(e,a){var t=new THREE.MultiMaterial(a),s=new THREE.Mesh(e,t);s.position.y=-.6,s.castShadow=!0,s.traverse(function(e){for(d.position.y=-5,d.position.z=-1,i=0;i<s.material.materials.length;i++){var a=.75;s.material.materials[i].side=2,s.material.materials[i].specular.r=a,s.material.materials[i].specular.g=a,s.material.materials[i].specular.b=a,s.material.materials[i].emissive.r=0,s.material.materials[i].emissive.g=0,s.material.materials[i].emissive.b=0,s.material.materials[i].shininess=10}d.add(s)}),phoneObject=s,d.position.z=0,d.position.y=-1,d.scale.set(30,30,30),d.castShadow=!0,TweenMax.to(d.rotation,1.5,{y:de2ra(0),ease:Power4.easeOut});TweenMax.to(d.position,3.5,{y:0,yoyo:!0,repeat:-1,ease:Power2.easeInOut,onComplete:function(){}})}),s.add(d)}else if($(e).hasClass("desktop")){var u=new THREE.Group,h=new THREE.Object3D;o.load("models/screen.json",function(e,a){var t=new THREE.MultiMaterial(a),s=new THREE.Mesh(e,t);s.position.y=0,s.position.x=-.5,s.position.z=0,s.castShadow=!0,s.traverse(function(e){for(i=0;i<s.material.materials.length;i++){var a=.75;s.material.materials[i].side=2,s.material.materials[i].specular.r=a,s.material.materials[i].specular.g=a,s.material.materials[i].specular.b=a,s.material.materials[i].emissive.r=0,s.material.materials[i].emissive.g=0,s.material.materials[i].emissive.b=0,s.material.materials[i].shininess=8}h.add(s)})});var T=new THREE.PlaneGeometry(8.7,5.8,1),v=new THREE.Mesh(T,n);v.position.z=-3.16,v.position.y=3.3,v.rotation.x=de2ra(1),h.add(v);var R=new THREE.Mesh(T,p);R.receiveShadow=!0,R.position.z=-3,R.position.y=3.3,R.rotation.x=de2ra(1),h.add(R);var H=new THREE.Object3D,M=new THREE.BoxBufferGeometry(200,200,200),y=new THREE.MeshBasicMaterial({color:16777215});mesh=new THREE.Mesh(M,y),H.add(mesh),h.position.z=3,H.add(h),H.position.z=-2.8,H.rotation.x=de2ra(90);TweenMax.to(H.rotation,1,{x:0,ease:Power4.easeInOut}),TweenMax.to(n,.3,{opacity:1,delay:.5});u.add(H),o.load("models/keyboard.json",function(e,a){var t=new THREE.MultiMaterial(a),s=new THREE.Mesh(e,t);for(s.position.x=-.5,s.castShadow=!0,i=0;i<s.material.materials.length;i++){var r=.75;s.material.materials[i].side=2,s.material.materials[i].specular.r=r,s.material.materials[i].specular.g=r,s.material.materials[i].specular.b=r,s.material.materials[i].emissive.r=0,s.material.materials[i].emissive.g=0,s.material.materials[i].emissive.b=0,s.material.materials[i].shininess=1.5}u.add(s)}),o.load("models/keys.json",function(e,a){var t=new THREE.MultiMaterial(a),s=new THREE.Mesh(e,t);for(s.position.y=.005,s.position.x=-.5,s.position.z=0,s.castShadow=!0,i=0;i<s.material.materials.length;i++){var r=.75;s.material.materials[i].side=2,s.material.materials[i].specular.r=r,s.material.materials[i].specular.g=r,s.material.materials[i].specular.b=r,s.material.materials[i].emissive.r=0,s.material.materials[i].emissive.g=0,s.material.materials[i].emissive.b=0,s.material.materials[i].shininess=21}u.add(s)}),u.position.y=-10,u.position.z=4,u.scale.set(4,4,4),s.add(u),s.position.z=5;TweenMax.to(u.position,3.5,{y:-9,yoyo:!0,repeat:-1,ease:Power2.easeInOut,onComplete:function(){}})}return s.updatePosition=function(){this.position.x=this.count*screenWidthFromDistance(60)},a.add(s),setTimeout(function(e){e.position.x=e.count*screenWidthFromDistance(60)},100,s),s}
function init(){setEnvironment(),setLights(),$("section").each(function(e,n){sections.push(addProject(n,stage)),sections[e].count=e}),animate()}function setLights(){var e=512,n=new THREE.PlaneGeometry(250,250,1),t=new THREE.ShadowMaterial;t.opacity=.3;var i=new THREE.Mesh(n,t);i.receiveShadow=!0,i.rotation.x=55,i.position.y=-22,i.transparent=!0,scene.add(i);var o=new THREE.SpotLight(16777215);o.castShadow=!1,o.position.set(20,55,20),o.target.position.set(0,0,-10),o.shadow.mapSize.height=e,o.shadow.mapSize.width=e,o.intensity=.45,o.penumbra=1.5,o.decay=2,o.angle=de2ra(15),scene.add(o),scene.add(o.target);var r=new THREE.SpotLight(16777215);r.castShadow=!0,r.position.set(0,50,-10),r.shadow.mapSize.height=1024,r.shadow.mapSize.width=1024,r.intensity=.15,r.exponent=.05,r.angle=de2ra(75),scene.add(r),scene.add(r.target)}function scrollHandler(){scrollPercentage=$(".projects").scrollTop()/($(".projects")[0].scrollHeight-$(window).innerHeight()),console.log(scrollPercentage),stage.position.x=0-scrollPercentage*(screenWidthFromDistance(60)*(sections.length-1))}function setEnvironment(){var e=document.createElement("div");e.setAttribute("class","content"),document.getElementsByClassName("devices")[0].appendChild(e),camera=new THREE.PerspectiveCamera(setFOV(),window.innerWidth/window.innerHeight,1,2e3),camera.position.z=60,scene=new THREE.Scene,stage=new THREE.Group,scene.add(stage),$(".projects").bind("scroll",scrollHandler);var n=!0;window.devicePixelRatio>1&&(n=!1),renderer=new THREE.WebGLRenderer({alpha:!0,antialias:n}),renderer.setClearColor(16711680,0),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,e.appendChild(renderer.domElement),underlay=document.createElement("canvas"),underlayCtx=underlay.getContext("2d"),underlay.width=window.innerWidth,underlay.height=window.innerHeight,e.appendChild(underlay),overlay=document.createElement("canvas"),overlayCtx=overlay.getContext("2d"),overlay.width=window.innerWidth,overlay.height=window.innerHeight,overlay.style.position="absolute",overlay.style.top="1%",overlay.style.left="-1%",e.appendChild(overlay);var t=renderer.domElement;t.style.position="absolute",window.addEventListener("resize",onWindowResize,!1),animate()}function onWindowResize(){for(windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),overlay.width=window.innerWidth,overlay.height=window.innerHeight,camera.fov=setFOV(),scrollHandler(),i=0;i<sections.length;i++)sections[i].updatePosition()}function onDocumentMouseMove(e){mouseX=windowHalfX-e.clientX,mouseY=windowHalfY-e.clientY,prevMouseX=mouseX,TweenMax.to(mousePosition,1,{x:mouseX,y:mouseY})}function animate(){requestAnimationFrame(animate),render()}function render(){camera.position.x=.003*(mousePosition.x-camera.position.x),camera.position.y=.003*(-mousePosition.y-camera.position.y),renderer.render(scene,camera)}function de2ra(e){return e*(Math.PI/180)}function screenWidthFromDistance(e){var n=window.innerWidth/window.innerHeight,t=2*e*Math.tan(.5*camera.fov*(Math.PI/180)),i=t*n;return i}function setFOV(){var e=map_range(window.innerWidth,375,1440,95,60);return e<60&&(e=60),e>90&&(e=90),e}function hexToRgb(e,n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),i=function(){return void 0==this.alpha?"rgb("+this.r+", "+this.g+", "+this.b+")":(this.alpha>1?this.alpha=1:this.alpha<0&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")")};return void 0==n?t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),toString:i}:null:(n>1?n=1:0>n&&(n=0),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),alpha:n,toString:i}:null)}function rgbToHex(e,n,t){function i(e){var n=e.toString(16);return 1==n.length?"0"+n:n}if(void 0==n||void 0==t){if("string"==typeof e){var o=/^rgb[a]?\(([\d]+)[ \n]*,[ \n]*([\d]+)[ \n]*,[ \n]*([\d]+)[ \n]*,?[ \n]*([.\d]+)?[ \n]*\)$/i.exec(e);return rgbToHex(parseInt(o[1]),parseInt(o[2]),parseInt(o[3]))}return void 0==e.r||void 0==e.g||void 0==e.b?null:rgbToHex(e.r,e.g,e.b)}var r=e;return"#"+i(r)+i(n)+i(t)}$(function(){init()});var camera,scene,stage,renderer,mouseX=0,prevMouseX=0,mouseY=0,mouseDown=!1,mouseDirection,overlay,overlayCtx,underlay,underlayCtx,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,mouseDownCoord=new Object,sections=[],mousePosition={x:0,y:0};document.addEventListener("mousemove",onDocumentMouseMove,!1),$(".controls a").click(function(e){e.stopPropagation()});
document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"></script>');
function map_range(n,r,a,e,t){return e+(t-e)*(n-r)/(a-r)}
//# sourceMappingURL=site.js.map
