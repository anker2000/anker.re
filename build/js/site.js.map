{"version":3,"sources":["_tools.js","addText.js","add_device.js","add_project.js","customMaterial.js","interface.js","jquery.scalem.js","livereload.js","route_links.js","set_lights.js"],"names":["map_range","value","low1","high1","low2","high2","hexToRgb","r","t","n","exec","a","this","alpha","g","b","parseInt","toString","rgbToHex","length","i","e","rgbPercentage","obj","colorIntensity","fps","startTime","frameNumber","average","framesCounted","secondsCounted","getFPS","d","Date","getTime","currentTime","result","Math","floor","reset","animateText","setLetterPosition","headline","$","each","elm","abs","proximity","tOpacity","TweenMax","to","parentNode","opacity","onComplete","y","ease","Power4","easeOut","register","container","document","createElement","className","body","appendChild","cta","innerHTML","name","scalem","maxSize","bind","ref","setTimeout","animateHeadline","animatesIn","console","log","render","sections","scrollHandler","addPhone","rotation","position","screenMaterial","glassMaterial","reflectionCube","loader","color_dark","color_light","deferred","Deferred","phoneGroup","THREE","Group","screenGeometry","PlaneGeometry","screen","Mesh","receiveShadow","z","add","glass","load","geometry","materials","material","MeshPhongMaterial","object","castShadow","traverse","child","emissive","color","computeVertexNormals","shininess","x","scale","set","resolve","promise","addLaptop","macbookGroup","macbookScreenGroup","Object3D","macbookPivot","MeshStandardMaterial","side","DoubleSide","metalness","roughness","envMap","desktopGeometry","desktopScreen","de2ra","desktopGlass","tempgeometry","BoxBufferGeometry","tempmaterial","MeshBasicMaterial","mesh","bodyMaterial","specular","addProject","section","stage","resizeHandler","area","screenWidth","screenWidthFromDistance","camera","sectionObject","window","JSONLoader","video","find","vl","pause","CubeTextureLoader","format","RGBFormat","screenMaterialArray","Array","materialArray","children","im","tagName","push","customMaterial","transparent","reflectivity","combine","MixOperation","data","html","tween","loaded","hasClass","phonesGroup","done","startRotationPoint","yoyo","repeat","delay","Power2","easeInOut","begin","end","kickstart","updateRotation","play","type","targetRotation","updatePosition","count","start","addClass","css","kickOffSite","removeClass","mainLight","intensity","groundMaterial","checkLoad","element","texture","TextureLoader","src","VideoTexture","minFilter","LinearFilter","magFilter","wrapS","ClampToEdgeWrapping","wrapT","map","init","setEnvironment","setLights","animate","getProximity","sectionNo","scrollHeight","scrollWidth","localScroll","scrollTop","scrollLeft","scrollPercentage","innerHeight","progression","activeSection","prevActiveSection","no","resume","visible","scrollTarget","pixelRatio","devicePixelRatio","setAttribute","getElementsByClassName","PerspectiveCamera","setFOV","innerWidth","myTarget","Vector3","lookAt","scene","Scene","myAntialias","renderer","WebGLRenderer","antialias","setClearColor","setPixelRatio","setSize","shadowMap","enabled","PCFSoftShadowMap","domElement","style","addEventListener","onWindowResize","windowHalfX","windowHalfY","aspect","updateProjectionMatrix","fov","cameraReady","onDocumentMouseMove","event","clientX","storedMouse","clientY","mouseX","mouseY","prevMouseX","mousePosition","Power1","windowInFocus","frameCount","pixelRatioSwitchCount","getPixelRatio","hasData","degree","PI","distance","frustumHeight","tan","frustumWidth","panelSnap","mouseDown","mouseDirection","mouseDownCoord","Object","background","light","dark","ticker","setInterval","focus","blur","click","stopPropagation","fn","oOptions","oSettings","extend","ratio","reference","styles","updateStyles","o","nTargetWidth","nTextWidth","$o","$oP","parent","$o2","clone","width","display","white-space","$ref","getAttribute","aStyles","split","nRatio","max","parseFloat","nMaxSize","nRefWidth","isNaN","height","appendTo","remove","round","o2","fontSize","nScale","oStyles","imax","resize","jQuery","write","location","host","href","attr","shadowMapSize","groundGeometry","ShadowMaterial","ground","AmbientLight","spotLight2","SpotLight","shadow","mapSize","exponent","penumbra","decay","angle","target"],"mappings":"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","file":"site.js","sourcesContent":["function map_range(value, low1, high1, low2, high2) {\n    return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\nfunction hexToRgb(r,t){var n=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(r),a=function(){return void 0==this.alpha?\"rgb(\"+this.r+\", \"+this.g+\", \"+this.b+\")\":(this.alpha>1?this.alpha=1:this.alpha<0&&(this.alpha=0),\"rgba(\"+this.r+\", \"+this.g+\", \"+this.b+\", \"+this.alpha+\")\")};return void 0==t?n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),toString:a}:null:(t>1?t=1:0>t&&(t=0),n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),alpha:t,toString:a}:null)}\nfunction rgbToHex(r,t,n){function a(r){var t=r.toString(16);return 1==t.length?\"0\"+t:t}if(void 0==t||void 0==n){if(\"string\"==typeof r){var i=/^rgb[a]?\\(([\\d]+)[ \\n]*,[ \\n]*([\\d]+)[ \\n]*,[ \\n]*([\\d]+)[ \\n]*,?[ \\n]*([.\\d]+)?[ \\n]*\\)$/i.exec(r);return rgbToHex(parseInt(i[1]),parseInt(i[2]),parseInt(i[3]))}return void 0==r.r||void 0==r.g||void 0==r.b?null:rgbToHex(r.r,r.g,r.b)}var e=r;return\"#\"+a(e)+a(t)+a(n)}\nfunction rgbPercentage(obj) {\n\tobj.r = obj.r/255;\n\tobj.b = obj.b/255;\n\tobj.g = obj.g/255;\n\treturn obj;\n}\nfunction colorIntensity(obj) {\n\treturn (obj.r/255+obj.g/255+obj.b/255)/3;\n}\nvar fps = {\t\n\tstartTime : 0,\t\n\tframeNumber : 0,\n\taverage : 60,\n\tframesCounted : 60,\n\tsecondsCounted : 1,\n\tgetFPS : function(){\n\t\tthis.frameNumber++;\t\t\n\t\tvar d = new Date().getTime(), currentTime = ( d - this.startTime ) / 1000, result = Math.floor( ( this.frameNumber / currentTime ) );\n\t\t\n\t\tif( currentTime > 1 ){\n\t\t\tthis.framesCounted+=result\n\t\t\tthis.secondsCounted++;\n\t\t\tthis.startTime = new Date().getTime();\n\t\t\tthis.frameNumber = 0;\n\t\t\tthis.average = this.framesCounted/this.secondsCounted\n\t\t\t// $(\"span.fps\").html(this.average);\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\treset : function() {\n\t\tthis.framesCounted=0;\n\t\tthis.secondsCounted=0;\n\t}\n};\n","var animateText = function() {\n\tvar _this = this;\n\t\n\tfunction setLetterPosition(obj) {\n\t\tvar headline = $(obj.headline);\n\t\theadline.each(function(i,elm) {\n\t\t\t if (Math.abs(obj.proximity<.15)) {\n\t\t\t\tvar tOpacity=map_range(Math.abs(obj.proximity), 0, .15, 1, 0)\n\t\t\t\tTweenMax.to(elm.parentNode, .5, { opacity:tOpacity, onComplete:function() {}})\n\t\t\t} else {\n\t\t\t\tvar tOpacity=0;\n\t\t\t\tTweenMax.to(elm.parentNode, .5, { opacity:tOpacity, onComplete:function() {}})\n\t\t\t}\n\t\t\t\n\t\t\tTweenMax.to(elm, 5, { y:Math.abs(obj.proximity)*30, ease:Power4.easeOut, onComplete:function() {}})\n\t\t\t\n\t\t\t\n\t\t});\n\t}\n\n\n\treturn {\n\t\tregister: function(obj) {\n\t\t\t// _this.elm = obj.elm;\n\t\t\tobj.proximity=.25;\n\t\t\tvar container = document.createElement(\"div\");\n\t\t\tcontainer.className = \"current_project\";\n\n\t\t\tdocument.body.appendChild(container);\n\n\t\t\tvar cta = document.createElement(\"button\");\n\t\t\tcta.className=\"cta\";\n\t\t\tcta.innerHTML = \"See more\";\n\t\t\t// $(\"footer\")[0].appendChild(cta);\n\t\t\t\n\t\t\tvar name = document.createElement(\"h2\");\n\t\t\t// var nameHTML=\"\";\n\t\t\t// for (i=0;i<obj.name.length;i++) {\n\t\t\t// \tnameHTML+=\"<span>\"+obj.name[i]+\"</span>\";\n\t\t\t// }\n\t\t\tname.innerHTML='<a href=\"#\">'+obj.name+'</a>';\n\t\t\tcontainer.appendChild(name);\n\t\t\tobj.headline = name;\n\n\n\n\n\t\t\t$(\".current_project h2\").scalem({maxSize:390});\n\n\t\t\t$(\".projects\").bind(\"scroll\",function() {\n\t\t\t\tsetLetterPosition(obj);\n\t\t\t});\n\t\t\t\n\t\t\tcontainer.ref= obj.ref;\n\t\t\tsetLetterPosition(obj);\n\t\t\tsetTimeout(setLetterPosition,1000,obj);\n\t\t},\n\t\tanimateHeadline: function(obj, animatesIn) {\n\t\t\tvar headline = obj.headline;\n\t\t\t// console.log(\"headline\",$(headline));\n\t\t\tif (animatesIn) {\n\t\t\t\tconsole.log(headline);\n\t\t\t\t// animateIn(headline);\n\t\t\t} else {\n\t\t\t\t// animateOut(headline);\n\t\t\t}\n\t\t},\n\t\trender: function() {\n\t\t\tfor (i=0;i<sections.length;i++) {\n\t\t\t\tscrollHandler(sections[i]);\n\t\t\t}\n\t\t}\n\t}\n}();\n","function addPhone(rotation, position, screenMaterial, glassMaterial, reflectionCube, loader, color_dark, color_light) {\n\n\tvar deferred = new $.Deferred();\n\tvar phoneGroup = new THREE.Group();\n\tvar screenGeometry = new THREE.PlaneGeometry( 0.55, 1, 1 );\n\tvar screen = new THREE.Mesh( screenGeometry, screenMaterial );\n\tscreen.receiveShadow = false;\n\tscreen.position.z = 0.022;\n\tscreen.position.y = 0.05;\n\tphoneGroup.add( screen );\n\n\t// var glassMaterial = new THREE.MeshStandardMaterial({ side: THREE.DoubleSide, color:0x222222, emissive:0x0, metalness:0.7, roughness:0.2, envMap:reflectionCube });\n\tvar glass = new THREE.Mesh( screenGeometry, glassMaterial );\n\tglass.receiveShadow = false;\n\tglass.position.z = 0.0225;\n\tglass.position.y = 0.05;\n\tphoneGroup.add(glass);\n\n\tloader.load(\n\t\t'models/iphones7.json',\n\t\tfunction ( geometry, materials ) {\n\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\tvar object = new THREE.Mesh( geometry, material );\t\t\t\t\n\t\t\tobject.position.y=-0.6;\n\t\t\tobject.castShadow=true;\n\t\t\tobject.receiveShadow = true;\n\t\t\tphoneGroup.add( object );\n\t\t\tobject.traverse( function ( child ) {\n\t\t\t\t// child.geometry.computeFaceNormals();\n\n\t\t        phoneGroup.position.y=-5;\n\t\t        phoneGroup.position.z=-1;\t\t      \n\t\t\t\tobject.material.emissive.r = (color_dark.r/255);\n\t\t\t\tobject.material.emissive.g = (color_dark.g/255);\n\t\t\t\tobject.material.emissive.b = (color_dark.b/255);\n\t\t\t\tobject.material.color.r = (color_light.r/255);\n\t\t\t\tobject.material.color.g = (color_light.g/255);\n\t\t\t\tobject.material.color.b = (color_light.b/255);\n\t\t\t\t\t\n\t    \t});\n\t    \tloader.load(\n\t\t\t\t'models/iphone-back.json',\n\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\t\t\tvar object = new THREE.Mesh( geometry, material );\t\t\t\t\n\t\t\t\t\tobject.position.y=-0.6;\n\t\t\t\t\tobject.castShadow=true;\n\t\t\t\t\tobject.receiveShadow = true;\n\t\t\t\t\tphoneGroup.add( object );\n\t\t\t\t\tobject.traverse( function ( child ) {\n\t\t\t\t\t\t// child.geometry.computeFaceNormals();\n\t\t\t\t\t\tchild.geometry.computeVertexNormals();\n\t\t\t\t        phoneGroup.position.y=-5;\n\t\t\t\t        phoneGroup.position.z=-1;\n\n\t\t\t\t       \n\t\t\t\t\t\tobject.material.emissive.r = (color_dark.r/255);\n\t\t\t\t\t\tobject.material.emissive.g = (color_dark.g/255);\n\t\t\t\t\t\tobject.material.emissive.b = (color_dark.b/255);\n\t\t\t\t\t\tobject.material.color.r = (color_light.r/255);\n\t\t\t\t\t\tobject.material.color.g = (color_light.g/255);\n\t\t\t\t\t\tobject.material.color.b = (color_light.b/255);\n\t\t\t\t\t\tobject.material.shininess = 10;\n\n\t\t\t\t\t\tphoneGroup.position.z=position.z;\n\t\t\t\t\t\tphoneGroup.position.y=position.y;\n\t\t\t\t\t\tphoneGroup.position.x=position.x;\n\t\t\t\t\t\tphoneGroup.scale.set( 30, 30, 30 );\n\t\t\t\t\t\tphoneGroup.castShadow = true;\n\t\t\t\t\t\tphoneGroup.rotation.x=rotation.x;\n\t\t\t\t\t\tphoneGroup.rotation.y=rotation.y;\n\t\t\t\t\t\tphoneGroup.rotation.z=rotation.z;\n\t\t\t\t\t\tdeferred.resolve(phoneGroup);\n\t\t\t    \t})\t\t\t\t    \t\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\treturn deferred.promise();\n}\n\nfunction addLaptop(rotation, position, screenMaterial, glassMaterial, reflectionCube, loader, color_dark, color_light) {\n\tvar deferred = new $.Deferred();\n\tvar macbookGroup = new THREE.Group();\n\tvar macbookScreenGroup = new THREE.Object3D();\t\n    var material = new THREE.MeshStandardMaterial({ side: THREE.DoubleSide, color:0xffffff, metalness:0.5, roughness:1});\n\tvar macbookPivot = new THREE.Object3D();\n\t\n\n\tloader.load(\n\t\t// resource URL\n\t\t'models/screen-back.json',\n\t\t// Function when resource is loaded\n\t\tfunction ( geometry, materials ) {\n\t\t\t// var material = new THREE.MultiMaterial( materials );\n\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\tvar object = new THREE.Mesh( geometry, material );\n\t\t\t// scene.add( object );\n\t\t\t\n\t\t\tobject.position.y=0;\n\t\t\tobject.position.x=-0.5;\n\t\t\tobject.position.z=0;\n\t\t\t// object.rotation.y=de2ra(180);\n\n\t\t\tobject.castShadow=true;\n\t\t\tmaterial.shininess = 0.2;\n\t\t\tobject.traverse( function ( child ) {\n\t\t        // console.log(\"screen\",object);\n\t\t        if ( child instanceof THREE.Mesh ) {\n\t\t            child.geometry.computeVertexNormals();\n\t\t        }\n\t\t        object.material.side=THREE.DoubleSide;\n\t\t        var color_dark = {\n\t\t        \tr:10,\n\t\t        \tg:10,\n\t\t        \tb:10\n\t\t        }\n\t\t        var color_light = color_dark;\n\t\t\t\tmacbookScreenGroup.add( object );\n\t\t        \n\t\t    });\n\t\t    // console.log(\"loaded screen back 1\");\n\t\t    loader.load(\n\t\t\t\t'models/screen-front.json',\n\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\t\n\t\t\t\t\tvar material = new THREE.MeshStandardMaterial({ side: THREE.DoubleSide, color:0x0f0f0f, shininess:1,emissive:0x0, metalness:0.7, roughness:0.2, envMap:reflectionCube });\n\t\t\t\t\tvar object = new THREE.Mesh( geometry, material );\t\t\t\t\n\t\t\t\t\tobject.position.y=0;\n\t\t\t\t\tobject.position.x=-0.5;\n\t\t\t\t\tobject.position.z=0;\n\t\t\t\t\t// object.rotation.y=de2ra(180);\n\t\t\t\t\tvar color_dark = {\n\t\t\t\t\t\tr:0,\n\t\t\t\t\t\tg:0,\n\t\t\t\t\t\tb:0\n\t\t\t\t\t}\n\t\t\t\t\tvar color_light = color_dark;\n\t\t\t\t\tobject.castShadow=true;\n\t\t\t\t\tmacbookScreenGroup.add( object );\n\t\t\t\t\tvar desktopGeometry = new THREE.PlaneGeometry( 8.7, 5.8, 1 );\n\n\t\t\t\t\tvar desktopScreen = new THREE.Mesh( desktopGeometry, screenMaterial );\n\t\t\t\t\tdesktopScreen.position.z = -3.16;\n\t\t\t\t\tdesktopScreen.position.y = 3.3;\n\t\t\t\t\tdesktopScreen.rotation.x = de2ra(1);\n\n\t\t\t\t\tmacbookScreenGroup.add(desktopScreen);\n\n\t\t\t\t\tvar desktopGlass = new THREE.Mesh(desktopGeometry, glassMaterial);\n\t\t\t\t\tdesktopGlass.receiveShadow = true;\n\t\t\t\t\tdesktopGlass.position.z = -3.16;\n\t\t\t\t\tdesktopGlass.position.y = 3.3;\n\t\t\t\t\tdesktopGlass.rotation.x = de2ra(1);\n\t\t\t\t\tmacbookScreenGroup.add(desktopGlass);\n\n\t\t\t\t\t\n\t\t\t\t\tvar tempgeometry = new THREE.BoxBufferGeometry( 200, 200, 200 );\n\t\t\t\t\tvar tempmaterial = new THREE.MeshBasicMaterial( { color: 0xffffff } );\t\n\t\t\t\t\tmesh = new THREE.Mesh( tempgeometry, tempmaterial );\n\t\t\t\t\t\n\t\t\t\t\tmacbookScreenGroup.position.z=3.1;\n\t\t\t\t\tmacbookPivot.add(macbookScreenGroup);\n\t\t\t\t\tmacbookPivot.position.z=-3;\n\t\t\t\t\tmacbookPivot.position.y=0;\n\t\t\t\t\tmacbookPivot.rotation.x=de2ra(90);\n\t\t\t\t\t\n\t\t\t\t\tmacbookGroup.add(macbookPivot);\n\n\t\t\t\t\t// console.log(\"loaded screen front 2\");\n\t\t\t\t\tloader.load(\n\t\t\t\t\t\t'models/keyboard.json',\n\t\t\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\t\t\tvar bodyMaterial = new THREE.MeshStandardMaterial({ side: THREE.DoubleSide, color:0xcccccc, metalness:0.2, roughness:1});\n\t\t\t\t\t\t\tvar object = new THREE.Mesh( geometry, bodyMaterial );\n\t\t\t\t\t\t\tobject.position.x=-0.5;\n\t\t\t\t\t\t\tobject.castShadow=true;\n\t\t\t\t\t\t\tmacbookGroup.add( object );\n\t\t\t\t\t\t\t// console.log(\"loaded keyboard 3\");\n\t\t\t\t\t\t\tloader.load(\n\t\t\t\t\t\t\t\t// resource URL\n\t\t\t\t\t\t\t\t'models/keys.json',\n\t\t\t\t\t\t\t\t// Function when resource is loaded\n\t\t\t\t\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\t\t\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\t\t\t\t\t\t\tvar object = new THREE.Mesh( geometry, material );\n\t\t\t\t\t\t\t\t\t// scene.add( object );\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tobject.position.y=0.005;\n\t\t\t\t\t\t\t\t\t// object.position.y=0.06;\n\t\t\t\t\t\t\t\t\tobject.position.x=-0.5;\n\t\t\t\t\t\t\t\t\tobject.position.z=0;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tobject.castShadow=false;\n\t\t\t\t\t\t\t\t\tvar color_dark = {\n\t\t\t\t\t\t\t\t\t\tr: 0,\n\t\t\t\t\t\t\t\t\t\tg: 0,\n\t\t\t\t\t\t\t\t\t\tb: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar color_light = color_dark;\n\t\t\t\t\t\t\t       \n\t\t\t\t\t\t        \tobject.material.side=THREE.DoubleSide;\n\t\t\t\t\t\t\t\t\tobject.material.specular.r = color_dark.r/255;\n\t\t\t\t\t\t\t\t\tobject.material.specular.g = color_dark.g/255;\n\t\t\t\t\t\t\t\t\tobject.material.specular.b = color_dark.b/255;\n\t\t\t\t\t\t\t\t\tobject.material.emissive.r = color_light.r/255;\n\t\t\t\t\t\t\t\t\tobject.material.emissive.g = color_light.g/255;\n\t\t\t\t\t\t\t\t\tobject.material.emissive.b = color_light.b/255;\n\t\t\t\t\t\t\t\t\tobject.material.shininess=15;\t\n\n\t\t\t\t\t\t\t\t\tmacbookGroup.add( object );\n\t\t\t\t\t\t\t\t\t// console.log(\"loaded keys 4\");\n\t\t\t\t\t\t\t    \tloader.load(\n\t\t\t\t\t\t\t\t\t\t// resource URL\n\t\t\t\t\t\t\t\t\t\t'models/keys-top.json',\n\t\t\t\t\t\t\t\t\t\t// Function when resource is loaded\n\t\t\t\t\t\t\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\t\t\t\t\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\t\t\t\t\t\t\t\t\tvar object = new THREE.Mesh( geometry, material );\n\t\t\t\t\t\t\t\t\t\t\t// scene.add( object );\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tobject.position.y=0.005;\n\t\t\t\t\t\t\t\t\t\t\t// object.position.y=0.06;\n\t\t\t\t\t\t\t\t\t\t\tobject.position.x=-0.5;\n\t\t\t\t\t\t\t\t\t\t\tobject.position.z=0;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tobject.castShadow=true;\n\t\t\t\t\t\t\t\t\t\t\tvar color_dark = {\n\t\t\t\t\t\t\t\t\t\t\t\tr: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tg: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tb: 0\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvar color_light = {\n\t\t\t\t\t\t\t\t\t\t\t\tr:5,\n\t\t\t\t\t\t\t\t\t\t\t\tg:5,\n\t\t\t\t\t\t\t\t\t\t\t\tb:5\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t        \n\t\t\t\t\t\t\t\t        \tobject.material.side=THREE.DoubleSide;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.specular.r = color_dark.r/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.specular.g = color_dark.g/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.specular.b = color_dark.b/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.emissive.r = color_light.r/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.emissive.g = color_light.g/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.emissive.b = color_light.b/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.shininess=21;\t\n\t\t\t\t\t\t\t\t        \n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.scale.set(6.25,6.25,6.25);\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.add( object );\n\t\t\t\t\t\t\t\t\t\t\t// macbookGroup.position = position;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.position.z=position.z;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.position.y=position.y;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.position.x=position.x;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.rotation.x = rotation.x;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.rotation.y = rotation.y;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.rotation.z = rotation.z;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.screen = macbookPivot;\n\t\t\t\t\t\t\t\t\t\t\t// screenMaterial.opacity=0;\n\t\t\t\t\t\t\t\t\t\t\t// console.log(\"screenMaterial\",screenMaterial);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t// console.log(\"loaded keys top 5\");\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t    \tdeferred.resolve(macbookGroup);\n\t\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t\n\t// scene.add(macbookGroup);\n\t\n\treturn deferred.promise();\n}","function addProject(section, stage) {\n\tvar sectionObject = new THREE.Group();\n\tvar area = {};\n\tfunction resizeHandler() {\n\t\tarea.screenWidth=screenWidthFromDistance(camera.position.z);\n\t}\n\t$(window).bind(\"resize\",resizeHandler);\n\tresizeHandler();\n\t\n\tvar loader = new THREE.JSONLoader();\n\tvar screenMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });\t\n\tvar video = $(section).find(\"video\");\n\tfor (var vl=0;vl<video.length;vl++) {\n\t\tvideo[vl].pause();\n\t\tsectionObject.video = video[vl];\n\t}\n\t\n\n\tvar reflectionCube = new THREE.CubeTextureLoader().load([\"models/environment2.jpg\",\"models/environment2.jpg\",\"models/environment2.jpg\",\"models/environment2.jpg\",\"models/environment2.jpg\",\"models/environment2.jpg\"] );\n\treflectionCube.format = THREE.RGBFormat;\n\n\tvar screenMaterialArray = new Array();\n\n\tvar materialArray = $(section)[0].children;\n\tfor (im = 0; im < materialArray.length; im++) {\n\t\t\n\t\tif (materialArray[im].tagName==\"IMG\" || materialArray[im].tagName==\"VIDEO\") {\t\t\t\n\t\t\tscreenMaterialArray.push(customMaterial(materialArray[im]));\n\t\t}\t\t\n\t}\n\t\n\tvar glassMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff  });\n\tglassMaterial.specular.r=1;\n\tglassMaterial.specular.g=1;\n\tglassMaterial.specular.b=1;\n\tglassMaterial.transparent = true;\n\tglassMaterial.opacity = 0.05;\n\tglassMaterial.shininess = 20;\n\tglassMaterial.envMap = reflectionCube;\n\tglassMaterial.reflectivity = 5;\n\tglassMaterial.combine = THREE.MixOperation;\n\tvar emDarken = 1;\n\tvar color_light = hexToRgb($(section).data(\"device-light\"));\n\tvar color_dark = hexToRgb($(section).data(\"device-dark\"));\n\n\t\n\tsectionObject.elm = section;\n\n\n\tsectionObject.name=$(section).find(\"h2\").html()\n\tsectionObject.tween = [];\n\tsectionObject.loaded=0;\n\tsectionObject.ref = section;\n\tif ($(section).hasClass(\"mobile\")) {\n\n\t\tvar phonesGroup = new THREE.Group();\n\t\taddPhone({ x:de2ra(60), y:de2ra(-140), z:de2ra(30) },{ x:-10, y:4, z:-10 }, screenMaterialArray[1], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(phoneGroup) {\n\t\t\t// TweenMax.to(phoneGroup.rotation, 1.5, {y:de2ra(0),  ease:Power4.easeOut});\n\t\t\tphoneGroup.startRotationPoint = 60;\n\t\t\tphonesGroup.add(phoneGroup);\n\t\t\tsectionObject.loaded+=.333333;\n\t\t\tsectionObject.tween.push(TweenMax.to(phoneGroup.position, 3.5,{ y:phoneGroup.position.y-1, yoyo:true, repeat:-1, delay:0, ease:Power2.easeInOut, onComplete:function() {}}));\n\t\t\t// console.log(\"phone added\");\n\t\t});\n\n\t\taddPhone({ x:de2ra(50), y:de2ra(35), z:de2ra(-80) },{ x:15, y:1, z:-10 }, screenMaterialArray[0], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(phoneGroup) {\n\t\t\t// TweenMax.to(phoneGroup.rotation, 1.5, {y:de2ra(0),  ease:Power4.easeOut});\n\t\t\tsectionObject.tween.push(TweenMax.to(phoneGroup.position, 3.5,{ y:phoneGroup.position.y-1, yoyo:true, repeat:-1, delay:0.5, ease:Power2.easeInOut, onComplete:function() {}}));\t\n\t\t\tphoneGroup.startRotationPoint = 50;\n\t\t\tphonesGroup.add(phoneGroup);\n\t\t\tsectionObject.loaded+=.333333;\n\t\t\t// console.log(\"phone added\");\n\t\t});\n\n\n\t\taddPhone({ x:de2ra(120), y:de2ra(0), z:de2ra(-60) },{ x:45, y:-11, z:-10 }, screenMaterialArray[2], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(phoneGroup) {\n\t\t\t// TweenMax.to(phoneGroup.rotation, 1.5, {y:de2ra(0),  ease:Power4.easeOut});\n\t\t\tsectionObject.tween.push(TweenMax.to(phoneGroup.position, 3.5,{ y:phoneGroup.position.y-1, yoyo:true, repeat:-1, delay:1.5, ease:Power2.easeInOut, onComplete:function() {}}));\n\t\t\tphoneGroup.startRotationPoint = 120;\n\t\t\tphonesGroup.add(phoneGroup);\n\t\t\tsectionObject.loaded+=.333333;\n\t\t\t// console.log(\"phone added\");\n\t\t});\n\n\t\tphonesGroup.position.y=5;\n\t\tphonesGroup.position.z=15;\n\t\t// phonesGroup.rotation.z=de2ra(-15);\n\t\tphonesGroup.position.x=-12\n\t\tphonesGroup.begin = function() {\n\n\t\t}\n\t\tphonesGroup.end = function() {\n\n\t\t}\n\t\tphonesGroup.startRotationPoint = 12\n\t\tsectionObject.add(phonesGroup);\n\n\t} else if ($(section).hasClass(\"desktop\")) {\n\t\t// console.log(\"print out\",screenMaterialArray[0],screenMaterialArray[1])\n\t\taddLaptop({x:de2ra(60), y:de2ra(0), z:de2ra(0)}, { x:0, y:-45, z:10}, screenMaterialArray[0], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(macbookGroup) {\n\t\t\t// console.log(\"received macbook\", macbookGroup);\n\t\t\tsectionObject.loaded+=1.5;\n\t\t\tmacbookGroup.startRotationPoint = 0;\n\t\t\tmacbookGroup.opacity = 0;\n\t\t\tmacbookGroup.begin = function() {\n\t\t\t\t// console.log(\"macbook open\");\n\t\t\t\tvar openLid = TweenMax.to(macbookGroup.screen.rotation, 1, { x:-de2ra(20), delay:.75, ease:Power4.easeInOut});\n\t\t\t}\n\t\t\tmacbookGroup.end = function() {\n\t\t\t\tvar openLid = TweenMax.to(macbookGroup.screen.rotation, 1, { x:de2ra(90), ease:Power4.easeInOut});\n\t\t\t}\n\t\t\tsectionObject.add(macbookGroup);\n\t\t\t// sectionObject.tween.push(TweenMax.to(macbookGroup.position, 3.5,{ y:macbookGroup.position.y-1, yoyo:true, repeat:-1, ease:Power2.easeInOut, onComplete:function() {}}));\n\t\t\tif (sectionObject.loaded==1) {\n\t\t\t\tscrollHandler();\n\t\t\t}\n\t\t\tif (sectionObject.kickstart) {\n\t\t\t\tmacbookGroup.begin()\n\t\t\t}\n\t\t\t// console.log(\"macbook added\");\n\t\t});\n\t\t// addPhone({ x:de2ra(-5), y:de2ra(-10), z:de2ra(-10) },{ x:0, y:0, z:10 }, screenMaterialArray[1], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(phoneGroup) {\n\t\t// \t// TweenMax.to(phoneGroup.rotation, 1.5, {y:de2ra(0),  ease:Power4.easeOut});\n\t\t// \tvar phonesGroup = new THREE.Group();\n\t\t\t\n\t\t// \tphonesGroup.position.y=-2;\n\t\t// \tphonesGroup.position.z=45;\n\t\t// \t// phonesGroup.rotation.z=de2ra(-15);\n\t\t// \tphonesGroup.position.x=0\n\t\t// \tphoneGroup.scale.x = 12;\n\t\t// \tphoneGroup.scale.y = 12;\n\t\t// \tphoneGroup.scale.z = 12;\n\t\t// \tphonesGroup.begin = function() {\n\t\t// \t\tconsole.log(\"phonesgroup begin\");\n\t\t// \t}\n\t\t// \tphonesGroup.end = function() {\n\n\t\t// \t}\n\t\t// \tphonesGroup.startRotationPoint = 0;\n\t\t// \tphoneGroup.startRotationPoint = -5;\n\t\t// \tphonesGroup.add(phoneGroup);\n\t\t\t\n\t\t// \tsectionObject.tween.push(TweenMax.to(phoneGroup.position, 3.5,{ y:phoneGroup.position.y-1, yoyo:true, repeat:-1, delay:0.5, ease:Power2.easeInOut, onComplete:function() {}}));\n\t\t// \tsectionObject.loaded=1;\n\t\t// \tsectionObject.loaded+=.5;\n\n\t\t// \tscrollHandler();\n\t\t// \tconsole.log(\"phone added\",phonesGroup);\n\t\t// \tsectionObject.add(phonesGroup);\n\n\t\t// });\n\t}\n\tsectionObject.updateRotation = function() {\n\n\t\tif (Math.abs(this.proximity)<0.1) {\n\t\t\tif (this.video) this.video.play();\n\t\t\tfor (t=0;t<this.tween.length;t++) {\n\t\t\t\tthis.tween[t].play();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.video) this.video.pause();\n\t\t\tfor (t=0;t<this.tween.length;t++) {\n\t\t\t\tthis.tween[t].pause();\n\t\t\t}\n\t\t}\n\t\ttry {\n\t\t\tif (this.name,this.type, this.children[0].children[0].type==\"Group\") { //phones\n\t\t\t\tvar targetRotation =  this.children[0].startRotationPoint+(this.proximity*100);\n\t\t\t\tfor (r=0;r<this.children[0].children.length; r++) {\n\t\t\t\t\tthis.children[0].children[r].rotation.x=de2ra(this.children[0].children[r].startRotationPoint+(this.proximity*200));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar targetRotation =  this.children[0].startRotationPoint+(this.proximity*100);\n\t\t\t}\n\t\t\tthis.children[0].rotation.y=de2ra(targetRotation);\n\t\t\t\n\t\t} catch(e) {\n\n\t\t}\n\t}\n\tsectionObject.updatePosition = function() {\n\t\t// this.position.x = this.count*screenWidthFromDistance(200);\n\t\tthis.position.y = sectionObject.count * -1*screenWidthFromDistance(200);\n\t}\n\tsectionObject.start = function(object) {\n\n\t\tif (typeof this.loaded == \"undefined\" || typeof sectionObject.headline == \"undefined\") {\n\t\t\tsetTimeout(function() {\n\t\t\t\tsectionObject.start()\n\t\t\t},50);\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t\n\t\t$(sectionObject.headline.parentNode).addClass(\"active\");\n\t\t\n\t\t\n\t\t$(\"body\").css(\"background\",$(section).data(\"bg-dark\"));\n\t\t$(\"body\").css(\"color\",$(section).data(\"text-color\"));\n\t\tkickOffSite();\n\t\t$(\"button.cta .arrow\").css(\"background-color\",$(section).data(\"text-color\"));\n\t\tsetTimeout(function() {\n\t\t\t$(\"button.cta\").removeClass(\"off\").css(\"color\",$(section).data(\"text-color\"));\n\t\t},1500);\n\t\t$(\"nav .toggle span\").css(\"background-color\",$(section).data(\"text-color\"));\n\t\tmainLight.color = rgbPercentage(hexToRgb($(section).data(\"bg-dark\")));\n\t\tvar intensity = colorIntensity(hexToRgb($(section).data(\"bg-light\")));\n\t\tTweenMax.to(groundMaterial, 1,{ opacity:map_range(intensity, 0, 1, 0.3, 0.04), onComplete:function() {}})\n\n\n\t\tfor (var a=0;a<sectionObject.children.length;a++) {\n\t\t\t// console.log(\"sectionobject child\",a);\n\t\t\tif (typeof sectionObject.children[a].begin != \"undefined\") {\n\t\t\t\tsectionObject.children[a].begin();\n\t\t\t}\n\t\t}\n\t\tsectionObject.kickstart=true;\n\t}\n\tsectionObject.end = function() {\n\t\t$(\"button.cta\").addClass(\"off\");\n\t\tfor (var a=0;a<sectionObject.children.length;a++) {\n\t\t\t// console.log(\"sectionobject child\",a);\n\t\t\tif (typeof sectionObject.children[a].end != \"undefined\") {\n\t\t\t\tsectionObject.children[a].end();\n\t\t\t}\n\t\t}\n\t\tif (typeof sectionObject.headline ==\"object\") {\n\t\t\t$(sectionObject.headline.parentNode).removeClass(\"active\");\n\t\t}\n\t}\n\tstage.add( sectionObject );\n\t\n\tsectionObject.checkLoad = function() {\n\t\tif (sectionObject.loaded>0.98) {\n\t\t\tanimateText.register(sectionObject);\n\t\t\tscrollHandler();\n\t\t} else {\n\t\t\tsetTimeout(sectionObject.checkLoad,100);\n\t\t}\n\t}\n\tsectionObject.checkLoad();\n\tsetTimeout(function(sectionObject) {\n\t\t// sectionObject.position.y = sectionObject.count*screenWidthFromDistance(200);\n\t\tsectionObject.position.y = sectionObject.count * -1*screenWidthFromDistance(200);\n\t},100,sectionObject);\n\treturn sectionObject;\n}\n","function customMaterial(element) {\n\tvar screenMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });\n\tif (element.tagName==\"IMG\") {\n\t\tvar texture = new THREE.TextureLoader().load( element.src);\n\t} else if (element.tagName==\"VIDEO\") {\n\t\tvar texture = new THREE.VideoTexture( element );\n\t}\n\ttexture.minFilter = THREE.LinearFilter;\n\ttexture.magFilter = THREE.LinearFilter;\n\ttexture.format = THREE.RGBFormat;\n\ttexture.wrapS = THREE.ClampToEdgeWrapping;\n\ttexture.wrapT = THREE.ClampToEdgeWrapping;\n\tscreenMaterial.map = texture;\n\treturn screenMaterial;\n}","$(function() {\n\tinit();\n\t$('.projects').panelSnap();\n});\n\nvar camera, scene, stage, renderer;\nvar mouseX = 0, prevMouseX = 0, mouseY = 0, mouseDown = false, mouseDirection;\nvar windowHalfX = window.innerWidth / 2;\nvar windowHalfY = window.innerHeight / 2;\nvar mouseDownCoord = new Object();\nvar sections = [], progression = 0, activeSection = 0, prevActiveSection = null, background = { light: { r:0, g:0, b:0 }, dark: { r:0, g:0, b:0 } };\nfunction init() {\n\n\tsetEnvironment();\n\tsetLights();\n\t\n\tsetTimeout(function() {\n\t\tscrollHandler();\n\t\tanimate();\n\t\t$(\"section\").each(function(i,elm) {\n\t\t\tsections.push(addProject(elm,stage));\n\t\t\tsections[i].count=i;\n\t\t});\n\t\t// $(\"section:first-child\").find(\"video\")[0].play();\n\t},1000);\n\n}\n\nfunction getProximity(sectionNo) {\n\tif ($(\".projects\")[0].scrollHeight>$(\".projects\")[0].scrollWidth) {\n\t\tvar localScroll = $(\".projects\").scrollTop() / $(\".projects\")[0].scrollHeight;\n\t} else {\n\t\tvar localScroll = $(\".projects\").scrollLeft() / $(\".projects\")[0].scrollWidth;\n\t}\n\treturn (sectionNo) - (localScroll * sections.length);\n}\nfunction scrollHandler() {\n\tscrollPercentage = $(\".projects\").scrollTop() / ($(\".projects\")[0].scrollHeight-$(window).innerHeight());\t\n\tprogression = scrollPercentage * sections.length;\n\n\tactiveSection = Math.floor(progression);\n\n\tif (activeSection == sections.length) activeSection -=1;\n\tif (activeSection != prevActiveSection) {\n\t\tfor (i=0;i<sections.length;i++) {\n\t\t\tif (i==activeSection) {\n\t\t\t\tsections[activeSection].start();\n\t\t\t\t$(\".status\").html((activeSection+1)+\"  \"+(sections.length));\n\t\t\t\tfor (no=0;no<sections[i].tween.length;no++) {\n\t\t\t\t\tsections[i].tween[no].resume();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsections[i].end();\n\t\t\t\tfor (no=0;no<sections[i].tween.length;no++) {\n\t\t\t\t\tsections[i].tween[no].pause();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tvar inProximity=[];\n\tfor (i=0;i<sections.length;i++) {\n\t\tsections[i].proximity = getProximity(i);\n\t\tsections[i].updateRotation();\n\t\t\n\t\tif (sections[i].proximity>-0.75 && sections[i].proximity<0.75) {\n\t\t\tsections[i].visible = true;\n\t\t} else {\n\t\t\tsections[i].visible = true;\n\t\t}\n\t}\n\tprevActiveSection = activeSection;\n\tvar scrollTarget = 0-scrollPercentage*(screenWidthFromDistance(200)*(sections.length-1));\n\tTweenMax.to(stage.position, 0.75, {ease: Power4.easeOut, y: -1*scrollTarget});\n}\nfunction setEnvironment() {\n\tvar pixelRatio = window.devicePixelRatio;\n\tvar container = document.createElement( 'div' );\n\tcontainer.setAttribute(\"class\",\"content\");\n\tdocument.getElementsByClassName('devices')[0].appendChild( container );\n\n\tcamera = new THREE.PerspectiveCamera( setFOV(), window.innerWidth / window.innerHeight, 1, 5000 );\n\tcamera.position.z = 120;\n\tcamera.myTarget = new THREE.Vector3(0,50,-50);\n\n\tcamera.lookAt(camera.myTarget);\n\n\tscene = new THREE.Scene();\n\tstage = new THREE.Group();\n\tscene.add(stage);\n\t$(\".projects\").bind(\"scroll\",scrollHandler);\n\t\n\tvar myAntialias=false;\n\tif (pixelRatio>1) {\n\t\tmyAntialias=false;\n\t}\n\n\trenderer = new THREE.WebGLRenderer( {alpha: true, antialias: myAntialias });\n\t// renderer.setClearColor( 0xff0000, 0 );\n\trenderer.setClearColor( 0x000000, 0 );\n\trenderer.setPixelRatio( 2 );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.shadowMap.enabled\t= true;\n\trenderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\tcontainer.appendChild( renderer.domElement );\n\n\tvar element = renderer.domElement;\n\telement.style.position='absolute';\n\twindow.addEventListener( 'resize', onWindowResize, false );\n}\n\nfunction onWindowResize() {\n\twindowHalfX = window.innerWidth / 2;\n\twindowHalfY = window.innerHeight / 2;\n\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\tcamera.fov = setFOV();\n\tscrollHandler();\n\tfor (i=0;i<sections.length;i++) {\n\t\tsections[i].updatePosition();\n\t}\n}\nfunction kickOffSite() {\n\tif (!$(\"body\").hasClass(\"loaded\")) {\n\t\tTweenMax.to(camera.myTarget, 1.2, {x:0, y:0, z:0, ease:Power4.easeOut, onComplete:cameraReady});\n\t\tsetTimeout(function() {\n\t\t\t$(\"body\").addClass(\"loaded\");\n\t\t},2000);\n\t}\n}\nfunction cameraReady() {\n\tconsole.log(\"camera ready\");\n}\nvar mousePosition = { x:0, y:0 };\ndocument.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\nvar storedMouse = { x:0, y:0 };\nfunction onDocumentMouseMove( event ) {\n\tif (typeof event == \"undefined\") {\n\t\tvar event = {\n\t\t\tclientX: storedMouse.x,\n\t\t\tclientY: storedMouse.y\n\t\t}\n\t}\n\tstoredMouse.x = event.clientX;\n\tstoredMouse.y = event.clientY;\n\tmouseX = windowHalfX - event.clientX;\n\tmouseY = windowHalfY - event.clientY;\n\tprevMouseX=mouseX;\n\tTweenMax.to(mousePosition, 1, {x: mouseX, y:mouseY, ease: Power1.easeOut});\n}\n\nTweenMax.ticker.addEventListener(\"tick\",animate);\nvar hasData=false;\nsetTimeout(function() {\n\thasData=true\n},4000);\nvar pixelRatioSwitchCount=-1;\nsetInterval(fps.reset, 10000);\nvar windowInFocus=true;\n$(window).focus(function() {\n\twindowInFocus=true;\n\tconsole.log(\"window in focus\");\n});\n$(window).blur(function() {\n\twindowInFocus=false;\n\tconsole.log(\"window out of focus\");\n});\n\nframeCount=0;\nfunction animate() {\n\tif (!windowInFocus) {\n\t\tif (frameCount>3) {\n\t\t\t// console.log(frameCount);\n\t\t\trender();\n\t\t\tframeCount=0;\n\t\t\tpixelRatioSwitchCount=0;\n\t\t} \n\t} else {\n\t\trender();\n\t}\n\tframeCount++;\n\tif (typeof renderer!=\"undefined\" && windowInFocus) {\n\t\tif (renderer.getPixelRatio()<2 && !renderer.antialias) {\n\t\t\trenderer.antialias=true;\n\t\t} else {\n\t\t\tif (renderer.antialias && renderer.getPixelRatio()>=2) renderer.antialias=false;\n\t\t}\n\t\tfps.getFPS()\n\t\tif (pixelRatioSwitchCount<4 && hasData) {\n\t\t\tif (fps.average < 25) {\n\t\t\t\tif (renderer.getPixelRatio() != 1) {\n\t\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\t\tpixelRatioSwitchCount+=1;\n\t\t\t\t}\n\t\t\t} else if (fps.average < 35) {\n\t\t\t\tif (renderer.getPixelRatio() != 1.5) {\n\t\t\t\t\tconsole.log(\"set pixel ratio 1.5\");\n\t\t\t\t\trenderer.setPixelRatio( 1.5 );\n\t\t\t\t\tpixelRatioSwitchCount+=1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (renderer.getPixelRatio() != 2) {\n\t\t\t\t\tconsole.log(\"set pixel ratio 2\");\n\t\t\t\t\trenderer.setPixelRatio( 2 );\n\t\t\t\t\tpixelRatioSwitchCount+=1;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (hasData) {\n\t\t\t\tif (fps.average>25) {\n\t\t\t\t\tconsole.log(\"set pixel ratio 1.5\");\n\t\t\t\t\trenderer.setPixelRatio( 1.5 );\n\t\t\t\t} else {\n\t\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction render() {\n\t// var time = Date.now();\n\t// console.log(camera);\n\tif (typeof camera != \"undefined\") {\n\t\tcamera.position.x = 0- ( mousePosition.x - camera.position.x ) * 0.009;\n\t\tcamera.position.y = 0 - (( - mousePosition.y - camera.position.y ) * 0.009);\n\t\tcamera.lookAt(camera.myTarget);\n\t\trenderer.render( scene, camera );\n\t}\n}\n\t\n\t\nfunction de2ra(degree) { \n\treturn degree*(Math.PI/180);\n}\nfunction screenWidthFromDistance(distance) {\n\tvar aspect = window.innerWidth / window.innerHeight;\n\tvar frustumHeight = 1.75 * distance * Math.tan(camera.fov * 0.5 * (Math.PI/180));\n\tvar frustumWidth = frustumHeight * aspect;\n\treturn frustumWidth;\n}\nfunction setFOV() {\n\t// var fov = map_range(window.innerWidth, 0, 100, 60, 305);\n\tfov = 40;\n\tif (window.innerWidth<600) {\n\t\tfov=70;\n\t}\n\treturn fov;\t\n}\n\n$(\".controls a\").click(function(e) {\n\te.stopPropagation();\n});\n\n","/*!\n * Scalem v1.2.0 - A responsive text jQuery plugin\n * Copyright 2014, Tom Doan (http://www.tohodo.com/)\n *\n * Scalem by Tom Doan is licensed under the MIT License.\n * Read a copy of the license in the LICENSE file or at\n * http://choosealicense.com/licenses/mit\n */\n\n(function($) {\n  $.fn.scalem = function(oOptions) {\n    var oSettings = $.extend({\n        ratio: 1,        // Scale ratio (1 = 100%)\n        reference: null, // Text will scale relative to this element\n        styles: '',       // List of styles to scale (useful for buttons)\n        maxSize:390\n      }, oOptions),\n      updateStyles = function(o, e) {\n        var $o = $(o),\n          $oP = $o.parent(),\n          // Create clone to get true text width\n          $o2 = $o.clone().css({\n            'width': 'auto',\n            'display': 'none',\n            'white-space': 'nowrap'\n          }),\n          // If data attribute exists, use that instead\n          $ref = $(o.getAttribute('data-scale-reference') || oSettings.reference),\n          // Array of styles to scale\n          aStyles = ('' + (o.getAttribute('data-scale-styles') || oSettings.styles)).split(' '),\n          // Scale ratio\n          nRatio = Math.max(parseFloat(o.getAttribute('data-scale-ratio') || oSettings.ratio), 0),\n          nMaxSize = Math.max(parseFloat(o.getAttribute('data-max-size') || oSettings.maxSize), 0),\n          // Reference width (set to parent width by default)\n          nRefWidth = ($ref.length) ? $ref.width() : $oP.width(),\n          nTargetWidth,\n          // Text width\n          nTextWidth;\n        // Validate ratio\n        if (isNaN(nRatio)) nRatio = 1;\n        // Account for scrollbar?\n        if ($oP[0].scrollHeight>$oP.height()) nRefWidth -= 17;\n        nTargetWidth = nRefWidth * nRatio;\n        // Append clone to body to get inline width\n        $o2.addClass(\"currentProjectH2\");\n        $o2.appendTo('body');\n        nTextWidth = $o2.width();\n        // Exit if something doesn't look right\n        if (nTargetWidth===0 || nTextWidth===nRefWidth) {\n          $o2.remove();\n          return;\n        }\n        // Scale the text! (6px is minimum font size to get accurate ratio)\n        for (var i=Math.round((6/$o2.css('font-size', '6px').width())*nTargetWidth), o2=$o2[0]; i<nTargetWidth; ++i) {\n          // Update font-size using native method for better performance\n          // (see http://jsperf.com/style-vs-csstext-vs-setattribute)\n          o2.style.fontSize = i + 'px';\n          if ($o2.width() / nRefWidth > nRatio) {\n            // console.log(\"font size\",i)\n            if (i>nMaxSize) {\n              $o.css('font-size', nMaxSize + 'px');\n            } else {\n              $o.css('font-size', (i-1) + 'px');\n            }\n            \n            break;\n          }\n        }\n        // Clean up\n        $o2.remove();\n        // Scale additional styles\n        if (aStyles[0]) {\n          var nScale = $o.width() / nTextWidth,\n            oStyles = {};\n          for (var i=0, imax=aStyles.length; i<imax; ++i) {\n            if (!aStyles[i]) continue;\n            oStyles[aStyles[i]] = ((aStyles[i]==='width') ? nTargetWidth : Math.round(parseFloat($o.css(aStyles[i])) * nScale)) + 'px';\n          }\n          $o.css(oStyles);\n        }\n      };\n    return this.each(function() {\n      // This scope is required for the resize handler\n      var o = this;\n      // Set font size on load\n      updateStyles(o);\n      // Update CSS styles upon resize\n      $(window).resize(function(e) {\n        updateStyles(o, e);\n      });\n    });\n  };\n}(jQuery));","\n\tdocument.write('<script src=\"http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1\"></' + 'script>');\n\t// // console.log(\"in debug mode\");\n","$(function() {\n\t$(\"a\").each(function(i,elm) {\n\t\tif (elm.href!='#') {\n\t\t\t// console.log(\"link\",elm.href);\n\t\t\t$(elm).data(\"link\",$(elm).attr(\"href\"));\n\t\t}\n\t});\n});","var mainLight;\nvar groundMaterial;\n\nfunction setLights() {\n\tvar shadowMapSize = 1024;\n\tvar groundGeometry = new THREE.PlaneGeometry( 3000, 3000, 1 );\n\tgroundMaterial = new THREE.ShadowMaterial();\n\t// groundMaterial = new THREE.MeshDepthMaterial( { color: 0xff0000 } );\n\tgroundMaterial.opacity = 0.04;\n\tvar ground = new THREE.Mesh(groundGeometry, groundMaterial);\n\tground.receiveShadow = true;\n\tground.rotation.x=0;\n\tground.position.y=30;\n\tground.position.z=0;\n\tground.transparent = false;\n\tscene.add(ground);\n\n\tmainLight = new THREE.AmbientLight( { color:0x000000,intensity:0.02 } ); // soft white light\n\tmainLight.intensity = 0.37;\n\tscene.add( mainLight );\n\n\n\t// var spotLight1 = new THREE.SpotLight( 0xffffff); \n\t// spotLight1.shadow.mapSize.height = shadowMapSize;\n\t// spotLight1.shadow.mapSize.width = shadowMapSize;\n\t// spotLight1.castShadow = false;\n\t// spotLight1.position.set(0, 5, 0 );\n\t// spotLight1.intensity = .15;\n\t// spotLight1.penumbra = 1;\n\t// spotLight1.decay = 2;\n\t// spotLight1.angle = .45;\n\t// scene.add( spotLight1 );\n\t// scene.add(spotLight1.target);\n\n\tvar spotLight2 = new THREE.SpotLight( 0xFFFFFF); \n\tspotLight2.castShadow = true;\n\tspotLight2.position.set( 0, 20,60 ); \n\tspotLight2.shadow.mapSize.height = shadowMapSize;\n\tspotLight2.shadow.mapSize.width = shadowMapSize;\n\tspotLight2.intensity = .15;\n\tspotLight2.exponent = .05;\n\tspotLight2.penumbra = 2;\n\tspotLight2.decay = 3;\n\tspotLight2.angle = de2ra(80);\n\tspotLight2.target.position = {\n\t\tx:-10,\n\t\ty:10,\n\t\tz:0\n\t}\n\tscene.add( spotLight2 );\n\tscene.add(spotLight2.target);\n\n}\n"]}