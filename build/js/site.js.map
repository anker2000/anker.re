{"version":3,"sources":["_tools.js","addText.js","add_device.js","add_project.js","customMaterial.js","interface.js","jquery.scalem.js","livereload.js","route_links.js","scrollsnap-polyfill.js","set_lights.js"],"names":["map_range","value","low1","high1","low2","high2","hexToRgb","r","t","n","exec","a","this","alpha","g","b","parseInt","toString","rgbToHex","length","i","e","rgbPercentage","obj","colorIntensity","console","log","fps","startTime","frameNumber","average","framesCounted","secondsCounted","getFPS","d","Date","getTime","currentTime","result","Math","floor","reset","animateText","setLetterPosition","headline","$","each","elm","abs","proximity","tOpacity","TweenMax","to","parentNode","opacity","onComplete","y","ease","Power4","easeOut","register","container","document","createElement","className","body","appendChild","cta","innerHTML","name","scalem","maxSize","bind","ref","setTimeout","animateHeadline","animatesIn","render","sections","scrollHandler","addPhone","rotation","position","screenMaterial","glassMaterial","reflectionCube","loader","color_dark","color_light","deferred","Deferred","phoneGroup","THREE","Group","screenGeometry","PlaneGeometry","screen","Mesh","receiveShadow","z","add","glass","load","geometry","materials","material","MeshPhongMaterial","object","castShadow","traverse","child","emissive","color","computeVertexNormals","shininess","x","scale","set","resolve","promise","addLaptop","macbookGroup","macbookScreenGroup","Object3D","macbookPivot","MeshStandardMaterial","side","DoubleSide","metalness","roughness","envMap","desktopGeometry","desktopScreen","de2ra","desktopGlass","tempgeometry","BoxBufferGeometry","tempmaterial","MeshBasicMaterial","mesh","bodyMaterial","specular","addProject","section","stage","resizeHandler","area","screenWidth","screenWidthFromDistance","camera","sectionObject","window","JSONLoader","video","find","vl","pause","CubeTextureLoader","format","RGBFormat","screenMaterialArray","Array","materialArray","children","im","tagName","push","customMaterial","transparent","reflectivity","combine","MixOperation","data","html","tween","loaded","hasClass","phonesGroup","done","startRotationPoint","yoyo","repeat","delay","Power2","easeInOut","begin","end","kickstart","updateRotation","play","type","targetRotation","updatePosition","count","start","addClass","css","removeClass","mainLight","intensity","groundMaterial","checkLoad","element","texture","TextureLoader","src","VideoTexture","minFilter","LinearFilter","magFilter","wrapS","ClampToEdgeWrapping","wrapT","map","init","setEnvironment","setLights","animate","getProximity","sectionNo","scrollHeight","scrollWidth","localScroll","scrollTop","scrollLeft","scrollPercentage","innerHeight","progression","activeSection","prevActiveSection","no","resume","visible","scrollTarget","pixelRatio","devicePixelRatio","setAttribute","getElementsByClassName","PerspectiveCamera","setFOV","innerWidth","scene","Scene","myAntialias","renderer","WebGLRenderer","antialias","setClearColor","setPixelRatio","setSize","shadowMap","enabled","PCFSoftShadowMap","domElement","style","addEventListener","onWindowResize","windowHalfX","windowHalfY","aspect","updateProjectionMatrix","fov","onDocumentMouseMove","event","clientX","storedMouse","clientY","mouseX","mouseY","prevMouseX","mousePosition","Power1","windowInFocus","frameCount","pixelRatioSwitchCount","getPixelRatio","hasData","degree","PI","distance","frustumHeight","tan","frustumWidth","panelSnap","mouseDown","mouseDirection","mouseDownCoord","Object","background","light","dark","ticker","setInterval","focus","blur","click","stopPropagation","fn","oOptions","oSettings","extend","ratio","reference","styles","updateStyles","o","nTargetWidth","nTextWidth","$o","$oP","parent","$o2","clone","width","display","white-space","$ref","getAttribute","aStyles","split","nRatio","max","parseFloat","nMaxSize","nRefWidth","isNaN","height","appendTo","remove","round","o2","fontSize","nScale","oStyles","imax","resize","jQuery","write","location","host","href","attr","w","doc","undefined","doMatched","rules","rule","elements","querySelectorAll","getSelectors","declaration","getDeclaration","forEach","call","setUpElement","undoUnmatched","item","tearDownElement","snapLengthUnit","parseSnapCoordValue","attachToScrollParent","tag","toLowerCase","handler","parseSnapPointValue","snapElements","removeEventListener","attach","getNextSnapPoint","scrollObj","direction","snapLength","getYSnapLength","getXSnapLength","top","left","currentPoint","initialPoint","scrollStart","nextPoint","roundByDirection","constrainByDistance","scrollTo","stayInBounds","getScrollHeight","getScrollWidth","getNextElementSnapPoint","l","primaryDirection","min","snapDest","snapCoords","currentIteration","currentIteratedObj","offsetTop","offsetLeft","getWidth","getHeight","ceil","currentScrollValue","SNAP_CONSTRAINT","CONSTRAINT","MIN_PX_CONSTRAINT","FIRST_CONSTRAINT","destined","regex","parsed","unit","parsable","documentElement","clientHeight","clientWidth","offsetHeight","offsetWidth","getScrollObj","querySelector","getDuration","procDist","duration","SCROLL_TIME","SCROLL_TIMEOUT","lastObj","lastScrollObj","timeOutId","evt","target","animationFrame","cancelAnimationFrame","clearTimeout","handlerDelayed","snapPoint","smoothScroll","easeInCubic","elapsed","callback","clock","now","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","step","Polyfill","declarations","shadowMapSize","groundGeometry","ShadowMaterial","ground","AmbientLight","spotLight2","SpotLight","shadow","mapSize","exponent","penumbra","decay","angle"],"mappings":"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","file":"site.js","sourcesContent":["function map_range(value, low1, high1, low2, high2) {\n    return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\nfunction hexToRgb(r,t){var n=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(r),a=function(){return void 0==this.alpha?\"rgb(\"+this.r+\", \"+this.g+\", \"+this.b+\")\":(this.alpha>1?this.alpha=1:this.alpha<0&&(this.alpha=0),\"rgba(\"+this.r+\", \"+this.g+\", \"+this.b+\", \"+this.alpha+\")\")};return void 0==t?n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),toString:a}:null:(t>1?t=1:0>t&&(t=0),n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),alpha:t,toString:a}:null)}\nfunction rgbToHex(r,t,n){function a(r){var t=r.toString(16);return 1==t.length?\"0\"+t:t}if(void 0==t||void 0==n){if(\"string\"==typeof r){var i=/^rgb[a]?\\(([\\d]+)[ \\n]*,[ \\n]*([\\d]+)[ \\n]*,[ \\n]*([\\d]+)[ \\n]*,?[ \\n]*([.\\d]+)?[ \\n]*\\)$/i.exec(r);return rgbToHex(parseInt(i[1]),parseInt(i[2]),parseInt(i[3]))}return void 0==r.r||void 0==r.g||void 0==r.b?null:rgbToHex(r.r,r.g,r.b)}var e=r;return\"#\"+a(e)+a(t)+a(n)}\nfunction rgbPercentage(obj) {\n\tobj.r = obj.r/255;\n\tobj.b = obj.b/255;\n\tobj.g = obj.g/255;\n\treturn obj;\n}\nfunction colorIntensity(obj) {\n\tconsole.log(\"intensity\",obj)\n\treturn (obj.r/255+obj.g/255+obj.b/255)/3;\n}\nvar fps = {\t\n\tstartTime : 0,\t\n\tframeNumber : 0,\n\taverage : 60,\n\tframesCounted : 60,\n\tsecondsCounted : 1,\n\tgetFPS : function(){\n\t\tthis.frameNumber++;\t\t\n\t\tvar d = new Date().getTime(), currentTime = ( d - this.startTime ) / 1000, result = Math.floor( ( this.frameNumber / currentTime ) );\n\t\t\n\t\tif( currentTime > 1 ){\n\t\t\tthis.framesCounted+=result\n\t\t\tthis.secondsCounted++;\n\t\t\tthis.startTime = new Date().getTime();\n\t\t\tthis.frameNumber = 0;\n\t\t\tthis.average = this.framesCounted/this.secondsCounted\n\t\t\t// $(\"span.fps\").html(this.average);\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\treset : function() {\n\t\tthis.framesCounted=0;\n\t\tthis.secondsCounted=0;\n\t}\n};\n","var animateText = function() {\n\tvar _this = this;\n\t\n\tfunction setLetterPosition(obj) {\n\t\tvar headline = $(obj.headline);\n\t\theadline.each(function(i,elm) {\n\t\t\t if (Math.abs(obj.proximity<.15)) {\n\t\t\t\tvar tOpacity=map_range(Math.abs(obj.proximity), 0, .15, 1, 0)\n\t\t\t\tTweenMax.to(elm.parentNode, .5, { opacity:tOpacity, onComplete:function() {}})\n\t\t\t} else {\n\t\t\t\tvar tOpacity=0;\n\t\t\t\tTweenMax.to(elm.parentNode, .5, { opacity:tOpacity, onComplete:function() {}})\n\t\t\t}\n\t\t\t\n\t\t\tTweenMax.to(elm, 5, { y:Math.abs(obj.proximity)*30, ease:Power4.easeOut, onComplete:function() {}})\n\t\t\t\n\t\t\t\n\t\t});\n\t}\n\n\n\treturn {\n\t\tregister: function(obj) {\n\t\t\t// _this.elm = obj.elm;\n\t\t\tobj.proximity=.25;\n\t\t\tvar container = document.createElement(\"div\");\n\t\t\tcontainer.className = \"current_project\";\n\n\t\t\tdocument.body.appendChild(container);\n\n\t\t\tvar cta = document.createElement(\"button\");\n\t\t\tcta.className=\"cta\";\n\t\t\tcta.innerHTML = \"See more\";\n\t\t\t// $(\"footer\")[0].appendChild(cta);\n\t\t\t\n\t\t\tvar name = document.createElement(\"h2\");\n\t\t\tname.innerHTML='<a href=\"#\">'+obj.name+'</a>';\n\t\t\tcontainer.appendChild(name);\n\t\t\tobj.headline = name;\n\n\n\n\n\t\t\t$(\".current_project h2\").scalem({maxSize:390});\n\n\t\t\t$(\".projects\").bind(\"scroll\",function() {\n\t\t\t\tsetLetterPosition(obj);\n\t\t\t});\n\t\t\t\n\t\t\tcontainer.ref= obj.ref;\n\t\t\tsetLetterPosition(obj);\n\t\t\tsetTimeout(setLetterPosition,1000,obj);\n\t\t},\n\t\tanimateHeadline: function(obj, animatesIn) {\n\t\t\tvar headline = obj.headline;\n\t\t\t// console.log(\"headline\",$(headline));\n\t\t\tif (animatesIn) {\n\t\t\t\tconsole.log(headline);\n\t\t\t\t// animateIn(headline);\n\t\t\t} else {\n\t\t\t\t// animateOut(headline);\n\t\t\t}\n\t\t},\n\t\trender: function() {\n\t\t\tfor (i=0;i<sections.length;i++) {\n\t\t\t\tscrollHandler(sections[i]);\n\t\t\t}\n\t\t}\n\t}\n}();\n","function addPhone(rotation, position, screenMaterial, glassMaterial, reflectionCube, loader, color_dark, color_light) {\n\n\tvar deferred = new $.Deferred();\n\tvar phoneGroup = new THREE.Group();\n\tvar screenGeometry = new THREE.PlaneGeometry( 0.55, 1, 1 );\n\tvar screen = new THREE.Mesh( screenGeometry, screenMaterial );\n\tscreen.receiveShadow = false;\n\tscreen.position.z = 0.022;\n\tscreen.position.y = 0.05;\n\tphoneGroup.add( screen );\n\n\t// var glassMaterial = new THREE.MeshStandardMaterial({ side: THREE.DoubleSide, color:0x222222, emissive:0x0, metalness:0.7, roughness:0.2, envMap:reflectionCube });\n\tvar glass = new THREE.Mesh( screenGeometry, glassMaterial );\n\tglass.receiveShadow = false;\n\tglass.position.z = 0.0225;\n\tglass.position.y = 0.05;\n\tphoneGroup.add(glass);\n\n\tloader.load(\n\t\t'models/iphones7.json',\n\t\tfunction ( geometry, materials ) {\n\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\tvar object = new THREE.Mesh( geometry, material );\t\t\t\t\n\t\t\tobject.position.y=-0.6;\n\t\t\tobject.castShadow=true;\n\t\t\tobject.receiveShadow = true;\n\t\t\tphoneGroup.add( object );\n\t\t\tobject.traverse( function ( child ) {\n\t\t\t\t// child.geometry.computeFaceNormals();\n\n\t\t        phoneGroup.position.y=-5;\n\t\t        phoneGroup.position.z=-1;\t\t      \n\t\t\t\tobject.material.emissive.r = (color_dark.r/255);\n\t\t\t\tobject.material.emissive.g = (color_dark.g/255);\n\t\t\t\tobject.material.emissive.b = (color_dark.b/255);\n\t\t\t\tobject.material.color.r = (color_light.r/255);\n\t\t\t\tobject.material.color.g = (color_light.g/255);\n\t\t\t\tobject.material.color.b = (color_light.b/255);\n\t\t\t\t\t\n\t    \t});\n\t    \tloader.load(\n\t\t\t\t'models/iphone-back.json',\n\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\t\t\tvar object = new THREE.Mesh( geometry, material );\t\t\t\t\n\t\t\t\t\tobject.position.y=-0.6;\n\t\t\t\t\tobject.castShadow=true;\n\t\t\t\t\tobject.receiveShadow = true;\n\t\t\t\t\tphoneGroup.add( object );\n\t\t\t\t\tobject.traverse( function ( child ) {\n\t\t\t\t\t\t// child.geometry.computeFaceNormals();\n\t\t\t\t\t\tchild.geometry.computeVertexNormals();\n\t\t\t\t        phoneGroup.position.y=-5;\n\t\t\t\t        phoneGroup.position.z=-1;\n\n\t\t\t\t       \n\t\t\t\t\t\tobject.material.emissive.r = (color_dark.r/255);\n\t\t\t\t\t\tobject.material.emissive.g = (color_dark.g/255);\n\t\t\t\t\t\tobject.material.emissive.b = (color_dark.b/255);\n\t\t\t\t\t\tobject.material.color.r = (color_light.r/255);\n\t\t\t\t\t\tobject.material.color.g = (color_light.g/255);\n\t\t\t\t\t\tobject.material.color.b = (color_light.b/255);\n\t\t\t\t\t\tobject.material.shininess = 10;\n\n\t\t\t\t\t\tphoneGroup.position.z=position.z;\n\t\t\t\t\t\tphoneGroup.position.y=position.y;\n\t\t\t\t\t\tphoneGroup.position.x=position.x;\n\t\t\t\t\t\tphoneGroup.scale.set( 30, 30, 30 );\n\t\t\t\t\t\tphoneGroup.castShadow = true;\n\t\t\t\t\t\tphoneGroup.rotation.x=rotation.x;\n\t\t\t\t\t\tphoneGroup.rotation.y=rotation.y;\n\t\t\t\t\t\tphoneGroup.rotation.z=rotation.z;\n\t\t\t\t\t\tdeferred.resolve(phoneGroup);\n\t\t\t    \t})\t\t\t\t    \t\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\treturn deferred.promise();\n}\n\nfunction addLaptop(rotation, position, screenMaterial, glassMaterial, reflectionCube, loader, color_dark, color_light) {\n\tvar deferred = new $.Deferred();\n\tvar macbookGroup = new THREE.Group();\n\tvar macbookScreenGroup = new THREE.Object3D();\n\n\t// var texture = new THREE.TextureLoader().load( \"models/macbook-texture.jpg\" );\n\t// texture.wrapS = THREE.RepeatWrapping;\n\t// texture.wrapT = THREE.RepeatWrapping;\n\t// texture.repeat.set( 12, 12 );\nconsole.log(\"rotation y\",rotation.y)\n\t\n    var material = new THREE.MeshStandardMaterial({ side: THREE.DoubleSide, color:0xffffff, metalness:0.5, roughness:1});\n\n\tvar macbookPivot = new THREE.Object3D();\n\t\n\n\tloader.load(\n\t\t// resource URL\n\t\t'models/screen-back.json',\n\t\t// Function when resource is loaded\n\t\tfunction ( geometry, materials ) {\n\t\t\t// var material = new THREE.MultiMaterial( materials );\n\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\tvar object = new THREE.Mesh( geometry, material );\n\t\t\t// scene.add( object );\n\t\t\t\n\t\t\tobject.position.y=0;\n\t\t\tobject.position.x=-0.5;\n\t\t\tobject.position.z=0;\n\t\t\t// object.rotation.y=de2ra(180);\n\n\t\t\tobject.castShadow=true;\n\t\t\tmaterial.shininess = 0.2;\n\t\t\tobject.traverse( function ( child ) {\n\t\t        // console.log(\"screen\",object);\n\t\t        if ( child instanceof THREE.Mesh ) {\n\t\t            child.geometry.computeVertexNormals();\n\t\t        }\n\t\t        object.material.side=THREE.DoubleSide;\n\t\t        var color_dark = {\n\t\t        \tr:10,\n\t\t        \tg:10,\n\t\t        \tb:10\n\t\t        }\n\t\t        var color_light = color_dark;\n\t\t\t\tmacbookScreenGroup.add( object );\n\t\t        \n\t\t    });\n\t\t    console.log(\"loaded screen back 1\");\n\t\t    loader.load(\n\t\t\t\t// resource URL\n\t\t\t\t'models/screen-front.json',\n\t\t\t\t// Function when resource is loaded\n\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\t\n\t\t\t\t\tvar material = new THREE.MeshStandardMaterial({ side: THREE.DoubleSide, color:0x222222, emissive:0x0, metalness:0.7, roughness:0.2, envMap:reflectionCube });\n\t\t\t\t\tvar object = new THREE.Mesh( geometry, material );\t\t\t\t\n\t\t\t\t\tobject.position.y=0;\n\t\t\t\t\tobject.position.x=-0.5;\n\t\t\t\t\tobject.position.z=0;\n\t\t\t\t\t// object.rotation.y=de2ra(180);\n\t\t\t\t\tvar color_dark = {\n\t\t\t\t\t\tr:0,\n\t\t\t\t\t\tg:0,\n\t\t\t\t\t\tb:0\n\t\t\t\t\t}\n\t\t\t\t\tvar color_light = color_dark;\n\t\t\t\t\tobject.castShadow=true;\n\t\t\t\t\tmacbookScreenGroup.add( object );\n\t\t\t\t\tvar desktopGeometry = new THREE.PlaneGeometry( 8.7, 5.8, 1 );\n\n\t\t\t\t\tvar desktopScreen = new THREE.Mesh( desktopGeometry, screenMaterial );\n\t\t\t\t\tdesktopScreen.position.z = -3.16;\n\t\t\t\t\tdesktopScreen.position.y = 3.3;\n\t\t\t\t\tdesktopScreen.rotation.x = de2ra(1);\n\n\t\t\t\t\tmacbookScreenGroup.add(desktopScreen);\n\n\t\t\t\t\tvar desktopGlass = new THREE.Mesh(desktopGeometry, glassMaterial);\n\t\t\t\t\tdesktopGlass.receiveShadow = true;\n\t\t\t\t\tdesktopGlass.position.z = -3.16;\n\t\t\t\t\tdesktopGlass.position.y = 3.3;\n\t\t\t\t\tdesktopGlass.rotation.x = de2ra(1);\n\t\t\t\t\tmacbookScreenGroup.add(desktopGlass);\n\n\t\t\t\t\t\n\t\t\t\t\tvar tempgeometry = new THREE.BoxBufferGeometry( 200, 200, 200 );\n\t\t\t\t\tvar tempmaterial = new THREE.MeshBasicMaterial( { color: 0xffffff } );\t\n\t\t\t\t\tmesh = new THREE.Mesh( tempgeometry, tempmaterial );\n\t\t\t\t\t\n\t\t\t\t\tmacbookScreenGroup.position.z=3.1;\n\t\t\t\t\tmacbookPivot.add(macbookScreenGroup);\n\t\t\t\t\tmacbookPivot.position.z=-3;\n\t\t\t\t\tmacbookPivot.position.y=0;\n\t\t\t\t\tmacbookPivot.rotation.x=de2ra(90);\n\t\t\t\t\t\n\t\t\t\t\tmacbookGroup.add(macbookPivot);\n\n\t\t\t\t\tconsole.log(\"loaded screen front 2\");\n\t\t\t\t\tloader.load(\n\t\t\t\t\t\t'models/keyboard.json',\n\t\t\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\t\t\tvar bodyMaterial = new THREE.MeshStandardMaterial({ side: THREE.DoubleSide, color:0xaaaaaa, metalness:0.2, roughness:1});\n\t\t\t\t\t\t\tvar object = new THREE.Mesh( geometry, bodyMaterial );\n\t\t\t\t\t\t\tobject.position.x=-0.5;\n\t\t\t\t\t\t\tobject.castShadow=true;\n\t\t\t\t\t\t\tmacbookGroup.add( object );\n\t\t\t\t\t\t\tconsole.log(\"loaded keyboard 3\");\n\t\t\t\t\t\t\tloader.load(\n\t\t\t\t\t\t\t\t// resource URL\n\t\t\t\t\t\t\t\t'models/keys.json',\n\t\t\t\t\t\t\t\t// Function when resource is loaded\n\t\t\t\t\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\t\t\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\t\t\t\t\t\t\tvar object = new THREE.Mesh( geometry, material );\n\t\t\t\t\t\t\t\t\t// scene.add( object );\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tobject.position.y=0.005;\n\t\t\t\t\t\t\t\t\t// object.position.y=0.06;\n\t\t\t\t\t\t\t\t\tobject.position.x=-0.5;\n\t\t\t\t\t\t\t\t\tobject.position.z=0;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tobject.castShadow=false;\n\t\t\t\t\t\t\t\t\tvar color_dark = {\n\t\t\t\t\t\t\t\t\t\tr: 0,\n\t\t\t\t\t\t\t\t\t\tg: 0,\n\t\t\t\t\t\t\t\t\t\tb: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar color_light = color_dark;\n\t\t\t\t\t\t\t       \n\t\t\t\t\t\t        \tobject.material.side=THREE.DoubleSide;\n\t\t\t\t\t\t\t\t\tobject.material.specular.r = color_dark.r/255;\n\t\t\t\t\t\t\t\t\tobject.material.specular.g = color_dark.g/255;\n\t\t\t\t\t\t\t\t\tobject.material.specular.b = color_dark.b/255;\n\t\t\t\t\t\t\t\t\tobject.material.emissive.r = color_light.r/255;\n\t\t\t\t\t\t\t\t\tobject.material.emissive.g = color_light.g/255;\n\t\t\t\t\t\t\t\t\tobject.material.emissive.b = color_light.b/255;\n\t\t\t\t\t\t\t\t\tobject.material.shininess=15;\t\n\n\t\t\t\t\t\t\t\t\tmacbookGroup.add( object );\n\t\t\t\t\t\t\t\t\tconsole.log(\"loaded keys 4\");\n\t\t\t\t\t\t\t    \tloader.load(\n\t\t\t\t\t\t\t\t\t\t// resource URL\n\t\t\t\t\t\t\t\t\t\t'models/keys-top.json',\n\t\t\t\t\t\t\t\t\t\t// Function when resource is loaded\n\t\t\t\t\t\t\t\t\t\tfunction ( geometry, materials ) {\n\t\t\t\t\t\t\t\t\t\t\tvar material = new THREE.MeshPhongMaterial(materials[0])\n\t\t\t\t\t\t\t\t\t\t\tvar object = new THREE.Mesh( geometry, material );\n\t\t\t\t\t\t\t\t\t\t\t// scene.add( object );\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tobject.position.y=0.005;\n\t\t\t\t\t\t\t\t\t\t\t// object.position.y=0.06;\n\t\t\t\t\t\t\t\t\t\t\tobject.position.x=-0.5;\n\t\t\t\t\t\t\t\t\t\t\tobject.position.z=0;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tobject.castShadow=true;\n\t\t\t\t\t\t\t\t\t\t\tvar color_dark = {\n\t\t\t\t\t\t\t\t\t\t\t\tr: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tg: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tb: 0\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvar color_light = {\n\t\t\t\t\t\t\t\t\t\t\t\tr:15,\n\t\t\t\t\t\t\t\t\t\t\t\tg:15,\n\t\t\t\t\t\t\t\t\t\t\t\tb:15\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t        \n\t\t\t\t\t\t\t\t        \tobject.material.side=THREE.DoubleSide;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.specular.r = color_dark.r/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.specular.g = color_dark.g/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.specular.b = color_dark.b/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.emissive.r = color_light.r/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.emissive.g = color_light.g/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.emissive.b = color_light.b/255;\n\t\t\t\t\t\t\t\t\t\t\tobject.material.shininess=21;\t\n\t\t\t\t\t\t\t\t        \n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.scale.set(6.25,6.25,6.25);\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.add( object );\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(position);\n\t\t\t\t\t\t\t\t\t\t\t// macbookGroup.position = position;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.position.z=position.z;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.position.y=position.y;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.position.x=position.x;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.rotation.x = rotation.x;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.rotation.y = rotation.y;\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"rotation y\",rotation.y)\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.rotation.z = rotation.z;\n\t\t\t\t\t\t\t\t\t\t\tmacbookGroup.screen = macbookPivot;\n\t\t\t\t\t\t\t\t\t\t\t// screenMaterial.opacity=0;\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"screenMaterial\",screenMaterial);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"loaded keys top 5\");\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t    \tdeferred.resolve(macbookGroup);\n\t\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t\n\t// scene.add(macbookGroup);\n\t\n\treturn deferred.promise();\n}","function addProject(section, stage) {\n\tvar sectionObject = new THREE.Group();\n\tvar area = {};\n\tfunction resizeHandler() {\n\t\tarea.screenWidth=screenWidthFromDistance(camera.position.z);\n\t\tconsole.log(area.screenWidth);\n\t}\n\t$(window).bind(\"resize\",resizeHandler);\n\tresizeHandler();\n\t\n\tvar loader = new THREE.JSONLoader();\n\tvar screenMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });\t\n\tvar video = $(section).find(\"video\");\n\tfor (var vl=0;vl<video.length;vl++) {\n\t\tvideo[vl].pause();\n\t\tsectionObject.video = video[vl];\n\t}\n\t\n\n\tvar reflectionCube = new THREE.CubeTextureLoader().load([\"models/environment2.jpg\",\"models/environment2.jpg\",\"models/environment2.jpg\",\"models/environment2.jpg\",\"models/environment2.jpg\",\"models/environment2.jpg\"] );\n\treflectionCube.format = THREE.RGBFormat;\n\n\tvar screenMaterialArray = new Array();\n\n\tvar materialArray = $(section)[0].children;\n\tfor (im = 0; im < materialArray.length; im++) {\n\t\t\n\t\tif (materialArray[im].tagName==\"IMG\" || materialArray[im].tagName==\"VIDEO\") {\t\t\t\n\t\t\tscreenMaterialArray.push(customMaterial(materialArray[im]));\n\t\t}\t\t\n\t}\n\t\n\tvar glassMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff  });\n\tglassMaterial.specular.r=1;\n\tglassMaterial.specular.g=1;\n\tglassMaterial.specular.b=1;\n\tglassMaterial.transparent = true;\n\tglassMaterial.opacity = 0.05;\n\tglassMaterial.shininess = 20;\n\tglassMaterial.envMap = reflectionCube;\n\tglassMaterial.reflectivity = 5;\n\tglassMaterial.combine = THREE.MixOperation;\n\tvar emDarken = 1;\n\tvar color_light = hexToRgb($(section).data(\"device-light\"));\n\tvar color_dark = hexToRgb($(section).data(\"device-dark\"));\n\n\t\n\tsectionObject.elm = section;\n\n\n\tsectionObject.name=$(section).find(\"h2\").html()\n\tsectionObject.tween = [];\n\tsectionObject.loaded=0;\n\tsectionObject.ref = section;\n\tif ($(section).hasClass(\"mobile\")) {\n\n\t\tvar phonesGroup = new THREE.Group();\n\t\taddPhone({ x:de2ra(60), y:de2ra(-140), z:de2ra(30) },{ x:-10, y:4, z:-10 }, screenMaterialArray[1], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(phoneGroup) {\n\t\t\t// TweenMax.to(phoneGroup.rotation, 1.5, {y:de2ra(0),  ease:Power4.easeOut});\n\t\t\tphoneGroup.startRotationPoint = 60;\n\t\t\tphonesGroup.add(phoneGroup);\n\t\t\tsectionObject.loaded+=.333333;\n\t\t\tsectionObject.tween.push(TweenMax.to(phoneGroup.position, 3.5,{ y:phoneGroup.position.y-1, yoyo:true, repeat:-1, delay:0, ease:Power2.easeInOut, onComplete:function() {}}));\n\t\t\t// console.log(\"phone added\");\n\t\t});\n\n\t\taddPhone({ x:de2ra(50), y:de2ra(35), z:de2ra(-80) },{ x:15, y:1, z:-10 }, screenMaterialArray[0], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(phoneGroup) {\n\t\t\t// TweenMax.to(phoneGroup.rotation, 1.5, {y:de2ra(0),  ease:Power4.easeOut});\n\t\t\tsectionObject.tween.push(TweenMax.to(phoneGroup.position, 3.5,{ y:phoneGroup.position.y-1, yoyo:true, repeat:-1, delay:0.5, ease:Power2.easeInOut, onComplete:function() {}}));\t\n\t\t\tphoneGroup.startRotationPoint = 50;\n\t\t\tphonesGroup.add(phoneGroup);\n\t\t\tsectionObject.loaded+=.333333;\n\t\t\t// console.log(\"phone added\");\n\t\t});\n\n\n\t\taddPhone({ x:de2ra(120), y:de2ra(0), z:de2ra(-60) },{ x:45, y:-11, z:-10 }, screenMaterialArray[2], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(phoneGroup) {\n\t\t\t// TweenMax.to(phoneGroup.rotation, 1.5, {y:de2ra(0),  ease:Power4.easeOut});\n\t\t\tsectionObject.tween.push(TweenMax.to(phoneGroup.position, 3.5,{ y:phoneGroup.position.y-1, yoyo:true, repeat:-1, delay:1.5, ease:Power2.easeInOut, onComplete:function() {}}));\n\t\t\tphoneGroup.startRotationPoint = 120;\n\t\t\tphonesGroup.add(phoneGroup);\n\t\t\tsectionObject.loaded+=.333333;\n\t\t\t// console.log(\"phone added\");\n\t\t});\n\n\t\tphonesGroup.position.y=5;\n\t\tphonesGroup.position.z=15;\n\t\t// phonesGroup.rotation.z=de2ra(-15);\n\t\tphonesGroup.position.x=-12\n\t\tphonesGroup.begin = function() {\n\n\t\t}\n\t\tphonesGroup.end = function() {\n\n\t\t}\n\t\tphonesGroup.startRotationPoint = 12\n\t\tsectionObject.add(phonesGroup);\n\n\t} else if ($(section).hasClass(\"desktop\")) {\n\t\tconsole.log(\"print out\",screenMaterialArray[0],screenMaterialArray[1])\n\t\taddLaptop({x:de2ra(60), y:de2ra(0), z:de2ra(0)}, { x:0, y:-40, z:10}, screenMaterialArray[0], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(macbookGroup) {\n\t\t\t// console.log(\"received macbook\", macbookGroup);\n\t\t\tsectionObject.loaded+=1.5;\n\t\t\tmacbookGroup.startRotationPoint = 0;\n\t\t\tmacbookGroup.opacity = 0;\n\t\t\tmacbookGroup.begin = function() {\n\t\t\t\tconsole.log(\"macbook open\");\n\t\t\t\tvar openLid = TweenMax.to(macbookGroup.screen.rotation, 1, { x:-de2ra(20), delay:.75, ease:Power4.easeInOut});\n\t\t\t}\n\t\t\tmacbookGroup.end = function() {\n\t\t\t\tvar openLid = TweenMax.to(macbookGroup.screen.rotation, 1, { x:de2ra(90), ease:Power4.easeInOut});\n\t\t\t}\n\t\t\tsectionObject.add(macbookGroup);\n\t\t\t// sectionObject.tween.push(TweenMax.to(macbookGroup.position, 3.5,{ y:macbookGroup.position.y-1, yoyo:true, repeat:-1, ease:Power2.easeInOut, onComplete:function() {}}));\n\t\t\tif (sectionObject.loaded==1) {\n\t\t\t\tscrollHandler();\n\t\t\t}\n\t\t\tif (sectionObject.kickstart) {\n\t\t\t\tmacbookGroup.begin()\n\t\t\t}\n\t\t\tconsole.log(\"macbook added\");\n\t\t});\n\t\t// addPhone({ x:de2ra(-5), y:de2ra(-10), z:de2ra(-10) },{ x:0, y:0, z:10 }, screenMaterialArray[1], glassMaterial, reflectionCube, loader, color_dark, color_light).done(function(phoneGroup) {\n\t\t// \t// TweenMax.to(phoneGroup.rotation, 1.5, {y:de2ra(0),  ease:Power4.easeOut});\n\t\t// \tvar phonesGroup = new THREE.Group();\n\t\t\t\n\t\t// \tphonesGroup.position.y=-2;\n\t\t// \tphonesGroup.position.z=45;\n\t\t// \t// phonesGroup.rotation.z=de2ra(-15);\n\t\t// \tphonesGroup.position.x=0\n\t\t// \tphoneGroup.scale.x = 12;\n\t\t// \tphoneGroup.scale.y = 12;\n\t\t// \tphoneGroup.scale.z = 12;\n\t\t// \tphonesGroup.begin = function() {\n\t\t// \t\tconsole.log(\"phonesgroup begin\");\n\t\t// \t}\n\t\t// \tphonesGroup.end = function() {\n\n\t\t// \t}\n\t\t// \tphonesGroup.startRotationPoint = 0;\n\t\t// \tphoneGroup.startRotationPoint = -5;\n\t\t// \tphonesGroup.add(phoneGroup);\n\t\t\t\n\t\t// \tsectionObject.tween.push(TweenMax.to(phoneGroup.position, 3.5,{ y:phoneGroup.position.y-1, yoyo:true, repeat:-1, delay:0.5, ease:Power2.easeInOut, onComplete:function() {}}));\n\t\t// \tsectionObject.loaded=1;\n\t\t// \tsectionObject.loaded+=.5;\n\n\t\t// \tscrollHandler();\n\t\t// \tconsole.log(\"phone added\",phonesGroup);\n\t\t// \tsectionObject.add(phonesGroup);\n\n\t\t// });\n\t}\n\tsectionObject.updateRotation = function() {\n\n\t\tif (Math.abs(this.proximity)<0.1) {\n\t\t\tif (this.video) this.video.play();\n\t\t\tfor (t=0;t<this.tween.length;t++) {\n\t\t\t\tthis.tween[t].play();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.video) this.video.pause();\n\t\t\tfor (t=0;t<this.tween.length;t++) {\n\t\t\t\tthis.tween[t].pause();\n\t\t\t}\n\t\t}\n\t\ttry {\n\t\t\tif (this.name,this.type, this.children[0].children[0].type==\"Group\") { //phones\n\t\t\t\tvar targetRotation =  this.children[0].startRotationPoint+(this.proximity*100);\n\t\t\t\tfor (r=0;r<this.children[0].children.length; r++) {\n\t\t\t\t\tthis.children[0].children[r].rotation.x=de2ra(this.children[0].children[r].startRotationPoint+(this.proximity*200));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar targetRotation =  this.children[0].startRotationPoint+(this.proximity*100);\n\t\t\t}\n\t\t\tthis.children[0].rotation.y=de2ra(targetRotation);\n\t\t\t\n\t\t} catch(e) {\n\n\t\t}\n\t}\n\tsectionObject.updatePosition = function() {\n\t\t// this.position.x = this.count*screenWidthFromDistance(200);\n\t\tthis.position.y = sectionObject.count * -1*screenWidthFromDistance(200);\n\t}\n\tsectionObject.start = function(object) {\n\t\tif (typeof this.loaded == \"undefined\" || typeof sectionObject.headline == \"undefined\") {\n\t\t\tsetTimeout(function() {\n\t\t\t\tsectionObject.start()\n\t\t\t},50);\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t\n\t\t$(sectionObject.headline.parentNode).addClass(\"active\");\n\t\t\n\t\t\n\t\t$(\"body\").css(\"background\",$(section).data(\"bg-dark\"));\n\t\t$(\"body\").css(\"color\",$(section).data(\"text-color\"));\n\t\t// $(\"button.cta\").css(\"background-color\",$(section).data(\"text-color\"));\n\t\t$(\"button.cta .arrow\").css(\"background-color\",$(section).data(\"text-color\"));\n\t\tsetTimeout(function() {\n\t\t\t$(\"button.cta\").removeClass(\"off\").css(\"color\",$(section).data(\"text-color\"));\n\t\t},1500);\n\t\t$(\"nav .toggle span\").css(\"background-color\",$(section).data(\"text-color\"));\n\t\tmainLight.color = rgbPercentage(hexToRgb($(section).data(\"bg-dark\")));\n\t\tvar intensity = colorIntensity(hexToRgb($(section).data(\"bg-light\")));\n\t\tTweenMax.to(groundMaterial, 1,{ opacity:map_range(intensity, 0, 1, 0.3, 0.04), onComplete:function() {}})\n\n\n\t\tfor (var a=0;a<sectionObject.children.length;a++) {\n\t\t\t// console.log(\"sectionobject child\",a);\n\t\t\tif (typeof sectionObject.children[a].begin != \"undefined\") {\n\t\t\t\tsectionObject.children[a].begin();\n\t\t\t}\n\t\t}\n\t\tsectionObject.kickstart=true;\n\t}\n\tsectionObject.end = function() {\n\t\tfor (var a=0;a<sectionObject.children.length;a++) {\n\t\t\t// console.log(\"sectionobject child\",a);\n\t\t\tif (typeof sectionObject.children[a].end != \"undefined\") {\n\t\t\t\tsectionObject.children[a].end();\n\t\t\t}\n\t\t}\n\t\t$(\"button.cta\").addClass(\"off\");\n\t\tif (typeof sectionObject.headline ==\"object\") {\n\t\t\t$(sectionObject.headline.parentNode).removeClass(\"active\");\n\t\t}\n\t}\n\tstage.add( sectionObject );\n\t\n\tsectionObject.checkLoad = function() {\n\t\tif (sectionObject.loaded>0.98) {\n\t\t\tanimateText.register(sectionObject);\n\t\t\tsetTimeout(function() {\n\t\t\t\t$(\".devices canvas\").css(\"opacity\",1);\n\n\t\t\t},1250);\n\t\t\tscrollHandler();\n\t\t} else {\n\t\t\tsetTimeout(sectionObject.checkLoad,100);\n\t\t}\n\t}\n\tsectionObject.checkLoad();\n\tsetTimeout(function(sectionObject) {\n\t\t// sectionObject.position.y = sectionObject.count*screenWidthFromDistance(200);\n\t\tsectionObject.position.y = sectionObject.count * -1*screenWidthFromDistance(200);\n\t},100,sectionObject);\n\treturn sectionObject;\n}\n","function customMaterial(element) {\n\tconsole.log(element);\n\tvar screenMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });\n\tif (element.tagName==\"IMG\") {\n\t\tvar texture = new THREE.TextureLoader().load( element.src);\n\t} else if (element.tagName==\"VIDEO\") {\n\t\tvar texture = new THREE.VideoTexture( element );\n\t}\n\ttexture.minFilter = THREE.LinearFilter;\n\ttexture.magFilter = THREE.LinearFilter;\n\ttexture.format = THREE.RGBFormat;\n\ttexture.wrapS = THREE.ClampToEdgeWrapping;\n\ttexture.wrapT = THREE.ClampToEdgeWrapping;\n\tscreenMaterial.map = texture;\n\treturn screenMaterial;\n}","// var multiSearch = function() {\n// \tvar defaultSearchPlatform = \"spotify\";\n// \tvar select;\n\n\t\n// \treturn {\n// \t\tInit: function() {\n\t\t\t\n// \t\t}\n// \t}\n// }();\n\n// $(function() {\n// \tmultiSearch.Init();\n// })\n\n$(function() {\n\tinit();\n\t$('.projects').panelSnap();\n\t// setTimeout(function() {\n\t// \t$(\"video\").each(function() {\n\t// \t\tthis.play();\n\t// \t});\n\t// },2000);\n});\n// if ( ! Detector.webgl ) Detector.addGetWebGLMessage();\n\nvar camera, scene, stage, renderer;\nvar mouseX = 0, prevMouseX = 0, mouseY = 0, mouseDown = false, mouseDirection;\nvar windowHalfX = window.innerWidth / 2;\nvar windowHalfY = window.innerHeight / 2;\nvar mouseDownCoord = new Object();\nvar sections = [], progression = 0, activeSection = 0, prevActiveSection = null, background = { light: { r:0, g:0, b:0 }, dark: { r:0, g:0, b:0 } };\nfunction init() {\n\n\tsetEnvironment();\n\tsetLights();\n\t\n\tsetTimeout(function() {\n\t\tscrollHandler();\n\t\tanimate();\n\t\t$(\"section\").each(function(i,elm) {\n\t\t\tsections.push(addProject(elm,stage));\n\t\t\tsections[i].count=i;\n\t\t});\n\t\t// $(\"section:first-child\").find(\"video\")[0].play();\n\t},1000);\n\n}\n\nfunction getProximity(sectionNo) {\n\tif ($(\".projects\")[0].scrollHeight>$(\".projects\")[0].scrollWidth) {\n\t\tvar localScroll = $(\".projects\").scrollTop() / $(\".projects\")[0].scrollHeight;\n\t} else {\n\t\tvar localScroll = $(\".projects\").scrollLeft() / $(\".projects\")[0].scrollWidth;\n\t}\n\treturn (sectionNo) - (localScroll * sections.length);\n}\nfunction scrollHandler() {\n\tscrollPercentage = $(\".projects\").scrollTop() / ($(\".projects\")[0].scrollHeight-$(window).innerHeight());\t\n\tprogression = scrollPercentage * sections.length;\n\n\tactiveSection = Math.floor(progression);\n\n\tif (activeSection == sections.length) activeSection -=1;\n\tif (activeSection != prevActiveSection) {\n\t\tfor (i=0;i<sections.length;i++) {\n\t\t\tif (i==activeSection) {\n\t\t\t\tsections[activeSection].start();\n\t\t\t\tfor (no=0;no<sections[i].tween.length;no++) {\n\t\t\t\t\tsections[i].tween[no].resume();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsections[i].end();\n\t\t\t\tfor (no=0;no<sections[i].tween.length;no++) {\n\t\t\t\t\tsections[i].tween[no].pause();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tvar inProximity=[];\n\tfor (i=0;i<sections.length;i++) {\n\t\tsections[i].proximity = getProximity(i);\n\t\tsections[i].updateRotation();\n\t\t\n\t\tif (sections[i].proximity>-0.75 && sections[i].proximity<0.75) {\n\t\t\tsections[i].visible = true;\n\t\t} else {\n\t\t\tsections[i].visible = true;\n\t\t}\n\t}\n\tprevActiveSection = activeSection;\n\tvar scrollTarget = 0-scrollPercentage*(screenWidthFromDistance(200)*(sections.length-1));\n\tTweenMax.to(stage.position, 0.75, {ease: Power4.easeOut, y: -1*scrollTarget});\n}\nfunction setEnvironment() {\n\tvar pixelRatio = window.devicePixelRatio;\n\tvar container = document.createElement( 'div' );\n\tcontainer.setAttribute(\"class\",\"content\");\n\tdocument.getElementsByClassName('devices')[0].appendChild( container );\n\n\tcamera = new THREE.PerspectiveCamera( setFOV(), window.innerWidth / window.innerHeight, 1, 5000 );\n\tcamera.position.z = 120;\n\tscene = new THREE.Scene();\n\tstage = new THREE.Group();\n\tscene.add(stage);\n\t$(\".projects\").bind(\"scroll\",scrollHandler);\n\t\n\tvar myAntialias=false;\n\tif (pixelRatio>1) {\n\t\tmyAntialias=false;\n\t}\n\n\trenderer = new THREE.WebGLRenderer( {alpha: true, antialias: myAntialias });\n\t// renderer.setClearColor( 0xff0000, 0 );\n\trenderer.setClearColor( 0x000000, 0 );\n\trenderer.setPixelRatio( 2 );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.shadowMap.enabled\t= true;\n\trenderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\tcontainer.appendChild( renderer.domElement );\n\n\tvar element = renderer.domElement;\n\telement.style.position='absolute';\n\twindow.addEventListener( 'resize', onWindowResize, false );\n}\n\nfunction onWindowResize() {\n\twindowHalfX = window.innerWidth / 2;\n\twindowHalfY = window.innerHeight / 2;\n\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\t// overlay.width=window.innerWidth;\n\t// overlay.height=window.innerHeight;\n\tcamera.fov = setFOV();\n\tscrollHandler();\n\tfor (i=0;i<sections.length;i++) {\n\t\tsections[i].updatePosition();\n\t}\n}\n\nvar mousePosition = { x:0, y:0 };\n// document.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\nvar storedMouse = { x:0, y:0 };\nfunction onDocumentMouseMove( event ) {\n\tif (typeof event == \"undefined\") {\n\t\tvar event = {\n\t\t\tclientX: storedMouse.x,\n\t\t\tclientY: storedMouse.y\n\t\t}\n\t}\n\tstoredMouse.x = event.clientX;\n\tstoredMouse.y = event.clientY;\n\tmouseX = windowHalfX - event.clientX;\n\tmouseY = windowHalfY - event.clientY;\n\tprevMouseX=mouseX;\n\tTweenMax.to(mousePosition, 2, {x: 0, y:mouseY, ease: Power1.easeOut});\n}\n\nTweenMax.ticker.addEventListener(\"tick\",animate);\nvar hasData=false;\nsetTimeout(function() {\n\thasData=true\n},4000);\nvar pixelRatioSwitchCount=-1;\nsetInterval(fps.reset, 10000);\nvar windowInFocus=true;\n$(window).focus(function() {\n\twindowInFocus=true;\n\tconsole.log(\"window in focus\");\n});\n$(window).blur(function() {\n\twindowInFocus=false;\n\tconsole.log(\"window out of focus\");\n});\n\nframeCount=0;\nfunction animate() {\n\tif (!windowInFocus) {\n\t\tif (frameCount>3) {\n\t\t\t// console.log(frameCount);\n\t\t\trender();\n\t\t\tframeCount=0;\n\t\t\tpixelRatioSwitchCount=0;\n\t\t} \n\t} else {\n\t\trender();\n\t}\n\tframeCount++;\n\tif (typeof renderer!=\"undefined\" && windowInFocus) {\n\t\tif (renderer.getPixelRatio()<2 && !renderer.antialias) {\n\t\t\trenderer.antialias=true;\n\t\t} else {\n\t\t\tif (renderer.antialias && renderer.getPixelRatio()>=2) renderer.antialias=false;\n\t\t}\n\t\tfps.getFPS()\n\t\tif (pixelRatioSwitchCount<4 && hasData) {\n\t\t\tif (fps.average < 25) {\n\t\t\t\tif (renderer.getPixelRatio() != 1) {\n\t\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\t\tpixelRatioSwitchCount+=1;\n\t\t\t\t}\n\t\t\t} else if (fps.average < 35) {\n\t\t\t\tif (renderer.getPixelRatio() != 1.5) {\n\t\t\t\t\tconsole.log(\"set pixel ratio 1.5\");\n\t\t\t\t\trenderer.setPixelRatio( 1.5 );\n\t\t\t\t\tpixelRatioSwitchCount+=1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (renderer.getPixelRatio() != 2) {\n\t\t\t\t\tconsole.log(\"set pixel ratio 2\");\n\t\t\t\t\trenderer.setPixelRatio( 2 );\n\t\t\t\t\tpixelRatioSwitchCount+=1;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (hasData) {\n\t\t\t\tif (fps.average>25) {\n\t\t\t\t\tconsole.log(\"set pixel ratio 1.5\");\n\t\t\t\t\trenderer.setPixelRatio( 1.5 );\n\t\t\t\t} else {\n\t\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction render() {\n\t// var time = Date.now();\n\t// console.log(camera);\n\tif (typeof camera != \"undefined\") {\n\t\tcamera.position.x = 0- ( mousePosition.x - camera.position.x ) * 0.003;\n\t\tcamera.position.y = 4-(( - mousePosition.y - camera.position.y ) * 0.003);\n\t\trenderer.render( scene, camera );\n\t}\n}\n\t\n\t\nfunction de2ra(degree) { \n\treturn degree*(Math.PI/180);\n}\nfunction screenWidthFromDistance(distance) {\n\tvar aspect = window.innerWidth / window.innerHeight;\n\tvar frustumHeight = 1.75 * distance * Math.tan(camera.fov * 0.5 * (Math.PI/180));\n\tvar frustumWidth = frustumHeight * aspect;\n\treturn frustumWidth;\n}\nfunction setFOV() {\n\t// var fov = map_range(window.innerWidth, 0, 100, 60, 305);\n\tfov = 40;\n\tif (window.innerWidth<600) {\n\t\tfov=70;\n\t}\n\treturn fov;\t\n}\n\n$(\".controls a\").click(function(e) {\n\te.stopPropagation();\n});\n\n","/*!\n * Scalem v1.2.0 - A responsive text jQuery plugin\n * Copyright 2014, Tom Doan (http://www.tohodo.com/)\n *\n * Scalem by Tom Doan is licensed under the MIT License.\n * Read a copy of the license in the LICENSE file or at\n * http://choosealicense.com/licenses/mit\n */\n\n(function($) {\n  $.fn.scalem = function(oOptions) {\n    var oSettings = $.extend({\n        ratio: 1,        // Scale ratio (1 = 100%)\n        reference: null, // Text will scale relative to this element\n        styles: '',       // List of styles to scale (useful for buttons)\n        maxSize:390\n      }, oOptions),\n      updateStyles = function(o, e) {\n        var $o = $(o),\n          $oP = $o.parent(),\n          // Create clone to get true text width\n          $o2 = $o.clone().css({\n            'width': 'auto',\n            'display': 'none',\n            'white-space': 'nowrap'\n          }),\n          // If data attribute exists, use that instead\n          $ref = $(o.getAttribute('data-scale-reference') || oSettings.reference),\n          // Array of styles to scale\n          aStyles = ('' + (o.getAttribute('data-scale-styles') || oSettings.styles)).split(' '),\n          // Scale ratio\n          nRatio = Math.max(parseFloat(o.getAttribute('data-scale-ratio') || oSettings.ratio), 0),\n          nMaxSize = Math.max(parseFloat(o.getAttribute('data-max-size') || oSettings.maxSize), 0),\n          // Reference width (set to parent width by default)\n          nRefWidth = ($ref.length) ? $ref.width() : $oP.width(),\n          nTargetWidth,\n          // Text width\n          nTextWidth;\n        // Validate ratio\n        if (isNaN(nRatio)) nRatio = 1;\n        // Account for scrollbar?\n        if ($oP[0].scrollHeight>$oP.height()) nRefWidth -= 17;\n        nTargetWidth = nRefWidth * nRatio;\n        // Append clone to body to get inline width\n        $o2.addClass(\"currentProjectH2\");\n        $o2.appendTo('body');\n        nTextWidth = $o2.width();\n        // Exit if something doesn't look right\n        if (nTargetWidth===0 || nTextWidth===nRefWidth) {\n          $o2.remove();\n          return;\n        }\n        // Scale the text! (6px is minimum font size to get accurate ratio)\n        for (var i=Math.round((6/$o2.css('font-size', '6px').width())*nTargetWidth), o2=$o2[0]; i<nTargetWidth; ++i) {\n          // Update font-size using native method for better performance\n          // (see http://jsperf.com/style-vs-csstext-vs-setattribute)\n          o2.style.fontSize = i + 'px';\n          if ($o2.width() / nRefWidth > nRatio) {\n            // console.log(\"font size\",i)\n            if (i>nMaxSize) {\n              $o.css('font-size', nMaxSize + 'px');\n            } else {\n              $o.css('font-size', (i-1) + 'px');\n            }\n            \n            break;\n          }\n        }\n        // Clean up\n        $o2.remove();\n        // Scale additional styles\n        if (aStyles[0]) {\n          var nScale = $o.width() / nTextWidth,\n            oStyles = {};\n          for (var i=0, imax=aStyles.length; i<imax; ++i) {\n            if (!aStyles[i]) continue;\n            oStyles[aStyles[i]] = ((aStyles[i]==='width') ? nTargetWidth : Math.round(parseFloat($o.css(aStyles[i])) * nScale)) + 'px';\n          }\n          $o.css(oStyles);\n        }\n      };\n    return this.each(function() {\n      // This scope is required for the resize handler\n      var o = this;\n      // Set font size on load\n      updateStyles(o);\n      // Update CSS styles upon resize\n      $(window).resize(function(e) {\n        updateStyles(o, e);\n      });\n    });\n  };\n}(jQuery));","\n\tdocument.write('<script src=\"http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1\"></' + 'script>');\n\t// // console.log(\"in debug mode\");\n","$(function() {\n\t$(\"a\").each(function(i,elm) {\n\t\tif (elm.href!='#') {\n\t\t\tconsole.log(\"link\",elm.href);\n\t\t\t$(elm).data(\"link\",$(elm).attr(\"href\"));\n\t\t}\n\t});\n});","(function(w, doc, undefined) {\n  // Enable strict mode\n  'use strict';\n\n  /*\n   * alias\n   * w: window global object\n   * doc: document\n   * undefined: undefined\n   */\n\n    /**\n     * constraint to jumping to the next snap-point.\n     * when scrolling further than SNAP_CONSTRAINT snap-points,\n     * but the current distance is less than 1-0.18 (read: 18 percent),\n     * the snap-will go back to the closer snap-point.\n     */\n  var CONSTRAINT = 1-0.18,\n      /*\n       * if scrolling for one snap-point only,\n       * the scroll distance must be at least 5% of the scroll-width.\n       */\n      FIRST_CONSTRAINT = 1-0.05,\n\n      /*\n       * minimum scroll distance in pixel\n       */\n      MIN_PX_CONSTRAINT = 5,\n\n      /**\n       * when scrolling for more than SNAP_CONSTRAINT snap points,\n       * a constraint is applied for scrolling to snap points in the distance.\n       * @type {Number}\n       */\n      SNAP_CONSTRAINT = 2,\n\n      /**\n       * time in ms after which scrolling is considered finished.\n       * the scroll timeouts are timed with this.\n       * whenever a new scroll event is triggered, the previous timeout is deleted.\n       * @type {Number}\n       */\n      SCROLL_TIMEOUT = 45,\n\n      /**\n       * time for the smooth scrolling\n       * @type {Number}\n       */\n      SCROLL_TIME = 512;\n\n  /**\n   * Feature detect scroll-snap-type, if it exists then do nothing (return)\n   */\n  if ('scrollSnapType' in doc.documentElement.style ||\n      'webkitScrollSnapType' in doc.documentElement.style ||\n      'msScrollSnapType' in doc.documentElement.style) {\n    // just return void to stop executing the polyfill.\n    return;\n  }\n\n  /**\n   * doMatched is a callback for Polyfill to fill in the desired behaviour.\n   * @param  {array} rules rules found for the polyfill\n   */\n  function doMatched(rules) {\n    // iterate over rules\n    rules.each(function(rule) {\n\n      var elements = doc.querySelectorAll(rule.getSelectors()),\n          declaration = rule.getDeclaration();\n\n      // iterate over elements\n      [].forEach.call(elements, function(obj) {\n        // set up the behaviour\n        setUpElement(obj, declaration);\n      });\n    });\n  }\n\n  /**\n   * unDomatched is a callback for polyfill to undo any polyfilled behaviour\n   * @param  {Object} rules\n   */\n  function undoUnmatched(rules) {\n    // iterate over rules\n    rules.each(function(rule) {\n      var elements = doc.querySelectorAll(rule.getSelectors());\n\n      // iterate over elements\n      [].forEach.call(elements, function(item) {\n        // tear down the behaviour\n        tearDownElement(item);\n      });\n    });\n  }\n\n  /**\n   * set up an element for scroll-snap behaviour\n   * @param {Object} obj         HTML element\n   * @param {Object} declaration CSS declarations\n   */\n  function setUpElement(obj, declaration) {\n    // if this is a scroll-snap element in a scroll snap container, attach to the container only.\n    if (typeof declaration['scroll-snap-coordinate'] !== 'undefined') {\n      // save declaration\n      obj.snapLengthUnit = parseSnapCoordValue(declaration);\n\n      return attachToScrollParent(obj);\n    }\n\n    // if the scroll snap attributes are applied on the body/html tag, use the doc for scroll events.\n    var tag = obj.tagName;\n    if (tag.toLowerCase() == \"body\" ||\n        tag.toLowerCase() == \"html\") {\n      obj = doc;\n    }\n\n    // add the event listener\n    obj.addEventListener('scroll', handler, false);\n\n    // save declaration\n    if (typeof declaration['scroll-snap-destination'] !== 'undefined') {\n      obj.snapLengthUnit = parseSnapCoordValue(declaration);\n    } else {\n      obj.snapLengthUnit = parseSnapPointValue(declaration);\n    }\n\n    // init possible elements\n    obj.snapElements = [];\n  }\n\n  /**\n   * tear down an element. remove all added behaviour.\n   * @param  {Object} obj DomElement\n   */\n  function tearDownElement(obj) {\n    // if the scroll snap attributes are applied on the body/html tag, use the doc for scroll events.\n    var tag = obj.tagName;\n\n    if (tag.toLowerCase() == \"body\" ||\n        tag.toLowerCase() == \"html\") {\n      obj = doc;\n    }\n\n    obj.removeEventListener('scroll', handler, false);\n\n    obj.snapLengthUnit = null;\n    obj.snapElements = [];\n  }\n\n  /**\n   * attach a child-element onto a scroll-container\n   * @param  {Object} obj\n   */\n  function attachToScrollParent(obj) {\n    var attach = obj;\n    // iterate over parent elements\n    for ( ; obj && obj !== document; obj = obj.parentNode ) {\n      if (typeof obj.snapElements !== 'undefined') {\n        obj.snapElements.push(attach);\n      }\n    }\n  }\n\n  /**\n   * the last created timeOutId for scroll event timeouts.\n   * @type int\n   */\n  var timeOutId = null;\n\n  /**\n   * starting point for current scroll\n   * @type length\n   */\n  var scrollStart = null;\n\n  /**\n   * the last object receiving a scroll event\n   */\n  var lastObj, lastScrollObj;\n\n  /**\n   * scroll handler\n   * this is the callback for scroll events.\n   */\n  var handler = function(evt) {\n\n    // use evt.target as target-element\n    lastObj = evt.target;\n    lastScrollObj = getScrollObj(lastObj);\n\n    // if currently animating, stop it. this prevents flickering.\n    if (animationFrame) {\n      // cross browser\n      if (!cancelAnimationFrame(animationFrame)) {\n        clearTimeout(animationFrame);\n      }\n    }\n\n    // if a previous timeout exists, clear it.\n    if (timeOutId) {\n      // we only want to call a timeout once after scrolling..\n      clearTimeout(timeOutId);\n    } else {\n      // save new scroll start\n      scrollStart = {y: lastScrollObj.scrollTop,\n                     x: lastScrollObj.scrollLeft};\n    }\n\n    /* set a timeout for every scroll event.\n     * if we have new scroll events in that time, the previous timeouts are cleared.\n     * thus we can be sure that the timeout will be called 50ms after the last scroll event.\n     * this means a huge improvement in speed, as we just assign a timeout in the scroll event, which will be called only once (after scrolling is finished)\n     */\n    timeOutId = setTimeout(handlerDelayed, SCROLL_TIMEOUT);\n  };\n\n  /**\n   * a delayed handler for scrolling.\n   * this will be called by setTimeout once, after scrolling is finished.\n   */\n  var handlerDelayed = function() {\n    // if we don't move a thing, we can ignore the timeout: if we did, there'd be another timeout added for scrollStart+1.\n    if(scrollStart.y == lastScrollObj.scrollTop && scrollStart.x == lastScrollObj.scrollLeft) {\n      // ignore timeout\n      return;\n    }\n\n    // detect direction of scroll. negative is up, positive is down.\n    var direction = {y: (scrollStart.y - lastScrollObj.scrollTop > 0) ? -1 : 1,\n                     x: (scrollStart.x - lastScrollObj.scrollLeft > 0) ? -1 : 1},\n        snapPoint;\n\n    if (typeof lastScrollObj.snapElements !== 'undefined' && lastScrollObj.snapElements.length > 0) {\n      snapPoint = getNextElementSnapPoint(lastScrollObj, lastObj, direction);\n    } else {\n      // get the next snap-point to snap-to\n      snapPoint = getNextSnapPoint(lastScrollObj, lastObj, direction);\n    }\n\n    // before doing the move, unbind the event handler (otherwise it calls itself kinda)\n    lastObj.removeEventListener('scroll', handler, false);\n\n    // smoothly move to the snap point\n    smoothScroll(lastScrollObj, snapPoint, function() {\n      // after moving to the snap point, rebind the scroll event handler\n      lastObj.addEventListener('scroll', handler, false);\n    });\n\n    // we just jumped to the snapPoint, so this will be our next scrollStart\n    if (!isNaN(snapPoint.x || !isNaN(snapPoint.y))) {\n      scrollStart = snapPoint;\n    }\n  };\n\n  /**\n   * calculator for next snap-point\n   * @param  {Object} obj       HTML element\n   * @param  {integer} direction signed integer indicating the scroll direction\n   * @return {Object}\n   */\n  function getNextSnapPoint(scrollObj, obj, direction) {\n    // get snap length\n    var snapLength = {y: getYSnapLength(obj, obj.snapLengthUnit.y),\n                      x: getXSnapLength(obj, obj.snapLengthUnit.x)},\n        top = scrollObj.scrollTop,\n        left = scrollObj.scrollLeft;\n\n    // calc current and initial snappoint\n    var currentPoint = {y: top / snapLength.y,\n                        x: left / snapLength.x},\n        initialPoint = {y: scrollStart.y / snapLength.y,\n                        x: scrollStart.x / snapLength.x},\n        nextPoint = {y: 0, x: 0};\n\n    // set target and bounds by direction\n    nextPoint.y = roundByDirection(direction.y, currentPoint.y);\n    nextPoint.x = roundByDirection(direction.x, currentPoint.x);\n\n    // constrain by distance\n    nextPoint.y = constrainByDistance(initialPoint.y, currentPoint.y, nextPoint.y, scrollStart.y, top);\n    nextPoint.x = constrainByDistance(initialPoint.x, currentPoint.x, nextPoint.x, scrollStart.x, left);\n\n    // calculate where to scroll\n    var scrollTo = {y: nextPoint.y * snapLength.y,\n                    x: nextPoint.x * snapLength.x};\n\n    // stay in bounds (minimum: 0, maxmimum: absolute height)\n    scrollTo.y = stayInBounds(0, getScrollHeight(scrollObj), scrollTo.y);\n    scrollTo.x = stayInBounds(0, getScrollWidth(scrollObj), scrollTo.x);\n\n    return scrollTo;\n  }\n\n\n  var currentIteratedObj = null,\n      currentIteration = 0;\n\n  function getNextElementSnapPoint(scrollObj, obj, direction) {\n    var l = obj.snapElements.length,\n        top = scrollObj.scrollTop,\n        left = scrollObj.scrollLeft,\n        // decide upon an iteration direction (favor -1, as 1 is default and will be applied when there is no direction on an axis)\n        primaryDirection = Math.min(direction.y, direction.x),\n        // get scrollable snap destination as offset\n        snapDest = {y: getYSnapLength(obj, obj.snapLengthUnit.y),\n                    x: getXSnapLength(obj, obj.snapLengthUnit.x)},\n        snapCoords = {y: 0, x: 0};\n\n\n    for(var i = currentIteration + primaryDirection; i<l && i >= 0; i = i+primaryDirection) {\n      currentIteratedObj = obj.snapElements[i];\n\n      // get objects snap coords by adding obj.top + obj.snaplength.y\n      snapCoords = {y: (currentIteratedObj.offsetTop - scrollObj.offsetTop) + getYSnapLength(currentIteratedObj, currentIteratedObj.snapLengthUnit.y),\n                    // & obj.left + obj.snaplength.x\n                    x: (currentIteratedObj.offsetLeft - scrollObj.offsetLeft) + getXSnapLength(currentIteratedObj, currentIteratedObj.snapLengthUnit.x)};\n\n      currentIteratedObj.snapCoords = snapCoords;\n      // check if object snappoint is \"close\" enough to scrollable snappoint\n\n      // not scrolled past element snap coords\n      if ((left <= snapCoords.x && left + getWidth(scrollObj) >= snapCoords.x &&\n           top <= snapCoords.y && top + getHeight(scrollObj) >= snapCoords.y)) {\n        // ok, we found a snap point.\n        currentIteration = i;\n        // stay in bounds (minimum: 0, maxmimum: absolute height)\n        return {y: stayInBounds(0, getScrollHeight(scrollObj), snapCoords.y - snapDest.y),\n                x: stayInBounds(0, getScrollWidth(scrollObj), snapCoords.x - snapDest.x)};\n      }\n    }\n    // no snap found, use first or last?\n    if (primaryDirection == 1 && i === l-1) {\n      currentIteration = l-1;\n      // the for loop stopped at the last element\n      return {y: stayInBounds(0, getScrollHeight(scrollObj), snapCoords.y - snapDest.y),\n              x: stayInBounds(0, getScrollWidth(scrollObj), snapCoords.x - snapDest.x)};\n    } else if (primaryDirection == -1 && i === 0) {\n      currentIteration = 0;\n      // the for loop stopped at the first element\n      return {y: stayInBounds(0, getScrollHeight(scrollObj), snapCoords.y - snapDest.y),\n              x: stayInBounds(0, getScrollWidth(scrollObj), snapCoords.x - snapDest.x)};\n    }\n    // stay in the same place\n    return {y: stayInBounds(0, getScrollHeight(scrollObj), obj.snapElements[currentIteration].snapCoords.y - snapDest.y),\n            x: stayInBounds(0, getScrollWidth(scrollObj), obj.snapElements[currentIteration].snapCoords.x - snapDest.x)};\n  }\n\n  /**\n   * ceil or floor a number based on direction\n   * @param  {Number} direction\n   * @param  {Number} currentPoint\n   * @return {Number}\n   */\n  function roundByDirection(direction, currentPoint) {\n    if (direction === -1) {\n      // when we go up, we floor the number to jump to the next snap-point in scroll direction\n      return Math.floor(currentPoint);\n    }\n    // go down, we ceil the number to jump to the next in view.\n    return Math.ceil(currentPoint);\n  }\n\n  /**\n   * constrain jumping\n   * @param  {Number} initialPoint\n   * @param  {Number} currentPoint\n   * @param  {Number} nextPoint\n   * @return {Number}\n   */\n  function constrainByDistance(initialPoint, currentPoint, nextPoint, scrollStart, currentScrollValue) {\n    if ((Math.abs(initialPoint - currentPoint) >= SNAP_CONSTRAINT) &&\n         Math.abs(nextPoint - currentPoint) > CONSTRAINT) {\n\n      // constrain jumping to a point too high/low when scrolling for more than SNAP_CONSTRAINT points.\n      // (if the point is 85% further than we are, don't jump..)\n      return Math.round(currentPoint);\n\n    }\n    if ((Math.abs(scrollStart-currentScrollValue) < MIN_PX_CONSTRAINT) &&\n        (Math.abs(initialPoint - currentPoint) < SNAP_CONSTRAINT) &&\n        (Math.abs(nextPoint - currentPoint) > FIRST_CONSTRAINT)) {\n      // constrain jumping to a point too high/low when scrolling just for a few pixels (less than 10 pixels) and (5% of scrollable length)\n      return Math.round(currentPoint);\n    }\n    return nextPoint;\n  }\n\n  /**\n   * keep scrolling in bounds\n   * @param  {Number} min\n   * @param  {Number} max\n   * @param  {Number} destined\n   * @return {Number}\n   */\n  function stayInBounds(min, max, destined) {\n    return Math.max(Math.min(destined, max), min);\n  }\n\n  /**\n   * parse snap point value from declaration.\n   * this uses regexp..\n   * @param  {Object} declaration\n   * @return {Object} returns an Object with the value and unit of the snap-point-y declaration\n   */\n  function parseSnapPointValue(declaration) {\n    // regex to parse lengths\n    var regex = /repeat\\((\\d+)(px|vh|vw|%)\\)/g,\n        // defaults\n        parsed = {y: {value: 0, unit: 'px'},\n                  x: {value: 0, unit: 'px'}},\n        result;\n\n    // parse y value and unit\n    if (declaration['scroll-snap-points-y'] !== 'undefined') {\n      result = regex.exec(declaration['scroll-snap-points-y']);\n      // if regexp fails, value is null\n      if (result !== null) {\n        parsed.y = {value: result[1], unit: result[2]};\n      }\n    }\n\n    // parse x value and unit\n    if (declaration['scroll-snap-points-x'] !== 'undefined') {\n      result = regex.exec(declaration['scroll-snap-points-x']);\n      // if regexp fails, value is null\n      if (result !== null) {\n        parsed.x = {value: result[1], unit: result[2]};\n      }\n    }\n    return parsed;\n  }\n\n  /**\n   * parse snap destination/coordinate values.\n   * @param  {Object} declaration\n   * @return {Object}\n   */\n  function parseSnapCoordValue(declaration) {\n    // regex to parse lengths\n    var regex = /(\\d+)(px|%) (\\d+)(px|%)/g,\n        // defaults\n        parsed = {y: {value: 0, unit: 'px'},\n                  x: {value: 0, unit: 'px'}},\n        parsable,\n        result;\n\n    if(typeof declaration['scroll-snap-coordinate'] !== 'undefined') {\n      parsable = 'scroll-snap-coordinate';\n    } else if (typeof declaration['scroll-snap-destination'] !== 'undefined') {\n      parsable = 'scroll-snap-destination';\n    }\n\n    // parse value and unit\n    if (parsable !== null) {\n      result = regex.exec(declaration[parsable]);\n      // if regexp fails, value is null\n      if (result !== null) {\n        parsed.y = {value: result[1], unit: result[2]};\n        parsed.x = {value: result[3], unit: result[4]};\n      }\n    }\n    return parsed;\n  }\n\n  /**\n   * calc length of one snap on y-axis\n   * @param  {Object} declaration the parsed declaration\n   * @return {Number}\n   */\n  function getYSnapLength(obj, declaration) {\n    if (declaration.unit == 'vh') {\n      // when using vh, one snap is the length of vh / 100 * value\n      return Math.max(doc.documentElement.clientHeight, w.innerHeight || 1) / 100 * declaration.value;\n    } else if (declaration.unit == '%') {\n      // when using %, one snap is the length of element height / 100 * value\n      return getHeight(obj) / 100 * declaration.value;\n    } else {\n      // when using px, one snap is the length of element height / value\n      return getHeight(obj) / declaration.value;\n    }\n\n    return 0;\n  }\n\n  /**\n   * calc length of one snap on x-axis\n   * @param  {Object} declaration the parsed declaration\n   * @return {Number}\n   */\n  function getXSnapLength(obj, declaration) {\n    if (declaration.unit == 'vw') {\n      // when using vw, one snap is the length of vw / 100 * value\n      return Math.max(doc.documentElement.clientWidth, w.innerWidth || 1) / 100 * declaration.value;\n    } else if (declaration.unit == '%') {\n      // when using %, one snap is the length of element width / 100 * value\n      return getWidth(obj) / 100 * declaration.value;\n    } else {\n      // when using px, one snap is the length of element width / value\n      return getWidth(obj) / declaration.value;\n    }\n\n    return 0;\n  }\n\n  /**\n   * get an elements scrollable height\n   * @param  {Object} obj\n   * @return {Number}\n   */\n  function getScrollHeight(obj) {\n    return obj.scrollHeight;\n  }\n\n  /**\n   * get an elements scrollable width\n   * @param  {Object} obj\n   * @return {Number}\n   */\n  function getScrollWidth(obj) {\n    return obj.scrollWidth;\n  }\n\n  /**\n   * get an elements height\n   * @param  {Object} obj\n   * @return {Number}\n   */\n  function getHeight(obj) {\n    return obj.offsetHeight;\n  }\n\n  /**\n   * get an elements width\n   * @param  {Object} obj\n   * @return {Number}\n   */\n  function getWidth(obj) {\n    return obj.offsetWidth;\n  }\n\n  /**\n   * return the element scrolling values are applied to.\n   * when receiving window.onscroll events, the actual scrolling is on the body.\n   * @param  {Object} obj\n   * @return {Object}\n   */\n  function getScrollObj(obj) {\n    // if the scroll container is body, the scrolling is invoked on window/doc.\n    if (obj == doc || obj == w) {\n      // firefox scrolls on doc.documentElement\n      if (doc.documentElement.scrollTop > 0 || doc.documentElement.scrollLeft > 0) {\n        return doc.documentElement;\n      }\n      // chrome scrolls on body\n      return doc.querySelector('body');\n    }\n\n    return obj;\n  }\n\n  /**\n   * calc the duration of the animation proportional to the distance travelled\n   * @param  {Number} start\n   * @param  {Number} end\n   * @return {Number}       scroll time in ms\n   */\n  function getDuration(start, end) {\n    var distance = Math.abs(start - end),\n        procDist = 100 / Math.max(doc.documentElement.clientHeight, w.innerHeight || 1) * distance,\n        duration = 100 / SCROLL_TIME * procDist;\n\n    if (isNaN(duration)) {\n      return 0;\n    }\n\n    return Math.max(SCROLL_TIME / 1.5, Math.min(duration, SCROLL_TIME));\n  }\n\n  /**\n   * ease in out function thanks to:\n   * http://blog.greweb.fr/2012/02/bezier-curve-based-easing-functions-from-concept-to-implementation/\n   * @param  {Number} t timing\n   * @return {Number}   easing factor\n   */\n  var easeInCubic = function(t) {\n    return t*t*t;\n  };\n\n\n  /**\n   * calculate the scroll position we should be in\n   * @param  {Number} start    the start point of the scroll\n   * @param  {Number} end      the end point of the scroll\n   * @param  {Number} elapsed  the time elapsed from the beginning of the scroll\n   * @param  {Number} duration the total duration of the scroll (default 500ms)\n   * @return {Number}          the next position\n   */\n  var position = function(start, end, elapsed, duration) {\n      if (elapsed > duration) {\n        return end;\n      }\n      return start + (end - start) * easeInCubic(elapsed / duration);\n  };\n\n  // a current animation frame\n  var animationFrame = null;\n\n  /**\n   * smoothScroll function by Alice Lietieur.\n   * @see https://github.com/alicelieutier/smoothScroll\n   * we use requestAnimationFrame to be called by the browser before every repaint\n   * @param  {Object}   obj      the scroll context\n   * @param  {Number}  end      where to scroll to\n   * @param  {Number}   duration scroll duration\n   * @param  {Function} callback called when the scrolling is finished\n   */\n  var smoothScroll = function(obj, end, callback) {\n    var start = {y: obj.scrollTop, x: obj.scrollLeft},\n\n        clock = Date.now(),\n\n        // get animation frame or a fallback\n        requestAnimationFrame = w.requestAnimationFrame ||\n                                w.mozRequestAnimationFrame ||\n                                w.webkitRequestAnimationFrame ||\n                                function(fn){w.setTimeout(fn, 15);},\n        duration = Math.max(getDuration(start.y, end.y), getDuration(start.x, end.x));\n\n      // setup the stepping function\n      var step = function() {\n\n        // calculate timings\n        var elapsed = Date.now() - clock;\n\n        // change position on y-axis if result is a number.\n        if (!isNaN(end.y)) {\n          obj.scrollTop = position(start.y, end.y, elapsed, duration);\n        }\n\n        // change position on x-axis if result is a number.\n        if (!isNaN(end.x)) {\n          obj.scrollLeft = position(start.x, end.x, elapsed, duration);\n        }\n\n        // check if we are over due\n        if (elapsed > duration) {\n          // is there a callback?\n          if (typeof callback === 'function') {\n            // stop execution and run the callback\n            return callback(end);\n          }\n\n          // stop execution\n          return;\n        }\n\n        // use a new animation frame\n        animationFrame = requestAnimationFrame(step);\n      };\n\n      // start the first step\n      step();\n  };\n\n  /**\n   * Polyfill object\n   * @type Polyfill\n   * @see https://github.com/philipwalton/polyfill\n   */\n  var pf = new Polyfill({\n    declarations:[\"scroll-snap-type:*\", \"scroll-snap-point-y:*\", \"scroll-snap-coordinate:*\", \"scroll-snap-destination:*\"]\n  })\n  .doMatched(doMatched)\n  .undoUnmatched(undoUnmatched);\n\n}(window, document));","var mainLight;\nvar groundMaterial;\n\nfunction setLights() {\n\tvar shadowMapSize = 1024;\n\tvar groundGeometry = new THREE.PlaneGeometry( 3000, 3000, 1 );\n\tgroundMaterial = new THREE.ShadowMaterial();\n\t// groundMaterial = new THREE.MeshDepthMaterial( { color: 0xff0000 } );\n\tgroundMaterial.opacity = 0.04;\n\tvar ground = new THREE.Mesh(groundGeometry, groundMaterial);\n\tground.receiveShadow = true;\n\tground.rotation.x=0;\n\tground.position.y=30;\n\tground.position.z=-10;\n\tground.transparent = false;\n\tscene.add(ground);\n\n\tmainLight = new THREE.AmbientLight( { color:0x000000,intensity:0.02 } ); // soft white light\n\tmainLight.intensity = 0.37;\n\tscene.add( mainLight );\n\n\n\t// var spotLight1 = new THREE.SpotLight( 0xffffff); \n\t// spotLight1.shadow.mapSize.height = shadowMapSize;\n\t// spotLight1.shadow.mapSize.width = shadowMapSize;\n\t// spotLight1.castShadow = false;\n\t// spotLight1.position.set(0, 5, 0 );\n\t// spotLight1.intensity = .15;\n\t// spotLight1.penumbra = 1;\n\t// spotLight1.decay = 2;\n\t// spotLight1.angle = .45;\n\t// scene.add( spotLight1 );\n\t// scene.add(spotLight1.target);\n\n\tvar spotLight2 = new THREE.SpotLight( 0xFFFFFF); \n\tspotLight2.castShadow = true;\n\tspotLight2.position.set( 0, 20,60 ); \n\tspotLight2.shadow.mapSize.height = shadowMapSize;\n\tspotLight2.shadow.mapSize.width = shadowMapSize;\n\tspotLight2.intensity = .15;\n\tspotLight2.exponent = .05;\n\tspotLight2.penumbra = 2;\n\tspotLight2.decay = 3;\n\tspotLight2.angle = de2ra(80);\n\tspotLight2.target.position = {\n\t\tx:-10,\n\t\ty:10,\n\t\tz:0\n\t}\n\tconsole.log(spotLight2);\n\tscene.add( spotLight2 );\n\tscene.add(spotLight2.target);\n\n}\n"]}